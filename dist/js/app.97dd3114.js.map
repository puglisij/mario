{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.js","webpack:///./src/host/hostScriptListener.js","webpack:///./src/eventBus.js","webpack:///./src/server/pipelineEngineState.js","webpack:///./src/global/envPaths.js","webpack:///./src/global/index.js","webpack:///external \"http\"","webpack:///./src/server/imageSource.js","webpack:///external \"crypto\"","webpack:///external \"child_process\"","webpack:///external \"assert\"","webpack:///./src/arrayMap.js","webpack:///./src/store/config.js","webpack:///./src/store/index.js","webpack:///./src/server/imageSourceType.js","webpack:///./src/folderTree.js","webpack:///./src/components/tabs.vue","webpack:///./src/app.vue?76ed","webpack:///./src/themeManager.js","webpack:///src/components/tabs.vue","webpack:///./src/components/tabs.vue?7bcf","webpack:///./src/components/tab.vue?fc25","webpack:///src/components/tab.vue","webpack:///./src/components/tab.vue?07ab","webpack:///./src/components/tab.vue","webpack:///./src/components/main-controls.vue?78bf","webpack:///src/components/main-controls.vue","webpack:///./src/components/main-controls.vue?ab1d","webpack:///./src/components/main-controls.vue","webpack:///src/app.vue","webpack:///./src/app.vue?b1d1","webpack:///./src/app.vue","webpack:///./src/dialog/a-dialog-root.vue?d0e5","webpack:///./src/dialog/events.js","webpack:///./src/dialog/a-dialog.vue?118f","webpack:///src/dialog/a-dialog.vue","webpack:///./src/dialog/a-dialog.vue?3e02","webpack:///./src/dialog/a-dialog.vue","webpack:///./src/dialog/confirm.vue?c2cc","webpack:///src/dialog/confirm.vue","webpack:///./src/dialog/confirm.vue?f650","webpack:///./src/dialog/confirm.vue","webpack:///src/dialog/a-dialog-root.vue","webpack:///./src/dialog/a-dialog-root.vue?ac8f","webpack:///./src/dialog/a-dialog-root.vue","webpack:///./src/dialog/index.js","webpack:///./src/validation/index.js","webpack:///./src/main.js","webpack:///./src/app.vue?9486","webpack:///./src/host/index.js","webpack:///./src/enum.js","webpack:///./src/components/wait-dots.vue?f4da","webpack:///src/components/wait-dots.vue","webpack:///./src/components/wait-dots.vue?2eb9","webpack:///./src/components/wait-dots.vue","webpack:///external \"util\"","webpack:///external \"os\"","webpack:///external \"stream\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./src/server/image.js","webpack:///./src/server/imageFileMover.js","webpack:///./src/unc-safe-path/index.js","webpack:///./src/server/imageFileReader.js","webpack:///./src/server/imageFileProducer.js","webpack:///./src/server/imageFileProducers.js","webpack:///./src/server/pipelineEngineStatus.js","webpack:///./src/server/pipelineEngine.js","webpack:///./src/server/actions.js","webpack:///./src/server/index.js","webpack:///./src/console/index.js","webpack:///external \"process\"","webpack:///./src/dialog/a-dialog-root.vue?ab78","webpack:///./src/components/tabs.vue?9d5e","webpack:///external \"querystring\"","webpack:///./src/fsx.js","webpack:///external \"events\""],"names":["i","chunkIds","length","deferredModules","j","deferredModule","chunkId","existingLinkTags","existingStyleTags","then","type","target","script","enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","console","error","err","jsonpArray","webpackJsonpCallback","EDebounceType","Trailing","Leading","Both","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","throttle","callback","limit","trailingEdge","simpleDeepClone","obj","JSON","parse","stringify","guid","_p8","s","p","Math","random","toString","substr","yyyymmddhhmmss","date","pad2","n","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","defaultForNativeType","Symbol","first","Array","isArray","keys","unique","arr","Set","getOrDefine","defaultValue","undefined","isBoolean","val","isNumber","isObject","isEmptyObject","isString","isEmptyString","isUndefined","isNull","HostScriptListener","_scriptListenerActive","_scriptListenerReaderActive","_scriptListenerJsLogsPath","upath","join","os","homedir","_scriptListenerVbLogsPath","log","Promise","resolve","fs","writeFile","statSync","size","all","host","runJsx","values","includes","runActionWithParameters","result","Boolean","active","eventBus","Vue","PipelineEngineState","Enum","tmpdir","env","process","macos","name","library","path","config","temp","windows","appData","APPDATA","localAppData","LOCALAPPDATA","envPaths","options","TypeError","assign","suffix","platform","csInterface","CSInterface","getHostEnvironment","appVersion","appName","getCurrentApiVersion","major","minor","micro","getOSInformation","installPath","getSystemPath","SystemPath","EXTENSION","appInstallPath","normalize","appWorkingPath","appDefaultLogPath","appDefaultConfigPath","appBuiltinActionsPath","marioAppVersion","adobeApp","adobeVersion","adobeCEPApiVersion","exports","require","ImageSource","sourceType","sourceDirectory","sourceExtensions","useOutputDirectory","outputDirectory","useProcessedDirectory","processedDirectory","useErrorDirectory","errorDirectory","readMetadata","imageSource","getOwnPropertyNames","ArrayMap","map","Map","forEach","array","push","set","VALID_JSON_TYPES","Config","opts","_isLoaded","_isLoading","_isSaved","_isSaving","_isAnotherSavePending","_lastSavedTime","_doAutoSave","autoSave","_schema","schema","_data","_createDefaultConfigObject","_dataFilePath","filePath","doExtend","_extend","entries","_isValidJsonTypeName","default","_typeOf","_defaultForTypeName","Error","defineProperty","configurable","readFile","data","code","_validateConfig","emit","now","nextTick","save","split","reduce","accumulator","tokens","lastToken","pop","parent","EventEmitter","GeneralConfig","appGlobal","checkIsScriptListenerActiveOnStart","pauseAfterEveryPipeline","pauseAfterEveryAction","pauseAfterEveryImage","pauseOnExceptions","logDirectory","logFilePersistForDays","runHttpServer","serverPort","pathToUserActions","fileSources","currentTab","isMainDrawerOpen","source","find","fromObject","PipelinesConfig","pipelines","pipelineNames","includeDisabled","filter","disabled","pipelineName","fileSourceNameToPipelineNames","pipeline","getByName","sourceNames","fileSourceName","Store","general","load","ImageSourceType","FolderTreeNode","isDirectory","children","hasChildren","node","c","names","reverse","namePath","nodeName","shift","isEndOfPath","childIsDirectory","child","getChildByName","addChild","removeChild","arrayify","newNode","oldNode","newRoot","clone","newStack","oldStack","oldChild","newChild","model","_vm","_h","$createElement","_c","_self","attrs","currentTabComponent","on","onTabChanged","_v","staticClass","tag","staticRenderFns","themeManager","updateThemeWithAppSkinInfo","appSkinInfo","sentinelColor","panelBackgroundColor","color","red","themeIsLight","document","body","classList","remove","add","getElementById","href","style","background","toHex","computeValue","rgb","hex","Number","green","blue","onAppThemeColorChanged","event","init","addEventListener","THEME_COLOR_CHANGED_EVENT","component","class","isActive","$event","preventDefault","stopPropagation","onClick","_t","ref","scopedSlots","_u","fn","handleSubmit","indexOf","_k","keyCode","onPipelineRun","directives","rawName","expression","onPipelineResume","onPipelinePause","isStopped","onPipelineStop","_s","pipelineEngineStateText","_e","pipelinefilePathText","pipelineText","pipelineActionText","isOpen","width","height","maxWidth","maxHeight","backdropClose","_g","_b","close","props","listeners","events","open","onClose","message","$emit","Plugin","install","$dialog","openConfirm","ADialogRoot","setInteractionMode","extend","validate","min","max","parseInt","_","params","required","valid","computesRequired","access","exists","allowed","toLowerCase","trim","isUnc","startsWith","isAbsolute","global","setWindowTitle","chdir","__dirname","productionTip","devtools","use","Dialog","destroy","Server","Host","Logger","create","Validation","window","vue","render","h","App","beforeDestroy","$mount","interface","_initialized","importScript","onExec","onSetTimeout","eventName","scope","CSEvent","dispatchEvent","callbackId","delay","_this","runJsxWithThrow","command","child_process","exec","cwd","store","stdout","stderr","replace","jsx","fileName","importPath","evalScript","reject","lowerCaseResult","functionName","parameters","parametersJson","charId","stringId","enumArr","offset","create_","nextKey","validName","enumer","isInteger","test","lastIndex","toArray","slice","isValid","toKey","toUpperCase","domProps","dots","Image","initialInputImagePath","inputImagePath","inputDirectory","metadata","jobId","errors","ImageFileMover","images","image","_writeError","_moveImage","toDirectory","_moveToDirectory","directory","paths","_getImagePaths","basename","toPath","fsx","overwrite","warn","logPath","toLocaleString","flag","isUncPath","isAncestor","ancestor","descendant","relative","endsWith","dirname","_preserveUnc","firstPart","originalPath","newPath","charAt","ImageFileReader","targetPipelines","_isPathDefinedAndAbsolute","uncSafePath","_doesFileExist","_doesPathHaveJsonExtension","_readJson","_ensureAbsolutePath","_makeDirectory","_readMetadata","jsonFilePath","encoding","ep","exiftool","ExiftoolProcess","pid","fileMetadata","finally","parentDirectory","extname","lstatSync","isFile","e","mkdir","recursive","nextProducerId","ImageFileProducer","_id","_imageSource","_fileWatcher","_isDepleted","_q","_emitQFiles","FILEWATCHER","_sourceFileWatchers","DIRECTORY","_sourceDirectory","OPENFILES","_sourceOpenFiles","BLANK","_sourceBlank","ACTIVEDOCUMENT","_sourceActiveDocument","removeAllListeners","files","_emitFiles","watchPathRoot","watchExtensions","watchPaths","ext","existsSync","watcher","chokidar","watch","ignored","depth","usePolling","interval","awaitWriteFinish","stabilityThreshold","pollInterval","extensions","readdir","file","filePaths","ImageFileProducers","_producerIdToListenerNames","_producerIdToProducer","_jobs","stopProducers","listenerNames","producer","id","_onProducerFiles","_onProducerDepleted","produce","producerIds","_stopProducers","has","producerId","delete","getImageSource","jobCreationTime","PipelineEngineStatus","reset","seal","fileCount","imageJobId","imageIteration","action","PipelineEngine","self","_processingMutex","_lastState","STOPPED","_state","_status","Proxy","Reflect","actionName","_imageFileReader","_imageFileMover","_imageFileProducers","_onProducerJob","state","_run","IDLE","imageSourceNameToPipelineNames","getImageSourceNameToPipelineNameMap","imageSourceName","toPipelineNames","getImageSourceByName","startProducer","isProcessing","isIdle","PAUSED","isPaused","PROCESSING","hasProducers","stop","_process","hasJobs","_runWaitOneFrame","_runProcessStart","_runProcessLoop","_runProcessEnd","_stopIfNoProducersElseIdle","_pauseCheck","getTotalJobs","processedImages","_stopCheck","nextJob","read","getByNames","_runPipelineStart","actions","_runPipelineEnd","move","actionResult","forcePause","once","jobs","getAllJobs","status","serialize","jsdoc","ROOT_ACTION_NAMESPACE","ActionDescriptor","description","jsdocDescription","d","descriptor","longname","ActionParameter","fromJSDoc","meta","typeNames","isRequired","jsdocParameter","optional","param","ActionFileDescriptionReader","explain","cache","a","absolutePath","descriptions","_isFunction","_actionNameToJsDoc","kind","memberof","isEnum","ActionFileImportStringBuilder","pathToActions","rootNamespace","_buildJsxImportString","absolutePathToActions","imports","directories","namespace","namespaceDefine","readdirSync","nameParts","nameWithoutExtension","nameSpacedName","absoluteFilePath","Action","importString","Actions","_actionNameToAction","_actionTree","_importAll","pathToBuildInActions","_import","importDirectory","build","actionPath","insert","readAll","cloneTree","from","port","app","ServerState","UNINITIALIZED","RUNNING","_httpServer","_pipelineEngine","_actions","startServer","polka","req","res","version","time","fullStatus","writeHead","end","listen","server","CONSOLE_METHODS","initialized","originalConsoleMethods","logWriteStream","logBuffer","maxBufferSize","_createLogsDirectory","_createFileStream","_cleanupOldFiles","method","originalMethod","_write","chunk","toLocaleTimeString","htmlChunk","write","yyyymmdd","toISOString","createWriteStream","flags","logFilenames","sort","logPaths","howManyToDelete","unlink","acc","_closeFileStream","logger","fromPath","rimraf","rename","rmdir","cb","maxBusyTries","maxRetries","emfileWait","retryDelay","dirPath","_mkdirRecursive","mode"],"mappings":"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","file":"js/app.97dd3114.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0c3fcab0\":\"b5816386\",\"chunk-5ee75350\":\"40e08c8a\",\"chunk-61cbdd70\":\"ee10f0f8\",\"chunk-970c75f4\":\"9a386738\",\"chunk-8646fade\":\"ef12e368\",\"chunk-ff8c1068\":\"ace68c1e\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-0c3fcab0\":1,\"chunk-5ee75350\":1,\"chunk-61cbdd70\":1,\"chunk-8646fade\":1,\"chunk-ff8c1068\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-0c3fcab0\":\"c7ed6f4e\",\"chunk-5ee75350\":\"40fcd3af\",\"chunk-61cbdd70\":\"8e1e1399\",\"chunk-970c75f4\":\"31d6cfe0\",\"chunk-8646fade\":\"7bfa50ad\",\"chunk-ff8c1068\":\"f2d4ab73\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const EDebounceType = {\r\n    Trailing: 0,\r\n    Leading: 1,\r\n    Both: 2\r\n};\r\n\r\n/**\r\n *  Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds.\r\n * If `immediate` is EDebounceType.Trailing, trigger the function on the trailing edge, instead of the leading.\r\n * If `immediate` is EDebounceType.Both, trigger the function on both leading and trailing edges.\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this, args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (immediate === EDebounceType.Trailing || immediate === EDebounceType.Both) \r\n                func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) { func.apply(context, args); }\r\n    }\r\n}\r\n\r\n/** \r\n * Returns a function which may only be called once every 'limit' milliseconds.\r\n*/\r\nfunction throttle (callback, limit, trailingEdge) {\r\n    var wait = false;\r\n    return function () {\r\n        var context = this, args = arguments;\r\n        if (!wait) {\r\n            callback.apply(context, args);\r\n            wait = true;\r\n            setTimeout(function () {\r\n                wait = false;\r\n                if(trailingEdge) \r\n                    callback.apply(context, args);         \r\n            }, limit);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Basic object deep cloning using JSON parse & stringify\r\n * @param {object|array} obj \r\n */\r\nfunction simpleDeepClone(obj)\r\n{\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n/**\r\n * Generates a GUID string. Not a standard-compliant GUID.\r\n * @returns {string} The generated GUID.\r\n * @example af8a8416-6e18-a307-bd9c-f2c947bbb3aa\r\n * @author Slavik Meltser.\r\n * @link http://slavik.meltser.info/?p=142\r\n */\r\nfunction guid() \r\n{\r\n    function _p8(s) {\r\n        var p = (Math.random().toString(16)+\"000000000\").substr(2,8);\r\n        return s ? \"-\" + p.substr(0,4) + \"-\" + p.substr(4,4) : p ;\r\n    }\r\n    return _p8() + _p8(true) + _p8(true) + _p8();\r\n}\r\n\r\n/**\r\n* Returns the date in format YYYYMMDDhhmmss\r\n*/\r\nfunction yyyymmddhhmmss(date) \r\n{\r\n    function pad2(n) {  // always returns a string\r\n        return (n < 10 ? '0' : '') + n;\r\n    }\r\n    date = date || new Date();\r\n    return date.getFullYear() +\r\n            pad2(date.getMonth() + 1) + \r\n            pad2(date.getDate()) +\r\n            pad2(date.getHours()) +\r\n            pad2(date.getMinutes()) +\r\n            pad2(date.getSeconds());\r\n}\r\n\r\nfunction defaultForNativeType(value) \r\n{\r\n    switch (typeof value) {\r\n        case 'boolean'   : return false;\r\n        case 'function'  : return function () {};\r\n        case 'null'      : return null;\r\n        case 'number'    : return 0;\r\n        case 'object'    : return {};\r\n        case 'string'    : return \"\";\r\n        case 'symbol'    : return Symbol();\r\n        case 'undefined' : return void 0;\r\n        default: return null;\r\n    }\r\n}\r\n\r\nfunction first(obj) \r\n{\r\n    if(Array.isArray(obj)) {\r\n        return obj[0];\r\n    } \r\n    return obj[Object.keys(obj)[0]];\r\n}\r\n/**\r\n * Returns new array containing only unique values\r\n * Works for Numbers, Strings, and Boolean\r\n * @param {Array} arr \r\n */\r\nfunction unique(arr) {\r\n    return [...new Set(arr)];\r\n}\r\nfunction getOrDefine(obj, key, defaultValue) \r\n{\r\n    if(obj[key] === undefined) {\r\n        obj[key] = defaultValue;\r\n    }\r\n    return obj[key];\r\n}\r\nfunction isBoolean(val) {\r\n    return typeof val === \"boolean\";\r\n}\r\nfunction isNumber(val) {\r\n    return typeof val === \"number\" && val === val;\r\n}\r\nfunction isObject(val) {\r\n    return val !== null && typeof(val) === \"object\";\r\n}\r\nfunction isEmptyObject(obj) \r\n{\r\n    return Object.keys(obj || {}).length === 0;\r\n}\r\nfunction isString(val) {\r\n    return typeof val === \"string\";\r\n}\r\nfunction isEmptyString(val) {\r\n    return val === \"\";\r\n}\r\nfunction isArray(val) \r\n{\r\n    return Array.isArray(val)\r\n}\r\nfunction isUndefined(val) {\r\n    return typeof val === \"undefined\";\r\n}\r\nfunction isNull(val) {\r\n    return val === null;\r\n}\r\n\r\n\r\nexport default {\r\n    throttle,\r\n    debounce,\r\n    simpleDeepClone,\r\n    guid, \r\n    yyyymmddhhmmss,\r\n    defaultForNativeType,\r\n    first,\r\n    unique,\r\n    getOrDefine,\r\n    isBoolean, \r\n    isNumber,\r\n    isObject,\r\n    isEmptyObject,\r\n    isString,\r\n    isEmptyString,\r\n    isArray,\r\n    isUndefined, \r\n    isNull\r\n}","import os from 'os';\r\nimport fs from 'fs';\r\nimport upath from 'upath';\r\nimport host from './index';\r\n\r\n/**\r\n * Creative Suite Extendscript Script Listener Interface\r\n */\r\nclass HostScriptListener\r\n{\r\n    constructor() {\r\n        this._scriptListenerActive = false;\r\n        this._scriptListenerReaderActive = false;\r\n\r\n        this._scriptListenerJsLogsPath = upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerJS.log\");\r\n        this._scriptListenerVbLogsPath = upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerVB.log\");\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        console.log(\"HostScriptListener initialized.\");\r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        // Cleanup\r\n    }\r\n    startScriptListenerReader()\r\n    {\r\n        // Determine if ScriptListener is on \r\n        // Folder.desktop\r\n        // const listenerLogsPath =  upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerJS.log\");\r\n        // const scriptWatcher = chokidar.watch(listenerLogsPath, {\r\n        //     awaitWriteFinish: {\r\n        //         pollInterval: 100,\r\n        //         stabilityThreshold: 2000\r\n        //     }\r\n        // });\r\n        // scriptWatcher.on(\"change\", debounce(this.readScriptListenerLog, 1000));\r\n        // //...\r\n        // scriptWatcher.removeAllListeners();\r\n        // scriptWatcher.close();\r\n        // //...\r\n\r\n        this._scriptListenerReaderActive = true;\r\n    }\r\n    stopScriptListenerReader() \r\n    {\r\n\r\n    }\r\n    clearScriptListenerLogs() \r\n    {\r\n        fs.writeFile(this._scriptListenerJsLogsPath, \"\", err => {\r\n            if(err) throw err; \r\n        });\r\n        fs.writeFile(this._scriptListenerVbLogsPath, \"\", err => {\r\n            if(err) throw err;\r\n        });\r\n    }\r\n    onScriptListenerLogs() \r\n    {\r\n        // IMPORTANT: Somme commands generated by ScriptListenerPlugin will not run via evalScript.\r\n        // In particular, modal commands, such as \"modalStateChanged\" will throw an error\r\n        // fs.readFile(path, (err, data) => {\r\n        //     if(err) throw err; \r\n\r\n        //     fire event? or call registered callback?\r\n        // });\r\n    }\r\n    isScriptListenerActive() \r\n    {\r\n        let initialSize = 0;\r\n        try {\r\n            initialSize = fs.statSync(this._scriptListenerJsLogsPath).size;\r\n        } catch {}\r\n        \r\n        // How this works:\r\n        // Since Extendscript runs on a single thread, and ScriptListener runs on this same thread.\r\n        // The 1st call triggers ScriptListener to record actions.\r\n        // The 2nd call is to ensure ScriptListener is done recording, before we read log file stats.\r\n        return Promise.all([\r\n            host.runJsx(`\r\n                app.bringToFront();\r\n                var document = app.documents.add(\"1px\", \"1px\", 1, \"ScriptListenerCheck\");\r\n                document.close(SaveOptions.SAVECHANGES);\r\n            `),\r\n            host.runJsx(`noop();`)\r\n        ])\r\n        .then(values => {\r\n            if(values[0].includes(\"error\")) {\r\n                console.error(\"Could not determine if ScriptListener is active.\");\r\n                return false;\r\n            }\r\n            try {\r\n                fs.statSync(this._scriptListenerJsLogsPath).size > initialSize;\r\n            } catch {\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    isScriptListenerIstalled()\r\n    {\r\n        return host.runActionWithParameters(\"action.getIsScriptListenerInstalled\")\r\n        .then(result => Boolean(result));\r\n    }\r\n    toggleScriptListener(active)\r\n    {\r\n        return host.runActionWithParameters(\"action.setScriptListenerActive\", active);\r\n    }\r\n}\r\n\r\nexport default new HostScriptListener();","import Vue from 'vue';\r\nconst eventBus = new Vue();\r\nexport default eventBus;\r\n","import Enum from '../enum';\r\n\r\nconst PipelineEngineState = new Enum([\r\n    \"STOPPED\",\r\n    \"IDLE\", \r\n    \"PAUSED\",\r\n    \"PROCESSING\",\r\n]);\r\n\r\nexport default PipelineEngineState;","'use strict';\r\n/*\r\n    See npm \"env-paths\"\r\n*/\r\nimport path from 'path';\r\nimport os from 'os';\r\n\r\nconst homedir = os.homedir();\r\nconst tmpdir = os.tmpdir();\r\nconst { env } = process;\r\n\r\nconst macos = name => {\r\n\tconst library = path.join(homedir, 'Library');\r\n\r\n\treturn {\r\n\t\tconfig: path.join(library, 'Preferences', name),\r\n\t\tlog: path.join(library, 'Logs', name),\r\n\t\ttemp: path.join(tmpdir, name)\r\n\t};\r\n};\r\n\r\nconst windows = name => {\r\n\tconst appData = env.APPDATA || path.join(homedir, 'AppData', 'Roaming');\r\n\tconst localAppData = env.LOCALAPPDATA || path.join(homedir, 'AppData', 'Local');\r\n\r\n\treturn {\r\n\t\tconfig: path.join(appData, name, 'Config'),\r\n\t\tlog: path.join(localAppData, name, 'Log'),\r\n\t\ttemp: path.join(tmpdir, name)\r\n\t};\r\n};\r\n\r\nconst envPaths = (name, options) => {\r\n\tif (typeof name !== 'string') {\r\n\t\tthrow new TypeError(`Expected string, got ${typeof name}`);\r\n\t}\r\n\r\n\toptions = Object.assign({suffix: 'nodejs'}, options);\r\n\r\n\tif (options.suffix) {\r\n\t\t// Add suffix to prevent possible conflict with native apps\r\n\t\tname += `-${options.suffix}`;\r\n\t}\r\n\r\n\tif (process.platform === 'darwin') {\r\n\t\treturn macos(name);\r\n\t}\r\n\tif (process.platform === 'win32') {\r\n\t\treturn windows(name);\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default envPaths;\r\n","import upath from 'upath';\r\nimport envPaths from './envPaths';\r\nimport { version as marioAppVersion } from '../../package.json';\r\n\r\n\r\nexport default (function() \r\n{\r\n    // Also see \"process.versions\"\r\n    const csInterface = new CSInterface();\r\n    const { appVersion, appName } = csInterface.getHostEnvironment();\r\n    const { major, minor, micro } = csInterface.getCurrentApiVersion();\r\n    const os = csInterface.getOSInformation()\r\n    const env = envPaths(\"Mario\");\r\n\r\n    const installPath = csInterface.getSystemPath(SystemPath.EXTENSION);\r\n    const appInstallPath = upath.normalize(installPath);\r\n    const appWorkingPath = upath.join(appInstallPath, process.env.VUE_APP_HOST_DIR);\r\n    const appDefaultLogPath = upath.normalize(env.log);\r\n    const appDefaultConfigPath = upath.normalize(env.config);\r\n    const appBuiltinActionsPath = upath.join(appWorkingPath, \"actions\");\r\n\r\n    return {\r\n        csInterface,\r\n        os,\r\n        appVersion: marioAppVersion,\r\n        appInstallPath, \r\n        appWorkingPath,\r\n        appDefaultLogPath,\r\n        appDefaultConfigPath,\r\n        appBuiltinActionsPath,\r\n        adobeApp: appName,\r\n        adobeVersion: appVersion, \r\n        adobeCEPApiVersion: `${major}.${minor}.${micro}`\r\n    }\r\n}());\r\n","module.exports = require(\"http\");","\r\nexport default class ImageSource\r\n{\r\n    /**\r\n     * Configuration for sourcing new images for processing\r\n     * @param {ImageSourceType} sourceType e.g. ImageSourceType.FILEWATCHER\r\n     * @param {string} name a user friendly name for the image source \r\n     * @param {string} [sourceDirectory] \r\n     * @param {Array<string>} [sourceExtensions] file extensions allowed by this file source (without '.')\r\n     * @param {boolean} [useOutputDirectory = false]\r\n     * @param {string} [outputDirectory] directory where pipeline outputs will be written\r\n     * @param {boolean} [useProcessedDirectory = false]\r\n     * @param {string} [processedDirectory] directory where source files will be moved to when finished processing\r\n     * @param {boolean} [useErrorDirectory = false]\r\n     * @param {string} [errorDirectory] directory where source files will be moved when an error is encountered\r\n     * @param {boolean} [readMetadata = false]\r\n     */\r\n    constructor(\r\n        sourceType, \r\n        name,\r\n        sourceDirectory, \r\n        sourceExtensions, \r\n        useOutputDirectory = false, \r\n        outputDirectory = \"\", \r\n        useProcessedDirectory = false,\r\n        processedDirectory = \"\", \r\n        useErrorDirectory = false,\r\n        errorDirectory = \"\",\r\n        readMetadata = false)\r\n    {\r\n        this.name = name;\r\n        this.sourceType = sourceType;\r\n        this.sourceDirectory = sourceDirectory;\r\n        this.sourceExtensions = sourceExtensions;\r\n\r\n        this.useOutputDirectory = useOutputDirectory;\r\n        this.outputDirectory = outputDirectory;\r\n        this.useProcessedDirectory = useProcessedDirectory;\r\n        this.processedDirectory = processedDirectory;\r\n        this.useErrorDirectory = useErrorDirectory;\r\n        this.errorDirectory = errorDirectory;\r\n        this.readMetadata = readMetadata;\r\n    }\r\n\r\n    clone() \r\n    {\r\n        // Shallow copy\r\n        let imageSource = new ImageSource();\r\n        return Object.assign(imageSource, this);\r\n    }\r\n    toString() \r\n    {\r\n        return `name = \"${this.name}\" type = ${this.sourceType} directory = \"${this.sourceDirectory}\"`;\r\n    }\r\n\r\n    static fromObject(object)\r\n    {\r\n        let imageSource = new ImageSource();\r\n        for(const key of Object.getOwnPropertyNames(object)) {\r\n            if(imageSource.hasOwnProperty(key)) {\r\n                imageSource[key] = object[key];\r\n            }\r\n        }\r\n        return imageSource;\r\n    }\r\n}\r\n","module.exports = require(\"crypto\");","module.exports = require(\"child_process\");","module.exports = require(\"assert\");","\r\nexport default class ArrayMap \r\n{\r\n    constructor() {\r\n        this.map = new Map();\r\n        [\"get\", \"has\", \"delete\", \"keys\", \"values\"].forEach(key => {\r\n            this[key] = this.map[key].bind(this.map);\r\n        });\r\n    }\r\n    set(key, value) {\r\n        let array = this.map.get(key);\r\n        if(Array.isArray(array)) {\r\n            array.push(value);\r\n        } else {\r\n            this.map.set(key, [value]);\r\n        }\r\n    }\r\n}","import fs from 'fs';\r\nimport EventEmitter from \"events\";\r\n\r\nexport const VALID_JSON_TYPES = [\r\n    'string',\r\n    'number',\r\n    'object',\r\n    'array',\r\n    'boolean'\r\n];\r\n\r\n/**\r\n * Configuration class for saving/loading data via JSON file.\r\n * Note that load() should be called after construction to read from file.\r\n * If save() is called before load(), any previous configuration will be overwritten.\r\n */\r\nexport default class Config extends EventEmitter\r\n{\r\n    /**\r\n     * Create a Config instance\r\n     * @param {Object} opts \r\n     * @param {boolean} [opts.autoSave = false] if true, automatically save to file when data changes\r\n     * @param {boolean} [opts.doExtend = false] if true, this instance is extended with setters/getters for property names specified in the schema\r\n     * @param {string} opts.filePath the absolute path to the configuration file, including its extension \r\n     * @param {Object} opts.schema\r\n     */\r\n    constructor(opts) \r\n    {\r\n        super();\r\n\r\n        this._isLoaded = false;\r\n        this._isLoading = false;\r\n        this._isSaved = false;\r\n        this._isSaving = false;\r\n        this._isAnotherSavePending = false;\r\n        this._lastSavedTime = 0;\r\n\r\n        this._doAutoSave = opts.autoSave === true;\r\n        this._schema = opts.schema;\r\n        this._data = this._createDefaultConfigObject();\r\n        this._dataFilePath = opts.filePath;\r\n        \r\n        if(opts.doExtend) {\r\n            this._extend();\r\n        }\r\n    }\r\n    _createDefaultConfigObject() \r\n    {\r\n        let config = {};\r\n        for (const [key, value] of Object.entries(this._schema)) \r\n        {\r\n            if (!this._isValidJsonTypeName(value.type)) {\r\n                throw new TypeError(`'type' ${value.type} for ${key} is not a valid JSON type name`);\r\n            } \r\n            if(value.default && this._typeOf(value.default) !== value.type) {\r\n                throw new TypeError(`'default' type ${this._typeOf(value.default)} does not match specified 'type'`);\r\n            }\r\n            config[key] = value.default || this._defaultForTypeName(value.type);\r\n        }\r\n        return config;\r\n    }\r\n    _validateConfig() \r\n    {\r\n        for (const [key, value] of Object.entries(this._data)) \r\n        {\r\n            if(!this._schema[key]) {\r\n                throw new Error(`Property ${key} not found in schema`);\r\n            }\r\n            if(this._typeOf(value) !== this._schema[key].type) {\r\n                throw new TypeError(`${this._typeOf(value)} does not match schema type ${this._schema[key].type}`)\r\n            }\r\n        }\r\n    }\r\n    _isValidJsonTypeName(type) {\r\n        return VALID_JSON_TYPES.includes(type);\r\n    }\r\n    _defaultForTypeName(type) {\r\n        switch(type) {\r\n            case 'string': return \"\";\r\n            case 'number': return 0;\r\n            case 'object': return {};\r\n            case 'array': return [];\r\n            case 'boolean': return false;\r\n        }\r\n        return null;\r\n    }\r\n    _typeOf(value) {\r\n        if(Array.isArray(value)) {\r\n            return \"array\";\r\n        } \r\n        return typeof value;\r\n    }\r\n    _extend() \r\n    {\r\n        for (const [key, value] of Object.entries(this._schema)) \r\n        {\r\n            Object.defineProperty(this, key, {\r\n                get() { \r\n                    return this.get(key);\r\n                },\r\n                set(value) { \r\n                    return this.set(key, value);\r\n                },\r\n                enumerable: true, \r\n                configurable: false\r\n            });\r\n        }\r\n    }\r\n\r\n    load() \r\n    {\r\n        if(this._isLoaded || this._isLoading) \r\n            return Promise.resolve();\r\n\r\n        return new Promise(resolve => \r\n        {\r\n            this._isLoading = true;\r\n            fs.readFile(this._dataFilePath, (err, data) => {\r\n                this._isLoading = false;\r\n                // ENOENT = file missing\r\n                if(err && err.code !== 'ENOENT') throw err;\r\n                if(!err) {\r\n                    // Assume file exists and data read successfully\r\n                    this._data = JSON.parse(data);\r\n                    this._validateConfig();\r\n                }\r\n                this._isSaved = true;\r\n                this._isLoaded = true;\r\n                this.emit(\"loaded\");\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    save() \r\n    {\r\n        if(this._isSaved) \r\n            return Promise.resolve();\r\n        if(this._isSaving) {\r\n            this._isAnotherSavePending = true;\r\n            return Promise.resolve();\r\n        }\r\n\r\n        return new Promise(resolve => \r\n        {\r\n            this._isSaving = true;\r\n            fs.writeFile(this._dataFilePath, JSON.stringify(this._data, null, 2), err => {\r\n                this._isSaving = false;\r\n                if(err) throw err;\r\n\r\n                this._isLoaded = true;\r\n                this._isSaved = true;\r\n                this._lastSavedTime = Date.now();\r\n                this.emit(\"saved\", this._lastSavedTime);\r\n\r\n                if(this._isAnotherSavePending) {\r\n                    this._isAnotherSavePending = false;\r\n                    process.nextTick(() => this.save);\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    getLastSavedTime() {\r\n        return this._lastSavedTime;\r\n    }\r\n    /**\r\n     * Same as getAll() except returns a deep copy\r\n     */\r\n    clone() \r\n    {\r\n        return JSON.parse(JSON.stringify(this._data));\r\n    }\r\n    /**\r\n     * Returns entire configuration object by reference\r\n     */\r\n    getAll() \r\n    {\r\n        return this._data;\r\n    }\r\n    get(key) \r\n    {\r\n\t\treturn key.split('.').reduce((accumulator, property) => accumulator[property], this._data);\r\n    }\r\n    set(key, value) \r\n    {\r\n        this._isSaved = false;\r\n\r\n        const tokens = key.split('.');\r\n        const lastToken = tokens.pop();\r\n        const parent = tokens.reduce((accumulator, property) => accumulator[property], this._data);\r\n        const property = parent[lastToken];\r\n        if(typeof property === \"undefined\") {\r\n            throw new Error(`Property ${key} not found.`);\r\n        }\r\n        if(this._typeOf(property) !== this._typeOf(value)) {\r\n            throw new TypeError(`Property ${key} type ${this._typeOf(property)} does not match value type ${this._typeOf(value)}`);\r\n        }\r\n        // Set value\r\n        parent[lastToken] = value;\r\n        console.log(`Configuration updated. ${key} -> ${value}`);\r\n\r\n        if(this._doAutoSave) {\r\n            this.save();\r\n        }\r\n    }\r\n}","import upath from 'upath';\r\n\r\nimport ImageSource from '../server/imageSource';\r\nimport ArrayMap from '../arrayMap';\r\nimport Config from '../store/config';\r\nimport appGlobal from '../global';\r\nimport _ from '../utils';\r\n\r\n// TODO: Split General & Pipelines into their own Classes (and files)\r\n\r\n/**\r\n * General app configuration data \r\n */\r\nclass GeneralConfig extends Config\r\n{\r\n    constructor() {\r\n        super({\r\n            filePath: upath.join(appGlobal.appDefaultConfigPath, \"general.json\"),\r\n            autoSave: true,\r\n            doExtend: true,\r\n            schema: {\r\n                checkIsScriptListenerActiveOnStart: {\r\n                    type: \"boolean\", \r\n                    default: true\r\n                },\r\n                pauseAfterEveryPipeline: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                pauseAfterEveryAction: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                pauseAfterEveryImage: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                pauseOnExceptions: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                logDirectory: { \r\n                    type: \"string\",\r\n                    default: \"\"\r\n                },\r\n                logFilePersistForDays: {\r\n                    type: \"number\", \r\n                    default: 3\r\n                },\r\n                runHttpServer: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                serverPort: {\r\n                    type: \"number\",\r\n                    default: 3001\r\n                },\r\n                pathToUserActions: {\r\n                    type: \"string\",\r\n                    default: \"\"\r\n                }, \r\n                fileSources: {\r\n                    type: \"array\",\r\n                    default: [\r\n                        // Objects matching ImageSource\r\n                    ]\r\n                },\r\n                currentTab: {\r\n                    type: \"string\",\r\n                    default: \"the-jsx-runner\"\r\n                },\r\n                isMainDrawerOpen: {\r\n                    type: \"boolean\", \r\n                    default: false\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns the ImageSource by the given name\r\n     * @param {string} name \r\n     * @returns {ImageSource}\r\n     */\r\n    getImageSourceByName(name) \r\n    {\r\n        const source = this._data.fileSources.find(s => s.name === name);\r\n        if(source) {\r\n            return ImageSource.fromObject(source);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Pipeline configurations \r\n */\r\nclass PipelinesConfig extends Config\r\n{\r\n    constructor() \r\n    {\r\n        super({\r\n            filePath: upath.join(appGlobal.appDefaultConfigPath, \"pipelines.json\"),\r\n            doExtend: true,\r\n            schema: {\r\n                pipelines: {\r\n                    type: \"array\",\r\n                    default: []\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getByNames(pipelineNames, includeDisabled)\r\n    {\r\n        return this._data.pipelines.filter(p => {\r\n            return pipelineNames.includes(p.name) && (includeDisabled || !p.disabled);\r\n        });\r\n    }\r\n    getByName(pipelineName, includeDisabled) \r\n    {\r\n        return this._data.pipelines.find(p => {\r\n            return p.name === pipelineName && (includeDisabled || !p.disabled); \r\n        });\r\n    }\r\n    /**\r\n     * Returns unique mapping of image source name -> pipeline name\r\n     * @param {Array<string>} pipelineNames\r\n     * @param {boolean} [includeDisabled = false]\r\n     * @returns {ArrayMap<string, string>}\r\n     */\r\n    getImageSourceNameToPipelineNameMap(pipelineNames, includeDisabled) \r\n    {\r\n        // Collect all unique file sources for given pipelines\r\n        let fileSourceNameToPipelineNames = new ArrayMap();\r\n        pipelineNames.forEach(pipelineName =>\r\n        {\r\n            const pipeline = this.getByName(pipelineName);\r\n            if(!pipeline) {\r\n                return;\r\n            }\r\n            for(let fileSourceName of pipeline.sourceNames) {\r\n                fileSourceNameToPipelineNames.set(fileSourceName, pipeline.name);\r\n            }\r\n        });\r\n        return fileSourceNameToPipelineNames;\r\n    }\r\n}\r\n\r\nclass Store \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * General configuration storage\r\n         * NOTE: Properties are set by Reference.\r\n         */\r\n        this.general = new GeneralConfig();\r\n        /**\r\n         * Pipeline configuration storage\r\n         * NOTE: Properties are set by Reference.\r\n         */\r\n        this.pipelines = new PipelinesConfig();\r\n    }\r\n    async init() \r\n    {\r\n        console.log(\"Configurations loading started.\");\r\n\r\n        await this.general.load();\r\n        await this.pipelines.load();\r\n\r\n        console.log(\"Configurations loaded.\");\r\n    }\r\n}\r\n\r\n\r\nexport default new Store();","import Enum from '../enum';\r\n\r\nconst ImageSourceType = new Enum([\r\n    \"OPENFILES\", \r\n    \"DIRECTORY\", \r\n    \"FILEWATCHER\",\r\n    \"BLANK\",\r\n    \"ACTIVEDOCUMENT\",\r\n    \"REST\"\r\n]);\r\n\r\nexport default ImageSourceType","export default class FolderTreeNode\r\n{\r\n    constructor(name = \"\", isDirectory = false) {\r\n        // FolderTree\r\n        this.parent = null;\r\n        // boolean\r\n        this.isDirectory = isDirectory;\r\n        // string\r\n        this.name = name || \"\";\r\n        // Array<FolderTree>\r\n        this.children = [];\r\n    }\r\n    isRoot() { \r\n        return this.parent === null;\r\n    }\r\n    isLeaf() {\r\n        return !this.hasChildren();\r\n    }\r\n    hasChildren() {\r\n        return this.children.length > 0;\r\n    }\r\n    addChild(node)\r\n    {\r\n        node.parent = this;\r\n        this.children.push(node);\r\n    }\r\n    removeChild(node)\r\n    {\r\n        this.children = this.children.filter(c => c !== node);\r\n    }\r\n    getChildByName(name) {\r\n        return this.children.find(c => c.name === name);\r\n    }\r\n    /**\r\n     * @returns {string[]} an array of node names indicating the path to this node from the root\r\n     */\r\n    getNamePath() {\r\n        let node = this;\r\n        let names = [node.name];\r\n        while(node && (node = node.parent)) {\r\n            names.push(node.name);\r\n        }\r\n        return names.reverse();\r\n    }\r\n    insert(namePath, isDirectory)\r\n    {\r\n        let node = this;\r\n        let nodeName = (this.name === namePath[0]) ? namePath.shift() : \"\";\r\n        while(nodeName = namePath.shift())\r\n        {\r\n            const isEndOfPath = namePath.length === 0;\r\n            const childIsDirectory = isEndOfPath && !isDirectory ? false : true;\r\n            let child = node.getChildByName(nodeName);\r\n            if(!child) {\r\n                child = new FolderTreeNode(nodeName, childIsDirectory);\r\n                node.addChild(child);\r\n            } \r\n            node = child;\r\n        }\r\n    }\r\n    /**\r\n     * Returns the node given at the end of the name path by traversing the tree\r\n     * @param {string[]} namePath \r\n     * @returns {FolderTreeNode} or null\r\n     */\r\n    traverse(namePath)\r\n    {\r\n        let node = this;\r\n        let nodeName = (this.name === namePath[0]) ? namePath.shift() : \"\";\r\n        while(node && (nodeName = namePath.shift())) {\r\n            node = node.getChildByName(nodeName);\r\n        }\r\n        return node;\r\n    }\r\n    drop()\r\n    {\r\n        this.parent.removeChild(this);\r\n        this.parent = null;\r\n    }\r\n    arrayify(node)\r\n    {\r\n        // pre order traversal\r\n        if(node.hasChildren()) {\r\n            const result = node.children.map(c => node.arrayify(c));\r\n            return [node.name, result];\r\n        } else {\r\n            return node.name;\r\n        }\r\n    }\r\n    /**\r\n     * Clones this Folder tree node\r\n     */\r\n    clone()\r\n    {\r\n        return new FolderTreeNode(this.name, this.isDirectory);\r\n    }\r\n    /**\r\n     * Clones the Folder tree using this node as the root node\r\n     */\r\n    cloneTree()\r\n    {\r\n        let newRoot = this.clone();\r\n        let newStack = [newRoot];\r\n        let oldStack = [this];\r\n        let newNode, oldNode;\r\n        while((oldNode = oldStack.pop()) && (newNode = newStack.pop()))\r\n        {\r\n            for(let i = 0; i < oldNode.children.length; ++i)\r\n            {\r\n                let oldChild = oldNode.children[i];\r\n                let newChild = oldChild.clone();\r\n                newNode.addChild(newChild);\r\n                newStack.push(newChild);\r\n                oldStack.push(oldChild);\r\n            }\r\n        }\r\n        return newRoot;\r\n    }\r\n    parse(model)\r\n    {\r\n\r\n    }\r\n}\r\n","var render, staticRenderFns\nimport script from \"./tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tabs.vue?vue&type=style&index=0&id=55ac743d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55ac743d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('a-dialog-root'),_c('adobe-menus'),_c('tabs',{attrs:{\"initial-tab\":_vm.currentTabComponent},on:{\"changed\":_vm.onTabChanged}},[_c('tab',{attrs:{\"title\":\"the-console\"}},[_vm._v(\"Console\")]),_c('tab',{attrs:{\"title\":\"the-jsx-runner\"}},[_vm._v(\"Jsx\")]),_c('tab',{attrs:{\"title\":\"the-configurator\"}},[_vm._v(\"Configuration\")]),_c('tab',{attrs:{\"title\":\"the-pipelines\"}},[_vm._v(\"Pipelines\")])],1),_c('main-controls'),_c('section',{staticClass:\"tab-content\"},[_c('keep-alive',[_c(_vm.currentTabComponent,{tag:\"component\"})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const themeManager = (function () \n{\n    'use strict';\n    const csInterface = new CSInterface();\n\n    /**\n     * Update theme with AppSkinInfo from Host Product\n     */\n    function updateThemeWithAppSkinInfo(appSkinInfo) \n    {\n        let sentinelColor = appSkinInfo.panelBackgroundColor.color.red;\n        let themeIsLight = sentinelColor > 128;\n        \n        if (themeIsLight) {\n            document.body.classList.remove(\"dark\");\n            document.body.classList.add(\"light\");\n            document.getElementById(\"theme\").href = \"css/topcoat-desktop-light.css\";\n        } else {\n            document.body.classList.remove(\"light\");\n            document.body.classList.add(\"dark\");\n            document.getElementById(\"theme\").href = \"css/topcoat-desktop-dark.css\";\n        }\n        \n        document.body.style.background = \"#\" + toHex(appSkinInfo.panelBackgroundColor.color);\n    }\n\n    function toHex(color) \n    {\n        function computeValue(rgb) { \n            let hex = Number(rgb).toString(16);\n            if (hex.length < 2) { hex = \"0\" + hex }\n            return hex;\n        };\n        let hex = \"\";\n        if (color) {\n            hex = computeValue(color.red) + \n                    computeValue(color.green) + \n                    computeValue(color.blue);\n        }\n        return hex;\n    }\n  \n    function onAppThemeColorChanged(event) \n    {\n        let appSkinInfo = csInterface.getHostEnvironment().appSkinInfo;\n        updateThemeWithAppSkinInfo(appSkinInfo);\n    }\n  \n    function init() \n    {\n        let appSkinInfo = csInterface.getHostEnvironment().appSkinInfo;\n        updateThemeWithAppSkinInfo(appSkinInfo);\n        csInterface.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT, onAppThemeColorChanged);\n    }\n  \n    return {\n        init: init\n    };\n  \n  }());\n\n  export default themeManager;","\r\n\r\n<script>\r\nexport default {\r\n    name: \"Tabs\",\r\n    props: {\r\n        initialTab: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            activeTab: this.initialTab\r\n        }\r\n    },\r\n    computed: {\r\n        tabsList() {\r\n            return this.$slots.default;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$on('tab-click', this.onTabClick);\r\n    },\r\n    methods: {\r\n        onTabClick(tab) {\r\n            this.activeTab = tab;\r\n            this.$emit(\"changed\", this.activeTab);\r\n        },\r\n        isActiveTab(tab) {\r\n            return this.activeTab === tab;\r\n        }\r\n    },\r\n    render: function(createElement) {\r\n        // return a vnode (virtual dom node)\r\n        return createElement(\r\n            \"ul\",\r\n            {\r\n                class: \"tabs\"\r\n            },\r\n            // array of children\r\n            this.$slots.default.map(child => {\r\n                return createElement(\r\n                    \"li\", \r\n                    {\r\n                        class: \"tab\"\r\n                    },\r\n                    [child]\r\n                )\r\n            })\r\n        );\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .tabs {\r\n        display: flex;\r\n        flex-shrink: 0;\r\n        justify-items: center;\r\n        list-style: none;\r\n        margin: .5em auto;\r\n        margin-right: auto;\r\n        padding: 0;\r\n        width: 300px;\r\n    }\r\n    .tab {\r\n        flex-grow: 1;\r\n    }\r\n    .tab button {\r\n        height: 1.5rem;\r\n        width: 100%;\r\n    }\r\n    .tab:first-of-type button {\r\n        border-left-width: 1px;\r\n        border-radius: 5px 0 0 5px;\r\n    }\r\n    .tab:last-of-type button {\r\n        border-radius: 0 5px 5px 0;\r\n    }\r\n    .dark button {\r\n        background: $dark-button-bg-inactive;\r\n        border: 1px solid $dark-button-border;\r\n        border-left-width: 0;\r\n        color: $dark-text-color;\r\n\r\n        &.active {\r\n            background: $dark-button-bg-active;\r\n            color: $dark-button-text-color-active;\r\n        }\r\n    }\r\n    .light button {\r\n        background: $light-button-bg-inactive;\r\n        border: 1px solid $light-button-border;\r\n        border-left-width: 0;\r\n        color: $light-text-color;\r\n\r\n        &.active {\r\n            background: $light-button-bg-active;\r\n            color: $light-button-text-color-active;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:{ active: _vm.isActive },on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClick($event)}}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <button :class=\"{ active: isActive }\" @click.prevent.stop=\"onClick\">\r\n        <slot></slot>\r\n    </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Tab\",\r\n    props: {\r\n      title: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    computed: {\r\n        isActive() {\r\n            return this.$parent.activeTab == this.title;\r\n        }\r\n    },\r\n    methods: {\r\n        onClick(e) {\r\n            this.$parent.$emit(\"tab-click\", this.title);\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tab.vue?vue&type=template&id=f5f7bfa6&\"\nimport script from \"./tab.vue?vue&type=script&lang=js&\"\nexport * from \"./tab.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('validation-observer',{ref:\"observer\",attrs:{\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('form',{staticClass:\"main-controls my2\",on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();},\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onPipelineRun)}}},[_c('div',{staticClass:\"main-controls__controls mb2\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStopped),expression:\"isStopped\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"submit\",\"title\":\"Run all pipelines on the selected source.\"}},[_vm._v(\"\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isPaused),expression:\"isPaused\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Resume processing.\"},on:{\"click\":_vm.onPipelineResume}},[_vm._v(\"Resume\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canPause),expression:\"canPause\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Pause processing.\"},on:{\"click\":_vm.onPipelinePause}},[_vm._v(\"\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isStopped),expression:\"!isStopped\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Stop all pipelines and file sources.\"},on:{\"click\":_vm.onPipelineStop}},[_vm._v(\"\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isMainDrawerOpen),expression:\"isMainDrawerOpen\"}],staticClass:\"main-controls__drawer columns\"},[_c('div',{staticClass:\"column is-half-tablet\"},[_c('h3',{staticClass:\"section-title\"},[_vm._v(\"Pipelines Status\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineEngineStateText))]),(_vm.pipelinefilePathText)?_c('h3',{staticClass:\"section-title\"},[_vm._v(\"Current Source Path\")]):_vm._e(),_c('div',[_vm._v(_vm._s(_vm.pipelinefilePathText))])]),_c('div',{staticClass:\"column is-half-tablet\"},[_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pipelineText),expression:\"pipelineText\"}],staticClass:\"section-title\"},[_vm._v(\"Pipeline\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineText))]),_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pipelineActionText),expression:\"pipelineActionText\"}],staticClass:\"section-title\"},[_vm._v(\"Action\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineActionText))])])]),_c('div',{staticClass:\"main-controls__drawer-toggle\",class:{ active: _vm.isMainDrawerOpen }},[_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isMainDrawerOpen = !_vm.isMainDrawerOpen}}},[_vm._v(\"Source & Status \"),_c('span',[_vm._v(\"\")])])])])]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <validation-observer \r\n        ref=\"observer\"\r\n        slim\r\n        v-slot=\"{ handleSubmit }\"\r\n    >\r\n        <form \r\n            class=\"main-controls my2\"\r\n            @keydown.enter.prevent\r\n            @submit.prevent=\"handleSubmit(onPipelineRun)\"\r\n        >\r\n            <div class=\"main-controls__controls mb2\">\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"submit\"\r\n                    title=\"Run all pipelines on the selected source.\"\r\n                    v-show=\"isStopped\">&#9654;</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelineResume\"\r\n                    title=\"Resume processing.\"\r\n                    v-show=\"isPaused\">Resume</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelinePause\"\r\n                    title=\"Pause processing.\"\r\n                    v-show=\"canPause\">&#10074;&#10074;</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelineStop\"\r\n                    title=\"Stop all pipelines and file sources.\"\r\n                    v-show=\"!isStopped\" \r\n                    >&#9724;</button>\r\n            </div>\r\n            <div class=\"main-controls__drawer columns\" \r\n                v-show=\"isMainDrawerOpen\"\r\n            >\r\n                <div class=\"column is-half-tablet\">\r\n                    <h3 class=\"section-title\">Pipelines Status</h3>\r\n                    <div>{{ pipelineEngineStateText }}</div>\r\n                    <h3 class=\"section-title\" v-if=\"pipelinefilePathText\">Current Source Path</h3>\r\n                    <div>{{ pipelinefilePathText }}</div>\r\n                    <!-- <div v-if=\"isInitializing\">Initializing<wait-dots/></div> -->\r\n                </div>\r\n                <div class=\"column is-half-tablet\">\r\n                    <h3 class=\"section-title\" v-show=\"pipelineText\">Pipeline</h3>\r\n                    <div>{{ pipelineText }}</div>\r\n                    <h3 class=\"section-title\" v-show=\"pipelineActionText\">Action</h3>\r\n                    <div>{{ pipelineActionText }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"main-controls__drawer-toggle\" :class=\"{ active: isMainDrawerOpen }\">\r\n                <button \r\n                    class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"isMainDrawerOpen = !isMainDrawerOpen\"\r\n                >Source &amp; Status <span></span></button>\r\n            </div>\r\n        </form>\r\n    </validation-observer>\r\n</template>\r\n\r\n<script>\r\nimport { ValidationProvider, ValidationObserver } from \"vee-validate\";\r\n\r\nimport _ from \"../utils\";\r\nimport store from \"../store\"; \r\nimport eventBus from \"../eventBus\";\r\nimport Server from '../server';\r\nimport PipelineEngineState from '../server/pipelineEngineState';\r\nimport WaitDots from './wait-dots.vue';\r\n\r\nexport default {\r\n    name: 'MainControls',\r\n    components: {\r\n        ValidationObserver,\r\n        ValidationProvider,\r\n        WaitDots\r\n    },\r\n    data() {\r\n        return {\r\n            pipelineEngineState: Server.pipelineEngine.state,\r\n            pipelineText: \"\",\r\n            pipelineActionText: \"\",\r\n            pipelinefilePathText: \"\",\r\n            isMainDrawerOpen: store.general.isMainDrawerOpen\r\n        }\r\n    },\r\n    watch: {\r\n        isMainDrawerOpen: v => { store.general.isMainDrawerOpen = v; }\r\n        // imageSource: {\r\n        //     deep: true, \r\n        //     handler: function(v) {\r\n        //         store.general.imageSource = v;\r\n        //     }\r\n        // }\r\n    },\r\n    computed: {\r\n        canPause() {\r\n            return this.pipelineEngineState == PipelineEngineState.IDLE \r\n                || this.pipelineEngineState == PipelineEngineState.PROCESSING;\r\n        },\r\n        isStopped() {\r\n            return this.pipelineEngineState == PipelineEngineState.STOPPED;\r\n        },\r\n        isPaused() {\r\n            return this.pipelineEngineState == PipelineEngineState.PAUSED;\r\n        },\r\n        isProcessing() {\r\n            return this.pipelineEngineState == PipelineEngineState.PROCESSING;\r\n        },\r\n        pipelineEngineStateText() {\r\n            return PipelineEngineState.toKey(this.pipelineEngineState);\r\n        }\r\n    },\r\n    created() \r\n    {\r\n        eventBus.$on(\"pipeline-play\", pipelineName => {\r\n            Server.pipelineEngine.run(pipelineName);\r\n        });\r\n        Server.pipelineEngine.on(\"state\", state => {\r\n            this.pipelineEngineState = state;\r\n        });\r\n        Server.pipelineEngine.on(\"status\", status => {\r\n            this.pipelineText = status.pipeline;\r\n            this.pipelineActionText = status.action;\r\n            this.pipelinefilePathText = status.file;\r\n        });\r\n    },\r\n    methods: {\r\n        /**\r\n         * Submit handler\r\n         */\r\n        onPipelineRun() {\r\n            this.$dialog.openConfirm({\r\n                name: \"confirm\",\r\n                message: \"This will run all pipelines with their configured sources. Continue?\",\r\n                onYes: () => {\r\n                    Server.pipelineEngine.runAll();\r\n                }\r\n            });\r\n        },\r\n        onPipelineResume() {\r\n            Server.pipelineEngine.resume();\r\n        },\r\n        onPipelinePause() {\r\n            Server.pipelineEngine.pause();\r\n        },\r\n        onPipelineStop() {\r\n            Server.pipelineEngine.stop();\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-controls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-controls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main-controls.vue?vue&type=template&id=23770c66&\"\nimport script from \"./main-controls.vue?vue&type=script&lang=js&\"\nexport * from \"./main-controls.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <a-dialog-root />\r\n    <adobe-menus />\r\n    \r\n    <tabs @changed=\"onTabChanged\" :initial-tab=\"currentTabComponent\">\r\n        <tab title=\"the-console\">Console</tab>\r\n        <tab title=\"the-jsx-runner\">Jsx</tab>\r\n        <tab title=\"the-configurator\">Configuration</tab>\r\n        <tab title=\"the-pipelines\">Pipelines</tab>\r\n    </tabs>\r\n\r\n    <main-controls />\r\n\r\n    <section class=\"tab-content\">\r\n        <keep-alive>\r\n            <component :is=\"currentTabComponent\"></component>\r\n        </keep-alive>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* Can also use cep_node.require */\r\n/* npm modules */ \r\nimport upath from 'upath'; \r\n\r\n/* local modules */\r\nimport store from './store';\r\nimport themeManager from \"./themeManager\";\r\nimport Tabs from './components/tabs.vue';\r\nimport Tab from './components/tab.vue';\r\nimport MainControls from './components/main-controls.vue';\r\n\r\nexport default {\r\n    name: \"app\",\r\n    components: {\r\n        MainControls,\r\n        Tabs, \r\n        Tab,\r\n        AdobeMenus: () => import(\"./components/adobe-menus.vue\"),\r\n        TheConsole: () => import('./components/the-console.vue'),\r\n        TheJsxRunner: () => import(\"./components/the-jsx-runner.vue\"),\r\n        TheConfigurator: () => import(\"./components/the-configurator.vue\"),\r\n        ThePipelines: () => import(\"./components/the-pipelines.vue\")\r\n    },\r\n    data: () => {\r\n        return {\r\n            currentTabComponent: store.general.currentTab\r\n        }\r\n    },\r\n    mounted() {\r\n        themeManager.init();\r\n        this.hideLoadingSpinner();\r\n    },\r\n    methods: {\r\n        onTabChanged(tabTitle) {\r\n            store.general.currentTab = tabTitle;\r\n            this.currentTabComponent = tabTitle;\r\n        },\r\n        hideLoadingSpinner() {\r\n            let spinnerEl = document.getElementById(\"loading\");\r\n            if (spinnerEl) \r\n                spinnerEl.style.display = \"none\";\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n/* Various helper styles to match application theme */\r\n@import url(\"http://fonts.googleapis.com/css?family=Source+Sans+Pro:300\");\r\n@import url(\"http://fonts.googleapis.com/css?family=Source+Code+Pro\");\r\n@import \"./styles/columns\";\r\n\r\n\r\n\r\nhtml, body {\r\n    font-size: 14px;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 100%;\r\n}\r\nbody {\r\n    font-family: source-sans-pro, sans-serif;\r\n    line-height: 1.5rem;\r\n\r\n    &.light {\r\n        background: #F4F4F4;\r\n        color: #181919;\r\n    }\r\n    &.dark {\r\n        color: $dark-text-color;\r\n        background: $dark-bg;\r\n    }\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n}\r\n\r\nh1, h2, h3 {\r\n    margin: 0 0 0.5em 0;\r\n}\r\nh1 {\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    margin: 0.5em;\r\n}\r\nh2 {\r\n    font-size: 16px;\r\n    font-weight: 300;\r\n}\r\nh3 {\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n}\r\nh4 {\r\n    font-size: 12px; \r\n    font-weight: 400;\r\n}\r\n.dark .text-highlight {\r\n    color: $dark-text-highlight-color;\r\n}\r\n\r\n\r\n#app {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n}\r\n\r\n.tab-title {\r\n    font-weight: bold;\r\n    padding: .25rem .5rem;\r\n    left: -.5rem;\r\n    position: relative;\r\n    width: 100vw;\r\n\r\n    @at-root .dark & {\r\n        background: #424242;\r\n    }\r\n}\r\n.tab-content {\r\n    flex-grow: 1;\r\n    flex-shrink: 1;\r\n    padding: .5rem;\r\n}\r\n.section-title {\r\n    font-weight: bold;\r\n    margin: .5rem 0 0 0;\r\n    padding: .25rem 0;\r\n}\r\n.section-content {\r\n    padding: 0;\r\n}\r\n.section-content--inset {\r\n    background: rgba(0,0,0,0.2);\r\n    border: none;\r\n    border-radius: 7px;\r\n    padding: 1rem;\r\n}\r\n\r\n\r\n#app::-webkit-scrollbar {\r\n  display: block;\r\n}\r\nbody::-webkit-scrollbar {\r\n  width: 0px;\r\n}\r\n::-webkit-scrollbar-resizer {\r\n  display: none;\r\n  width: 0px;\r\n  background-color: transparent;\r\n}\r\n::-webkit-scrollbar-button {\r\n  height: 0px;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  display: none;\r\n}\r\ninput[type=number] {\r\n    -moz-appearance:textfield;\r\n}\r\n::-webkit-outer-spin-button,\r\n::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n//-------------------\r\n// Utilities\r\n//-------------------\r\n@mixin clearfix() {\r\n  &::after {\r\n    display: block;\r\n    content: \"\";\r\n    clear: both;\r\n  }\r\n}\r\n.clearfix {\r\n    @include clearfix();\r\n}\r\n.flex {\r\n    display: flex;\r\n}\r\n.flex-grow {\r\n    flex-grow: 1;\r\n}\r\n.full-width {\r\n    width: 100%;\r\n}\r\n\r\n$space-1: $column-gap;\r\n$space-2: $column-gap * 2;\r\n\r\n.m0  { margin:        0 }\r\n.mt0 { margin-top:    0 }\r\n.mr0 { margin-right:  0 }\r\n.mb0 { margin-bottom: 0 }\r\n.ml0 { margin-left:   0 }\r\n.mx0 { margin-left:   0; margin-right:  0 }\r\n.my0 { margin-top:    0; margin-bottom: 0 }\r\n\r\n.m1  { margin:        $space-1 }\r\n.mt1 { margin-top:    $space-1 }\r\n.mr1 { margin-right:  $space-1 }\r\n.mb1 { margin-bottom: $space-1 }\r\n.ml1 { margin-left:   $space-1 }\r\n.mx1 { margin-left:   $space-1; margin-right:  $space-1 }\r\n.my1 { margin-top:    $space-1; margin-bottom: $space-1 }\r\n\r\n.m2  { margin:        $space-2 }\r\n.mt2 { margin-top:    $space-2 }\r\n.mr2 { margin-right:  $space-2 }\r\n.mb2 { margin-bottom: $space-2 }\r\n.ml2 { margin-left:   $space-2 }\r\n.mx2 { margin-left:   $space-2; margin-right:  $space-2 }\r\n.my2 { margin-top:    $space-2; margin-bottom: $space-2 }\r\n\r\n.ml-auto { margin-left: auto }\r\n.mr-auto { margin-right: auto }\r\n.mx-auto { margin-left: auto; margin-right: auto; }\r\n\r\n.left {\r\n    float: left;\r\n}\r\n.right {\r\n    float: right;\r\n}\r\n\r\n//-------------------\r\n// Topcoat Overrides\r\n//-------------------\r\n.topcoat-checkbox,\r\n.topcoat-text-input {\r\n    line-height: 1.5rem;\r\n}\r\n.topcoat-checkbox {\r\n    display: flex;\r\n    align-items: center;\r\n    margin: $column-gap 0;\r\n\r\n    &__checkmark {\r\n        margin-right: .5rem;\r\n    }\r\n}\r\n.topcoat-notification {\r\n    min-width: 24px;\r\n}\r\n.topcoat-notification.error {\r\n    bottom: 0;\r\n    opacity: .9;\r\n    overflow: visible;\r\n    position: absolute;\r\n    right: 0;\r\n    transform: translateY(100%);\r\n    z-index: 1;\r\n\r\n    &::after {\r\n        content: '\\25B6';\r\n        color: #ec514e;\r\n        font-size: 18px;\r\n        position: absolute;\r\n        right: 8px;\r\n        top: -16px;\r\n        transform: rotateZ(-90deg);\r\n    }\r\n}\r\n\r\nlabel {\r\n    display: block;\r\n    position: relative;\r\n}\r\n.label {\r\n    margin-bottom: .25rem;    \r\n}\r\n\r\n\r\n.main-controls {\r\n    z-index: 1;\r\n\r\n    &__controls {\r\n        text-align: center;\r\n    }\r\n    &__drawer {\r\n        background: rgba(0,0,0,0.2);\r\n        box-shadow: inset 0px 0px 8px 2px rgba(0, 0, 0, 0.2);\r\n        // max-height: 1000px;\r\n        overflow: hidden;\r\n        padding: .5rem .5rem 2rem .5rem;\r\n        \r\n        // &.v-enter-active,\r\n        // &.v-leave-active {\r\n        //     transition: max-height 0.4s;\r\n        // }\r\n        // &.v-enter,\r\n        // &.v-leave-to {\r\n        //     max-height: 0;\r\n        // }\r\n    }\r\n    &__drawer-toggle {\r\n        height: 0;\r\n        text-align: center;\r\n\r\n        button {\r\n            box-shadow: none !important;\r\n            border: inherit !important;\r\n        }\r\n        & span {\r\n            display: inline-block;\r\n            margin: 0  $column-gap * 2;\r\n            transform: rotateZ(90deg);\r\n        }\r\n        &.active span {\r\n            transform: rotateZ(-90deg);\r\n        }\r\n    }\r\n}\r\n\r\n.source,\r\n.pipeline {\r\n    background: rgba(0,0,0,0.2);\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    border-radius: 7px;\r\n    padding: 1rem;\r\n    margin-bottom: 1rem;\r\n\r\n    label {\r\n        position: relative;\r\n    }\r\n    label:not(.topcoat-checkbox) {\r\n        display: block;\r\n        margin-bottom: $column-gap;\r\n    }\r\n    &:last-of-type {\r\n        margin-bottom: ($column-gap * 2);\r\n    }\r\n}\r\n\r\n.configurator-buttons,\r\n.pipeline-buttons {\r\n    margin: ($column-gap * 2) 0;\r\n\r\n    button {\r\n        margin-right: .5rem;\r\n    }\r\n}\r\n\r\n.pipeline {\r\n    &.disabled {\r\n        background: rgba(255,0,0,0.03);\r\n    }\r\n}\r\n\r\n.pipeline-body,\r\n.source-body {\r\n    padding-left: 2rem;\r\n}\r\n/*\r\n    -----------------------------------------------\r\n    | Handle | Expand | Data                      |\r\n    |        |        | Name (Name | X)  |\r\n    |        |        | Parameters                |\r\n    _______________________________________________\r\n*/\r\n.action {\r\n    align-items: flex-start;\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.action {\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    padding: ($column-gap * 2);\r\n\r\n    label {\r\n        position: relative;\r\n    }\r\n    label:not(.topcoat-checkbox) {\r\n        display: block;\r\n        margin-bottom: $column-gap;\r\n    }\r\n    &:last-of-type {\r\n        margin-bottom: ($column-gap * 2);\r\n    }\r\n}\r\n\r\n.pipeline-handle,\r\n.action-handle,\r\n.source-handle,\r\n.expand {\r\n    padding-left: $column-gap * 2;\r\n    padding-right: $column-gap * 2;\r\n}\r\n.pipeline-handle,\r\n.action-handle,\r\n.source-handle {\r\n    cursor: row-resize;\r\n}\r\n.expand {\r\n    cursor: pointer;\r\n    i {\r\n        font-style: normal;\r\n    }\r\n    &.open {\r\n        transform: rotateZ(90deg);\r\n    }\r\n}\r\n\r\n.action-data {\r\n    display: block;\r\n    flex-grow: 1;\r\n}\r\n.action-data {\r\n    .action-name {\r\n        display: flex;\r\n        width: 100%;\r\n        input[type=text] {\r\n            flex-grow: 1;\r\n        }\r\n    }\r\n    .action-parameters {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 100%;\r\n\r\n        h3 {\r\n            margin: $column-gap 0;\r\n        }\r\n    }\r\n    .action-parameter {\r\n        display: flex;\r\n        margin-bottom: $column-gap;\r\n\r\n        &__input {\r\n            flex-grow: 1;\r\n        }\r\n        input {\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./app.vue?vue&type=template&id=5ae1ee82&\"\nimport script from \"./app.vue?vue&type=script&lang=js&\"\nexport * from \"./app.vue?vue&type=script&lang=js&\"\nimport style0 from \"./app.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-dialog',{attrs:{\"isOpen\":_vm.isOpen,\"width\":_vm.width,\"height\":_vm.height,\"maxWidth\":_vm.maxWidth,\"maxHeight\":_vm.maxHeight},on:{\"onBackdropClose\":_vm.backdropClose}},[_c(_vm.component,_vm._g(_vm._b({tag:\"component\",on:{\"onClose\":_vm.close}},'component',_vm.props,false),_vm.listeners))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\n\nexport const events = new Vue({ name: 'a-dialog' })","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal-fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpen),expression:\"isOpen\"}],staticClass:\"modal-backdrop\",class:{open: _vm.isOpen},on:{\"click\":_vm.onClose}},[_c('div',{ref:\"modal\",staticClass:\"modal\",style:({ height: _vm.height, width: _vm.width, maxHeight: _vm.maxHeight, maxWidth: _vm.maxWidth }),on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <transition name=\"modal-fade\">\r\n        <div class=\"modal-backdrop\" \r\n            :class=\"{open: isOpen}\"\r\n            @click=\"onClose\"\r\n            v-show=\"isOpen\">\r\n            <div class=\"modal\" v-bind:style=\"{ height, width, maxHeight, maxWidth }\" @click.stop ref=\"modal\">\r\n                <slot />\r\n            </div>\r\n        </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"ADialog\",\r\n    props: {\r\n        isOpen: Boolean,\r\n        width: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        height: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        maxWidth: {\r\n            type: String,\r\n            required: false\r\n        },\r\n        maxHeight: {\r\n            type: String,\r\n            required: false\r\n        }\r\n    },\r\n    watch: {\r\n        isOpen(value) {\r\n            if(!value) {\r\n                return;\r\n            }\r\n            this.$nextTick(() => {\r\n                this.setModalBodyHeight();\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        onClose() {\r\n            this.$emit('onBackdropClose');\r\n        },\r\n        setModalBodyHeight()\r\n        {\r\n            const headerEl = this.$el.querySelector(\".modal-header\");\r\n            const bodyEl = this.$el.querySelector(\".modal-body\");\r\n            const footerEl = this.$el.querySelector(\".modal-footer\");\r\n            const modalStyle = window.getComputedStyle(this.$refs.modal);\r\n            const modalHeight = parseInt(modalStyle.height, 10);\r\n            const modalPadding = parseInt(modalStyle.paddingTop, 10) + parseInt(modalStyle.paddingBottom, 10);\r\n            const headerHeight = headerEl ? headerEl.clientHeight : 0;\r\n            const footerHeight = footerEl ? footerEl.clientHeight : 0;\r\n\r\n            if(bodyEl) {\r\n                bodyEl.style.maxHeight = ((modalHeight - modalPadding) - (headerHeight + footerHeight)) + \"px\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./a-dialog.vue?vue&type=template&id=2c097f5c&\"\nimport script from \"./a-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./a-dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"modal-body\"},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")]),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",[_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('onClose', true)}}},[_vm._v(\" Yes \")]),_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('onClose', false)}}},[_vm._v(\" Cancel \")])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <section class=\"modal-body\">\r\n            {{ message }}\r\n        </section>\r\n        <footer class=\"modal-footer\">\r\n            <slot name=\"footer\">\r\n                <button type=\"button\" class=\"topcoat-button--large\" @click=\"$emit('onClose', true)\">\r\n                    Yes\r\n                </button>\r\n                <button type=\"button\" class=\"topcoat-button--large\" @click=\"$emit('onClose', false)\">\r\n                    Cancel\r\n                </button>\r\n            </slot>\r\n        </footer>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Confirm\",\r\n    props: {\r\n        message: {\r\n            type: String, \r\n            required: true\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1b1723f6&\"\nimport script from \"./confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./confirm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <a-dialog \r\n        :isOpen=\"isOpen\" \r\n        :width=\"width\" \r\n        :height=\"height\" \r\n        :maxWidth=\"maxWidth\" \r\n        :maxHeight=\"maxHeight\"\r\n        @onBackdropClose=\"backdropClose\"\r\n    >\r\n        <component \r\n            :is=\"component\" \r\n            v-bind=\"props\" \r\n            v-on=\"listeners\" \r\n            @onClose=\"close\" />\r\n    </a-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {events} from './events';\r\nimport ADialog from './a-dialog.vue';\r\nimport Confirm from './confirm.vue';\r\n\r\nconst defaultOptions = {\r\n    height: \"auto\",\r\n    width: \"80%\",\r\n    maxWidth: \"80%\",\r\n    maxHeight: \"80%\"\r\n};\r\n\r\nexport default {\r\n    name: 'ADialogRoot',\r\n    components: {\r\n        ADialog\r\n    },\r\n    data: () => ({\r\n        component: null,\r\n        width: \"\",\r\n        height: \"\",\r\n        maxWidth: \"\",\r\n        maxHeight: \"\",\r\n        props: null,\r\n        listeners: null\r\n    }),\r\n    computed: {\r\n        isOpen() {\r\n            return !!this.component;\r\n        }\r\n    },\r\n    mounted () {\r\n        events.$on('openconfirm', this.openConfirm);\r\n        events.$on('open', this.open);\r\n        events.$on('close', this.close);\r\n    },\r\n    methods: {\r\n        openConfirm({ onYes, onCancel, message, ...args }) \r\n        {\r\n            this.open({ \r\n                component: Confirm, \r\n                listeners: {\r\n                    onClose: (isYes) => {\r\n                        if(isYes)\r\n                            onYes && onYes();\r\n                        else \r\n                            onCancel && onCancel();\r\n                    }\r\n                },\r\n                props: {\r\n                    message\r\n                },\r\n                ...args\r\n            });\r\n        },\r\n        open({ width, height, maxWidth, maxHeight, component, props = null, listeners = null }) \r\n        {\r\n            if(this.isOpen) {\r\n                console.warn(\"Dialog already open. Ignoring open: \" + component.name);\r\n                return;\r\n            }\r\n            console.log(`Dialog open.`);\r\n\r\n            this.width = width || defaultOptions.width;\r\n            this.height = height || defaultOptions.height;\r\n            this.maxWidth = maxWidth || defaultOptions.maxWidth;\r\n            this.maxHeight = maxHeight || defaultOptions.maxHeight;\r\n            this.component = component;\r\n            this.props = props;\r\n            this.listeners = listeners;\r\n        },\r\n        backdropClose() {\r\n            // Force close\r\n            if(this.listeners && this.listeners.onClose) {\r\n                this.listeners.onClose();\r\n            }\r\n            this.close();\r\n        },\r\n        /**\r\n         * IMPORTANT: Should only be called by child component 'onClose' event.\r\n         * Otherwise previous open() calls could be left hanging (e.g. waiting for a callback)\r\n         */\r\n        close() {\r\n            console.log(`Dialog close.`);\r\n\r\n            this.component = null;\r\n            this.props = null;\r\n            this.listeners = null;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .modal-backdrop {\r\n        position: fixed;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background-color: rgba(0, 0, 0, 0.4);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 2;\r\n    }\r\n\r\n    .modal {\r\n        background: #444;\r\n        overflow-x: auto;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 1rem;\r\n    }\r\n\r\n    .modal-body {\r\n        min-height: 3rem;\r\n        overflow: auto;\r\n        padding: .25rem;\r\n        position: relative;\r\n    }\r\n\r\n    .modal-header {\r\n        padding-bottom: 1rem;\r\n    }\r\n\r\n    .modal-footer {\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        padding-top: 1rem;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./a-dialog-root.vue?vue&type=template&id=1bc09963&\"\nimport script from \"./a-dialog-root.vue?vue&type=script&lang=js&\"\nexport * from \"./a-dialog-root.vue?vue&type=script&lang=js&\"\nimport style0 from \"./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ADialogRoot from './a-dialog-root.vue';\r\nimport {events} from './events';\r\n\r\nconst Plugin = {\r\n    install (Vue, globalOptions = {}) \r\n    {\r\n        Vue.prototype.$dialog = {\r\n            /**\r\n             * Opens a simple message confirmation dialog\r\n             * @param {string} message message to display\r\n             * @param {function} onYes callback for Yes answer\r\n             * @param {function} onCancel callback for Cancel answer\r\n             */\r\n            openConfirm(options) {\r\n                events.$emit('openconfirm', options);\r\n            },\r\n            open (options) {\r\n                events.$emit('open', options);\r\n            }\r\n        };\r\n\r\n        Vue.component('ADialogRoot', ADialogRoot)\r\n    }\r\n}\r\n  \r\nexport default Plugin","import fs from 'fs';\r\nimport upath from 'upath';\r\nimport { configure, setInteractionMode, extend } from 'vee-validate';\r\nimport _ from '../utils';\r\n\r\nsetInteractionMode(\"custom\", context => {\r\n    return {\r\n        on: [\"change\", \"blur\"]\r\n    }\r\n});\r\n\r\nextend(\"integer\", {\r\n    validate(value, { min, max }) {\r\n        value = parseInt(value, 10);\r\n        min = parseInt(min, 10);\r\n        max = parseInt(max, 10);\r\n\r\n        let message = `Must be an integer`;\r\n        if(_.isNumber(min) && _.isNumber(max)) {\r\n            message += ` between ${min} and ${max}`;\r\n        } else if(_.isNumber(min)) {\r\n            message += ` greater than or equal to ${min}`;\r\n        } else if(_.isNumber(max)) {\r\n            message += ` less than or equal to ${max}`;\r\n        }\r\n        if(!_.isNumber(value)) {\r\n            return message;\r\n        }\r\n        if(_.isNumber(min) && value < min) {\r\n            return message;\r\n        }\r\n        if(_.isNumber(max) && value > max) {\r\n            return message;\r\n        }\r\n        return true;\r\n    },\r\n    params: ['min', 'max']\r\n})\r\n\r\nextend('required', {\r\n    validate (value) {\r\n        return {\r\n            required: true,\r\n            valid: ['', null, undefined].indexOf(value) === -1\r\n        };\r\n    },\r\n    message: 'This is required',\r\n    computesRequired: true\r\n});\r\n\r\nextend('pathexists', { \r\n    async validate(value) \r\n    {\r\n        const exists = await new Promise(resolve => {\r\n            fs.access(value, error => {\r\n                resolve(!error);\r\n            });\r\n        });\r\n        if(exists) {\r\n            return true;\r\n        }\r\n        return {\r\n            valid: false\r\n        }\r\n    },\r\n    message: \"Path does not exist\"\r\n});\r\n\r\nextend('pathunc', {\r\n    validate(value, args) {\r\n        const allowed = typeof args.allowed === \"boolean\" ? args.allowed : JSON.parse(args.allowed.toLowerCase());\r\n        const path = value.trim();\r\n        const isUnc = path.startsWith(\"//\") || path.startsWith(\"\\\\\\\\\");\r\n        return !(isUnc && !allowed)\r\n    },\r\n    params: ['allowed'],\r\n    message: `Path cannot be a UNC path.`\r\n})\r\n\r\nextend('pathrelative', {\r\n    validate(value, args) {\r\n        const allowed = typeof args.allowed === \"boolean\" ? args.allowed : JSON.parse(args.allowed.toLowerCase());\r\n        const path = value.trim();\r\n        if(!allowed) {\r\n            return upath.isAbsolute(path);\r\n        }\r\n        return true;\r\n    },\r\n    params: ['allowed'],\r\n    message: `Path must be absolute.`\r\n})\r\n\r\nextend('custom', {\r\n    params: ['fn'],\r\n    validate(value, params) {\r\n        const result = params.fn(value);\r\n        return result.valid ? result.valid : result.message;\r\n    }\r\n});\r\n\r\nconsole.log(\"Validation imported\");\r\nexport default { \r\n    init: () => {\r\n        return Promise.resolve();\r\n    } \r\n};\r\n\r\n\r\n// extend(\"uniq\", {\r\n//     validate: async value => {\r\n//       const response = await checkEmail(value);\r\n  \r\n//       if (response.valid) {\r\n//         return true;\r\n//       }\r\n  \r\n//       return {\r\n//         valid: false,\r\n//         data: {\r\n//           // this will be used to interpolate the message.\r\n//           serverMessage: response.errors[0]\r\n//         }\r\n//       };\r\n//     },\r\n//     // same prop as returned in the `data` object.\r\n//     message: `{serverMessage}`\r\n// });\r\n\r\n// /**\r\n//  * Master validation instance. Keeps track of validation components and their validity. \r\n//  * Should be imported at root <form> component and instance passed down to child components.\r\n//  */\r\n// class Validation\r\n// {\r\n//     constructor(root) {\r\n//         this.root = root;\r\n//         this.validatorComponents = [];\r\n//     }\r\n//     register(validator) \r\n//     {\r\n//         this.validatorComponents.push(validator);\r\n//     }\r\n//     unregister(validator) \r\n//     {\r\n//         this.validatorComponents = this.validatorComponents.filter(c => c !== validator);\r\n//     }\r\n//     isValid() {\r\n//         return this.validatorComponents.every(c => c.isValid());\r\n//     }\r\n// }\r\n// Validation.mixin = {\r\n//     directives: {\r\n//         \"errors\": {\r\n//             bind: function(el, binding, vnode) {\r\n//                 var s = JSON.stringify\r\n//                 el.innerHTML =\r\n//                 'name: '       + s(binding.name) + '<br>' +\r\n//                 'value: '      + s(binding.value) + '<br>' +\r\n//                 'expression: ' + s(binding.expression) + '<br>' +\r\n//                 'argument: '   + s(binding.arg) + '<br>' +\r\n//                 'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//                 'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//             }\r\n//         }\r\n//     },\r\n//     props: {\r\n//         validation: Object\r\n//     },\r\n//     data() {\r\n//         return {\r\n//             errors: {}\r\n//         }\r\n//     },\r\n//     beforeCreate() { \r\n//         // Make errors observable\r\n//         this.$validator = new Validator(this.errors);  \r\n\r\n//         // Register with Master \r\n//         this.validation = this.validation || new Validation();\r\n//         this.validation.register(this.$validator);\r\n//     },\r\n//     beforeDestroy() {\r\n//         // Un-Register with Master \r\n//         this.validation.unregister(this.$validate);\r\n//     }\r\n// }\r\n// /**\r\n//  * Holds current component errors. An instance is created on each component using the Validation.mixin\r\n//  */\r\n// class Validator\r\n// {\r\n//     constructor(validationErrors) {\r\n//         this._validationErrors = validationErrors;\r\n//     }\r\n//     /**\r\n//      * Set the validity/message of a given field\r\n//      * @param {string} key the name of the form field \r\n//      * @param {*} message the validation message or empty if valid\r\n//      */\r\n//     pushError(key, message) \r\n//     {\r\n//         this._validationErrors[key] = message;\r\n//     }\r\n//     isValid() \r\n//     {\r\n//         return Object.values(this._validationErrors).filter(error => !!error).length == 0;\r\n//     }\r\n// }\r\n\r\n// export default Validation;  \r\n\r\n\r\n\r\n\r\n\r\n// Vue.directive(\"demo\", {\r\n//     bind: function(el, binding, vnode) {\r\n//         var s = JSON.stringify\r\n//         el.innerHTML =\r\n//         'name: '       + s(binding.name) + '<br>' +\r\n//         'value: '      + s(binding.value) + '<br>' +\r\n//         'expression: ' + s(binding.expression) + '<br>' +\r\n//         'argument: '   + s(binding.arg) + '<br>' +\r\n//         'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//         'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//     }\r\n// });","import process from 'process';\r\nimport Vue from 'vue';\r\nimport App from './app.vue';\r\nimport Dialog from './dialog';\r\nimport Host from './host';\r\nimport HostScriptListener from './host/hostScriptListener';\r\nimport Logger from './console';\r\nimport Server from './server';\r\nimport global from './global';\r\nimport Validation from './validation';\r\nimport Store from './store';\r\n\r\nglobal.csInterface.setWindowTitle(\"Mario v\" + global.appVersion);\r\n\r\n// Fixes module resolution issues for dependencies within node_modules\r\nprocess.chdir(global.appWorkingPath);\r\n__dirname = global.appWorkingPath;\r\n\r\n\r\nVue.config.productionTip = false;\r\nVue.config.devtools = true;\r\nVue.use(Dialog);\r\n\r\nconst destroy = () => {\r\n    Server.destroy();\r\n    Host.destroy();\r\n    HostScriptListener.destroy();\r\n    Logger.destroy();\r\n};\r\n\r\nconst create = async () => {\r\n    await Store.init();\r\n    await Logger.init();\r\n    await Server.init();\r\n    await Host.init(); \r\n    await HostScriptListener.init();\r\n    await Validation.init();\r\n\r\n    window.vue = new Vue({\r\n        render: h => h(App),\r\n        beforeDestroy: destroy\r\n    }).$mount('#app');\r\n};\r\n\r\ncreate();\r\n\r\nwindow.addEventListener(\"beforeunload\", destroy);\r\n\r\n/**  \r\n    beforeCreate - about to be initialized. data is not yet reactive \r\n    created - events and data observation setup. not yet in native DOM. access data here, not in mounting hooks \r\n    beforeMount - right before render happens. template compiled and virtual DOM update by vue.  \r\n    mounted - $el added and native DOM updated. do modify DOM for integration of non-Vue libraries here.\r\n    beforeUpdate - data has changed and update cycle starting. do get data before actually is rendered. \r\n    updated - data changed and native DOM updated. do access DOM after property changes here. \r\n    beforeDestroy - about to teardown. still fully present and functional. do cleanup events, and subscriptions \r\n    destroyed - nothing left on your component. do last minute cleanups, etc. \r\n*/\r\n\r\n\r\n// Vue.directive(\"print\", {\r\n//     bind: function(el, binding, vnode) {\r\n//         var s = JSON.stringify\r\n//         el.innerHTML =\r\n//         'name: '       + s(binding.name) + '<br>' +\r\n//         'value: '      + s(binding.value) + '<br>' +\r\n//         'expression: ' + s(binding.expression) + '<br>' +\r\n//         'argument: '   + s(binding.arg) + '<br>' +\r\n//         'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//         'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//     }\r\n// });","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=style&index=0&lang=scss&\"","import child_process from 'child_process';\r\nimport upath from 'upath';\r\nimport appGlobal from '../global';\r\nimport store from '../store';\r\n\r\n/*\r\n    Creative Suite Extendscript Interface / Decorator\r\n*/\r\nclass Host \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * To reduce coupling with GUI, don't use this raw interface in Vue components\r\n         */\r\n        this.interface = new CSInterface();\r\n        this._initialized = false;\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        if(this._initialized) return;\r\n        this._initialized = true;\r\n\r\n        // Host Environment Setup\r\n        this.importScript(\"utils.jsx\");\r\n        this.importScript(\"polyfil.jsx\");\r\n        this.importScript(\"console.jsx\");\r\n        this.importScript(\"json.jsx\"); \r\n        this.importScript(\"events.jsx\");\r\n        this.importScript(\"image.jsx\"); \r\n        \r\n        // Listeners\r\n        this.interface.addEventListener(\"log\", event => {\r\n            console.log(\"Jsx Log: \", event.data);\r\n        });\r\n        this.interface.addEventListener(\"exec\", this.onExec.bind(this));\r\n        this.interface.addEventListener(\"setTimeout\", this.onSetTimeout.bind(this));\r\n\r\n        console.log(`Host initialized.\\n\r\n            Install Path: ${appGlobal.appInstallPath}\\n\r\n            Working Path: ${appGlobal.appWorkingPath}\\n\r\n            Default Log Path: ${appGlobal.appDefaultLogPath}\\n\r\n            Default Config Path: ${appGlobal.appDefaultConfigPath}\\n\r\n            Builtin Action Path: ${appGlobal.appBuiltinActionsPath}\\n\r\n            Creative Suite API Version: ${appGlobal.adobeCEPApiVersion}\\n\r\n            OS: ${appGlobal.os}\\n\r\n            App Version: ${appGlobal.appVersion}`);\r\n            \r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        \r\n    }\r\n    /*---------------------\r\n            Events\r\n    ---------------------*/\r\n    dispatchEvent(eventName, data) \r\n    {\r\n        const scope = \"APPLICATION\";\r\n        const event = new CSEvent(eventName, scope);\r\n              event.data = data;\r\n        this.interface.dispatchEvent(event);\r\n    }\r\n    onSetTimeout(event)\r\n    {\r\n        var data = event.data.split(\",\");\r\n        var callbackId = Number(data[0]);\r\n        var delay = Number(data[1]);\r\n\r\n        var _this = this;\r\n        setTimeout(function()\r\n        {\r\n            // Since ExtendScript doesn't have a setTimeout. We're hijacking the event loop here.\r\n            _this.runJsxWithThrow(`executeSetTimeoutCallback(${callbackId})`)\r\n        }, delay);\r\n    }\r\n    onExec(event) \r\n    {\r\n        var data = event.data.split(\",\");\r\n        var callbackId = Number(data[0]);\r\n        var command = data[1];\r\n\r\n        console.log(\"Jsx Exec: \" + command);\r\n        child_process.exec(command, {\r\n            cwd: store.general.pathToUserActions,\r\n            timeout: 5 * 60 * 1000 // terminate long running processes\r\n        }, \r\n        (err, stdout, stderr) => \r\n        {\r\n            if(err) {\r\n                console.error(err);\r\n                return;\r\n            }\r\n            stdout = stdout.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n').replace(/\\r/g, '');\r\n            stderr = stderr.replace(/\\\\/g, '\\\\\\\\').replace(/\\n/g, '\\\\n').replace(/\\r/g, '');\r\n            var jsx = `executeExecCallback(${callbackId},\"${stdout}\",\"${stderr}\");`;\r\n            this.runJsxWithThrow(jsx);\r\n        });\r\n    }\r\n    /*---------------------\r\n        Extend Script\r\n    ---------------------*/\r\n    // NOTES:\r\n    // ActionReference is what to perform the action on within Photoshop  (e.g. document, marque tool, etc)\r\n    // The Action Manager system keeps track of a large number of Descriptors keys relative to the status of:\r\n    // - The Application\r\n    // - Documents\r\n    // - Layers\r\n    // - Channels\r\n    // - Paths\r\n    // - History\r\n    // - ActionSets and Actions \r\n\r\n    /**\r\n     * Import/Execute an ExtendScript file, such as a library.\r\n     * @param {string} fileName - name of file relative to app distribution path\r\n     */\r\n    async importScript(fileName) \r\n    {\r\n        const importPath = upath.join(appGlobal.appWorkingPath, fileName);\r\n        const result = await this.runJsx(`importJsx(\"${importPath}\");`);\r\n        console.log(\"Jsx File Imported: \" + importPath + \" Result: \" + result);\r\n    }\r\n    /**\r\n     * Evaluate ExtendScript/JSX script on Host\r\n     * @param {string} script \r\n     * @returns {Promise}\r\n     */\r\n    runJsx(script) \r\n    {\r\n        return new Promise(resolve => {\r\n            this.interface.evalScript(script, result => {\r\n                resolve(result);\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * Evaluate ExtendScript/JSX script on Host and throw an Exception if string \"error\" or \"exception\" is in the result.\r\n     * NOTE: If result is 'Evalscript error.' there may be a syntax error in the script string\r\n     * @param {string} script \r\n     * @returns {Promise}\r\n     */\r\n    runJsxWithThrow(script) \r\n    {\r\n        return new Promise((resolve, reject) => \r\n        {\r\n            this.interface.evalScript(`(function(){\r\n                try {\r\n                    ${script}\r\n                } catch(e) {\r\n                    return e.toString();\r\n                }\r\n            }())`, \r\n            (result) => {\r\n                const lowerCaseResult = result.toLowerCase();\r\n                if(lowerCaseResult.includes(\"error\") || lowerCaseResult.includes(\"exception\")) {\r\n                    reject(`\\nJsx:\\n${script}\\nException in Result:\\n${result}\\n`);\r\n                } else {\r\n                    resolve(result);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * Run the ExtendScript action function by the given name\r\n     * @param {string} functionName \r\n     * @param {number|string|boolean|object|array} parameters \r\n     * @returns {Promise}\r\n     */\r\n    runActionWithParameters(functionName, parameters)\r\n    {\r\n        console.log(`Action: ${functionName}`);\r\n        const parametersJson = JSON.stringify(parameters);\r\n        return this.runJsxWithThrow(`\r\n            var result = ${functionName}(${parametersJson});\r\n            return result;\r\n        `);\r\n    }\r\n    \r\n    /**\r\n     * Converts an Action Manager charId to a stringId\r\n     * Returns empty string if error occurred.\r\n     * @param {string} charId \r\n     */\r\n    convertCharToStringId(charId) {\r\n        return this.runJsx(`t2s(c2t('${charId}'))`)\r\n        .then(result => {\r\n            return result.includes(\"error\") ? \"\" : result;\r\n        });\r\n    }\r\n    /**\r\n     * Converts an Action Manager stringId to a charId\r\n     * Returns empty string if error occurred.\r\n     * @param {string} charId \r\n     */\r\n    convertStringToCharId(stringId) {\r\n        return this.runJsx(`t2c(s2t('${stringId}'))`)\r\n        .then(result => {\r\n            return result.includes(\"error\") ? \"\" : result;\r\n        });\r\n    }\r\n}\r\n\r\nexport default new Host();","\"use strict\";\r\n\r\n\r\nfunction Enum(enumArr, offset) \r\n{\r\n    if(!(this instanceof Enum)) { return new Enum(enumArr, offset); }\r\n\r\n    return create_.call(this, enumArr, offset);\r\n}\r\n/** Essentially the enumeration starting value. Default is 0 */\r\nEnum.prototype.offset = 0;\r\n/** Return a copy of this.keys */\r\nEnum.prototype.toArray = function() {\r\n    return this.keys.slice(0);\r\n};\r\n/** Returns whether the given value is in the enumeration */\r\nEnum.prototype.isValid = function(val) {\r\n    return Number.isInteger(val) && (val - this.offset) < this.keys.length && (val - this.offset) >= 0;\r\n};\r\n/** Returns the key associated with the given value, else undefined. */\r\nEnum.prototype.toKey = function(val) {\r\n    if( !this.isValid(val) ) { return undefined; }\r\n    return this.keys[val - this.offset];\r\n};\r\n/** Returns the value associated with the given key, else undefined. */\r\nEnum.prototype.parse = function(key) {\r\n    if( !(typeof key === \"string\") ) { return undefined; }\r\n\r\n    key = key.trim().toUpperCase();\r\n    for(var i = 0; i < this.keys.length; ++i) {\r\n        if( this.keys[i].toUpperCase() === key ) { \r\n            return i + this.offset; \r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n/**\r\n * TODO: Needs Performance Improvement\r\n * @param {*} enumArr \r\n * @param {*} offset \r\n */\r\nfunction create_(enumArr, offset) \r\n{\r\n    if(!Array.isArray(enumArr)) {\r\n        throw new Error(\"Enum: create() Invalid parameter type. Expected Array.\");\r\n    }\r\n\r\n    var validName = /[A-Z_][A-Z0-9_]*/gi;\r\n\r\n    // Define array keys as properties\r\n    var enumer = this;\r\n        enumer.keys = [];\r\n        enumer.keys.length = enumArr.length;\r\n\r\n    if(Number.isInteger(offset)) {\r\n        enumer.offset = offset;\r\n    } else {\r\n        offset = 0;\r\n    }\r\n        \r\n    var nextKey;\r\n    for(var i = 0; i < enumArr.length; ++i) {\r\n        if( typeof enumArr[i] !== \"string\" || !validName.test(enumArr[i]) ) {\r\n            throw new Error(\"Enum: create() Not a string or Invalid name: \" + enumArr[i]);\r\n        }\r\n        validName.lastIndex = 0;\r\n        \r\n        nextKey = enumArr[i];\r\n        enumer.keys[i] = nextKey;\r\n        enumer[ nextKey ] = i + offset;       \r\n    }\r\n\r\n    // TODO: \r\n    // Object.defineProperty(this, 'enumValues', {\r\n    //     value: [],\r\n    //     configurable: false,\r\n    //     writable: false,\r\n    //     enumerable: true\r\n    // });\r\n    return enumer;\r\n}\r\n\r\nexport default Enum;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{domProps:{\"innerHTML\":_vm._s(_vm.dots)}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <span v-html=\"dots\"></span>\r\n</template>\r\n\r\n<script>\r\nlet handle = 0;\r\n\r\nexport default {\r\n    name: \"WaitDots\", \r\n    props: {\r\n        intervalMs: {\r\n            type: Number,\r\n            default: 500\r\n        }\r\n    },\r\n    data() {\r\n        return { \r\n            dotCount: 1,\r\n            dots: \".\" \r\n        };\r\n    },\r\n    mounted() {\r\n        handle = setInterval(() => {\r\n            this.dots = \".\".repeat(this.dotCount);\r\n            this.dots += \"&nbsp;\".repeat(4 - this.dotCount);\r\n            this.dotCount = (this.dotCount + 1) % 4;\r\n        }, this.intervalMs);\r\n    },\r\n    beforeDestroy() {\r\n        clearInterval(handle);\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wait-dots.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wait-dots.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wait-dots.vue?vue&type=template&id=6cb2c8b3&\"\nimport script from \"./wait-dots.vue?vue&type=script&lang=js&\"\nexport * from \"./wait-dots.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"util\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","\r\n\r\n/**\r\n * Represents a single Image process\r\n */\r\nexport default class Image \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * The path value that initiated this Image process.\r\n         * Depending on the File Source, this will be one of the following:\r\n         * 1) the absolute input file/directory path\r\n         * 2) the file/document name when full path is not available (e.g. an un-saved active document).\r\n         * 3) empty string (e.g. File Source is Blank)\r\n         */\r\n        this.initialInputImagePath = \"\";\r\n        /**\r\n         * Same as initialInputImagePath except when initialInputImagePath is a json data file\r\n         * in which case, this value is sourced from the json data.\r\n         * NOTE: an invalid/blank inputImagePath will cause an error when using a json input file\r\n         */\r\n        this.inputImagePath = \"\";\r\n        /**\r\n         * The parent directory of initialInputImagePath, or blank if not available \r\n         */\r\n        this.inputDirectory = \"\";\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where output files should be written\r\n         */\r\n        this.outputDirectory = \"\";\r\n        this.useOutputDirectory = false;\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where processed input files will be moved\r\n         */\r\n        this.processedDirectory = \"\";\r\n        this.useProcessedDirectory = false;\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where input files and error loges will be moved\r\n         */\r\n        this.errorDirectory = \"\";\r\n        this.useErrorDirectory = false;\r\n        /**\r\n         * External data (stored outside file) metadata necessary for processing, as sourced from JSON\r\n         */\r\n        this.data = {};     \r\n        /**\r\n         * Internal data (Metadata stored in the file)\r\n         */\r\n        this.metadata = {}; \r\n        /**\r\n         * (Optional) pipelines that should process this Image\r\n         */\r\n        this.pipelines = [];\r\n        /**\r\n         * The current pipeline processing this Image\r\n         */\r\n        this.pipeline = \"\";\r\n        /**\r\n         * The current job id for this Image (may be sourced from JSON) */\r\n        this.jobId = \"\";\r\n        /**\r\n         * An array of error messages encountered during processing, if applicable\r\n         * @type {Array<string>} \r\n         */\r\n        this.errors = [];\r\n    }\r\n}\r\n\r\n","import upath from 'upath';\r\nimport fs from 'fs';\r\nimport fsx from '../fsx';\r\nimport Image from './image';\r\n\r\nexport default class ImageFileMover \r\n{\r\n    constructor() {}\r\n\r\n    /**\r\n     * Moves the given Image instances and associated files to the given processed directory.\r\n     * Also writes any errors to the output directory\r\n     * @param {Array<Image>} images \r\n     */\r\n    async move(images) \r\n    {\r\n        console.log(`Moving ${images.length} processed images...`);\r\n        for(const image of images)\r\n        {\r\n            if(image.errors.length) {\r\n                const errorDirectory = image.errorDirectory || image.inputDirectory;\r\n                if(errorDirectory) {\r\n                    this._writeError(image, errorDirectory, image.errors.join('\\n'));\r\n                }\r\n                if(image.useErrorDirectory) {\r\n                    await this._moveImage(image, image.errorDirectory);\r\n                }\r\n            } else if(image.useProcessedDirectory) {\r\n                // TODO: Uncomment next line after Debugging\r\n                await this._moveImage(image, image.processedDirectory);\r\n            }\r\n        }\r\n        console.log(`Move completed.`);\r\n    }\r\n    /**\r\n     * @param {Image} image \r\n     * @param {string} toDirectory target directory. Absolute or relative to input or data source path.\r\n     */\r\n    async _moveImage(image, toDirectory)\r\n    {\r\n        if(!upath.isAbsolute(toDirectory)) \r\n        {\r\n            if(!image.inputDirectory) {\r\n                console.log(\"Image not moved. Move directory was relative but input directory was not defined.\");\r\n                return Promise.resolve();\r\n            } else {\r\n                toDirectory = upath.join(image.inputDirectory, toDirectory);\r\n            }\r\n        }\r\n\r\n        this._moveToDirectory(image, toDirectory);\r\n    }\r\n    _moveToDirectory(image, directory) \r\n    {\r\n        const paths = this._getImagePaths(image);\r\n        console.log(`Moving paths:\\n\\t${paths.join('\\n\\t')}\\nTo directory\\n\\t${directory}`);\r\n\r\n        for(const path of paths) \r\n        {\r\n            const basename = upath.basename(path);\r\n            const toPath = upath.join(directory, basename);\r\n            fsx.overwrite(path, toPath, err => {\r\n                if(err) {\r\n                    const message = err + \"\\nImage path could not be moved to \" + toPath;\r\n                    if(err.code == \"ENOENT\") {\r\n                        console.log(message);\r\n                    } else {\r\n                        console.warn(message);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _getImagePaths(image) \r\n    {\r\n        const paths = [\r\n            image.inputImagePath,\r\n            (image.initialInputImagePath !== image.inputImagePath) ? image.initialInputImagePath : null\r\n        ];\r\n        return paths.filter(p => !!p); // remove empty paths\r\n    }\r\n    _writeError(image, directory, message) \r\n    {\r\n        if(!message) {\r\n            return;\r\n        }\r\n        const logPath = upath.join(directory, \"error.logs\");\r\n        fs.writeFile(logPath, [   \r\n            `\\n`,\r\n            `Time: ${new Date().toLocaleString()}`,\r\n            `initialInputImagePath: ${image.initialInputImagePath}`, \r\n            `inputImagePath: ${image.inputImagePath}`, \r\n            message\r\n        ].join(`\\n`), \r\n        {\r\n            flag: 'a'\r\n        },\r\n        err => {\r\n            if(err) \r\n                console.error(err + \"\\nCould not write Image error to \" + logPath);\r\n        });\r\n    }\r\n}","import upath from 'upath';\r\n\r\n/**\r\n * Returns true if path starts with // or \\\\ \r\n * @param {string} val the path string\r\n */\r\nfunction isUncPath(val) \r\n{\r\n    val = val.trim();\r\n    return val.startsWith(\"//\") || val.startsWith(\"\\\\\\\\\");\r\n}\r\n\r\n/**\r\n * Normalizes and compares the two paths to determine \r\n * if the given child is a child path of the given ancestor\r\n * @param {string} descendant \r\n * @param {string} ancestor \r\n */\r\nfunction isAncestor(ancestor, descendant)\r\n{\r\n    const relative = upath.relative(ancestor, descendant);\r\n    // If not ancestor, beginning of path will contain directory traversal (e.g. ../../)\r\n    return descendant.endsWith(relative);\r\n}\r\n\r\n/**\r\n * Same as upath.dirname except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction dirname(val)\r\n{\r\n    return _preserveUnc(val, upath.dirname(val));\r\n}\r\n/**\r\n * Same as upath.normalize except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction normalize(val)\r\n{\r\n    return _preserveUnc(val, upath.normalize(val));\r\n}\r\n/**\r\n * Same as upath.join except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction join(firstPart)\r\n{\r\n    return _preserveUnc.call(null, firstPart, upath.join.apply(upath, arguments));\r\n}\r\n\r\nfunction _preserveUnc(originalPath, newPath) \r\n{\r\n    if(isUncPath(originalPath)) {\r\n        return newPath.charAt(0) + newPath;\r\n    } \r\n    return newPath;\r\n}\r\n\r\nexport default {\r\n    isAncestor,\r\n    isUncPath,\r\n    dirname,\r\n    normalize, \r\n    join\r\n}","import exiftool from 'node-exiftool';\r\nimport upath from 'upath';\r\nimport fs from 'fs';\r\nimport Image from './image';\r\nimport fsx from '../fsx';\r\nimport uncSafePath from '../unc-safe-path';\r\nimport _ from '../utils';\r\n\r\n\r\n\r\nexport default class ImageFileReader\r\n{\r\n    /**\r\n     * Create a reader used to generate an Image instance for processing by Adobe host\r\n     */\r\n    constructor() {}\r\n\r\n    /**\r\n     * Create a new Image instance for processing by Adobe host\r\n     * NOTE: When 'path' is a json file, directories will be automatically created for output, processed, and error directories\r\n     * @param {String} path the image path, json file path, document name (e.g. when using Active Document), or empty string. Path should be absolute\r\n     * @param {ImageSource} imageSource the image source that produced the path \r\n     * @param {Array<string>} targetPipelines\r\n     */\r\n    async read(path, imageSource, targetPipelines)\r\n    {\r\n        let { useOutputDirectory, useProcessedDirectory, useErrorDirectory } = imageSource;\r\n        let { outputDirectory, processedDirectory, errorDirectory } = imageSource;\r\n        let readMetadata = imageSource.readMetadata;\r\n\r\n        // Sanity check\r\n        outputDirectory = useOutputDirectory ? outputDirectory : \"\";\r\n        processedDirectory = useProcessedDirectory ? processedDirectory : \"\";\r\n        errorDirectory = useErrorDirectory ? errorDirectory : \"\";\r\n\r\n        let initialInputImagePath = path || \"\";\r\n        let inputImagePath = initialInputImagePath;\r\n        let inputDirectory = this._isPathDefinedAndAbsolute(path) ? uncSafePath.dirname(path) : \"\";\r\n        let pipelines = targetPipelines;\r\n        let jobId = _.guid();\r\n        let data = {};\r\n        let metadata = {};\r\n        let image = new Image();\r\n\r\n        try \r\n        {\r\n            if(this._doesFileExist(inputImagePath)) \r\n            {\r\n                if(this._doesPathHaveJsonExtension(inputImagePath)) \r\n                {\r\n                    data = await this._readJson(inputImagePath);\r\n                    pipelines = data.pipelines || pipelines;\r\n                    pipelines = (typeof pipelines === \"string\") ? pipelines.split(',') : pipelines;\r\n                    readMetadata = (typeof data.readMetadata === \"boolean\") ? data.readMetadata : readMetadata;\r\n                    jobId = data.jobId || jobId;\r\n\r\n                    // Grab new image source path and other paths from json, if available\r\n                    inputImagePath = data.inputImagePath || \"\";\r\n                    outputDirectory = data.outputDirectory || outputDirectory;\r\n                    processedDirectory = data.processedDirectory || processedDirectory;\r\n                    errorDirectory = data.errorDirectory || errorDirectory;\r\n\r\n                    inputImagePath = this._ensureAbsolutePath(inputImagePath, inputDirectory);\r\n                    outputDirectory = this._ensureAbsolutePath(outputDirectory, inputDirectory);\r\n                    processedDirectory = this._ensureAbsolutePath(processedDirectory, inputDirectory);\r\n                    errorDirectory = this._ensureAbsolutePath(errorDirectory, inputDirectory);\r\n\r\n                    useOutputDirectory = await this._makeDirectory(outputDirectory);\r\n                    useProcessedDirectory = await this._makeDirectory(processedDirectory);\r\n                    useErrorDirectory = await this._makeDirectory(errorDirectory);\r\n\r\n                    // Blank paths if directory doesn't exist\r\n                    outputDirectory = useOutputDirectory ? outputDirectory : \"\";\r\n                    processedDirectory = useProcessedDirectory ? processedDirectory : \"\";\r\n                    errorDirectory = useErrorDirectory ? errorDirectory : \"\";\r\n\r\n                    if (uncSafePath.isAncestor(inputImagePath, inputDirectory) \r\n                        && (useProcessedDirectory || useErrorDirectory)) \r\n                    {\r\n                        // Otherwise ImageFileMover would attempt to move the root/source directory\r\n                        // This rule should probably be thrown inside of ImageFileMover\r\n                        throw new Error(`JSON inputImagePath cannot be ancestor directory of or same as input directory when using errorDirectory or processedDirectory options.`);\r\n                    }\r\n                }\r\n                if(this._doesFileExist(inputImagePath) && readMetadata === true) \r\n                {\r\n                    metadata = await this._readMetadata(inputImagePath);\r\n                }\r\n            }\r\n        }\r\n        catch(e) \r\n        {\r\n            image.errors.push(e.toString());\r\n        }\r\n        finally \r\n        {\r\n            image.jobId = jobId;\r\n            image.initialInputImagePath = initialInputImagePath;\r\n            image.inputImagePath = inputImagePath;        \r\n            image.inputDirectory = inputDirectory;\r\n            image.outputDirectory = outputDirectory;\r\n            image.processedDirectory = processedDirectory;\r\n            image.errorDirectory = errorDirectory;\r\n            image.useOutputDirectory = useOutputDirectory;\r\n            image.useProcessedDirectory = useProcessedDirectory;\r\n            image.useErrorDirectory = useErrorDirectory;\r\n            image.data = data;\r\n            image.metadata = metadata;\r\n            image.pipelines = pipelines;\r\n\r\n            return image;\r\n        }\r\n    }\r\n    /**\r\n     * Reads any json from the given data source, if it is json and it exists.\r\n     * @returns {object}\r\n     */\r\n    async _readJson(jsonFilePath)\r\n    {\r\n        return new Promise(resolve => {\r\n            fs.readFile(jsonFilePath, { encoding: 'utf8' }, (error, data) => {\r\n                if(error) {\r\n                    throw new Error(`Image json ${jsonFilePath} could not be read.`);\r\n                }\r\n                resolve(JSON.parse(data));\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Reads any metadata from the given source, if it is a file\r\n     * @returns {object}\r\n     */\r\n    async _readMetadata(inputImagePath)\r\n    {\r\n        let ep = new exiftool.ExiftoolProcess();\r\n        let processid = 0;\r\n\r\n        return ep.open()\r\n        .then(pid => {\r\n            processid = pid;\r\n        })\r\n        .then(() => ep.readMetadata(inputImagePath, ['-File:all']))\r\n        .then(metadata => {\r\n            let fileMetadata = metadata.data[0];\r\n            return fileMetadata;\r\n        })\r\n        .finally(() => {\r\n            ep.close();\r\n        });\r\n    }\r\n    _isPathDefinedAndAbsolute(path) {\r\n        return typeof path === \"string\" && path.length > 0 && upath.isAbsolute(path);\r\n    }\r\n    _ensureAbsolutePath(path, parentDirectory) {\r\n        if(!path) {\r\n            return \"\";\r\n        }\r\n        return upath.isAbsolute(path) ? path : upath.join(parentDirectory, path);\r\n    }\r\n    _doesPathHaveJsonExtension(path) {\r\n        return upath.extname(path) === \".json\";\r\n    }\r\n    _doesFileExist(path) {\r\n        try {\r\n            return fs.lstatSync(path || \"\").isFile();\r\n        } catch(e) {\r\n            if(e && e.code == \"ENOENT\") {\r\n                return false;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n    _doesDirectoryExist(path) {\r\n        try {\r\n            return fs.lstatSync(path || \"\").isDirectory();\r\n        } catch(e) {\r\n            if(e && e.code == \"ENOENT\") {\r\n                return false;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n    _makeDirectory(directory) \r\n    {\r\n        return new Promise((resolve, reject) => {\r\n            if(!directory) {\r\n                resolve(false);\r\n                return;\r\n            }\r\n            fsx.mkdir(directory, { recursive: true }, err => {\r\n                if(err && err.code !== \"ENOENT\") {\r\n                    reject(`${err}\\nCould not create directory.`);\r\n                } else {\r\n                    resolve(true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}","import fs from 'fs';\r\nimport chokidar from 'chokidar';\r\nimport upath from 'upath';\r\nimport isUncPath from 'is-unc-path';\r\nimport EventEmitter from \"events\";\r\nimport ImageSource from './imageSource';\r\nimport ImageSourceType from './imageSourceType';\r\nimport host from '../host';\r\nimport _, { EDebounceType } from '../utils';\r\n\r\n\r\nlet nextProducerId = 0;\r\n/**\r\n * Reads images from source described by ImageSource and produces file paths for consumption\r\n * A producer has a single source.\r\n * A producer will not automatically deplete when sourcing from a File Watcher\r\n * IMPORTANT: Multiple producers should not be created for the same set of files\r\n */\r\nexport default class ImageFileProducer extends EventEmitter\r\n{\r\n    constructor(imageSource) \r\n    {\r\n        super();\r\n        this._id = nextProducerId++;\r\n        this._imageSource = imageSource;\r\n        this._fileWatcher = null;\r\n        this._isDepleted = false;\r\n\r\n        // NOTE: We debounce in order to collect files from file watcher and emit them \r\n        // in one lump. This helps avoid issues where shared files are moved at the end\r\n        // of an IMAGE process pre-maturely, when the next process also needs them.\r\n        // This isn't the best solution, since it is a completely blind process.\r\n        // A better option would be to submit explicit files for processing as one 'job',\r\n        // via a REST api or similar interface.\r\n        this._q = [];\r\n        this._emitQFiles = _.debounce(this._emitQFiles, 5000, EDebounceType.Trailing);\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    produce()\r\n    {\r\n        // TODO: Split source types into their own implementation of a producer interface?\r\n        switch(this._imageSource.sourceType) \r\n        {\r\n            case ImageSourceType.FILEWATCHER: this._sourceFileWatchers(); break;\r\n            case ImageSourceType.DIRECTORY: this._sourceDirectory(); break;\r\n            case ImageSourceType.OPENFILES: this._sourceOpenFiles(); break;\r\n            case ImageSourceType.BLANK: this._sourceBlank(); break;\r\n            case ImageSourceType.ACTIVEDOCUMENT: this._sourceActiveDocument(); break;\r\n            default: throw new Error(\"Unknown ImageSourceType: \" + this._imageSource.sourceType);\r\n        }\r\n    }\r\n    destroy()\r\n    {\r\n        // ASSERT: Should NOT emit any more files from this point\r\n        if(this._fileWatcher) {\r\n            this._fileWatcher.removeAllListeners();\r\n            this._fileWatcher.close();\r\n        }\r\n        this.removeAllListeners();\r\n    }\r\n    getImageSource()\r\n    {\r\n        return this._imageSource;\r\n    }\r\n    toString() {\r\n        return `\\tid = ${this._id}\\n\\timageSource = (${this._imageSource.toString()})`;\r\n    }\r\n    _emitFiles(files) \r\n    {\r\n        if(!files.length > 0) {\r\n            return;\r\n        }\r\n        this.emit(\"files\", this._id, files);\r\n    }\r\n    _emitQFiles()\r\n    {\r\n        const files = this._q;\r\n        this._q = [];\r\n        this._emitFiles(files);\r\n    }\r\n    _sourceFileWatchers() \r\n    {\r\n        const watchPathRoot = this._imageSource.sourceDirectory;\r\n        const watchExtensions = this._imageSource.sourceExtensions;\r\n        const watchPaths = watchExtensions.map(ext => upath.join(watchPathRoot, \"*.\" + ext));\r\n\r\n        if(isUncPath(watchPathRoot)) {\r\n            throw Error(`Watching network paths is problematic. Only local directories supported at this time.`);\r\n        }\r\n        if(!fs.existsSync(watchPathRoot)) {\r\n            throw Error(`Watch path: ${watchPathRoot} does not exist.`);\r\n        }\r\n        const watcher = chokidar.watch(watchPaths, {\r\n            ignored: /^\\./, \r\n            depth: 0,\r\n            usePolling: true,\r\n            interval: 5000,\r\n            awaitWriteFinish: {\r\n                stabilityThreshold: 5000,\r\n                pollInterval: 5000\r\n            }\r\n        })\r\n        .on(\"add\", newPath => \r\n        {\r\n            if(upath.basename(newPath).startsWith(\"manifest\")) {\r\n                return;\r\n            }\r\n            this._q.push(newPath);\r\n            this._emitQFiles();\r\n        });\r\n\r\n        this._fileWatcher = watcher;\r\n    }\r\n    /**\r\n     * Reads source directory for files and filters by extensions\r\n     */\r\n    _sourceDirectory() \r\n    {\r\n        const directory = this._imageSource.sourceDirectory;\r\n        const extensions = this._imageSource.sourceExtensions;\r\n\r\n        fs.readdir(directory, { encoding: \"utf8\" }, (error, files) => {\r\n            if(error) {\r\n                this.emit(\"depleted\", this._id);\r\n                throw new Error(error);\r\n            }\r\n            if(files) \r\n            {\r\n                files = files.map(file => upath.join(directory, file));\r\n                files = files.filter(file => {\r\n                    if(upath.basename(file).startsWith(\"manifest\")) {\r\n                        return false;\r\n                    }\r\n                    const ext = file.split('.').pop();\r\n                    return extensions.includes(ext);\r\n                });\r\n                this._isDepleted = true;\r\n                this._emitFiles(files);\r\n            }\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n    /**\r\n     * Asks Adobe application for currently open documents \r\n     */\r\n    _sourceOpenFiles() \r\n    {\r\n        host.runActionWithParameters(\"action.getOpenDocumentPaths\")\r\n        .then(filePaths => {\r\n            this._isDepleted = true;\r\n            this._emitFiles(filePaths.split(','));\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n    _sourceBlank()\r\n    {\r\n        this._isDepleted = true;\r\n        this._emitFiles([\"\"]);\r\n        this.emit(\"depleted\", this._id);\r\n    }\r\n    _sourceActiveDocument()\r\n    {\r\n        host.runActionWithParameters(\"action.getActiveDocumentPath\")\r\n        .then(filePath => {\r\n            this._isDepleted = true;\r\n            this._emitFiles(filePath ? [filePath] : []);\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport ImageFileProducer from './imageFileProducer';\r\nimport _ from '../utils';\r\n\r\n/**\r\n * Manages ImageFileProducer instances and produces image jobs\r\n */\r\nexport default class ImageFileProducers extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        /**\r\n         * Producer Id => [Listener Names...]\r\n         */\r\n        this._producerIdToListenerNames = new Map();\r\n        /**\r\n         * Producer Id => ImageFileProducer instance\r\n         */\r\n        this._producerIdToProducer = new Map();\r\n\r\n        this._jobs = [];\r\n    }\r\n    destroy()\r\n    {\r\n        this.stopProducers();\r\n        this.removeAllListeners();\r\n    }\r\n    /**\r\n     * Create and start a producer with the given ImageSource\r\n     * @param {ImageSource} imageSource \r\n     * @param {Array<string>} listenerNames \r\n     */\r\n    startProducer(imageSource, listenerNames) \r\n    {\r\n        const producer = new ImageFileProducer(imageSource);\r\n        console.log(`Image File Producer created:\\n${producer.toString()}`);\r\n\r\n        this._producerIdToListenerNames.set(producer.id, listenerNames);\r\n        this._producerIdToProducer.set(producer.id, producer);\r\n\r\n        producer.on(\"files\", this._onProducerFiles.bind(this));\r\n        producer.on(\"depleted\", this._onProducerDepleted.bind(this));\r\n        producer.produce();\r\n    }\r\n    /**\r\n     * Stops all ImageFileProducer instances and clears the job queue\r\n     */\r\n    stopProducers() {\r\n        const producerIds = [...this._producerIdToProducer.keys()];\r\n        this._stopProducers(producerIds);\r\n        this._jobs = [];\r\n    }\r\n    hasProducers() {\r\n        return this._producerIdToProducer.size > 0;\r\n    }\r\n    hasJobs() {\r\n        return this._jobs.length > 0;\r\n    }\r\n    nextJob() {\r\n        return this._jobs.pop();\r\n    }\r\n    /**\r\n     * @readonly\r\n     */\r\n    getAllJobs() {\r\n        return this._jobs; // TODO: Clone?\r\n    }\r\n    getTotalJobs() {\r\n        return this._jobs.length;\r\n    }\r\n    _stopProducers(producerIds)\r\n    {\r\n        producerIds = producerIds.filter(id => this._producerIdToProducer.has(id));\r\n        for(const producerId of producerIds) \r\n        {\r\n            const producer = this._producerIdToProducer.get(producerId);\r\n            console.log(`Image File Producer destroyed:\\n${producer.toString()}`);\r\n\r\n            this._producerIdToProducer.delete(producerId);\r\n            this._producerIdToListenerNames.delete(producerId);\r\n            producer.destroy();\r\n        }\r\n    }\r\n    _onProducerFiles(producerId, files)\r\n    {\r\n        const listenerNames = this._producerIdToListenerNames.get(producerId);\r\n        const imageSource = this._producerIdToProducer.get(producerId).getImageSource();\r\n        this._jobs.push({\r\n            jobId: _.guid(), \r\n            jobCreationTime: _.yyyymmddhhmmss(),\r\n            listenerNames: listenerNames.slice(0),\r\n            files, \r\n            imageSource: imageSource.clone()\r\n        });\r\n        this.emit(\"job\");\r\n        console.log(`Image File Producer ${producerId}: Job produced.`);\r\n    }\r\n    _onProducerDepleted(producerId) \r\n    {\r\n        this._stopProducers([producerId]);\r\n    }\r\n}","\r\nexport default class PipelineEngineStatus\r\n{\r\n    constructor() \r\n    {\r\n        this.reset();\r\n        Object.seal(this);\r\n    }\r\n    reset() {\r\n        this.jobId = \"\";\r\n        this.jobCreationTime = \"\";\r\n        this.files = [];\r\n        this.fileCount = 0;\r\n        this.file = \"\";\r\n        this.imageJobId = \"\";\r\n        this.imageIteration = 0;\r\n        this.pipeline = \"\";\r\n        this.action = \"\";\r\n    }\r\n    serialize() {\r\n        return {\r\n            ...this\r\n        }\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport _ from '../utils';\r\nimport store from '../store';\r\nimport host from '../host';\r\nimport Image from './image';\r\nimport ImageFileMover from './imageFileMover';\r\nimport ImageFileReader from './imageFileReader';\r\nimport ImageFileProducers from './imageFileProducers';\r\nimport PipelineEngineState from './pipelineEngineState';\r\nimport PipelineEngineStatus from './pipelineEngineStatus';\r\n\r\nexport class PipelineEngine extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        const self = this;\r\n        this._processingMutex = false; \r\n        this._lastState = PipelineEngineState.STOPPED;\r\n        this._state = PipelineEngineState.STOPPED;\r\n        this._status = new Proxy(new PipelineEngineStatus(), \r\n            {\r\n                set: function() { \r\n                    Reflect.set(...arguments);\r\n                    self.emit(\"status\", self._status);\r\n                    return true;\r\n                }\r\n            }\r\n        );\r\n        this.on(\"jobstart\", (jobId, jobCreationTime, files) => {\r\n            this._status.jobId = jobId;\r\n            this._status.jobCreationTime = jobCreationTime;\r\n            this._status.files = files;\r\n            this._status.fileCount = files.length;\r\n        });\r\n        this.on(\"imagejobstart\", (imageJobId, imageIteration, file) => {\r\n            this._status.imageJobId = imageJobId;\r\n            this._status.imageIteration = imageIteration;\r\n            this._status.file = file;\r\n        });\r\n        this.on(\"pipelinestart\", pipelineName => { \r\n            this._status.pipeline = pipelineName; \r\n        });\r\n        this.on(\"pipelineend\", () => { \r\n            this._status.pipeline = \"\"; \r\n        });\r\n        this.on(\"actionstart\", actionName => { \r\n            this._status.action = actionName; \r\n        });\r\n        this.on(\"actionend\", () => { \r\n            this._status.action = \"\"; \r\n        });\r\n        this.on(\"jobend\", () => this._status.reset());\r\n        this.on(\"processstart\", () => this._status.reset());\r\n        this.on(\"processend\", () => this._status.reset());\r\n        \r\n        this._imageFileReader = new ImageFileReader();\r\n        this._imageFileMover = new ImageFileMover();\r\n        this._imageFileProducers = new ImageFileProducers();\r\n        this._imageFileProducers.on(\"job\", this._onProducerJob.bind(this));\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        this._imageFileProducers.destroy();\r\n        this.state = PipelineEngineState.STOPPED;\r\n    }\r\n    /**\r\n     * Run the given pipeline using its configured file source(s)\r\n     * @param {string} pipelineName pipeline name\r\n     */\r\n    run(pipelineName)\r\n    {\r\n        this._run([pipelineName]);\r\n    }\r\n    /**\r\n     * Run all pipelines using their configured file source(s)\r\n     */\r\n    runAll()\r\n    {\r\n        const pipelineNames = store.pipelines.pipelines.map(p => p.name);\r\n        this._run(pipelineNames);\r\n    }\r\n    _run(pipelineNames) \r\n    {\r\n        if(!this.isStopped()) {\r\n            console.log(\"Pipeline engine is already running.\");\r\n            return;\r\n        }\r\n        console.log(`Running pipelines: \"${pipelineNames.join(\",\")}\"`);\r\n        this.state = PipelineEngineState.IDLE;\r\n\r\n        // IMPORTANT: We Do Not want multiple producers for the same files\r\n        // Which would happen if we looped by each pipeline and created its producers\r\n        // since there is a many-to-one relationship between pipelines and file watchers\r\n        const imageSourceNameToPipelineNames = store.pipelines.getImageSourceNameToPipelineNameMap(pipelineNames);\r\n        for(let [imageSourceName, toPipelineNames] of imageSourceNameToPipelineNames.map) \r\n        {\r\n            const imageSource = store.general.getImageSourceByName(imageSourceName);         \r\n            this._imageFileProducers.startProducer(imageSource, toPipelineNames);\r\n        }\r\n    }\r\n    pause() {\r\n        if(this.isProcessing() || this.isIdle()) {\r\n            this.state = PipelineEngineState.PAUSED;\r\n        }\r\n    }\r\n    resume() {\r\n        if(this.isPaused() && this._lastState === PipelineEngineState.PROCESSING) {\r\n            this.state = PipelineEngineState.PROCESSING;\r\n        } else {\r\n            this.state = PipelineEngineState.IDLE;\r\n        }\r\n    }\r\n    stop() {\r\n        this._imageFileProducers.stopProducers();\r\n        this.state = PipelineEngineState.STOPPED;\r\n    }\r\n    _stopIfNoProducersElseIdle()\r\n    {\r\n        if(this.isStopped()) {\r\n            return;\r\n        }\r\n        if(!this._imageFileProducers.hasProducers()) {\r\n            this.stop();\r\n        } else {\r\n            this.state = PipelineEngineState.IDLE;\r\n        }\r\n    }\r\n    \r\n\r\n    _onProducerJob() \r\n    {\r\n        this._process();\r\n    }\r\n    _process()\r\n    {\r\n        if(!this._imageFileProducers.hasJobs()) return;\r\n        if(this._processingMutex) return;\r\n        this._processingMutex = true;\r\n\r\n        this._runWaitOneFrame()\r\n        .then(this._runProcessStart.bind(this))\r\n        .then(this._runProcessLoop.bind(this))\r\n        .then(this._runProcessEnd.bind(this))\r\n        .then(() => {\r\n            this._stopIfNoProducersElseIdle();\r\n            this._processingMutex = false;\r\n        });\r\n    }\r\n    _runWaitOneFrame()\r\n    {\r\n        return new Promise(resolve => { setTimeout(resolve, 0); });\r\n    }\r\n    async _runProcessStart()\r\n    {\r\n        await this._pauseCheck();\r\n        this.state = PipelineEngineState.PROCESSING;\r\n\r\n        console.log(`Pipeline process loop started with ${this._imageFileProducers.getTotalJobs()} jobs in queue.`);\r\n        this.emit(\"processstart\");\r\n        return host.runJsxWithThrow(`app.displayDialogs = DialogModes.NO;`);\r\n    }\r\n    async _runProcessLoop()\r\n    {\r\n        let processedImages = [];\r\n        let file;\r\n        while(!this._stopCheck() && this._imageFileProducers.hasJobs()) \r\n        {\r\n            const { \r\n                jobId, \r\n                jobCreationTime,\r\n                listenerNames, \r\n                files, \r\n                imageSource } = this._imageFileProducers.nextJob();\r\n            this.emit(\"jobstart\", jobId, jobCreationTime, files.slice(0));\r\n            console.log(`Job ${jobId} started with ${files.length} files.`);\r\n\r\n            for(let i = 0; !this._stopCheck() && i < files.length; ++i)\r\n            {\r\n                await this._pauseCheck();\r\n                const file = files[i];\r\n\r\n                // READ\r\n                console.log(`Reading next file[${i}] ${file}.`);\r\n                const image = await this._imageFileReader.read(file, imageSource, listenerNames);\r\n                const pipelines = store.pipelines.getByNames(image.pipelines);\r\n                this.emit(\"imagejobstart\", image.jobId, i, file);\r\n\r\n                // EXECUTE\r\n                for(const pipeline of pipelines) \r\n                {\r\n                    try \r\n                    {\r\n                        await this._runPipelineStart(image, pipeline);\r\n        \r\n                        for(const action of pipeline.actions) \r\n                        {\r\n                            this.emit(\"actionstart\", action.actionName);\r\n                            let result = await host.runActionWithParameters(action.actionName, action.parameters);\r\n                            \r\n                            if(this._stopCheck(result)) break;\r\n                            await this._pauseCheck(result, store.general.pauseAfterEveryAction);\r\n                            this.emit(\"actionend\");\r\n                        }\r\n                    }\r\n                    catch(e)\r\n                    {\r\n                        console.error(e);\r\n                        image.errors.push(e.toString());\r\n                        await host.runActionWithParameters(`action.closeAllWithoutSave`);\r\n                        await this._pauseCheck(null, store.general.pauseOnExceptions);\r\n                    }\r\n                    finally\r\n                    {\r\n                        if(image.errors.length) break;\r\n                        if(this._stopCheck()) break;\r\n                        await this._pauseCheck(null, store.general.pauseAfterEveryPipeline);\r\n                        await this._runPipelineEnd(image, pipeline);\r\n                    }\r\n                }\r\n                \r\n                processedImages.push(image);\r\n                await this._pauseCheck(null, store.general.pauseAfterEveryImage);\r\n                this.emit(\"imagejobend\");\r\n            }\r\n            this.emit(\"jobend\");\r\n        }\r\n        \r\n        return processedImages;\r\n    }\r\n    _runProcessEnd(processedImages)\r\n    {\r\n        console.log(\"Pipeline process loop exited.\");\r\n\r\n        // CLEANUP\r\n        if(this._stopCheck()) {\r\n            host.runActionWithParameters(`action.closeAllWithoutSave`);\r\n        } else {\r\n            // We move at the end of the process, in case images/jobs are sharing files\r\n            this._imageFileMover.move(processedImages);\r\n        }\r\n\r\n        this.emit(\"processend\");\r\n        return host.runJsxWithThrow(`$.gc();`);\r\n    }\r\n    /**\r\n     * Close all documents. Save Photoshop settings. Instantiate IMAGE instance.\r\n     * @param {Image} image \r\n     * @param {object} pipeline the pipeline configuration object\r\n     * @returns {Promise}\r\n     */\r\n    _runPipelineStart(image, pipeline)\r\n    {\r\n        console.log(`Pipeline '${pipeline.name}' started for image job ${image.jobId}.`);\r\n        this.emit(\"pipelinestart\", pipeline.name);\r\n        return host.runJsxWithThrow(`\r\n        __PIPELINE = {\r\n            name: \"${pipeline.name}\",\r\n            restoreUnits: _.saveUnits()\r\n        };\r\n        IMAGE = new ImageForProcessing(${JSON.stringify(image)});`);\r\n    }\r\n    /**\r\n     * Restore Photoshop settings. Clear IMAGE instance.\r\n     * @param {object} pipeline the pipeline configuration object \r\n     * @returns {Promise}\r\n     */\r\n    _runPipelineEnd(image, pipeline)\r\n    {\r\n        console.log(`Pipeline '${pipeline.name}' ended for image job ${image.jobId}.`);\r\n        this.emit(\"pipelineend\");\r\n        return host.runJsx(`\r\n        __PIPELINE.restoreUnits && __PIPELINE.restoreUnits(); \r\n        __PIPELINE=null;\r\n        IMAGE=null;\r\n        `);\r\n    }\r\n    _stopCheck(actionResult) \r\n    {\r\n        if(this.isStopped() || actionResult === \"STOP\") {\r\n            this.state = PipelineEngineState.STOPPED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _pauseCheck(actionResult, forcePause) \r\n    {\r\n        if(this.isPaused() || forcePause || actionResult === \"PAUSE\") \r\n        {\r\n            console.log(\"Pipeline Engine waiting on pause...\");\r\n            this.state = PipelineEngineState.PAUSED;\r\n\r\n            return new Promise(resolve => {\r\n                this.once(\"state\", state => {\r\n                    if(state != PipelineEngineState.PAUSED) {\r\n                        resolve();\r\n                    }\r\n                });\r\n            });\r\n        } \r\n        return Promise.resolve();\r\n    }\r\n    \r\n    get fullStatus() \r\n    {\r\n        return {\r\n            state: PipelineEngineState.toKey(this._state),\r\n            jobs: this._imageFileProducers.getAllJobs(),\r\n            status: this._status.serialize()\r\n        };\r\n    }\r\n    get status() {\r\n        return this._status.serialize();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        this._lastState = this._state;\r\n        this._state = value;\r\n        this.emit(\"state\", value);\r\n    }\r\n    isIdle() { return this.state === PipelineEngineState.IDLE; }\r\n    isStopped() { return this.state === PipelineEngineState.STOPPED; }\r\n    isPaused() { return this.state === PipelineEngineState.PAUSED; }\r\n    isProcessing() { return this.state === PipelineEngineState.PROCESSING; }\r\n}","import upath from 'upath';\r\nimport fs from 'fs';\r\nimport EventEmitter from \"events\";\r\nconst jsdoc = require(\"jsdoc-api\");\r\n//import jsdocx from 'jsdoc-x';\r\n\r\nimport store from '../store';\r\nimport host from '../host';\r\nimport global from '../global';\r\nimport FolderTreeNode from '../folderTree';\r\nimport { resolve } from 'path';\r\n\r\nconst ROOT_ACTION_DIRECTORY = \"actions\";\r\nconst ROOT_ACTION_NAMESPACE = \"action\";\r\n\r\n/**\r\n * Describes a JSX Actions signature in full, including parameters\r\n * READONLY\r\n */\r\nexport class ActionDescriptor\r\n{\r\n    constructor()\r\n    {\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.path = \"\";\r\n        this.params = [];\r\n    }\r\n    /**\r\n     * Translate JSDocDescription object to ActionDescriptor\r\n     * @param {JSDocDescription} jsDocDescription the \"function\" description returned by JSDoc\r\n     */\r\n    static fromJSDoc(jsdocDescription)\r\n    {\r\n        /*\r\n            Example JSDoc Output:\r\n            {\r\n                \"name\": \"action.makeNote\",\r\n                \"description\": \"Add a Note/Annotation to the document\",\r\n                \"path\": \"C:\\\\Users\\\\puglisij\\\\AppData\\\\Roaming\\\\Adobe\\\\CEP\\\\extensions\\\\com.mario.panel\\\\public\\\\actions\",\r\n                \"params\": [\r\n                    {\r\n                    \"type\": { \"names\": [\"Number\"] },\r\n                    \"description\": \"x axis position in pixels\",\r\n                    \"name\": \"posX\"\r\n                    },\r\n                    {\r\n                    \"type\": { \"names\": [\"Number\"] },\r\n                    \"description\": \"y axis position in pixels\",\r\n                    \"name\": \"posY\"\r\n                    }\r\n                ]\r\n            }\r\n        */\r\n        \r\n        const d = jsdocDescription;\r\n        const descriptor = new ActionDescriptor();\r\n              descriptor.name = d.longname;\r\n              descriptor.description = d.description;\r\n              descriptor.params = d.params ? d.params.map(p => ActionParameter.fromJSDoc(p)) : [];\r\n              descriptor.path = d.meta.path;\r\n        return descriptor;\r\n    }\r\n}\r\n/**\r\n * Describes an (Input) parameter to a JSX Action function\r\n * READONLY\r\n */\r\nexport class ActionParameter \r\n{\r\n    constructor() \r\n    {\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.typeNames = [];\r\n        this.isRequired = false;\r\n        this.defaultValue = null;\r\n    }\r\n\r\n    static fromJSDoc(jsdocParameter) {\r\n        const { name, description, defaultValue, optional, type } = jsdocParameter;\r\n        const param = new ActionParameter();\r\n            param.name = name;\r\n            param.description = description;\r\n            param.defaultValue = defaultValue || null;\r\n            param.isRequired = !(optional === true);\r\n            param.typeNames = type.names.slice(0);\r\n\r\n        return param;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nclass ActionParameterCurator\r\n{\r\n    constructor(hostInterface)\r\n    {\r\n        this.host = hostInterface;\r\n        this.typeNameToDataCache = {};\r\n    }\r\n    /**\r\n     * Convert jsdoc parameter type name to Vue control component type\r\n     * @param {string} typeName any type for which a control exists (e.g. string, boolean, etc)\r\n     * @returns {string} \r\n     */\r\n    typeNameToControlInputType(typeName)\r\n    {\r\n        // call jsx functions to get type information\r\n        // this.host.runJsx('...');\r\n    }\r\n}\r\n\r\n/**\r\n * Handles reading JSX action files and JSDoc descriptions they contain\r\n */\r\nclass ActionFileDescriptionReader \r\n{\r\n    static _actionNameToJsDoc = new Map();\r\n    /**\r\n     * Reads and caches the JsDocDescription's for all the given actions\r\n     * @param {Action[]} actions \r\n     */\r\n    static async readAll(actions) \r\n    {\r\n        return jsdoc.explain({\r\n            cache: true,\r\n            files: actions.map(a => a.absolutePath)\r\n        })\r\n        .then(descriptions => \r\n        {\r\n            for(let i = 0; i < descriptions.length; ++i) \r\n            {\r\n                const description = descriptions[i];\r\n                if(this._isFunction(description)) {\r\n                    this._actionNameToJsDoc.set(description.longname, description);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Caches and returns the JsDocDescription for the given action\r\n     * @param {Action} action\r\n     * @returns {JSDocDescription}\r\n     */\r\n    static read(action)\r\n    {\r\n        let description = this._actionNameToJsDoc.get(action.name);\r\n        if(!description) {\r\n            console.warn(`JSDoc description not found for action ${action.name}. Do you need to re-load actions?`);\r\n            return {};\r\n        }\r\n        return description;\r\n    }\r\n    // FUNCTIONS:\r\n    // scope: \"static\"\r\n    // kind: \"function\"\r\n    // memberof: \"action\"\r\n    static _isFunction(jsdocDescription) \r\n    {\r\n        return jsdocDescription.scope === \"static\"\r\n            && jsdocDescription.kind === \"function\"\r\n            && jsdocDescription.memberof.startsWith(\"action\");\r\n    }\r\n    // ENUMERATIONS:\r\n    // name starts with capital letter\r\n    // scope: \"global\"\r\n    // kind: \"member\"\r\n    // memberof: undefined\r\n    // isEnum: true (only if @enum is in comment)\r\n    static _isEnum(jsdocDescription) \r\n    {\r\n        return jsdocDescription.scope === \"global\"\r\n            && jsdocDescription.kind === \"member\"\r\n            && jsdocDescription.isEnum === true\r\n            && typeof jsdocDescription.memberof === undefined;\r\n    }\r\n}\r\n\r\n/**\r\n * Handles reading JSX action files for import into Adobe host\r\n */\r\nclass ActionFileImportStringBuilder\r\n{\r\n    /**\r\n     * Reads all jsx files in the given directory and builds an import JSX string for execution.\r\n     * Each new directory encountered becomes a nested namespace.\r\n     * @param {string} pathToActions the directory containing the jsx files\r\n     * @param {string} rootNamespace the root action function namespace. All action names with start with this\r\n     * @returns {string} the stringified JSX script to run which will import all actions\r\n     */\r\n    static build(pathToActions, rootNamespace)\r\n    {\r\n        return this._buildJsxImportString(pathToActions, rootNamespace); \r\n    }\r\n    // NOTE: importAction() is expected to be defined on Host JSX side\r\n    static _buildJsxImportString(absolutePathToActions, rootNamespace)\r\n    {\r\n        let actions = [];\r\n        let imports = [];\r\n        let directory;\r\n        let directories = [\r\n            {\r\n                namespace: rootNamespace,\r\n                absolutePath: absolutePathToActions\r\n            }\r\n        ];\r\n        while(directory = directories.pop()) \r\n        {\r\n            const namespace = directory.namespace;\r\n            const namespaceDefine = `${namespace}= (typeof ${namespace} !== \"undefined\") ? ${namespace} : {};`;\r\n            imports.push(namespaceDefine);\r\n            \r\n            // Read directory contents\r\n            const names = fs.readdirSync(directory.absolutePath);\r\n            for(let i = 0; i < names.length; ++i) \r\n            {\r\n                const nameParts = names[i].split('.');\r\n                if(nameParts.length > 2) {\r\n                    throw new Error(\"Action file and directory names cannot contain periods.\");\r\n                }\r\n\r\n                const nameWithoutExtension = nameParts[0];\r\n                const nameSpacedName = `${namespace}.${nameWithoutExtension}`;\r\n                const absoluteFilePath = upath.join(directory.absolutePath, names[i]);\r\n                if(fs.statSync(absoluteFilePath).isDirectory()) \r\n                {\r\n                    directories.push({\r\n                        namespace: nameSpacedName,\r\n                        absolutePath: absoluteFilePath\r\n                    });\r\n                } \r\n                else \r\n                {\r\n                    imports.push(`importAction(\"${absoluteFilePath}\", \"${nameSpacedName}\");`);\r\n                    actions.push(new Action(nameSpacedName, namespace, absoluteFilePath));\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            importString: imports.join(''),\r\n            actions\r\n        };\r\n    }\r\n}\r\n\r\nclass Action\r\n{\r\n    constructor(name, namespace, absolutePath)\r\n    {\r\n        this.name = name;\r\n        this.namespace = namespace;\r\n        this.absolutePath = absolutePath;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Primary interface for loading/reloading jsx action files and their JSDoc descriptions\r\n */\r\nexport class Actions\r\n{\r\n    constructor() \r\n    {\r\n        this._actionNameToAction = new Map();\r\n        this._actionTree = new FolderTreeNode(ROOT_ACTION_NAMESPACE, true);\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        return this._importAll();\r\n    }\r\n    destroy() {}\r\n\r\n    /**\r\n     * Import all JSX function action files\r\n     */\r\n    async _importAll()\r\n    {\r\n        const pathToUserActions = store.general.pathToUserActions;\r\n        const pathToBuildInActions = global.appBuiltinActionsPath;\r\n        console.log(\"Import actions started.\");\r\n        console.log(`Importing from:\\n\\t${pathToUserActions}\\n\\t${pathToBuildInActions}`);\r\n        \r\n        await this._import(pathToBuildInActions);\r\n        if(pathToUserActions) \r\n        {\r\n            await this._import(pathToUserActions);\r\n            await host.runJsx(`action.CUSTOM_ACTIONS_FOLDER = new Folder(\"${pathToUserActions}\");`);\r\n        }\r\n\r\n        console.log(\"Import actions exited.\");\r\n    }\r\n    _import(importDirectory) \r\n    {\r\n        if(!importDirectory.trim()) {\r\n            return;\r\n        }\r\n\r\n        const { importString,  actions } = ActionFileImportStringBuilder.build(importDirectory, ROOT_ACTION_NAMESPACE);\r\n        // Parse to data structures\r\n        for(let i = 0; i < actions.length; ++i) \r\n        {\r\n            const actionPath = actions[i].name.split('.');\r\n            this._actionNameToAction.set(actions[i].name, actions[i]);\r\n            this._actionTree.insert(actionPath, false);\r\n            console.log(\"Action: \" + actions[i].name);\r\n        }\r\n        // Async read and cache jsdoc info\r\n        ActionFileDescriptionReader.readAll(actions);\r\n\r\n        return host.runJsx(importString  + \"act = action;\");\r\n    }\r\n    /**\r\n     * Returns tree structure of all available action nested namespaces/action names\r\n     * @returns {FolderTreeNode} n-ary tree indicating folder and action file structure\r\n     */\r\n    getAllActions() {\r\n        return this._actionTree.cloneTree(); \r\n    }\r\n    /**\r\n     * Return all available action names\r\n     * @returns {string[]}\r\n     */\r\n    getAllActionNames() {\r\n        return Array.from( this._actionNameToAction.keys() );\r\n    }\r\n    /**\r\n     * Converts JSDoc for given action name to instance of ActionDescriptor\r\n     * @param {string} actionName\r\n     * @returns {Promise<ActionDescriptor>}  \r\n     */\r\n    async getActionDescriptorByName(actionName) \r\n    {\r\n        const action = this._actionNameToAction.get(actionName);\r\n        if(!action) {\r\n            throw new Error(`Action doesnt exist by name ${actionName}`);\r\n        }\r\n\r\n        return new Promise(resolve => {\r\n            const d = ActionFileDescriptionReader.read(action)\r\n            const descriptor = ActionDescriptor.fromJSDoc(d);\r\n            resolve(descriptor);\r\n        });\r\n    }\r\n}\r\n","\r\n/* npm modules */\r\nimport EventEmitter from \"events\";\r\nimport polka from \"polka\";\r\n\r\n/* local modules */\r\nimport { PipelineEngine } from './pipelineEngine';\r\nimport { Actions } from './actions';\r\nimport _ from '../utils';\r\nimport store from '../store';\r\nimport global from '../global';\r\n\r\nlet port = 0;\r\nlet app = null;\r\n\r\n\r\nexport const ServerState = {\r\n    UNINITIALIZED: 0,\r\n    RUNNING: 1\r\n};\r\n\r\n/**\r\n * Backend systems.\r\n * Manages Node REST API, and JS API for managing pipelines. \r\n * Server is not CEP panel aware\r\n */\r\nclass Server extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        this._initialized = false;\r\n        this._state = ServerState.UNINITIALIZED;\r\n\r\n        // Express instance\r\n        this._httpServer = null;\r\n        this._pipelineEngine = new PipelineEngine();\r\n        this._actions = new Actions();\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    async init() \r\n    {\r\n        if(this._initialized) return;\r\n        this._initialized = true;\r\n\r\n        await this._pipelineEngine.init();\r\n        await this._actions.init();\r\n\r\n        if(store.general.runHttpServer) {\r\n            this.startServer();\r\n        }\r\n        this.state = ServerState.RUNNING;\r\n        this.emit(\"initialized\");\r\n        console.log(\"Server initialized.\");\r\n    }\r\n    async startServer() \r\n    {\r\n        port = store.general.serverPort;\r\n        app = polka();\r\n        //-----------------\r\n        // Routes\r\n        //-----------------\r\n        // app.get('/pipeline/:name/configuration', (req, res) => {\r\n        //     res.setHeader(\"Content-Type\", \"application/json\");\r\n        //     res.end(\r\n        //         JSON.stringify(this._pipelineConfig.pipelines.find(p => p.name == req.params.name.toLowerCase()), null, 4)\r\n        //     );\r\n        // });\r\n        // app.post('/pipeline/run', (req, res) => {\r\n        //     res.status(200).json({ success: true });\r\n        // });\r\n        // app.post('/pipeline/stop', (req, res) => {\r\n        //     res.status(200).json({ success: true });\r\n        // });\r\n        app.get('/status', (req, res) => {\r\n            const status = {\r\n                adobeApp: global.adobeApp,\r\n                adobeVersion: global.adobeVersion,\r\n                version: global.appVersion,\r\n                time: new Date().toLocaleString(),\r\n                ...this._pipelineEngine.fullStatus\r\n            };\r\n\r\n            res.writeHead(200, {\r\n                \"Content-Type\": \"application/json\"\r\n            });\r\n            res.end(JSON.stringify(status, null, 2) + '\\n');\r\n        });\r\n\r\n        //-----------------\r\n        // Create Server\r\n        //-----------------\r\n        this._httpServer = app.listen(port, \"0.0.0.0\", function() {\r\n            console.log(`Polka is listening to http://localhost:${port}`);\r\n        }).server;\r\n\r\n        // Native\r\n        // this._httpServer = http.createServer((req, res) => \r\n        // {\r\n        //      handle routing on req.url\r\n        // });\r\n        // this._httpServer.listen(port, \"0.0.0.0\", () => {\r\n        //     console.log(`Server is listening to http://localhost:${port}`);\r\n        // });\r\n\r\n        console.log(\"Server started.\");\r\n    }\r\n    destroy() \r\n    {\r\n        console.log(`Server closing...`);\r\n        this._httpServer && this._httpServer.close(() => {\r\n            this._httpServer = null;\r\n            console.log(`Server closed.`);\r\n        });\r\n        this._pipelineEngine.destroy();\r\n        this._pipelineEngine = null;\r\n        this._actions.destroy();\r\n        this._actions = null;\r\n    }\r\n    get pipelineEngine() {\r\n        return this._pipelineEngine;\r\n    }\r\n    get actions() {\r\n        return this._actions;\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        this._state = value;\r\n        this.emit(\"state\", value);\r\n    }\r\n}\r\n// DELETE. Note, to access in iframe use iframe.contentWindow.server\r\n// TODO: For DEBUG Only. When finished, remove \"window.server = \" from export.\r\nexport default (window.server = new Server());","import upath from \"upath\";\nimport fs from \"fs\";\nimport { EventEmitter } from \"events\";\nimport global from '../global';\nimport store from '../store';\nimport fsx from '../fsx';\n\nconst CONSOLE_METHODS = [\"log\", \"warn\", \"error\"];\n\nclass Logger extends EventEmitter\n{\n    constructor()\n    {\n        super();\n        this.initialized = false;\n        this.options = {\n            logDirectory: \"\",\n            logFilePersistForDays: 7 // number of files/days to keep\n        };\n        this.originalConsoleMethods = {};\n        this.logWriteStream = null;\n        this.logBuffer = [];\n        this.maxBufferSize = 64;\n    }\n    /**\n     * @returns {Promise}\n     */\n    async init() \n    {\n        if(this.initialized)\n            return;\n        this.initialized = true;\n        this.options = {\n            logDirectory: store.general.logDirectory || global.appDefaultLogPath, \n            logFilePersistForDays: store.logFilePersistForDays || 3\n        };\n        await this._createLogsDirectory();\n        this._createFileStream();\n        this._cleanupOldFiles();\n        \n        // Override default console logging methods\n        CONSOLE_METHODS.forEach(function(method)\n        {\n            const self = this;\n            const originalMethod = console[method].bind(console);\n            this.originalConsoleMethods[method] = originalMethod;\n\n            console[method] = function() {\n                const args = Array.prototype.slice.call(arguments);\n                originalMethod.apply(\n                    console,\n                    args\n                );\n                self._write(method, args);\n            };\n        }.bind(this));\n\n        this.emit(\"initialized\");\n        console.log(`Logger initialized.\\n\\t${this.options.logDirectory}`);\n    }\n    _write(method, args)\n    {\n        // write to read buffer\n        const chunk = [new Date().toLocaleTimeString(), `[${method.toUpperCase()}]\\t`, ...args, `\\n`].join(\" \");\n        const htmlChunk = [`<div class=\"${method}\">${new Date().toLocaleTimeString()}`, ...args, `</div>`].join(\" \");\n        this.logWriteStream && this.logWriteStream.write(chunk);\n        this.logBuffer.push(htmlChunk);\n\n        this.emit(\"logs\");\n    }\n    _createLogsDirectory() \n    {\n        return new Promise((resolve, reject) => {\n            fsx.mkdir(this.options.logDirectory, { recursive: true }, err => {\n                if(err && err.code !== \"ENOENT\") reject(`${err}\\nCould not create directory.`);\n                else resolve();\n            });\n        });\n    }\n    _createFileStream()\n    {\n        const yyyymmdd = new Date().toISOString().slice(0,10);   \n        const logPath = upath.join(this.options.logDirectory, yyyymmdd + \".logs\");\n        this.logWriteStream = fs.createWriteStream(logPath, {\n            flags: \"a\",\n            encoding: \"utf8\"\n        });\n    }\n    _closeFileStream()\n    {\n        this.logWriteStream && this.logWriteStream.end();\n        this.logWriteStream = null;\n    }\n    /**\n     * Erase old log files \n     */\n    _cleanupOldFiles()\n    {\n        fs.readdir(this.options.logDirectory, (err, paths) => \n        {\n            if(err) {\n                return;\n            }\n            const logFilenames = paths.filter(name => name.endsWith(\".logs\"));\n                  logFilenames.sort(); // sort by date\n                  logFilenames.pop(); // don't delete todays\n            const logPaths = logFilenames.map(name => upath.join(this.options.logDirectory, name));\n            const howManyToDelete = Math.max(logPaths.length - this.options.logFilePersistForDays, 0);\n\n            for(let i = 0; i < howManyToDelete; ++i) \n            {\n                fs.unlink(logPaths[i], err => {\n                    if(err) console.error(\"Could not delete log file. \", err);\n                });\n            }\n        });\n    }\n    /**\n     * Clear the buffered logs\n     */\n    clear() \n    {\n        this.logBuffer = [];\n    }\n    /**\n     * Read all buffered logs formatted with html\n     * @returns {string}\n     */\n    read()\n    {\n        return this.logBuffer.reduce((acc, val) => `${acc}${val}`, ``);\n    }\n    /**\n     * Should be called to release internal resources\n     */\n    destroy() \n    {\n        console.log(\"Logger destroyed.\");\n\n        if(!this.initialized) \n            return;\n        this.initialized = false;\n\n        this._closeFileStream();\n        // Restore console methods\n        CONSOLE_METHODS.forEach(method => {\n            console[method] = this.originalConsoleMethods[method];\n        })\n        logger = null;\n    }\n}\n\nlet logger = new Logger();\nexport default logger;","module.exports = require(\"process\");","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=style&index=0&id=55ac743d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=style&index=0&id=55ac743d&lang=scss&scoped=true&\"","module.exports = require(\"querystring\");","import child_process from 'child_process';\r\nimport upath from 'upath';\r\nimport fs from 'fs';\r\nimport rimraf from 'rimraf';\r\n\r\n/**\r\n * Force deletes the destination file/directory recursively and renames the source path to the destination\r\n * @param {*} fromPath \r\n * @param {*} toPath \r\n * @param {*} callback \r\n */\r\nfunction overwrite(fromPath, toPath, callback)\r\n{\r\n    rimraf(toPath, err => \r\n    {\r\n        if(err) {\r\n            callback(err);\r\n            return;\r\n        }\r\n        fs.rename(fromPath, toPath, err => {\r\n            callback(err);\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * UNTESTED. Same as fs.rmdir except delegates to rimraf() when using recursive option\r\n * @param {*} path \r\n * @param {*} options \r\n * @param {*} cb \r\n */\r\nfunction rmdir(path, options, cb) \r\n{\r\n    if(typeof options === 'object' && options.recursive) {\r\n        rimraf(path, {\r\n            maxBusyTries: options.maxRetries,\r\n            emfileWait: retryDelay\r\n        }, cb);\r\n    } else {\r\n        fs.rmdir.call(fs, arguments);\r\n    }\r\n}\r\n\r\n/**\r\n * Same as fs.mkdir except supports options object and recursive option\r\n * This exists because { recursive: true } option not supported prior to Node v10.22\r\n * NOTE: When using 'recursive' option, call is delegated to shell command 'mkdir' and\r\n * any errors returned as a string\r\n * @param {string|Buffer|URL} dirPath \r\n * @param {object} options \r\n * @param {number} options.mode \r\n * @param {boolean} options.recursive \r\n * @param {function} callback \r\n */\r\nfunction mkdir(dirPath, options, callback) \r\n{\r\n    if(typeof options === 'object' && options.recursive) {\r\n        _mkdirRecursive(dirPath, options, callback);\r\n    } else {\r\n        fs.mkdir.call(fs, arguments);\r\n    }\r\n}\r\nfunction _mkdirRecursive(dirPath, options, callback) \r\n{\r\n    child_process.exec(\r\n        `mkdir${options.mode ? ' --parents --mode=' + options.mode : ''} \"${dirPath}\"`, \r\n        (error, stdout, stderr) => {\r\n            if(error) {\r\n                // IMPORTANT: For some reason, on windows, when creating a directory \r\n                // on a mapped network drive, this command will both create the directory\r\n                // AND throw an \"already exists\" error\r\n                if(error.toString().toLowerCase().includes(\"already exists\")) {\r\n                    error.code = \"ENOENT\";\r\n                }\r\n                callback(error);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n    );\r\n} \r\n\r\n\r\nexport default {\r\n    rmdir,\r\n    mkdir,\r\n    overwrite\r\n}","module.exports = require(\"events\");"],"sourceRoot":""}