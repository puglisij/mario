(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8646fade"],{"224b":function(e,t,r){},"50a2":function(e,t,r){"use strict";var o=r("224b"),s=r.n(o);s.a},ae15:function(e,t,r){"use strict";var o=r("bf7e"),s=r.n(o);s.a},bf7e:function(e,t,r){},ce67:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.handleSubmit;return[r("form",{staticClass:"configurator",attrs:{novalidate:"true"},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},change:e.markForSave,submit:function(t){return t.preventDefault(),o(e.onConfigurationSubmit)}}},[r("h2",{staticClass:"tab-title"},[e._v("Configuration"),r("i",{directives:[{name:"show",rawName:"v-show",value:e.needSaved,expression:"needSaved"}]},[e._v("*")])]),r("h3",{staticClass:"section-title"},[e._v("Actions")]),r("section",{staticClass:"section-content section-content--inset section-content--actions"},[r("validation-provider",{attrs:{slim:"",rules:{pathunc:!1,pathrelative:{allowed:!1},pathexists:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-folder-input",{attrs:{title:"The path to the directory containing custom extendscript actions",placeholder:"/my/custom/jsx/actions",errors:o},model:{value:e.pathToUserActions,callback:function(t){e.pathToUserActions=t},expression:"pathToUserActions"}},[e._v(" Custom Actions Folder ")])]}}],null,!0)}),r("div",{staticClass:"configurator-buttons"},[r("button",{directives:[{name:"show",rawName:"v-show",value:!e.isLoadingActions,expression:"!isLoadingActions"}],staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onReloadActions(t)}}},[e._v("Reload Actions")]),e.isLoadingActions?r("wait-dots"):e._e()],1)],1),r("h3",{staticClass:"section-title"},[e._v("Logs")]),r("section",{staticClass:"section-content section-content--inset"},[r("validation-provider",{attrs:{slim:"",rules:{pathunc:!1,pathrelative:{allowed:!1},pathexists:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-folder-input",{staticClass:"mb1",attrs:{title:"The path to the directory where console log files will be written",placeholder:"/my/log/files",errors:o},model:{value:e.logDirectory,callback:function(t){e.logDirectory=t},expression:"logDirectory"}},[e._v(" Log File Folder ")])]}}],null,!0)}),r("validation-provider",{attrs:{tag:"label",rules:"required|integer:0,365"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("div",{staticClass:"label"},[e._v("Number of Days to Persist Log Files")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.logFilePersistForDays,expression:"logFilePersistForDays"}],staticClass:"topcoat-text-input input-days",attrs:{type:"number",title:"An integer value"},domProps:{value:e.logFilePersistForDays},on:{input:function(t){t.target.composing||(e.logFilePersistForDays=t.target.value)}}}),o.length?r("span",{staticClass:"topcoat-notification error"},[e._v(e._s(o[0]))]):e._e()]}}],null,!0)})],1),r("h3",{staticClass:"section-title"},[e._v("Http Server")]),r("section",{staticClass:"section-content section-content--inset"},[r("a-checkbox",{model:{value:e.runHttpServer,callback:function(t){e.runHttpServer=t},expression:"runHttpServer"}},[e._v(" Run a server instance (REST api)? ")]),r("validation-provider",{attrs:{tag:"label",rules:"required|integer:0,65353"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("div",{staticClass:"label"},[e._v("Port Number")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.serverPort,expression:"serverPort"}],staticClass:"topcoat-text-input input-server-port",attrs:{type:"number",title:"An integer value"},domProps:{value:e.serverPort},on:{input:function(t){t.target.composing||(e.serverPort=t.target.value)}}}),o.length?r("span",{staticClass:"topcoat-notification error"},[e._v(e._s(o[0]))]):e._e()]}}],null,!0)})],1),r("h3",{staticClass:"section-title"},[e._v("File Sources")]),r("section",{staticClass:"section-content"},[r("draggable",{attrs:{draggable:".source",handle:".source-handle",group:"fileSources"},model:{value:e.fileSources,callback:function(t){e.fileSources=t},expression:"fileSources"}},e._l(e.fileSources,(function(t,o){return r("a-file-source",{key:t.id,attrs:{sources:e.fileSources},on:{delete:e.onDeleteSource},model:{value:e.fileSources[o],callback:function(t){e.$set(e.fileSources,o,t)},expression:"fileSources[index]"}})})),1)],1),r("div",{staticClass:"configurator-buttons"},[r("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onAddNewSource(t)}}},[e._v("Add File Source")]),r("button",{directives:[{name:"show",rawName:"v-show",value:e.needSaved,expression:"needSaved"}],ref:"save",staticClass:"topcoat-button--large",attrs:{type:"submit"}},[e._v("Save")])])])]}}])})},s=[],a=(r("4de4"),r("7db0"),r("4160"),r("b0c0"),r("159b"),r("96cf"),r("1da1")),i=r("7bb1"),n=r("310e"),l=r.n(n),c=r("025e"),u=r("4360"),p=r("0c12"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[r("div",{staticClass:"label"},[e._t("default")],2),r("div",{staticClass:"flex"},[r("a-folder-dialog-button",{attrs:{folder:e.path},on:{"update:folder":function(t){e.path=t}}}),r("input",{directives:[{name:"model",rawName:"v-model",value:e.path,expression:"path"}],staticClass:"topcoat-text-input flex-grow ml1",attrs:{type:"text",placeholder:e.placeholder,title:e.title},domProps:{value:e.path},on:{input:function(t){t.target.composing||(e.path=t.target.value)}}}),e.errors.length?r("span",{staticClass:"topcoat-notification error"},[e._v(e._s(e.errors[0]))]):e._e()],1)])},v=[],f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"topcoat-button",on:{click:e.onClick}},[e._v("ðŸ–¿")])},h=[],m=(r("caad"),r("2532"),r("6558")),y={name:"AFolderDialogButton",props:{folder:{type:String,required:!0}},methods:{onClick:function(e){var t=this;m["a"].runActionWithParameters("action.selectFolder",this.value).then((function(e){e.toLowerCase().includes("error")?console.error(e):t.$emit("update:folder","null"==e?"":e)}))}}},g=y,S=(r("50a2"),r("2877")),b=Object(S["a"])(g,f,h,!1,null,"c3f7f856",null),x=b.exports,D={name:"AFolderInput",components:{AFolderDialogButton:x},model:{prop:"value",event:"change"},props:{title:{type:String,default:"Enter a folder path or select a folder"},placeholder:{type:String,default:"/my/folder"},errors:{type:Array,default:[]},value:{type:String,required:!0}},data:function(){return{path:this.value}},watch:{path:function(e){this.$emit("change",this.path)}}},_=D,C=Object(S["a"])(_,d,v,!1,null,null,null),F=C.exports,w=r("e70e"),E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"source"},[r("div",{staticClass:"source-head"},[r("span",{staticClass:"source-handle",attrs:{title:"Drag to re-order"}},[e._v("â˜°")]),e.localSource.collapsed?r("span",[e._v(e._s(e.localSource.name))]):e._e(),r("button",{staticClass:"topcoat-button--large--quiet expand right",class:{open:!e.localSource.collapsed},on:{click:function(t){e.localSource.collapsed=!e.localSource.collapsed}}},[r("i",[e._v("â±")])])]),e.localSource.collapsed?e._e():r("div",{staticClass:"source-body"},[e.canEditName?r("label",[r("div",{staticClass:"label"},[e._v("Name")]),r("validation-provider",{attrs:{rules:{required:!0,custom:{fn:e.validateName}}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.localSource.name,expression:"localSource.name"}],staticClass:"topcoat-text-input full-width",attrs:{type:"text",placeholder:"My Image Source Name",title:"This can be referenced by Pipelines"},domProps:{value:e.localSource.name},on:{input:function(t){t.target.composing||e.$set(e.localSource,"name",t.target.value)}}}),o.length?r("span",{staticClass:"topcoat-notification error"},[e._v(e._s(o[0]))]):e._e()]}}],null,!1,642679658)})],1):e._e(),r("validation-provider",{attrs:{tag:"label",rules:{custom:{fn:e.validateType}}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("div",{staticClass:"label"},[e._v("Source Type")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.localSource.sourceType,expression:"localSource.sourceType"}],staticClass:"topcoat-text-input flex-grow",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.localSource,"sourceType",t.target.multiple?r:r[0])}}},e._l(e.imageSourceTypeOptions,(function(t){return r("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0),o.length?r("span",{staticClass:"topcoat-notification error"},[e._v(e._s(o[0]))]):e._e()]}}],null,!1,3311316213)}),e.isSourceExternalFiles?r("validation-provider",{attrs:{slim:"",rules:{required:e.isSourceExternalFiles,pathunc:!1,pathrelative:{allowed:!1},pathexists:!0,custom:{fn:e.validateSourceDirectory}}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-folder-input",{attrs:{title:"The source folder containing files for processing.",errors:o},model:{value:e.localSource.sourceDirectory,callback:function(t){e.$set(e.localSource,"sourceDirectory",t)},expression:"localSource.sourceDirectory"}},[e._v(" Source files from this Folder ")])]}}],null,!1,739706158)}):e._e(),e.isSourceExternalFiles?r("a-checkbox",{model:{value:e.localSource.useProcessedDirectory,callback:function(t){e.$set(e.localSource,"useProcessedDirectory",t)},expression:"localSource.useProcessedDirectory"}},[e._v(" Use Processed Folder? ")]):e._e(),e.localSource.useProcessedDirectory&&e.isSourceExternalFiles?r("validation-provider",{attrs:{slim:"",rules:{required:e.localSource.useProcessedDirectory&&e.isSourceExternalFiles,pathunc:{allowed:!1},pathrelative:{allowed:!1},pathexists:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-folder-input",{attrs:{title:"Source files will be moved here after pipeline(s) have run.",errors:o},model:{value:e.localSource.processedDirectory,callback:function(t){e.$set(e.localSource,"processedDirectory",t)},expression:"localSource.processedDirectory"}},[e._v(" Move processed files to this Folder ")])]}}],null,!1,1435383116)}):e._e(),r("a-checkbox",{model:{value:e.localSource.useOutputDirectory,callback:function(t){e.$set(e.localSource,"useOutputDirectory",t)},expression:"localSource.useOutputDirectory"}},[e._v(" Use Output Folder? ")]),e.localSource.useOutputDirectory?r("validation-provider",{attrs:{slim:"",rules:{required:e.localSource.useOutputDirectory,pathunc:{allowed:!1},pathrelative:{allowed:!1},pathexists:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-folder-input",{attrs:{title:"Files generated by pipeline(s) will be written here.",errors:o},model:{value:e.localSource.outputDirectory,callback:function(t){e.$set(e.localSource,"outputDirectory",t)},expression:"localSource.outputDirectory"}},[e._v(" Output files to this Folder ")])]}}],null,!1,2376683281)}):e._e(),e.isSourceExternalFiles?r("a-checkbox",{model:{value:e.localSource.useErrorDirectory,callback:function(t){e.$set(e.localSource,"useErrorDirectory",t)},expression:"localSource.useErrorDirectory"}},[e._v(" Use Error Folder? ")]):e._e(),e.localSource.useErrorDirectory&&e.isSourceExternalFiles?r("validation-provider",{attrs:{slim:"",rules:{required:e.localSource.useErrorDirectory&&e.isSourceExternalFiles,pathunc:{allowed:!1},pathrelative:{allowed:!1},pathexists:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-folder-input",{attrs:{title:"Used when an error is encountered during processing.",errors:o},model:{value:e.localSource.errorDirectory,callback:function(t){e.$set(e.localSource,"errorDirectory",t)},expression:"localSource.errorDirectory"}},[e._v(" Move errored files and write error logs to this Folder ")])]}}],null,!1,3660736421)}):e._e(),r("validation-provider",{attrs:{slim:"",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("a-extensions-input",{attrs:{title:"Either multiple file extensions, or json (exclusive). A comma delimited list.",errors:o},model:{value:e.localSource.sourceExtensions,callback:function(t){e.$set(e.localSource,"sourceExtensions",t)},expression:"localSource.sourceExtensions"}},[e._v(" Only these file extensions ")])]}}],null,!1,3043763975)}),r("button",{staticClass:"topcoat-button--large--quiet",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onDelete(t)}}},[e._v("X")])],1)])},k=[],A=(r("498a"),r("83dc")),P=r.n(A),T=(r("3864"),r("49e1")),O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",[r("div",{staticClass:"label"},[e._t("default")],2),r("div",{staticClass:"flex"},[r("a-array-input",{staticClass:"topcoat-text-input flex-grow",attrs:{placeholder:"jpg, jpeg, png, psd, tif, etc.",title:e.title,value:e.extensions},on:{change:e.onExtensions}}),e.errors.length?r("span",{staticClass:"topcoat-notification error"},[e._v(e._s(e.errors[0]))]):e._e()],1)])},N=[],$=(r("d81d"),r("ac1f"),r("5319"),r("9b0a")),q={name:"AExtensionsInput",components:{AArrayInput:$["a"]},model:{prop:"value",event:"change"},props:{title:{type:String,default:"Enter a folder path or select a folder"},errors:{type:Array,default:[]},value:{type:Array,required:!0}},data:function(){return{extensions:this.value}},methods:{validateExtensions:function(e){return e=e.map((function(e){return e.replace(/[^a-z0-9]/g,"")})),e=e.filter((function(e){return e&&e.length>0})),e.includes("json")?["json"]:e},onExtensions:function(e){this.extensions=this.validateExtensions(e),this.$emit("change",this.extensions)}}},L=q,R=Object(S["a"])(L,O,N,!1,null,null,null),I=R.exports,j={name:"AFileSource",components:{ValidationObserver:i["a"],ValidationProvider:i["b"],AFolderInput:F,AExtensionsInput:I,ACheckbox:w["a"]},model:{prop:"source",event:"change"},props:{canEditName:{type:Boolean,default:!0},sources:{type:Array,required:!1},source:{type:Object,required:!0}},data:function(){return{localSource:c["b"].simpleDeepClone(this.source),imageSourceTypeOptions:[{text:"Active Document",value:T["a"].ACTIVEDOCUMENT},{text:"Open Files",value:T["a"].OPENFILES},{text:"Directory",value:T["a"].DIRECTORY},{text:"File Watcher",value:T["a"].FILEWATCHER},{text:"None",value:T["a"].BLANK}]}},computed:{isSourceExternalFiles:function(){return this.localSource.sourceType===T["a"].DIRECTORY||this.localSource.sourceType===T["a"].FILEWATCHER}},watch:{localSource:{deep:!0,handler:function(e){this.isSourceExternalFiles||(e.useErrorDirectory=!1,e.errorDirectory="",e.useProcessedDirectory=!1,e.processedDirectory=""),e.outputDirectory=e.useOutputDirectory?e.outputDirectory:"",e.processedDirectory=e.useProcessedDirectory?e.processedDirectory:"",e.errorDirectory=e.useErrorDirectory?e.errorDirectory:"",this.$emit("change",e)}}},methods:{validateType:function(e){return{valid:e>=0,message:"Please select a source type"}},validateSourceDirectory:function(e){var t=e.trim().toLowerCase(),r=this.sources.filter((function(e){return P.a.normalize(e.sourceDirectory.toLowerCase())===P.a.normalize(t)})).length;return{valid:1===r,message:"Each file source must use a unique directory"}},validateName:function(e){var t=e.trim();this.source.name=t;var r=this.sources.filter((function(e){return e.name==t})).length;return{valid:1===r,message:"Name must be unique"}},onDelete:function(e){this.$emit("delete",this.source.id)}}},U=j,H=Object(S["a"])(U,E,k,!1,null,null,null),V=H.exports,W=r("844c"),B=r("af82"),M={name:"TheConfigurator",components:{Draggable:l.a,ValidationObserver:i["a"],ValidationProvider:i["b"],AFolderInput:F,ACheckbox:w["a"],AFileSource:V,WaitDots:W["a"]},data:function(){return{needSaved:!1,isLoadingActions:!1,runHttpServer:u["a"].general.runHttpServer,serverPort:u["a"].general.serverPort,pathToUserActions:u["a"].general.pathToUserActions,logDirectory:u["a"].general.logDirectory,logFilePersistForDays:u["a"].general.logFilePersistForDays,fileSources:c["b"].simpleDeepClone(u["a"].general.fileSources)}},methods:{markForSave:function(e){this.needSaved=!0},onReloadActions:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoadingActions=!0,e.next=3,B["a"].actions.init();case 3:t.isLoadingActions=!1;case 4:case"end":return e.stop()}}),e)})))()},updatePipelineFileSourceReferences:function(){var e=this,t=c["b"].simpleDeepClone(u["a"].pipelines.pipelines),r=c["b"].simpleDeepClone(u["a"].general.fileSources);t.forEach((function(t){for(var o=[],s=function(s){var a=t.sourceNames[s],i=r.find((function(e){return e.name===a})).id,n=e.fileSources.find((function(e){return e.id===i}));n&&o.push(n.name)},a=0;a<t.sourceNames.length;++a)s(a);t.sourceNames=o})),u["a"].pipelines.pipelines=t,u["a"].pipelines.save()},onAddNewSource:function(e){var t={id:c["b"].guid(),name:"",type:-1,sourceDirectory:"",sourceExtensions:[],useProcessedDirectory:!1,processedDirectory:"",useOutputDirectory:!1,outputDirectory:"",useErrorDirectory:!1,errorDirectory:""};this.fileSources.push(t)},onDeleteSource:function(e){var t=this;this.$dialog.openConfirm({name:"confirm",message:"Delete this file source?",onYes:function(){t.fileSources=t.fileSources.filter((function(t){return t.id!=e})),t.markForSave()}})},onConfigurationSubmit:function(e){this.updatePipelineFileSourceReferences(),u["a"].general.runHttpServer=this.runHttpServer,u["a"].general.serverPort=this.serverPort,u["a"].general.pathToUserActions=this.pathToUserActions,u["a"].general.logDirectory=this.logDirectory,u["a"].general.logFilePersistForDays=parseInt(this.logFilePersistForDays,10),u["a"].general.fileSources=c["b"].simpleDeepClone(this.fileSources),p["a"].$emit("filesource-update"),this.$emit("changed"),this.needSaved=!1}}},z=M,Y=(r("ae15"),Object(S["a"])(z,o,s,!1,null,null,null));t["default"]=Y.exports}}]);
//# sourceMappingURL=chunk-8646fade.ef12e368.js.map