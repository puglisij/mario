{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.js","webpack:///./src/host/hostScriptListener.js","webpack:///./src/eventBus.js","webpack:///./src/server/pipelineEngineState.js","webpack:///./src/global/index.js","webpack:///./src/server/imageSource.js","webpack:///external \"crypto\"","webpack:///external \"child_process\"","webpack:///external \"assert\"","webpack:///./src/arrayMap.js","webpack:///./src/store/index.js","webpack:///./src/server/imageSourceType.js","webpack:///./src/folderTree.js","webpack:///./src/components/tabs.vue","webpack:///./src/app.vue?9313","webpack:///./src/themeManager.js","webpack:///src/components/tabs.vue","webpack:///./src/components/tabs.vue?7bcf","webpack:///./src/components/tab.vue?2251","webpack:///src/components/tab.vue","webpack:///./src/components/tab.vue?07ab","webpack:///./src/components/tab.vue","webpack:///./src/components/main-controls.vue?ac11","webpack:///src/components/main-controls.vue","webpack:///./src/components/main-controls.vue?ab1d","webpack:///./src/components/main-controls.vue","webpack:///src/app.vue","webpack:///./src/app.vue?b1d1","webpack:///./src/app.vue","webpack:///./src/dialog/a-dialog-root.vue?ff01","webpack:///./src/dialog/events.js","webpack:///./src/dialog/a-dialog.vue?6302","webpack:///src/dialog/a-dialog.vue","webpack:///./src/dialog/a-dialog.vue?3e02","webpack:///./src/dialog/a-dialog.vue","webpack:///./src/dialog/confirm.vue?0ab4","webpack:///src/dialog/confirm.vue","webpack:///./src/dialog/confirm.vue?f650","webpack:///./src/dialog/confirm.vue","webpack:///src/dialog/a-dialog-root.vue","webpack:///./src/dialog/a-dialog-root.vue?ac8f","webpack:///./src/dialog/a-dialog-root.vue","webpack:///./src/dialog/index.js","webpack:///./src/validation/index.js","webpack:///./src/main.js","webpack:///./src/app.vue?9486","webpack:///./src/host/index.js","webpack:///./src/enum.js","webpack:///./src/components/wait-dots.vue?20d1","webpack:///src/components/wait-dots.vue","webpack:///./src/components/wait-dots.vue?2eb9","webpack:///./src/components/wait-dots.vue","webpack:///external \"util\"","webpack:///external \"os\"","webpack:///external \"stream\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./src/server/image.js","webpack:///./src/fsx.js","webpack:///./src/server/imageFileMover.js","webpack:///./src/unc-safe-path/index.js","webpack:///./src/server/imageFileReader.js","webpack:///./src/server/imageFileProducer.js","webpack:///./src/server/imageFileProducers.js","webpack:///./src/server/pipelineEngine.js","webpack:///./src/server/actions.js","webpack:///./src/server/index.js","webpack:///./src/console/index.js","webpack:///external \"process\"","webpack:///./src/dialog/a-dialog-root.vue?ab78","webpack:///./src/components/tabs.vue?9d5e","webpack:///external \"events\""],"names":["i","chunkIds","length","deferredModules","j","deferredModule","chunkId","existingLinkTags","existingStyleTags","then","type","target","script","enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","console","error","err","jsonpArray","webpackJsonpCallback","EDebounceType","Trailing","Leading","Both","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","throttle","callback","limit","trailingEdge","simpleDeepClone","obj","JSON","parse","stringify","guid","_p8","s","p","Math","random","toString","substr","yyyymmddhhmmss","date","pad2","n","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","first","Array","isArray","keys","unique","arr","Set","getOrDefine","defaultValue","undefined","isBoolean","val","isNumber","isObject","isEmptyObject","isString","isEmptyString","isUndefined","isNull","HostScriptListener","_scriptListenerActive","_scriptListenerReaderActive","_scriptListenerJsLogsPath","upath","join","os","homedir","_scriptListenerVbLogsPath","log","Promise","resolve","fs","writeFile","statSync","size","all","host","runJsx","values","includes","runActionWithParameters","result","Boolean","active","eventBus","Vue","PipelineEngineState","Enum","getAdobeVersions","csInterface","CSInterface","getHostEnvironment","appVersion","appName","getCurrentApiVersion","major","minor","micro","adobeApp","adobeVersion","adobeCEPApiVersion","appInstallPath","normalize","getSystemPath","SystemPath","EXTENSION","appWorkingPath","process","appDefaultLogPath","appBuiltinActionsPath","appTemporaryPath","ImageSource","sourceType","name","sourceDirectory","sourceExtensions","useOutputDirectory","outputDirectory","useProcessedDirectory","processedDirectory","useErrorDirectory","errorDirectory","readMetadata","imageSource","assign","getOwnPropertyNames","exports","require","ArrayMap","map","Map","forEach","array","push","set","projectName","general","Conf","configName","schema","checkIsScriptListenerActiveOnStart","default","pauseAfterEveryPipeline","pauseAfterEveryAction","pauseAfterEveryImage","pauseOnExceptions","logDirectory","logFilePersistForDays","runHttpServer","serverPort","pathToUserActions","fileSources","currentTab","isMainDrawerOpen","generalDecorator","getImageSourceByName","source","find","fromObject","pipelines","pipelinesDecorator","getByNames","pipelineNames","includeDisabled","filter","disabled","getByName","pipelineName","getImageSourceNameToPipelineNameMap","fileSourceNameToPipelineNames","pipeline","sourceNames","fileSourceName","ConfigurationProxy","configurationInstance","configurationObject","events","handler","Error","Reflect","emit","defineProperty","attributes","has","deleteProperty","Proxy","store","EventEmitter","ImageSourceType","FolderTreeNode","isDirectory","parent","children","hasChildren","node","c","names","reverse","namePath","nodeName","shift","isEndOfPath","childIsDirectory","child","getChildByName","addChild","removeChild","arrayify","newNode","oldNode","newRoot","clone","newStack","oldStack","pop","oldChild","newChild","model","_vm","_h","$createElement","_c","_self","attrs","currentTabComponent","on","onTabChanged","_v","staticClass","tag","staticRenderFns","themeManager","updateThemeWithAppSkinInfo","appSkinInfo","sentinelColor","panelBackgroundColor","color","red","themeIsLight","document","body","classList","remove","add","getElementById","href","style","background","toHex","computeValue","rgb","hex","Number","green","blue","onAppThemeColorChanged","event","init","addEventListener","THEME_COLOR_CHANGED_EVENT","component","class","isActive","$event","preventDefault","stopPropagation","onClick","_t","ref","scopedSlots","_u","fn","handleSubmit","indexOf","_k","keyCode","onPipelineRun","directives","rawName","expression","onPipelineResume","onPipelinePause","isStopped","onPipelineStop","_s","pipelineEngineStateText","_e","pipelinefilePathText","pipelineText","pipelineActionText","isOpen","width","height","maxWidth","maxHeight","backdropClose","_g","_b","close","props","listeners","open","onClose","message","$emit","Plugin","install","$dialog","openConfirm","options","ADialogRoot","setInteractionMode","extend","validate","min","max","parseInt","_","params","required","valid","computesRequired","access","exists","allowed","toLowerCase","path","trim","isUnc","startsWith","isAbsolute","chdir","global","__dirname","config","productionTip","devtools","use","Dialog","destroy","Server","Host","Logger","create","window","vue","render","h","App","beforeDestroy","$mount","interface","_initialized","importScript","data","onSetTimeout","apiVersion","appGlobal","getOSInformation","eventName","scope","CSEvent","dispatchEvent","split","callbackId","delay","_this","fileName","importPath","evalScript","reject","lowerCaseResult","functionName","parameters","parametersJson","runJsxWithThrow","charId","stringId","enumArr","offset","create_","nextKey","validName","enumer","isInteger","test","lastIndex","toArray","slice","isValid","toKey","toUpperCase","domProps","dots","Image","initialInputImagePath","inputImagePath","inputDirectory","metadata","jobId","errors","overwrite","fromPath","toPath","rimraf","rename","rmdir","cb","recursive","maxBusyTries","maxRetries","emfileWait","retryDelay","mkdir","dirPath","_mkdirRecursive","child_process","exec","mode","stdout","stderr","code","ImageFileMover","images","image","_writeError","_moveImage","toDirectory","_moveToDirectory","directory","paths","_getImagePaths","basename","fsx","warn","logPath","toLocaleString","flag","isUncPath","isAncestor","ancestor","descendant","relative","endsWith","dirname","_preserveUnc","firstPart","originalPath","newPath","charAt","ImageFileReader","targetPipelines","_isPathDefinedAndAbsolute","uncSafePath","_doesFileExist","_doesPathHaveJsonExtension","_readJson","_ensureAbsolutePath","_makeDirectory","_readMetadata","jsonFilePath","readFile","encoding","ep","exiftool","ExiftoolProcess","pid","fileMetadata","finally","parentDirectory","extname","lstatSync","isFile","e","nextProducerId","ImageFileProducer","_id","_imageSource","_fileWatcher","_isDepleted","_q","_emitQFiles","FILEWATCHER","_sourceFileWatchers","DIRECTORY","_sourceDirectory","OPENFILES","_sourceOpenFiles","BLANK","_sourceBlank","ACTIVEDOCUMENT","_sourceActiveDocument","removeAllListeners","files","_emitFiles","watchPathRoot","watchExtensions","watchPaths","ext","existsSync","watcher","chokidar","watch","ignored","depth","usePolling","interval","awaitWriteFinish","stabilityThreshold","pollInterval","extensions","readdir","file","filePaths","filePath","ImageFileProducers","_producerIdToListenerNames","_producerIdToProducer","_jobs","stopProducers","listenerNames","producer","id","_onProducerFiles","_onProducerDepleted","produce","producerIds","_stopProducers","producerId","delete","getImageSource","jobCreationTime","PipelineEngine","self","_processingMutex","_lastState","STOPPED","_state","_status","fileCount","imageJobId","imageIteration","action","actionName","_imageFileReader","_imageFileMover","_imageFileProducers","_onProducerJob","state","_run","IDLE","imageSourceNameToPipelineNames","imageSourceName","toPipelineNames","startProducer","isProcessing","isIdle","PAUSED","isPaused","PROCESSING","hasProducers","stop","_process","hasJobs","_runWaitOneFrame","_runProcessStart","_runProcessLoop","_runProcessEnd","_stopIfNoProducersElseIdle","_pauseCheck","getTotalJobs","processedImages","_stopCheck","nextJob","read","_runPipelineStart","actions","_runPipelineEnd","move","actionResult","forcePause","once","jobs","getAllJobs","status","jsdoc","ROOT_ACTION_NAMESPACE","ActionDescriptor","description","jsdocDescription","d","descriptor","longname","ActionParameter","fromJSDoc","meta","typeNames","isRequired","jsdocParameter","optional","param","ActionFileDescriptionReader","explain","cache","a","absolutePath","descriptions","_isFunction","_actionNameToJsDoc","kind","memberof","isEnum","ActionFileImportStringBuilder","pathToActions","rootNamespace","_buildJsxImportString","absolutePathToActions","imports","directories","namespace","namespaceDefine","readdirSync","nameParts","nameWithoutExtension","nameSpacedName","absoluteFilePath","Action","importString","Actions","_actionNameToAction","_actionTree","_importAll","_import","importDirectory","build","actionPath","insert","readAll","cloneTree","from","port","app","ServerState","UNINITIALIZED","RUNNING","_httpServer","_pipelineEngine","_actions","express","req","res","version","fullStatus","send","listen","server","CONSOLE_METHODS","initialized","logFileEnabled","originalConsoleMethods","logWriteStream","logBuffer","maxBufferSize","_cleanupFiles","_createFileStream","method","originalMethod","_write","chunk","toLocaleTimeString","htmlChunk","write","yyyymmdd","toISOString","createWriteStream","flags","end","logFilenames","sort","logPaths","howManyToDelete","unlink","reduce","acc","_closeFileStream","logger"],"mappings":"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","file":"js/app.95919bc5.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-5ee75350\":\"7ea20bd8\",\"chunk-61cbdd70\":\"21e3e800\",\"chunk-970c75f4\":\"e50d34b6\",\"chunk-14da460c\":\"1ba390f2\",\"chunk-b59fd176\":\"c3c5d808\",\"chunk-ca6540fe\":\"2dc6c4c1\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-5ee75350\":1,\"chunk-61cbdd70\":1,\"chunk-14da460c\":1,\"chunk-b59fd176\":1,\"chunk-ca6540fe\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-5ee75350\":\"40fcd3af\",\"chunk-61cbdd70\":\"8e1e1399\",\"chunk-970c75f4\":\"31d6cfe0\",\"chunk-14da460c\":\"60205467\",\"chunk-b59fd176\":\"f2d4ab73\",\"chunk-ca6540fe\":\"c7ed6f4e\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const EDebounceType = {\r\n    Trailing: 0,\r\n    Leading: 1,\r\n    Both: 2\r\n};\r\n\r\n/**\r\n *  Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds.\r\n * If `immediate` is EDebounceType.Trailing, trigger the function on the trailing edge, instead of the leading.\r\n * If `immediate` is EDebounceType.Both, trigger the function on both leading and trailing edges.\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this, args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (immediate === EDebounceType.Trailing || immediate === EDebounceType.Both) \r\n                func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) { func.apply(context, args); }\r\n    }\r\n}\r\n\r\n/** \r\n * Returns a function which may only be called once every 'limit' milliseconds.\r\n*/\r\nfunction throttle (callback, limit, trailingEdge) {\r\n    var wait = false;\r\n    return function () {\r\n        var context = this, args = arguments;\r\n        if (!wait) {\r\n            callback.apply(context, args);\r\n            wait = true;\r\n            setTimeout(function () {\r\n                wait = false;\r\n                if(trailingEdge) \r\n                    callback.apply(context, args);         \r\n            }, limit);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Basic object deep cloning using JSON parse & stringify\r\n * @param {object|array} obj \r\n */\r\nfunction simpleDeepClone(obj)\r\n{\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n/**\r\n * Generates a GUID string. Not a standard-compliant GUID.\r\n * @returns {string} The generated GUID.\r\n * @example af8a8416-6e18-a307-bd9c-f2c947bbb3aa\r\n * @author Slavik Meltser.\r\n * @link http://slavik.meltser.info/?p=142\r\n */\r\nfunction guid() \r\n{\r\n    function _p8(s) {\r\n        var p = (Math.random().toString(16)+\"000000000\").substr(2,8);\r\n        return s ? \"-\" + p.substr(0,4) + \"-\" + p.substr(4,4) : p ;\r\n    }\r\n    return _p8() + _p8(true) + _p8(true) + _p8();\r\n}\r\n\r\n/**\r\n* Returns the date in format YYYYMMDDhhmmss\r\n*/\r\nfunction yyyymmddhhmmss(date) \r\n{\r\n    function pad2(n) {  // always returns a string\r\n        return (n < 10 ? '0' : '') + n;\r\n    }\r\n    date = date || new Date();\r\n    return date.getFullYear() +\r\n            pad2(date.getMonth() + 1) + \r\n            pad2(date.getDate()) +\r\n            pad2(date.getHours()) +\r\n            pad2(date.getMinutes()) +\r\n            pad2(date.getSeconds());\r\n}\r\n\r\nfunction first(obj) \r\n{\r\n    if(Array.isArray(obj)) {\r\n        return obj[0];\r\n    } \r\n    return obj[Object.keys(obj)[0]];\r\n}\r\n/**\r\n * Returns new array containing only unique values\r\n * Works for Numbers, Strings, and Boolean\r\n * @param {Array} arr \r\n */\r\nfunction unique(arr) {\r\n    return [...new Set(arr)];\r\n}\r\nfunction getOrDefine(obj, key, defaultValue) \r\n{\r\n    if(obj[key] === undefined) {\r\n        obj[key] = defaultValue;\r\n    }\r\n    return obj[key];\r\n}\r\nfunction isBoolean(val) {\r\n    return typeof val === \"boolean\";\r\n}\r\nfunction isNumber(val) {\r\n    return typeof val === \"number\" && val === val;\r\n}\r\nfunction isObject(val) {\r\n    return val !== null && typeof(val) === \"object\";\r\n}\r\nfunction isEmptyObject(obj) \r\n{\r\n    return Object.keys(obj || {}).length === 0;\r\n}\r\nfunction isString(val) {\r\n    return typeof val === \"string\";\r\n}\r\nfunction isEmptyString(val) {\r\n    return val === \"\";\r\n}\r\nfunction isArray(val) \r\n{\r\n    return Array.isArray(val)\r\n}\r\nfunction isUndefined(val) {\r\n    return typeof val === \"undefined\";\r\n}\r\nfunction isNull(val) {\r\n    return val === null;\r\n}\r\n\r\n\r\nexport default {\r\n    throttle,\r\n    debounce,\r\n    simpleDeepClone,\r\n    guid, \r\n    yyyymmddhhmmss,\r\n    first,\r\n    unique,\r\n    getOrDefine,\r\n    isBoolean, \r\n    isNumber,\r\n    isObject,\r\n    isEmptyObject,\r\n    isString,\r\n    isEmptyString,\r\n    isArray,\r\n    isUndefined, \r\n    isNull\r\n}","import os from 'os';\r\nimport fs from 'fs';\r\nimport upath from 'upath';\r\nimport host from './index';\r\n\r\n/**\r\n * Creative Suite Extendscript Script Listener Interface\r\n */\r\nclass HostScriptListener\r\n{\r\n    constructor() {\r\n        this._scriptListenerActive = false;\r\n        this._scriptListenerReaderActive = false;\r\n\r\n        this._scriptListenerJsLogsPath = upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerJS.log\");\r\n        this._scriptListenerVbLogsPath = upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerVB.log\");\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        console.log(\"HostScriptListener initialized.\");\r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        // Cleanup\r\n    }\r\n    startScriptListenerReader()\r\n    {\r\n        // Determine if ScriptListener is on \r\n        // Folder.desktop\r\n        // const listenerLogsPath =  upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerJS.log\");\r\n        // const scriptWatcher = chokidar.watch(listenerLogsPath, {\r\n        //     awaitWriteFinish: {\r\n        //         pollInterval: 100,\r\n        //         stabilityThreshold: 2000\r\n        //     }\r\n        // });\r\n        // scriptWatcher.on(\"change\", debounce(this.readScriptListenerLog, 1000));\r\n        // //...\r\n        // scriptWatcher.removeAllListeners();\r\n        // scriptWatcher.close();\r\n        // //...\r\n\r\n        this._scriptListenerReaderActive = true;\r\n    }\r\n    stopScriptListenerReader() \r\n    {\r\n\r\n    }\r\n    clearScriptListenerLogs() \r\n    {\r\n        fs.writeFile(this._scriptListenerJsLogsPath, \"\", err => {\r\n            if(err) throw err; \r\n        });\r\n        fs.writeFile(this._scriptListenerVbLogsPath, \"\", err => {\r\n            if(err) throw err;\r\n        });\r\n    }\r\n    onScriptListenerLogs() \r\n    {\r\n        // IMPORTANT: Somme commands generated by ScriptListenerPlugin will not run via evalScript.\r\n        // In particular, modal commands, such as \"modalStateChanged\" will throw an error\r\n        // fs.readFile(path, (err, data) => {\r\n        //     if(err) throw err; \r\n\r\n        //     fire event? or call registered callback?\r\n        // });\r\n    }\r\n    isScriptListenerActive() \r\n    {\r\n        let initialSize = 0;\r\n        try {\r\n            initialSize = fs.statSync(this._scriptListenerJsLogsPath).size;\r\n        } catch {}\r\n        \r\n        // How this works:\r\n        // Since Extendscript runs on a single thread, and ScriptListener runs on this same thread.\r\n        // The 1st call triggers ScriptListener to record actions.\r\n        // The 2nd call is to ensure ScriptListener is done recording, before we read log file stats.\r\n        return Promise.all([\r\n            host.runJsx(`\r\n                app.bringToFront();\r\n                var document = app.documents.add(\"1px\", \"1px\", 1, \"ScriptListenerCheck\");\r\n                document.close(SaveOptions.SAVECHANGES);\r\n            `),\r\n            host.runJsx(`noop();`)\r\n        ])\r\n        .then(values => {\r\n            if(values[0].includes(\"error\")) {\r\n                console.error(\"Could not determine if ScriptListener is active.\");\r\n                return false;\r\n            }\r\n            try {\r\n                fs.statSync(this._scriptListenerJsLogsPath).size > initialSize;\r\n            } catch {\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    isScriptListenerIstalled()\r\n    {\r\n        return host.runActionWithParameters(\"action.getIsScriptListenerInstalled\")\r\n        .then(result => Boolean(result));\r\n    }\r\n    toggleScriptListener(active)\r\n    {\r\n        return host.runActionWithParameters(\"action.setScriptListenerActive\", active);\r\n    }\r\n}\r\n\r\nexport default new HostScriptListener();","import Vue from 'vue';\r\nconst eventBus = new Vue();\r\nexport default eventBus;\r\n","import Enum from '../enum';\r\n\r\nconst PipelineEngineState = new Enum([\r\n    \"STOPPED\",\r\n    \"IDLE\", \r\n    \"PAUSED\",\r\n    \"PROCESSING\",\r\n]);\r\n\r\nexport default PipelineEngineState;","import upath from 'upath';\r\nimport { version as appVersion } from '../../package.json';\r\n\r\nfunction getAdobeVersions() \r\n{\r\n    const csInterface = new CSInterface();\r\n    const { appVersion, appName } = csInterface.getHostEnvironment();\r\n    const { major, minor, micro } = csInterface.getCurrentApiVersion();\r\n\r\n    return {\r\n        adobeApp: appName,\r\n        adobeVersion: appVersion, \r\n        adobeCEPApiVersion: `${major}.${minor}.${micro}`\r\n    }\r\n}\r\n\r\nconst appInstallPath = upath.normalize(new CSInterface().getSystemPath(SystemPath.EXTENSION));\r\nconst appWorkingPath = upath.join(appInstallPath, process.env.VUE_APP_HOST_DIR);\r\nconst appDefaultLogPath = upath.join(appWorkingPath, \"logs\");\r\nconst appBuiltinActionsPath = upath.join(appWorkingPath, \"actions\");\r\nconst appTemporaryPath = upath.join(appWorkingPath, \"tmp\");\r\n\r\nexport default {\r\n    appVersion,\r\n    appInstallPath, \r\n    appWorkingPath,\r\n    appDefaultLogPath,\r\n    appBuiltinActionsPath,\r\n    appTemporaryPath,\r\n    ...getAdobeVersions()\r\n}","\r\nexport default class ImageSource\r\n{\r\n    /**\r\n     * Configuration for sourcing new images for processing\r\n     * @param {ImageSourceType} sourceType e.g. ImageSourceType.FILEWATCHER\r\n     * @param {string} name a user friendly name for the image source \r\n     * @param {string} [sourceDirectory] \r\n     * @param {Array<string>} [sourceExtensions] file extensions allowed by this file source (without '.')\r\n     * @param {boolean} [useOutputDirectory = false]\r\n     * @param {string} [outputDirectory] directory where pipeline outputs will be written\r\n     * @param {boolean} [useProcessedDirectory = false]\r\n     * @param {string} [processedDirectory] directory where source files will be moved to when finished processing\r\n     * @param {boolean} [useErrorDirectory = false]\r\n     * @param {string} [errorDirectory] directory where source files will be moved when an error is encountered\r\n     * @param {boolean} [readMetadata = false]\r\n     */\r\n    constructor(\r\n        sourceType, \r\n        name,\r\n        sourceDirectory, \r\n        sourceExtensions, \r\n        useOutputDirectory = false, \r\n        outputDirectory = \"\", \r\n        useProcessedDirectory = false,\r\n        processedDirectory = \"\", \r\n        useErrorDirectory = false,\r\n        errorDirectory = \"\",\r\n        readMetadata = false)\r\n    {\r\n        this.name = name;\r\n        this.sourceType = sourceType;\r\n        this.sourceDirectory = sourceDirectory;\r\n        this.sourceExtensions = sourceExtensions;\r\n\r\n        this.useOutputDirectory = useOutputDirectory;\r\n        this.outputDirectory = outputDirectory;\r\n        this.useProcessedDirectory = useProcessedDirectory;\r\n        this.processedDirectory = processedDirectory;\r\n        this.useErrorDirectory = useErrorDirectory;\r\n        this.errorDirectory = errorDirectory;\r\n        this.readMetadata = readMetadata;\r\n    }\r\n\r\n    clone() \r\n    {\r\n        // Shallow copy\r\n        let imageSource = new ImageSource();\r\n        return Object.assign(imageSource, this);\r\n    }\r\n    toString() \r\n    {\r\n        return `name = \"${this.name}\" type = ${this.sourceType} directory = \"${this.sourceDirectory}\"`;\r\n    }\r\n\r\n    static fromObject(object)\r\n    {\r\n        let imageSource = new ImageSource();\r\n        for(const key of Object.getOwnPropertyNames(object)) {\r\n            if(imageSource.hasOwnProperty(key)) {\r\n                imageSource[key] = object[key];\r\n            }\r\n        }\r\n        return imageSource;\r\n    }\r\n}\r\n","module.exports = require(\"crypto\");","module.exports = require(\"child_process\");","module.exports = require(\"assert\");","\r\nexport default class ArrayMap \r\n{\r\n    constructor() {\r\n        this.map = new Map();\r\n        [\"get\", \"has\", \"delete\", \"keys\", \"values\"].forEach(key => {\r\n            this[key] = this.map[key].bind(this.map);\r\n        });\r\n    }\r\n    set(key, value) {\r\n        let array = this.map.get(key);\r\n        if(Array.isArray(array)) {\r\n            array.push(value);\r\n        } else {\r\n            this.map.set(key, [value]);\r\n        }\r\n    }\r\n}","import Conf from 'conf';\r\nimport { EventEmitter } from 'events'\r\nimport ImageSource from '../server/imageSource';\r\nimport ArrayMap from '../arrayMap';\r\n\r\nimport _ from '../utils';\r\n\r\n// TODO: Split General & Pipelines into their own Classes (and files)\r\n\r\nconst projectName = \"Mario\";\r\n/**\r\n * General app configuration data \r\n */\r\nconst general = new Conf({\r\n    projectName,\r\n    configName: \"general\",\r\n    // See: http://json-schema.org/draft/2019-09/json-schema-validation.html\r\n    schema: {\r\n        checkIsScriptListenerActiveOnStart: {\r\n            type: \"boolean\", \r\n            default: true\r\n        },\r\n        pauseAfterEveryPipeline: {\r\n            type: \"boolean\",\r\n            default: false\r\n        },\r\n        pauseAfterEveryAction: {\r\n            type: \"boolean\",\r\n            default: false\r\n        },\r\n        pauseAfterEveryImage: {\r\n            type: \"boolean\",\r\n            default: false\r\n        },\r\n        pauseOnExceptions: {\r\n            type: \"boolean\",\r\n            default: false\r\n        },\r\n        logDirectory: { \r\n            type: \"string\",\r\n            default: \"\"\r\n        },\r\n        logFilePersistForDays: {\r\n            type: \"number\", \r\n            default: 3\r\n        },\r\n        runHttpServer: {\r\n            type: \"boolean\",\r\n            default: false\r\n        },\r\n        serverPort: {\r\n            type: \"number\",\r\n            default: 3001\r\n        },\r\n        pathToUserActions: {\r\n            type: \"string\",\r\n            default: \"\"\r\n        }, \r\n        fileSources: {\r\n            type: \"array\",\r\n            default: [\r\n                // Objects matching ImageSource\r\n            ]\r\n        },\r\n        currentTab: {\r\n            type: \"string\",\r\n            default: \"the-jsx-runner\"\r\n        },\r\n        isMainDrawerOpen: {\r\n            type: \"boolean\", \r\n            default: false\r\n        }\r\n    }\r\n});\r\nconst generalDecorator = {\r\n    /**\r\n     * Returns the ImageSource by the given name\r\n     * @param {string} name \r\n     * @returns {ImageSource}\r\n     */\r\n    getImageSourceByName(name) \r\n    {\r\n        const source = this.fileSources.find(s => s.name === name);\r\n        if(source) {\r\n            return ImageSource.fromObject(source);\r\n        }\r\n        return null;\r\n    }\r\n};\r\n\r\n/**\r\n * Pipeline configurations \r\n */\r\nconst pipelines = new Conf({\r\n    projectName,\r\n    configName: \"pipelines\",\r\n    // See: http://json-schema.org/draft/2019-09/json-schema-validation.html\r\n    schema: {\r\n        pipelines: {\r\n            type: \"array\",\r\n            default: [\r\n                // TODO: Add Schema validation\r\n                // {\r\n                //   id: \"\",\r\n                //   name: \"\",\r\n                //   sourceNames: [], \r\n                //   disabled: false,\r\n                //   actions: []\r\n                // }\r\n            ]\r\n        }\r\n    }\r\n});\r\nconst pipelinesDecorator = {\r\n    getByNames(pipelineNames, includeDisabled)\r\n    {\r\n        return this.pipelines.filter(p => {\r\n            return pipelineNames.includes(p.name) && (includeDisabled || !p.disabled);\r\n        });\r\n    },\r\n    getByName(pipelineName, includeDisabled) \r\n    {\r\n        return this.pipelines.find(p => {\r\n            return p.name === pipelineName && (includeDisabled || !p.disabled); \r\n        });\r\n    },\r\n    /**\r\n     * Returns unique mapping of image source name -> pipeline name\r\n     * @param {Array<string>} pipelineNames\r\n     * @param {boolean} [includeDisabled = false]\r\n     * @returns {ArrayMap<string, string>}\r\n     */\r\n    getImageSourceNameToPipelineNameMap(pipelineNames, includeDisabled) \r\n    {\r\n        // Collect all unique file sources for given pipelines\r\n        let fileSourceNameToPipelineNames = new ArrayMap();\r\n        pipelineNames.forEach(pipelineName =>\r\n        {\r\n            const pipeline = this.getByName(pipelineName);\r\n            if(!pipeline) {\r\n                return;\r\n            }\r\n            for(let fileSourceName of pipeline.sourceNames) {\r\n                fileSourceNameToPipelineNames.set(fileSourceName, pipeline.name);\r\n            }\r\n        });\r\n        return fileSourceNameToPipelineNames;\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Note that 'conf' does not monitor property changes on configuration object returned by .store property\r\n * Note Conf.store returns a new object each time\r\n * So we use our own Proxy here\r\n */\r\nconst ConfigurationProxy = (configurationInstance, configurationObject, events) => {\r\n\tconst handler = {\r\n        set(target, property, value) \r\n        {\r\n            if(typeof target[property] !== typeof value) {\r\n                throw new Error(\"Attempt to set configuration property \" + property + \" with different type. This should not happen.\");\r\n            } else {\r\n                Reflect.set(target, property, value);\r\n                configurationInstance.set(property, value);\r\n                events.emit(\"change\", property);\r\n                console.log(\"Configuration updated. \" + property + \" -> \" + value);\r\n                return true;\r\n            }\r\n        },\r\n        defineProperty(target, property, attributes) {\r\n            if(!Reflect.has(target, property)) {\r\n                throw new Error(\"Attempt to define new property \" + property + \" on configuration object. This should not happen.\");\r\n            }\r\n        },\r\n        deleteProperty() {\r\n            throw new Error(\"Attempt to delete property \"  + property + \" from configuration object. This should not happen.\");\r\n        }\r\n\t};\r\n\r\n\treturn new Proxy(configurationObject, handler);\r\n};\r\n\r\n/**\r\n * Root level configuration storage object\r\n * Configurations are split up as separate store properties\r\n */\r\nconst store = new EventEmitter();\r\n/**\r\n * General configuration storage\r\n * NOTE: Only set root level properties or settings will be be saved to file\r\n * NOTE: Properties are set by Reference.\r\n */\r\nstore.general = ConfigurationProxy(general, Object.assign(general.store, generalDecorator), store);\r\n/**\r\n * Pipeline configuration storage\r\n * NOTE: Only set root level properties or settings will be be saved to file\r\n * NOTE: Properties are set by Reference.\r\n */\r\nstore.pipelines = ConfigurationProxy(pipelines, Object.assign(pipelines.store, pipelinesDecorator), store);\r\n\r\n\r\nexport default store;","import Enum from '../enum';\r\n\r\nconst ImageSourceType = new Enum([\r\n    \"OPENFILES\", \r\n    \"DIRECTORY\", \r\n    \"FILEWATCHER\",\r\n    \"BLANK\",\r\n    \"ACTIVEDOCUMENT\",\r\n    \"REST\"\r\n]);\r\n\r\nexport default ImageSourceType","export default class FolderTreeNode\r\n{\r\n    constructor(name = \"\", isDirectory = false) {\r\n        // FolderTree\r\n        this.parent = null;\r\n        // boolean\r\n        this.isDirectory = isDirectory;\r\n        // string\r\n        this.name = name || \"\";\r\n        // Array<FolderTree>\r\n        this.children = [];\r\n    }\r\n    isRoot() { \r\n        return this.parent === null;\r\n    }\r\n    isLeaf() {\r\n        return !this.hasChildren();\r\n    }\r\n    hasChildren() {\r\n        return this.children.length > 0;\r\n    }\r\n    addChild(node)\r\n    {\r\n        node.parent = this;\r\n        this.children.push(node);\r\n    }\r\n    removeChild(node)\r\n    {\r\n        this.children = this.children.filter(c => c !== node);\r\n    }\r\n    getChildByName(name) {\r\n        return this.children.find(c => c.name === name);\r\n    }\r\n    /**\r\n     * @returns {string[]} an array of node names indicating the path to this node from the root\r\n     */\r\n    getNamePath() {\r\n        let node = this;\r\n        let names = [node.name];\r\n        while(node && (node = node.parent)) {\r\n            names.push(node.name);\r\n        }\r\n        return names.reverse();\r\n    }\r\n    insert(namePath, isDirectory)\r\n    {\r\n        let node = this;\r\n        let nodeName = (this.name === namePath[0]) ? namePath.shift() : \"\";\r\n        while(nodeName = namePath.shift())\r\n        {\r\n            const isEndOfPath = namePath.length === 0;\r\n            const childIsDirectory = isEndOfPath && !isDirectory ? false : true;\r\n            let child = node.getChildByName(nodeName);\r\n            if(!child) {\r\n                child = new FolderTreeNode(nodeName, childIsDirectory);\r\n                node.addChild(child);\r\n            } \r\n            node = child;\r\n        }\r\n    }\r\n    /**\r\n     * Returns the node given at the end of the name path by traversing the tree\r\n     * @param {string[]} namePath \r\n     * @returns {FolderTreeNode} or null\r\n     */\r\n    traverse(namePath)\r\n    {\r\n        let node = this;\r\n        let nodeName = (this.name === namePath[0]) ? namePath.shift() : \"\";\r\n        while(node && (nodeName = namePath.shift())) {\r\n            node = node.getChildByName(nodeName);\r\n        }\r\n        return node;\r\n    }\r\n    drop()\r\n    {\r\n        this.parent.removeChild(this);\r\n        this.parent = null;\r\n    }\r\n    arrayify(node)\r\n    {\r\n        // pre order traversal\r\n        if(node.hasChildren()) {\r\n            const result = node.children.map(c => node.arrayify(c));\r\n            return [node.name, result];\r\n        } else {\r\n            return node.name;\r\n        }\r\n    }\r\n    /**\r\n     * Clones this Folder tree node\r\n     */\r\n    clone()\r\n    {\r\n        return new FolderTreeNode(this.name, this.isDirectory);\r\n    }\r\n    /**\r\n     * Clones the Folder tree using this node as the root node\r\n     */\r\n    cloneTree()\r\n    {\r\n        let newRoot = this.clone();\r\n        let newStack = [newRoot];\r\n        let oldStack = [this];\r\n        let newNode, oldNode;\r\n        while((oldNode = oldStack.pop()) && (newNode = newStack.pop()))\r\n        {\r\n            for(let i = 0; i < oldNode.children.length; ++i)\r\n            {\r\n                let oldChild = oldNode.children[i];\r\n                let newChild = oldChild.clone();\r\n                newNode.addChild(newChild);\r\n                newStack.push(newChild);\r\n                oldStack.push(oldChild);\r\n            }\r\n        }\r\n        return newRoot;\r\n    }\r\n    parse(model)\r\n    {\r\n\r\n    }\r\n}\r\n","var render, staticRenderFns\nimport script from \"./tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tabs.vue?vue&type=style&index=0&id=55ac743d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"55ac743d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('a-dialog-root'),_c('adobe-menus'),_c('tabs',{attrs:{\"initial-tab\":_vm.currentTabComponent},on:{\"changed\":_vm.onTabChanged}},[_c('tab',{attrs:{\"title\":\"the-console\"}},[_vm._v(\"Console\")]),_c('tab',{attrs:{\"title\":\"the-jsx-runner\"}},[_vm._v(\"Jsx\")]),_c('tab',{attrs:{\"title\":\"the-configurator\"}},[_vm._v(\"Configuration\")]),_c('tab',{attrs:{\"title\":\"the-pipelines\"}},[_vm._v(\"Pipelines\")])],1),_c('main-controls'),_c('section',{staticClass:\"tab-content\"},[_c('keep-alive',[_c(_vm.currentTabComponent,{tag:\"component\"})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const themeManager = (function () \n{\n    'use strict';\n    const csInterface = new CSInterface();\n\n    /**\n     * Update theme with AppSkinInfo from Host Product\n     */\n    function updateThemeWithAppSkinInfo(appSkinInfo) \n    {\n        let sentinelColor = appSkinInfo.panelBackgroundColor.color.red;\n        let themeIsLight = sentinelColor > 128;\n        \n        if (themeIsLight) {\n            document.body.classList.remove(\"dark\");\n            document.body.classList.add(\"light\");\n            document.getElementById(\"theme\").href = \"css/topcoat-desktop-light.css\";\n        } else {\n            document.body.classList.remove(\"light\");\n            document.body.classList.add(\"dark\");\n            document.getElementById(\"theme\").href = \"css/topcoat-desktop-dark.css\";\n        }\n        \n        document.body.style.background = \"#\" + toHex(appSkinInfo.panelBackgroundColor.color);\n    }\n\n    function toHex(color) \n    {\n        function computeValue(rgb) { \n            let hex = Number(rgb).toString(16);\n            if (hex.length < 2) { hex = \"0\" + hex }\n            return hex;\n        };\n        let hex = \"\";\n        if (color) {\n            hex = computeValue(color.red) + \n                    computeValue(color.green) + \n                    computeValue(color.blue);\n        }\n        return hex;\n    }\n  \n    function onAppThemeColorChanged(event) \n    {\n        let appSkinInfo = csInterface.getHostEnvironment().appSkinInfo;\n        updateThemeWithAppSkinInfo(appSkinInfo);\n    }\n  \n    function init() \n    {\n        let appSkinInfo = csInterface.getHostEnvironment().appSkinInfo;\n        updateThemeWithAppSkinInfo(appSkinInfo);\n        csInterface.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT, onAppThemeColorChanged);\n    }\n  \n    return {\n        init: init\n    };\n  \n  }());\n\n  export default themeManager;","\r\n\r\n<script>\r\nexport default {\r\n    name: \"Tabs\",\r\n    props: {\r\n        initialTab: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            activeTab: this.initialTab\r\n        }\r\n    },\r\n    computed: {\r\n        tabsList() {\r\n            return this.$slots.default;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$on('tab-click', this.onTabClick);\r\n    },\r\n    methods: {\r\n        onTabClick(tab) {\r\n            this.activeTab = tab;\r\n            this.$emit(\"changed\", this.activeTab);\r\n        },\r\n        isActiveTab(tab) {\r\n            return this.activeTab === tab;\r\n        }\r\n    },\r\n    render: function(createElement) {\r\n        // return a vnode (virtual dom node)\r\n        return createElement(\r\n            \"ul\",\r\n            {\r\n                class: \"tabs\"\r\n            },\r\n            // array of children\r\n            this.$slots.default.map(child => {\r\n                return createElement(\r\n                    \"li\", \r\n                    {\r\n                        class: \"tab\"\r\n                    },\r\n                    [child]\r\n                )\r\n            })\r\n        );\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .tabs {\r\n        display: flex;\r\n        flex-shrink: 0;\r\n        justify-items: center;\r\n        list-style: none;\r\n        margin: .5em auto;\r\n        margin-right: auto;\r\n        padding: 0;\r\n        width: 300px;\r\n    }\r\n    .tab {\r\n        flex-grow: 1;\r\n    }\r\n    .tab button {\r\n        height: 1.5rem;\r\n        width: 100%;\r\n    }\r\n    .tab:first-of-type button {\r\n        border-left-width: 1px;\r\n        border-radius: 5px 0 0 5px;\r\n    }\r\n    .tab:last-of-type button {\r\n        border-radius: 0 5px 5px 0;\r\n    }\r\n    .dark button {\r\n        background: $dark-button-bg-inactive;\r\n        border: 1px solid $dark-button-border;\r\n        border-left-width: 0;\r\n        color: $dark-text-color;\r\n\r\n        &.active {\r\n            background: $dark-button-bg-active;\r\n            color: $dark-button-text-color-active;\r\n        }\r\n    }\r\n    .light button {\r\n        background: $light-button-bg-inactive;\r\n        border: 1px solid $light-button-border;\r\n        border-left-width: 0;\r\n        color: $light-text-color;\r\n\r\n        &.active {\r\n            background: $light-button-bg-active;\r\n            color: $light-button-text-color-active;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:{ active: _vm.isActive },on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClick($event)}}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <button :class=\"{ active: isActive }\" @click.prevent.stop=\"onClick\">\r\n        <slot></slot>\r\n    </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Tab\",\r\n    props: {\r\n      title: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    computed: {\r\n        isActive() {\r\n            return this.$parent.activeTab == this.title;\r\n        }\r\n    },\r\n    methods: {\r\n        onClick(e) {\r\n            this.$parent.$emit(\"tab-click\", this.title);\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tab.vue?vue&type=template&id=f5f7bfa6&\"\nimport script from \"./tab.vue?vue&type=script&lang=js&\"\nexport * from \"./tab.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('validation-observer',{ref:\"observer\",attrs:{\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('form',{staticClass:\"main-controls my2\",on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();},\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onPipelineRun)}}},[_c('div',{staticClass:\"main-controls__controls mb2\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStopped),expression:\"isStopped\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"submit\",\"title\":\"Run all pipelines on the selected source.\"}},[_vm._v(\"\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isPaused),expression:\"isPaused\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Resume processing.\"},on:{\"click\":_vm.onPipelineResume}},[_vm._v(\"Resume\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canPause),expression:\"canPause\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Pause processing.\"},on:{\"click\":_vm.onPipelinePause}},[_vm._v(\"\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isStopped),expression:\"!isStopped\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Stop all pipelines and file sources.\"},on:{\"click\":_vm.onPipelineStop}},[_vm._v(\"\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isMainDrawerOpen),expression:\"isMainDrawerOpen\"}],staticClass:\"main-controls__drawer columns\"},[_c('div',{staticClass:\"column is-half-tablet\"},[_c('h3',{staticClass:\"section-title\"},[_vm._v(\"Pipelines Status\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineEngineStateText))]),(_vm.pipelinefilePathText)?_c('h3',{staticClass:\"section-title\"},[_vm._v(\"Current Source Path\")]):_vm._e(),_c('div',[_vm._v(_vm._s(_vm.pipelinefilePathText))])]),_c('div',{staticClass:\"column is-half-tablet\"},[_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pipelineText),expression:\"pipelineText\"}],staticClass:\"section-title\"},[_vm._v(\"Pipeline\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineText))]),_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pipelineActionText),expression:\"pipelineActionText\"}],staticClass:\"section-title\"},[_vm._v(\"Action\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineActionText))])])]),_c('div',{staticClass:\"main-controls__drawer-toggle\",class:{ active: _vm.isMainDrawerOpen }},[_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isMainDrawerOpen = !_vm.isMainDrawerOpen}}},[_vm._v(\"Source & Status \"),_c('span',[_vm._v(\"\")])])])])]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <validation-observer \r\n        ref=\"observer\"\r\n        slim\r\n        v-slot=\"{ handleSubmit }\"\r\n    >\r\n        <form \r\n            class=\"main-controls my2\"\r\n            @keydown.enter.prevent\r\n            @submit.prevent=\"handleSubmit(onPipelineRun)\"\r\n        >\r\n            <div class=\"main-controls__controls mb2\">\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"submit\"\r\n                    title=\"Run all pipelines on the selected source.\"\r\n                    v-show=\"isStopped\">&#9654;</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelineResume\"\r\n                    title=\"Resume processing.\"\r\n                    v-show=\"isPaused\">Resume</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelinePause\"\r\n                    title=\"Pause processing.\"\r\n                    v-show=\"canPause\">&#10074;&#10074;</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelineStop\"\r\n                    title=\"Stop all pipelines and file sources.\"\r\n                    v-show=\"!isStopped\" \r\n                    >&#9724;</button>\r\n            </div>\r\n            <div class=\"main-controls__drawer columns\" \r\n                v-show=\"isMainDrawerOpen\"\r\n            >\r\n                <div class=\"column is-half-tablet\">\r\n                    <h3 class=\"section-title\">Pipelines Status</h3>\r\n                    <div>{{ pipelineEngineStateText }}</div>\r\n                    <h3 class=\"section-title\" v-if=\"pipelinefilePathText\">Current Source Path</h3>\r\n                    <div>{{ pipelinefilePathText }}</div>\r\n                    <!-- <div v-if=\"isInitializing\">Initializing<wait-dots/></div> -->\r\n                </div>\r\n                <div class=\"column is-half-tablet\">\r\n                    <h3 class=\"section-title\" v-show=\"pipelineText\">Pipeline</h3>\r\n                    <div>{{ pipelineText }}</div>\r\n                    <h3 class=\"section-title\" v-show=\"pipelineActionText\">Action</h3>\r\n                    <div>{{ pipelineActionText }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"main-controls__drawer-toggle\" :class=\"{ active: isMainDrawerOpen }\">\r\n                <button \r\n                    class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"isMainDrawerOpen = !isMainDrawerOpen\"\r\n                >Source &amp; Status <span></span></button>\r\n            </div>\r\n        </form>\r\n    </validation-observer>\r\n</template>\r\n\r\n<script>\r\nimport { ValidationProvider, ValidationObserver } from \"vee-validate\";\r\n\r\nimport _ from \"../utils\";\r\nimport store from \"../store\"; \r\nimport eventBus from \"../eventBus\";\r\nimport Server from '../server';\r\nimport PipelineEngineState from '../server/pipelineEngineState';\r\nimport WaitDots from './wait-dots.vue';\r\n\r\nexport default {\r\n    name: 'MainControls',\r\n    components: {\r\n        ValidationObserver,\r\n        ValidationProvider,\r\n        WaitDots\r\n    },\r\n    data() {\r\n        return {\r\n            pipelineEngineState: Server.pipelineEngine.state,\r\n            pipelineText: \"\",\r\n            pipelineActionText: \"\",\r\n            pipelinefilePathText: \"\",\r\n            isMainDrawerOpen: store.general.isMainDrawerOpen\r\n        }\r\n    },\r\n    watch: {\r\n        isMainDrawerOpen: v => { store.general.isMainDrawerOpen = v; }\r\n        // imageSource: {\r\n        //     deep: true, \r\n        //     handler: function(v) {\r\n        //         store.general.imageSource = v;\r\n        //     }\r\n        // }\r\n    },\r\n    computed: {\r\n        canPause() {\r\n            return this.pipelineEngineState == PipelineEngineState.IDLE \r\n                || this.pipelineEngineState == PipelineEngineState.PROCESSING;\r\n        },\r\n        isStopped() {\r\n            return this.pipelineEngineState == PipelineEngineState.STOPPED;\r\n        },\r\n        isPaused() {\r\n            return this.pipelineEngineState == PipelineEngineState.PAUSED;\r\n        },\r\n        isProcessing() {\r\n            return this.pipelineEngineState == PipelineEngineState.PROCESSING;\r\n        },\r\n        pipelineEngineStateText() {\r\n            return PipelineEngineState.toKey(this.pipelineEngineState);\r\n        }\r\n    },\r\n    created() \r\n    {\r\n        eventBus.$on(\"pipeline-play\", pipelineName => {\r\n            Server.pipelineEngine.run(pipelineName);\r\n        });\r\n        Server.pipelineEngine.on(\"state\", state => {\r\n            this.pipelineEngineState = state;\r\n        });\r\n        Server.pipelineEngine.on(\"status\", status => {\r\n            this.pipelineText = status.pipeline;\r\n            this.pipelineActionText = status.action;\r\n            this.pipelinefilePathText = status.file;\r\n        });\r\n    },\r\n    methods: {\r\n        /**\r\n         * Submit handler\r\n         */\r\n        onPipelineRun() {\r\n            this.$dialog.openConfirm({\r\n                name: \"confirm\",\r\n                message: \"This will run all pipelines with their configured sources. Continue?\",\r\n                onYes: () => {\r\n                    Server.pipelineEngine.runAll();\r\n                }\r\n            });\r\n        },\r\n        onPipelineResume() {\r\n            Server.pipelineEngine.resume();\r\n        },\r\n        onPipelinePause() {\r\n            Server.pipelineEngine.pause();\r\n        },\r\n        onPipelineStop() {\r\n            Server.pipelineEngine.stop();\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-controls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-controls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main-controls.vue?vue&type=template&id=23770c66&\"\nimport script from \"./main-controls.vue?vue&type=script&lang=js&\"\nexport * from \"./main-controls.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <a-dialog-root />\r\n    <adobe-menus />\r\n    \r\n    <tabs @changed=\"onTabChanged\" :initial-tab=\"currentTabComponent\">\r\n        <tab title=\"the-console\">Console</tab>\r\n        <tab title=\"the-jsx-runner\">Jsx</tab>\r\n        <tab title=\"the-configurator\">Configuration</tab>\r\n        <tab title=\"the-pipelines\">Pipelines</tab>\r\n    </tabs>\r\n\r\n    <main-controls />\r\n\r\n    <section class=\"tab-content\">\r\n        <keep-alive>\r\n            <component :is=\"currentTabComponent\"></component>\r\n        </keep-alive>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* Can also use cep_node.require */\r\n/* npm modules */ \r\nimport upath from 'upath'; \r\n\r\n/* local modules */\r\nimport store from './store';\r\nimport themeManager from \"./themeManager\";\r\nimport Tabs from './components/tabs.vue';\r\nimport Tab from './components/tab.vue';\r\nimport MainControls from './components/main-controls.vue';\r\n\r\nexport default {\r\n    name: \"app\",\r\n    components: {\r\n        MainControls,\r\n        Tabs, \r\n        Tab,\r\n        AdobeMenus: () => import(\"./components/adobe-menus.vue\"),\r\n        TheConsole: () => import('./components/the-console.vue'),\r\n        TheJsxRunner: () => import(\"./components/the-jsx-runner.vue\"),\r\n        TheConfigurator: () => import(\"./components/the-configurator.vue\"),\r\n        ThePipelines: () => import(\"./components/the-pipelines.vue\")\r\n    },\r\n    data: () => {\r\n        return {\r\n            currentTabComponent: store.general.currentTab\r\n        }\r\n    },\r\n    mounted() {\r\n        themeManager.init();\r\n        this.hideLoadingSpinner();\r\n    },\r\n    methods: {\r\n        onTabChanged(tabTitle) {\r\n            store.general.currentTab = tabTitle;\r\n            this.currentTabComponent = tabTitle;\r\n        },\r\n        hideLoadingSpinner() {\r\n            let spinnerEl = document.getElementById(\"loading\");\r\n            if (spinnerEl) \r\n                spinnerEl.style.display = \"none\";\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n/* Various helper styles to match application theme */\r\n@import url(\"http://fonts.googleapis.com/css?family=Source+Sans+Pro:300\");\r\n@import url(\"http://fonts.googleapis.com/css?family=Source+Code+Pro\");\r\n@import \"./styles/columns\";\r\n\r\n\r\n\r\nhtml, body {\r\n    font-size: 14px;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 100%;\r\n}\r\nbody {\r\n    font-family: source-sans-pro, sans-serif;\r\n    line-height: 1.5rem;\r\n\r\n    &.light {\r\n        background: #F4F4F4;\r\n        color: #181919;\r\n    }\r\n    &.dark {\r\n        color: $dark-text-color;\r\n        background: $dark-bg;\r\n    }\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n}\r\n\r\nh1, h2, h3 {\r\n    margin: 0 0 0.5em 0;\r\n}\r\nh1 {\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    margin: 0.5em;\r\n}\r\nh2 {\r\n    font-size: 16px;\r\n    font-weight: 300;\r\n}\r\nh3 {\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n}\r\nh4 {\r\n    font-size: 12px; \r\n    font-weight: 400;\r\n}\r\n.dark .text-highlight {\r\n    color: $dark-text-highlight-color;\r\n}\r\n\r\n\r\n#app {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n}\r\n\r\n.tab-title {\r\n    font-weight: bold;\r\n    padding: .25rem .5rem;\r\n    left: -.5rem;\r\n    position: relative;\r\n    width: 100vw;\r\n\r\n    @at-root .dark & {\r\n        background: #424242;\r\n    }\r\n}\r\n.tab-content {\r\n    flex-grow: 1;\r\n    flex-shrink: 1;\r\n    padding: .5rem;\r\n}\r\n.section-title {\r\n    font-weight: bold;\r\n    margin: .5rem 0 0 0;\r\n    padding: .25rem 0;\r\n}\r\n.section-content {\r\n    padding: 0;\r\n}\r\n.section-content--inset {\r\n    background: rgba(0,0,0,0.2);\r\n    border: none;\r\n    border-radius: 7px;\r\n    padding: 1rem;\r\n}\r\n\r\n\r\n#app::-webkit-scrollbar {\r\n  display: block;\r\n}\r\nbody::-webkit-scrollbar {\r\n  width: 0px;\r\n}\r\n::-webkit-scrollbar-resizer {\r\n  display: none;\r\n  width: 0px;\r\n  background-color: transparent;\r\n}\r\n::-webkit-scrollbar-button {\r\n  height: 0px;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  display: none;\r\n}\r\ninput[type=number] {\r\n    -moz-appearance:textfield;\r\n}\r\n::-webkit-outer-spin-button,\r\n::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n//-------------------\r\n// Utilities\r\n//-------------------\r\n@mixin clearfix() {\r\n  &::after {\r\n    display: block;\r\n    content: \"\";\r\n    clear: both;\r\n  }\r\n}\r\n.clearfix {\r\n    @include clearfix();\r\n}\r\n.flex {\r\n    display: flex;\r\n}\r\n.flex-grow {\r\n    flex-grow: 1;\r\n}\r\n.full-width {\r\n    width: 100%;\r\n}\r\n\r\n$space-1: $column-gap;\r\n$space-2: $column-gap * 2;\r\n\r\n.m0  { margin:        0 }\r\n.mt0 { margin-top:    0 }\r\n.mr0 { margin-right:  0 }\r\n.mb0 { margin-bottom: 0 }\r\n.ml0 { margin-left:   0 }\r\n.mx0 { margin-left:   0; margin-right:  0 }\r\n.my0 { margin-top:    0; margin-bottom: 0 }\r\n\r\n.m1  { margin:        $space-1 }\r\n.mt1 { margin-top:    $space-1 }\r\n.mr1 { margin-right:  $space-1 }\r\n.mb1 { margin-bottom: $space-1 }\r\n.ml1 { margin-left:   $space-1 }\r\n.mx1 { margin-left:   $space-1; margin-right:  $space-1 }\r\n.my1 { margin-top:    $space-1; margin-bottom: $space-1 }\r\n\r\n.m2  { margin:        $space-2 }\r\n.mt2 { margin-top:    $space-2 }\r\n.mr2 { margin-right:  $space-2 }\r\n.mb2 { margin-bottom: $space-2 }\r\n.ml2 { margin-left:   $space-2 }\r\n.mx2 { margin-left:   $space-2; margin-right:  $space-2 }\r\n.my2 { margin-top:    $space-2; margin-bottom: $space-2 }\r\n\r\n.ml-auto { margin-left: auto }\r\n.mr-auto { margin-right: auto }\r\n.mx-auto { margin-left: auto; margin-right: auto; }\r\n\r\n.left {\r\n    float: left;\r\n}\r\n.right {\r\n    float: right;\r\n}\r\n\r\n//-------------------\r\n// Topcoat Overrides\r\n//-------------------\r\n.topcoat-checkbox,\r\n.topcoat-text-input {\r\n    line-height: 1.5rem;\r\n}\r\n.topcoat-checkbox {\r\n    display: flex;\r\n    align-items: center;\r\n    margin: $column-gap 0;\r\n\r\n    &__checkmark {\r\n        margin-right: .5rem;\r\n    }\r\n}\r\n.topcoat-notification {\r\n    min-width: 24px;\r\n}\r\n.topcoat-notification.error {\r\n    bottom: 0;\r\n    opacity: .9;\r\n    overflow: visible;\r\n    position: absolute;\r\n    right: 0;\r\n    transform: translateY(100%);\r\n    z-index: 1;\r\n\r\n    &::after {\r\n        content: '\\25B6';\r\n        color: #ec514e;\r\n        font-size: 18px;\r\n        position: absolute;\r\n        right: 8px;\r\n        top: -16px;\r\n        transform: rotateZ(-90deg);\r\n    }\r\n}\r\n\r\nlabel {\r\n    display: block;\r\n    position: relative;\r\n}\r\n.label {\r\n    margin-bottom: .25rem;    \r\n}\r\n\r\n\r\n.main-controls {\r\n    z-index: 1;\r\n\r\n    &__controls {\r\n        text-align: center;\r\n    }\r\n    &__drawer {\r\n        background: rgba(0,0,0,0.2);\r\n        box-shadow: inset 0px 0px 8px 2px rgba(0, 0, 0, 0.2);\r\n        // max-height: 1000px;\r\n        overflow: hidden;\r\n        padding: .5rem .5rem 2rem .5rem;\r\n        \r\n        // &.v-enter-active,\r\n        // &.v-leave-active {\r\n        //     transition: max-height 0.4s;\r\n        // }\r\n        // &.v-enter,\r\n        // &.v-leave-to {\r\n        //     max-height: 0;\r\n        // }\r\n    }\r\n    &__drawer-toggle {\r\n        height: 0;\r\n        text-align: center;\r\n\r\n        button {\r\n            box-shadow: none !important;\r\n            border: inherit !important;\r\n        }\r\n        & span {\r\n            display: inline-block;\r\n            margin: 0  $column-gap * 2;\r\n            transform: rotateZ(90deg);\r\n        }\r\n        &.active span {\r\n            transform: rotateZ(-90deg);\r\n        }\r\n    }\r\n}\r\n\r\n.source,\r\n.pipeline {\r\n    background: rgba(0,0,0,0.2);\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    border-radius: 7px;\r\n    padding: 1rem;\r\n    margin-bottom: 1rem;\r\n\r\n    label {\r\n        position: relative;\r\n    }\r\n    label:not(.topcoat-checkbox) {\r\n        display: block;\r\n        margin-bottom: $column-gap;\r\n    }\r\n    &:last-of-type {\r\n        margin-bottom: ($column-gap * 2);\r\n    }\r\n}\r\n\r\n.configurator-buttons,\r\n.pipeline-buttons {\r\n    margin: ($column-gap * 2) 0;\r\n\r\n    button {\r\n        margin-right: .5rem;\r\n    }\r\n}\r\n\r\n.pipeline {\r\n    &.disabled {\r\n        background: rgba(255,0,0,0.03);\r\n    }\r\n}\r\n\r\n.pipeline-body,\r\n.source-body {\r\n    padding-left: 2rem;\r\n}\r\n/*\r\n    -----------------------------------------------\r\n    | Handle | Expand | Data                      |\r\n    |        |        | Name (Name | X)  |\r\n    |        |        | Parameters                |\r\n    _______________________________________________\r\n*/\r\n.action {\r\n    align-items: flex-start;\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.action {\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    padding: ($column-gap * 2);\r\n\r\n    label {\r\n        position: relative;\r\n    }\r\n    label:not(.topcoat-checkbox) {\r\n        display: block;\r\n        margin-bottom: $column-gap;\r\n    }\r\n    &:last-of-type {\r\n        margin-bottom: ($column-gap * 2);\r\n    }\r\n}\r\n\r\n.pipeline-handle,\r\n.action-handle,\r\n.source-handle,\r\n.expand {\r\n    padding-left: $column-gap * 2;\r\n    padding-right: $column-gap * 2;\r\n}\r\n.pipeline-handle,\r\n.action-handle,\r\n.source-handle {\r\n    cursor: row-resize;\r\n}\r\n.expand {\r\n    cursor: pointer;\r\n    i {\r\n        font-style: normal;\r\n    }\r\n    &.open {\r\n        transform: rotateZ(90deg);\r\n    }\r\n}\r\n\r\n.action-data {\r\n    display: block;\r\n    flex-grow: 1;\r\n}\r\n.action-data {\r\n    .action-name {\r\n        display: flex;\r\n        width: 100%;\r\n        input[type=text] {\r\n            flex-grow: 1;\r\n        }\r\n    }\r\n    .action-parameters {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 100%;\r\n\r\n        h3 {\r\n            margin: $column-gap 0;\r\n        }\r\n    }\r\n    .action-parameter {\r\n        display: flex;\r\n        margin-bottom: $column-gap;\r\n\r\n        &__input {\r\n            flex-grow: 1;\r\n        }\r\n        input {\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./app.vue?vue&type=template&id=5ae1ee82&\"\nimport script from \"./app.vue?vue&type=script&lang=js&\"\nexport * from \"./app.vue?vue&type=script&lang=js&\"\nimport style0 from \"./app.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-dialog',{attrs:{\"isOpen\":_vm.isOpen,\"width\":_vm.width,\"height\":_vm.height,\"maxWidth\":_vm.maxWidth,\"maxHeight\":_vm.maxHeight},on:{\"onBackdropClose\":_vm.backdropClose}},[_c(_vm.component,_vm._g(_vm._b({tag:\"component\",on:{\"onClose\":_vm.close}},'component',_vm.props,false),_vm.listeners))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\n\nexport const events = new Vue({ name: 'a-dialog' })","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal-fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpen),expression:\"isOpen\"}],staticClass:\"modal-backdrop\",class:{open: _vm.isOpen},on:{\"click\":_vm.onClose}},[_c('div',{ref:\"modal\",staticClass:\"modal\",style:({ height: _vm.height, width: _vm.width, maxHeight: _vm.maxHeight, maxWidth: _vm.maxWidth }),on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <transition name=\"modal-fade\">\r\n        <div class=\"modal-backdrop\" \r\n            :class=\"{open: isOpen}\"\r\n            @click=\"onClose\"\r\n            v-show=\"isOpen\">\r\n            <div class=\"modal\" v-bind:style=\"{ height, width, maxHeight, maxWidth }\" @click.stop ref=\"modal\">\r\n                <slot />\r\n            </div>\r\n        </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"ADialog\",\r\n    props: {\r\n        isOpen: Boolean,\r\n        width: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        height: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        maxWidth: {\r\n            type: String,\r\n            required: false\r\n        },\r\n        maxHeight: {\r\n            type: String,\r\n            required: false\r\n        }\r\n    },\r\n    watch: {\r\n        isOpen(value) {\r\n            if(!value) {\r\n                return;\r\n            }\r\n            this.$nextTick(() => {\r\n                this.setModalBodyHeight();\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        onClose() {\r\n            this.$emit('onBackdropClose');\r\n        },\r\n        setModalBodyHeight()\r\n        {\r\n            const headerEl = this.$el.querySelector(\".modal-header\");\r\n            const bodyEl = this.$el.querySelector(\".modal-body\");\r\n            const footerEl = this.$el.querySelector(\".modal-footer\");\r\n            const modalStyle = window.getComputedStyle(this.$refs.modal);\r\n            const modalHeight = parseInt(modalStyle.height, 10);\r\n            const modalPadding = parseInt(modalStyle.paddingTop, 10) + parseInt(modalStyle.paddingBottom, 10);\r\n            const headerHeight = headerEl ? headerEl.clientHeight : 0;\r\n            const footerHeight = footerEl ? footerEl.clientHeight : 0;\r\n\r\n            if(bodyEl) {\r\n                bodyEl.style.maxHeight = ((modalHeight - modalPadding) - (headerHeight + footerHeight)) + \"px\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./a-dialog.vue?vue&type=template&id=2c097f5c&\"\nimport script from \"./a-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./a-dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"modal-body\"},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")]),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",[_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('onClose', true)}}},[_vm._v(\" Yes \")]),_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('onClose', false)}}},[_vm._v(\" Cancel \")])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <section class=\"modal-body\">\r\n            {{ message }}\r\n        </section>\r\n        <footer class=\"modal-footer\">\r\n            <slot name=\"footer\">\r\n                <button type=\"button\" class=\"topcoat-button--large\" @click=\"$emit('onClose', true)\">\r\n                    Yes\r\n                </button>\r\n                <button type=\"button\" class=\"topcoat-button--large\" @click=\"$emit('onClose', false)\">\r\n                    Cancel\r\n                </button>\r\n            </slot>\r\n        </footer>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Confirm\",\r\n    props: {\r\n        message: {\r\n            type: String, \r\n            required: true\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1b1723f6&\"\nimport script from \"./confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./confirm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <a-dialog \r\n        :isOpen=\"isOpen\" \r\n        :width=\"width\" \r\n        :height=\"height\" \r\n        :maxWidth=\"maxWidth\" \r\n        :maxHeight=\"maxHeight\"\r\n        @onBackdropClose=\"backdropClose\"\r\n    >\r\n        <component \r\n            :is=\"component\" \r\n            v-bind=\"props\" \r\n            v-on=\"listeners\" \r\n            @onClose=\"close\" />\r\n    </a-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {events} from './events';\r\nimport ADialog from './a-dialog.vue';\r\nimport Confirm from './confirm.vue';\r\n\r\nconst defaultOptions = {\r\n    height: \"auto\",\r\n    width: \"80%\",\r\n    maxWidth: \"80%\",\r\n    maxHeight: \"80%\"\r\n};\r\n\r\nexport default {\r\n    name: 'ADialogRoot',\r\n    components: {\r\n        ADialog\r\n    },\r\n    data: () => ({\r\n        component: null,\r\n        width: \"\",\r\n        height: \"\",\r\n        maxWidth: \"\",\r\n        maxHeight: \"\",\r\n        props: null,\r\n        listeners: null\r\n    }),\r\n    computed: {\r\n        isOpen() {\r\n            return !!this.component;\r\n        }\r\n    },\r\n    mounted () {\r\n        events.$on('openconfirm', this.openConfirm);\r\n        events.$on('open', this.open);\r\n        events.$on('close', this.close);\r\n    },\r\n    methods: {\r\n        openConfirm({ onYes, onCancel, message, ...args }) \r\n        {\r\n            this.open({ \r\n                component: Confirm, \r\n                listeners: {\r\n                    onClose: (isYes) => {\r\n                        if(isYes)\r\n                            onYes && onYes();\r\n                        else \r\n                            onCancel && onCancel();\r\n                    }\r\n                },\r\n                props: {\r\n                    message\r\n                },\r\n                ...args\r\n            });\r\n        },\r\n        open({ width, height, maxWidth, maxHeight, component, props = null, listeners = null }) \r\n        {\r\n            if(this.isOpen) {\r\n                console.warn(\"Dialog already open. Ignoring open: \" + component.name);\r\n                return;\r\n            }\r\n            console.log(`Dialog open.`);\r\n\r\n            this.width = width || defaultOptions.width;\r\n            this.height = height || defaultOptions.height;\r\n            this.maxWidth = maxWidth || defaultOptions.maxWidth;\r\n            this.maxHeight = maxHeight || defaultOptions.maxHeight;\r\n            this.component = component;\r\n            this.props = props;\r\n            this.listeners = listeners;\r\n        },\r\n        backdropClose() {\r\n            // Force close\r\n            if(this.listeners && this.listeners.onClose) {\r\n                this.listeners.onClose();\r\n            }\r\n            this.close();\r\n        },\r\n        /**\r\n         * IMPORTANT: Should only be called by child component 'onClose' event.\r\n         * Otherwise previous open() calls could be left hanging (e.g. waiting for a callback)\r\n         */\r\n        close() {\r\n            console.log(`Dialog close.`);\r\n\r\n            this.component = null;\r\n            this.props = null;\r\n            this.listeners = null;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .modal-backdrop {\r\n        position: fixed;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background-color: rgba(0, 0, 0, 0.4);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 2;\r\n    }\r\n\r\n    .modal {\r\n        background: #444;\r\n        overflow-x: auto;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 1rem;\r\n    }\r\n\r\n    .modal-body {\r\n        min-height: 3rem;\r\n        overflow: auto;\r\n        padding: .25rem;\r\n        position: relative;\r\n    }\r\n\r\n    .modal-header {\r\n        padding-bottom: 1rem;\r\n    }\r\n\r\n    .modal-footer {\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        padding-top: 1rem;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./a-dialog-root.vue?vue&type=template&id=1bc09963&\"\nimport script from \"./a-dialog-root.vue?vue&type=script&lang=js&\"\nexport * from \"./a-dialog-root.vue?vue&type=script&lang=js&\"\nimport style0 from \"./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ADialogRoot from './a-dialog-root.vue';\r\nimport {events} from './events';\r\n\r\nconst Plugin = {\r\n    install (Vue, globalOptions = {}) \r\n    {\r\n        Vue.prototype.$dialog = {\r\n            /**\r\n             * Opens a simple message confirmation dialog\r\n             * @param {string} message message to display\r\n             * @param {function} onYes callback for Yes answer\r\n             * @param {function} onCancel callback for Cancel answer\r\n             */\r\n            openConfirm(options) {\r\n                events.$emit('openconfirm', options);\r\n            },\r\n            open (options) {\r\n                events.$emit('open', options);\r\n            }\r\n        };\r\n\r\n        Vue.component('ADialogRoot', ADialogRoot)\r\n    }\r\n}\r\n  \r\nexport default Plugin","import fs from 'fs';\r\nimport upath from 'upath';\r\nimport { configure, setInteractionMode, extend } from 'vee-validate';\r\nimport _ from '../utils';\r\n\r\nsetInteractionMode(\"custom\", context => {\r\n    return {\r\n        on: [\"change\", \"blur\"]\r\n    }\r\n});\r\n\r\nextend(\"integer\", {\r\n    validate(value, { min, max }) {\r\n        value = parseInt(value, 10);\r\n        min = parseInt(min, 10);\r\n        max = parseInt(max, 10);\r\n\r\n        let message = `Must be an integer`;\r\n        if(_.isNumber(min) && _.isNumber(max)) {\r\n            message += ` between ${min} and ${max}`;\r\n        } else if(_.isNumber(min)) {\r\n            message += ` greater than or equal to ${min}`;\r\n        } else if(_.isNumber(max)) {\r\n            message += ` less than or equal to ${max}`;\r\n        }\r\n        if(!_.isNumber(value)) {\r\n            return message;\r\n        }\r\n        if(_.isNumber(min) && value < min) {\r\n            return message;\r\n        }\r\n        if(_.isNumber(max) && value > max) {\r\n            return message;\r\n        }\r\n        return true;\r\n    },\r\n    params: ['min', 'max']\r\n})\r\n\r\nextend('required', {\r\n    validate (value) {\r\n        return {\r\n            required: true,\r\n            valid: ['', null, undefined].indexOf(value) === -1\r\n        };\r\n    },\r\n    message: 'This is required',\r\n    computesRequired: true\r\n});\r\n\r\nextend('pathexists', { \r\n    async validate(value) \r\n    {\r\n        const exists = await new Promise(resolve => {\r\n            fs.access(value, error => {\r\n                resolve(!error);\r\n            });\r\n        });\r\n        if(exists) {\r\n            return true;\r\n        }\r\n        return {\r\n            valid: false\r\n        }\r\n    },\r\n    message: \"Path does not exist\"\r\n});\r\n\r\nextend('pathunc', {\r\n    validate(value, args) {\r\n        const allowed = typeof args.allowed === \"boolean\" ? args.allowed : JSON.parse(args.allowed.toLowerCase());\r\n        const path = value.trim();\r\n        const isUnc = path.startsWith(\"//\") || path.startsWith(\"\\\\\\\\\");\r\n        return !(isUnc && !allowed)\r\n    },\r\n    params: ['allowed'],\r\n    message: `Path cannot be a UNC path.`\r\n})\r\n\r\nextend('pathrelative', {\r\n    validate(value, args) {\r\n        const allowed = typeof args.allowed === \"boolean\" ? args.allowed : JSON.parse(args.allowed.toLowerCase());\r\n        const path = value.trim();\r\n        if(!allowed) {\r\n            return upath.isAbsolute(path);\r\n        }\r\n        return true;\r\n    },\r\n    params: ['allowed'],\r\n    message: `Path must be absolute.`\r\n})\r\n\r\nextend('custom', {\r\n    params: ['fn'],\r\n    validate(value, params) {\r\n        const result = params.fn(value);\r\n        return result.valid ? result.valid : result.message;\r\n    }\r\n});\r\n\r\nconsole.log(\"Validation imported\");\r\nexport default { init: () => {} };\r\n\r\n\r\n// extend(\"uniq\", {\r\n//     validate: async value => {\r\n//       const response = await checkEmail(value);\r\n  \r\n//       if (response.valid) {\r\n//         return true;\r\n//       }\r\n  \r\n//       return {\r\n//         valid: false,\r\n//         data: {\r\n//           // this will be used to interpolate the message.\r\n//           serverMessage: response.errors[0]\r\n//         }\r\n//       };\r\n//     },\r\n//     // same prop as returned in the `data` object.\r\n//     message: `{serverMessage}`\r\n// });\r\n\r\n// /**\r\n//  * Master validation instance. Keeps track of validation components and their validity. \r\n//  * Should be imported at root <form> component and instance passed down to child components.\r\n//  */\r\n// class Validation\r\n// {\r\n//     constructor(root) {\r\n//         this.root = root;\r\n//         this.validatorComponents = [];\r\n//     }\r\n//     register(validator) \r\n//     {\r\n//         this.validatorComponents.push(validator);\r\n//     }\r\n//     unregister(validator) \r\n//     {\r\n//         this.validatorComponents = this.validatorComponents.filter(c => c !== validator);\r\n//     }\r\n//     isValid() {\r\n//         return this.validatorComponents.every(c => c.isValid());\r\n//     }\r\n// }\r\n// Validation.mixin = {\r\n//     directives: {\r\n//         \"errors\": {\r\n//             bind: function(el, binding, vnode) {\r\n//                 var s = JSON.stringify\r\n//                 el.innerHTML =\r\n//                 'name: '       + s(binding.name) + '<br>' +\r\n//                 'value: '      + s(binding.value) + '<br>' +\r\n//                 'expression: ' + s(binding.expression) + '<br>' +\r\n//                 'argument: '   + s(binding.arg) + '<br>' +\r\n//                 'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//                 'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//             }\r\n//         }\r\n//     },\r\n//     props: {\r\n//         validation: Object\r\n//     },\r\n//     data() {\r\n//         return {\r\n//             errors: {}\r\n//         }\r\n//     },\r\n//     beforeCreate() { \r\n//         // Make errors observable\r\n//         this.$validator = new Validator(this.errors);  \r\n\r\n//         // Register with Master \r\n//         this.validation = this.validation || new Validation();\r\n//         this.validation.register(this.$validator);\r\n//     },\r\n//     beforeDestroy() {\r\n//         // Un-Register with Master \r\n//         this.validation.unregister(this.$validate);\r\n//     }\r\n// }\r\n// /**\r\n//  * Holds current component errors. An instance is created on each component using the Validation.mixin\r\n//  */\r\n// class Validator\r\n// {\r\n//     constructor(validationErrors) {\r\n//         this._validationErrors = validationErrors;\r\n//     }\r\n//     /**\r\n//      * Set the validity/message of a given field\r\n//      * @param {string} key the name of the form field \r\n//      * @param {*} message the validation message or empty if valid\r\n//      */\r\n//     pushError(key, message) \r\n//     {\r\n//         this._validationErrors[key] = message;\r\n//     }\r\n//     isValid() \r\n//     {\r\n//         return Object.values(this._validationErrors).filter(error => !!error).length == 0;\r\n//     }\r\n// }\r\n\r\n// export default Validation;  \r\n\r\n\r\n\r\n\r\n\r\n// Vue.directive(\"demo\", {\r\n//     bind: function(el, binding, vnode) {\r\n//         var s = JSON.stringify\r\n//         el.innerHTML =\r\n//         'name: '       + s(binding.name) + '<br>' +\r\n//         'value: '      + s(binding.value) + '<br>' +\r\n//         'expression: ' + s(binding.expression) + '<br>' +\r\n//         'argument: '   + s(binding.arg) + '<br>' +\r\n//         'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//         'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//     }\r\n// });","import process from 'process';\r\nimport Vue from 'vue';\r\nimport App from './app.vue';\r\nimport Dialog from './dialog';\r\nimport Host from './host';\r\nimport HostScriptListener from './host/hostScriptListener';\r\nimport Logger from './console';\r\nimport Server from './server';\r\nimport global from './global';\r\nimport Validation from './validation';\r\n\r\n// Fixes module resolution issues for dependencies within node_modules\r\nprocess.chdir(global.appWorkingPath);\r\n__dirname = global.appWorkingPath;\r\n\r\n\r\nVue.config.productionTip = false;\r\nVue.config.devtools = true;\r\nVue.use(Dialog);\r\n\r\nconst destroy = () => {\r\n    Server.destroy();\r\n    Host.destroy();\r\n    HostScriptListener.destroy();\r\n    Logger.destroy();\r\n};\r\n\r\nconst create = async () => {\r\n    await Logger.init();\r\n    await Server.init();\r\n    await Host.init(); \r\n    await HostScriptListener.init();\r\n\r\n    window.vue = new Vue({\r\n        render: h => h(App),\r\n        beforeDestroy: destroy\r\n    }).$mount('#app');\r\n};\r\n\r\ncreate();\r\n\r\nwindow.addEventListener(\"beforeunload\", destroy);\r\n\r\n/**  \r\n    beforeCreate - about to be initialized. data is not yet reactive \r\n    created - events and data observation setup. not yet in native DOM. access data here, not in mounting hooks \r\n    beforeMount - right before render happens. template compiled and virtual DOM update by vue.  \r\n    mounted - $el added and native DOM updated. do modify DOM for integration of non-Vue libraries here.\r\n    beforeUpdate - data has changed and update cycle starting. do get data before actually is rendered. \r\n    updated - data changed and native DOM updated. do access DOM after property changes here. \r\n    beforeDestroy - about to teardown. still fully present and functional. do cleanup events, and subscriptions \r\n    destroyed - nothing left on your component. do last minute cleanups, etc. \r\n*/\r\n\r\n\r\n// Vue.directive(\"print\", {\r\n//     bind: function(el, binding, vnode) {\r\n//         var s = JSON.stringify\r\n//         el.innerHTML =\r\n//         'name: '       + s(binding.name) + '<br>' +\r\n//         'value: '      + s(binding.value) + '<br>' +\r\n//         'expression: ' + s(binding.expression) + '<br>' +\r\n//         'argument: '   + s(binding.arg) + '<br>' +\r\n//         'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//         'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//     }\r\n// });","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=style&index=0&lang=scss&\"","import os from 'os';\r\nimport upath from 'upath';\r\nimport appGlobal from '../global';\r\nimport { reject } from 'async';\r\n\r\n/*\r\n    Creative Suite Extendscript Interface / Decorator\r\n*/\r\nclass Host \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * To reduce coupling with GUI, don't use this raw interface in Vue components\r\n         */\r\n        this.interface = new CSInterface();\r\n        this._initialized = false;\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        if(this._initialized) return;\r\n        this._initialized = true;\r\n\r\n        // Host Environment Setup\r\n        this.importScript(\"utils.jsx\");\r\n        this.importScript(\"polyfil.jsx\");\r\n        this.importScript(\"json.jsx\"); \r\n        this.importScript(\"image.jsx\"); \r\n        \r\n        // Listeners\r\n        this.interface.addEventListener(\"log\", event => {\r\n            console.log(\"Jsx Event: \" + event.data);\r\n        });\r\n        this.interface.addEventListener(\"setTimeout\", this.onSetTimeout.bind(this));\r\n\r\n        const apiVersion = this.interface.getCurrentApiVersion();\r\n        console.log(`Host initialized.\\n\r\n            Install Path: ${appGlobal.appInstallPath}\\n\r\n            Working Path: ${appGlobal.appWorkingPath}\\n\r\n            Default Log Path: ${appGlobal.appDefaultLogPath}\\n\r\n            Builtin Action Path: ${appGlobal.appBuiltinActionsPath}\\n\r\n            Temporary Path: ${appGlobal.appTemporaryPath}\\n\r\n            Creative Suite API Version: ${apiVersion.major}.${apiVersion.minor}.${apiVersion.micro}\\n\r\n            OS: ${this.interface.getOSInformation()}\\n\r\n            App Version: ${appGlobal.appVersion}`);\r\n            \r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        \r\n    }\r\n    /*---------------------\r\n            Events\r\n    ---------------------*/\r\n    dispatchEvent(eventName, data) \r\n    {\r\n        const scope = \"APPLICATION\";\r\n        const event = new CSEvent(eventName, scope);\r\n              event.data = data;\r\n        this.interface.dispatchEvent(event);\r\n    }\r\n    onSetTimeout(event)\r\n    {\r\n        var data = event.data.split(\",\");\r\n        var callbackId = Number(data[0]);\r\n        var delay = Number(data[1]);\r\n\r\n        var _this = this;\r\n        setTimeout(function()\r\n        {\r\n            // Since ExtendScript doesn't have a setTimeout. We're hijacking the event loop here.\r\n            _this.runJsx(`executeSetTimeoutCallback(${callbackId})`)\r\n            .then(result => {\r\n                if(result.includes(\"error\")) {\r\n                    console.error(result);\r\n                }\r\n            })\r\n        }, delay);\r\n    }\r\n    /*---------------------\r\n        Extend Script\r\n    ---------------------*/\r\n    // NOTES:\r\n    // ActionReference is what to perform the action on within Photoshop  (e.g. document, marque tool, etc)\r\n    // The Action Manager system keeps track of a large number of Descriptors keys relative to the status of:\r\n    // - The Application\r\n    // - Documents\r\n    // - Layers\r\n    // - Channels\r\n    // - Paths\r\n    // - History\r\n    // - ActionSets and Actions \r\n\r\n    /**\r\n     * Import/Execute an ExtendScript file, such as a library.\r\n     * @param {string} fileName - name of file relative to app distribution path\r\n     */\r\n    async importScript(fileName) \r\n    {\r\n        const importPath = upath.join(appGlobal.appWorkingPath, fileName);\r\n        const result = await this.runJsx(`importJsx(\"${importPath}\");`);\r\n        console.log(\"Jsx File Imported: \" + importPath + \" Result: \" + result);\r\n    }\r\n    /**\r\n     * Evaluate ExtendScript/JSX script on Host\r\n     * @param {string} script \r\n     * @returns {Promise}\r\n     */\r\n    runJsx(script) \r\n    {\r\n        return new Promise(resolve => {\r\n            this.interface.evalScript(script, result => {\r\n                resolve(result);\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * Evaluate ExtendScript/JSX script on Host and throw an Exception if string \"error\" or \"exception\" is in the result.\r\n     * NOTE: If result is 'Evalscript error.' there may be a syntax error in the script string\r\n     * @param {string} script \r\n     * @returns {Promise}\r\n     */\r\n    runJsxWithThrow(script) \r\n    {\r\n        return new Promise((resolve, reject) => \r\n        {\r\n            this.interface.evalScript(`(function(){\r\n                try {\r\n                    ${script}\r\n                } catch(e) {\r\n                    return e.toString();\r\n                }\r\n            }())`, \r\n            (result) => {\r\n                const lowerCaseResult = result.toLowerCase();\r\n                if(lowerCaseResult.includes(\"error\") || lowerCaseResult.includes(\"exception\")) {\r\n                    reject(`\\nJsx:\\n${script}\\nException in Result:\\n${result}\\n`);\r\n                } else {\r\n                    resolve(result);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * Run the ExtendScript action function by the given name\r\n     * @param {string} functionName \r\n     * @param {number|string|boolean|object|array} parameters \r\n     * @returns {Promise}\r\n     */\r\n    runActionWithParameters(functionName, parameters)\r\n    {\r\n        console.log(`Action: ${functionName}`);\r\n        const parametersJson = JSON.stringify(parameters);\r\n        return this.runJsxWithThrow(`\r\n            var result = ${functionName}(${parametersJson});\r\n            return result;\r\n        `);\r\n    }\r\n    \r\n    /**\r\n     * Converts an Action Manager charId to a stringId\r\n     * Returns empty string if error occurred.\r\n     * @param {string} charId \r\n     */\r\n    convertCharToStringId(charId) {\r\n        return this.runJsx(`t2s(c2t('${charId}'))`)\r\n        .then(result => {\r\n            return result.includes(\"error\") ? \"\" : result;\r\n        });\r\n    }\r\n    /**\r\n     * Converts an Action Manager stringId to a charId\r\n     * Returns empty string if error occurred.\r\n     * @param {string} charId \r\n     */\r\n    convertStringToCharId(stringId) {\r\n        return this.runJsx(`t2c(s2t('${stringId}'))`)\r\n        .then(result => {\r\n            return result.includes(\"error\") ? \"\" : result;\r\n        });\r\n    }\r\n}\r\n\r\nexport default new Host();","\"use strict\";\r\n\r\n\r\nfunction Enum(enumArr, offset) \r\n{\r\n    if(!(this instanceof Enum)) { return new Enum(enumArr, offset); }\r\n\r\n    return create_.call(this, enumArr, offset);\r\n}\r\n/** Essentially the enumeration starting value. Default is 0 */\r\nEnum.prototype.offset = 0;\r\n/** Return a copy of this.keys */\r\nEnum.prototype.toArray = function() {\r\n    return this.keys.slice(0);\r\n};\r\n/** Returns whether the given value is in the enumeration */\r\nEnum.prototype.isValid = function(val) {\r\n    return Number.isInteger(val) && (val - this.offset) < this.keys.length && (val - this.offset) >= 0;\r\n};\r\n/** Returns the key associated with the given value, else undefined. */\r\nEnum.prototype.toKey = function(val) {\r\n    if( !this.isValid(val) ) { return undefined; }\r\n    return this.keys[val - this.offset];\r\n};\r\n/** Returns the value associated with the given key, else undefined. */\r\nEnum.prototype.parse = function(key) {\r\n    if( !(typeof key === \"string\") ) { return undefined; }\r\n\r\n    key = key.trim().toUpperCase();\r\n    for(var i = 0; i < this.keys.length; ++i) {\r\n        if( this.keys[i].toUpperCase() === key ) { \r\n            return i + this.offset; \r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n/**\r\n * TODO: Needs Performance Improvement\r\n * @param {*} enumArr \r\n * @param {*} offset \r\n */\r\nfunction create_(enumArr, offset) \r\n{\r\n    if(!Array.isArray(enumArr)) {\r\n        throw new Error(\"Enum: create() Invalid parameter type. Expected Array.\");\r\n    }\r\n\r\n    var validName = /[A-Z_][A-Z0-9_]*/gi;\r\n\r\n    // Define array keys as properties\r\n    var enumer = this;\r\n        enumer.keys = [];\r\n        enumer.keys.length = enumArr.length;\r\n\r\n    if(Number.isInteger(offset)) {\r\n        enumer.offset = offset;\r\n    } else {\r\n        offset = 0;\r\n    }\r\n        \r\n    var nextKey;\r\n    for(var i = 0; i < enumArr.length; ++i) {\r\n        if( typeof enumArr[i] !== \"string\" || !validName.test(enumArr[i]) ) {\r\n            throw new Error(\"Enum: create() Not a string or Invalid name: \" + enumArr[i]);\r\n        }\r\n        validName.lastIndex = 0;\r\n        \r\n        nextKey = enumArr[i];\r\n        enumer.keys[i] = nextKey;\r\n        enumer[ nextKey ] = i + offset;       \r\n    }\r\n\r\n    // TODO: \r\n    // Object.defineProperty(this, 'enumValues', {\r\n    //     value: [],\r\n    //     configurable: false,\r\n    //     writable: false,\r\n    //     enumerable: true\r\n    // });\r\n    return enumer;\r\n}\r\n\r\nexport default Enum;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{domProps:{\"innerHTML\":_vm._s(_vm.dots)}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <span v-html=\"dots\"></span>\r\n</template>\r\n\r\n<script>\r\nlet handle = 0;\r\n\r\nexport default {\r\n    name: \"WaitDots\", \r\n    props: {\r\n        intervalMs: {\r\n            type: Number,\r\n            default: 500\r\n        }\r\n    },\r\n    data() {\r\n        return { \r\n            dotCount: 1,\r\n            dots: \".\" \r\n        };\r\n    },\r\n    mounted() {\r\n        handle = setInterval(() => {\r\n            this.dots = \".\".repeat(this.dotCount);\r\n            this.dots += \"&nbsp;\".repeat(4 - this.dotCount);\r\n            this.dotCount = (this.dotCount + 1) % 4;\r\n        }, this.intervalMs);\r\n    },\r\n    beforeDestroy() {\r\n        clearInterval(handle);\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wait-dots.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wait-dots.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wait-dots.vue?vue&type=template&id=6cb2c8b3&\"\nimport script from \"./wait-dots.vue?vue&type=script&lang=js&\"\nexport * from \"./wait-dots.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"util\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","\r\n\r\n/**\r\n * Represents a single Image process\r\n */\r\nexport default class Image \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * The path value that initiated this Image process.\r\n         * Depending on the File Source, this will be one of the following:\r\n         * 1) the absolute input file/directory path\r\n         * 2) the file/document name when full path is not available (e.g. an un-saved active document).\r\n         * 3) empty string (e.g. File Source is Blank)\r\n         */\r\n        this.initialInputImagePath = \"\";\r\n        /**\r\n         * Same as initialInputImagePath except when initialInputImagePath is a json data file\r\n         * in which case, this value is sourced from the json data.\r\n         * NOTE: an invalid/blank inputImagePath will cause an error when using a json input file\r\n         */\r\n        this.inputImagePath = \"\";\r\n        /**\r\n         * The parent directory of initialInputImagePath, or blank if not available \r\n         */\r\n        this.inputDirectory = \"\";\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where output files should be written\r\n         */\r\n        this.outputDirectory = \"\";\r\n        this.useOutputDirectory = false;\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where processed input files will be moved\r\n         */\r\n        this.processedDirectory = \"\";\r\n        this.useProcessedDirectory = false;\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where input files and error loges will be moved\r\n         */\r\n        this.errorDirectory = \"\";\r\n        this.useErrorDirectory = false;\r\n        /**\r\n         * External data (stored outside file) metadata necessary for processing, as sourced from JSON\r\n         */\r\n        this.data = {};     \r\n        /**\r\n         * Internal data (Metadata stored in the file)\r\n         */\r\n        this.metadata = {}; \r\n        /**\r\n         * (Optional) pipelines that should process this Image\r\n         */\r\n        this.pipelines = [];\r\n        /**\r\n         * The current pipeline processing this Image\r\n         */\r\n        this.pipeline = \"\";\r\n        /**\r\n         * The current job id for this Image (may be sourced from JSON) */\r\n        this.jobId = \"\";\r\n        /**\r\n         * An array of error messages encountered during processing, if applicable\r\n         * @type {Array<string>} \r\n         */\r\n        this.errors = [];\r\n    }\r\n}\r\n\r\n","import child_process from 'child_process';\r\nimport upath from 'upath';\r\nimport fs from 'fs';\r\nimport rimraf from 'rimraf';\r\n\r\n/**\r\n * Force deletes the destination file/directory recursively and renames the source path to the destination\r\n * @param {*} fromPath \r\n * @param {*} toPath \r\n * @param {*} callback \r\n */\r\nfunction overwrite(fromPath, toPath, callback)\r\n{\r\n    rimraf(toPath, err => \r\n    {\r\n        if(err) {\r\n            callback(err);\r\n            return;\r\n        }\r\n        fs.rename(fromPath, toPath, err => {\r\n            callback(err);\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * UNTESTED. Same as fs.rmdir except delegates to rimraf() when using recursive option\r\n * @param {*} path \r\n * @param {*} options \r\n * @param {*} cb \r\n */\r\nfunction rmdir(path, options, cb) \r\n{\r\n    if(typeof options === 'object' && options.recursive) {\r\n        rimraf(path, {\r\n            maxBusyTries: options.maxRetries,\r\n            emfileWait: retryDelay\r\n        }, cb);\r\n    } else {\r\n        fs.rmdir.call(fs, arguments);\r\n    }\r\n}\r\n\r\n/**\r\n * Same as fs.mkdir except supports options object and recursive option\r\n * This exists because { recursive: true } option not supported prior to Node v10.22\r\n * NOTE: When using 'recursive' option, call is delegated to shell command 'mkdir' and\r\n * any errors returned as a string\r\n * @param {string|Buffer|URL} dirPath \r\n * @param {object} options \r\n * @param {number} options.mode \r\n * @param {boolean} options.recursive \r\n * @param {function} callback \r\n */\r\nfunction mkdir(dirPath, options, callback) \r\n{\r\n    if(typeof options === 'object' && options.recursive) {\r\n        _mkdirRecursive(dirPath, options, callback);\r\n    } else {\r\n        fs.mkdir.call(fs, arguments);\r\n    }\r\n}\r\nfunction _mkdirRecursive(dirPath, options, callback) \r\n{\r\n    child_process.exec(\r\n        `mkdir${options.mode ? ' --mode=' + options.mode : ''} -p \"${dirPath}\"`, \r\n        (error, stdout, stderr) => {\r\n            if(error) {\r\n                // IMPORTANT: For some reason, on windows, when creating a directory \r\n                // on a mapped network drive, this command will both create the directory\r\n                // AND throw an \"already exists\" error\r\n                if(error.toString().toLowerCase().includes(\"already exists\")) {\r\n                    error.code = \"ENOENT\";\r\n                }\r\n                callback(error);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n    );\r\n} \r\n\r\n\r\nexport default {\r\n    rmdir,\r\n    mkdir,\r\n    overwrite\r\n}","import upath from 'upath';\r\nimport fs from 'fs';\r\nimport fsx from '../fsx';\r\nimport Image from './image';\r\n\r\nexport default class ImageFileMover \r\n{\r\n    constructor() {}\r\n\r\n    /**\r\n     * Moves the given Image instances and associated files to the given processed directory.\r\n     * Also writes any errors to the output directory\r\n     * @param {Array<Image>} images \r\n     */\r\n    async move(images) \r\n    {\r\n        for(const image of images)\r\n        {\r\n            if(image.errors.length) {\r\n                const errorDirectory = image.errorDirectory || image.inputDirectory;\r\n                if(errorDirectory) {\r\n                    this._writeError(image, errorDirectory, image.errors.join('\\n'));\r\n                }\r\n                if(image.useErrorDirectory) {\r\n                    await this._moveImage(image, image.errorDirectory);\r\n                }\r\n            } else if(image.useProcessedDirectory) {\r\n                // TODO: Uncomment next line after Debugging\r\n                await this._moveImage(image, image.processedDirectory);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @param {Image} image \r\n     * @param {string} toDirectory target directory. Absolute or relative to input or data source path.\r\n     */\r\n    async _moveImage(image, toDirectory)\r\n    {\r\n        if(!upath.isAbsolute(toDirectory)) \r\n        {\r\n            if(!image.inputDirectory) {\r\n                console.log(\"Image not moved. Move directory was relative but input directory was not defined.\");\r\n                return Promise.resolve();\r\n            } else {\r\n                toDirectory = upath.join(image.inputDirectory, toDirectory);\r\n            }\r\n        }\r\n\r\n        this._moveToDirectory(image, toDirectory);\r\n    }\r\n    _moveToDirectory(image, directory) \r\n    {\r\n        const paths = this._getImagePaths(image);\r\n        console.log(`Moving paths:\\n\\t${paths.join('\\n\\t')}\\nTo directory\\n\\t${directory}`);\r\n\r\n        for(const path of paths) \r\n        {\r\n            const basename = upath.basename(path);\r\n            const toPath = upath.join(directory, basename);\r\n            fsx.overwrite(path, toPath, err => {\r\n                if(err) {\r\n                    const message = err + \"\\nImage path could not be moved to \" + toPath;\r\n                    if(err.code == \"ENOENT\") {\r\n                        console.log(message);\r\n                    } else {\r\n                        console.warn(message);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _getImagePaths(image) \r\n    {\r\n        const paths = [\r\n            image.inputImagePath,\r\n            (image.initialInputImagePath !== image.inputImagePath) ? image.initialInputImagePath : null\r\n        ];\r\n        return paths.filter(p => !!p); // remove empty paths\r\n    }\r\n    _writeError(image, directory, message) \r\n    {\r\n        if(!message) {\r\n            return;\r\n        }\r\n        const logPath = upath.join(directory, \"error.logs\");\r\n        fs.writeFile(logPath, [   \r\n            `\\n`,\r\n            `Time: ${new Date().toLocaleString()}`,\r\n            `initialInputImagePath: ${image.initialInputImagePath}`, \r\n            `inputImagePath: ${image.inputImagePath}`, \r\n            message\r\n        ].join(`\\n`), \r\n        {\r\n            flag: 'a'\r\n        },\r\n        err => {\r\n            if(err) \r\n                console.error(err + \"\\nCould not write Image error to \" + logPath);\r\n        });\r\n    }\r\n}","import upath from 'upath';\r\n\r\n/**\r\n * Returns true if path starts with // or \\\\ \r\n * @param {string} val the path string\r\n */\r\nfunction isUncPath(val) \r\n{\r\n    val = val.trim();\r\n    return val.startsWith(\"//\") || val.startsWith(\"\\\\\\\\\");\r\n}\r\n\r\n/**\r\n * Normalizes and compares the two paths to determine \r\n * if the given child is a child path of the given ancestor\r\n * @param {string} descendant \r\n * @param {string} ancestor \r\n */\r\nfunction isAncestor(ancestor, descendant)\r\n{\r\n    const relative = upath.relative(ancestor, descendant);\r\n    // If not ancestor, beginning of path will contain directory traversal (e.g. ../../)\r\n    return descendant.endsWith(relative);\r\n}\r\n\r\n/**\r\n * Same as upath.dirname except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction dirname(val)\r\n{\r\n    return _preserveUnc(val, upath.dirname(val));\r\n}\r\n/**\r\n * Same as upath.normalize except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction normalize(val)\r\n{\r\n    return _preserveUnc(val, upath.normalize(val));\r\n}\r\n/**\r\n * Same as upath.join except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction join(firstPart)\r\n{\r\n    return _preserveUnc.call(null, firstPart, upath.join.apply(upath, arguments));\r\n}\r\n\r\nfunction _preserveUnc(originalPath, newPath) \r\n{\r\n    if(isUncPath(originalPath)) {\r\n        return newPath.charAt(0) + newPath;\r\n    } \r\n    return newPath;\r\n}\r\n\r\nexport default {\r\n    isAncestor,\r\n    isUncPath,\r\n    dirname,\r\n    normalize, \r\n    join\r\n}","import exiftool from 'node-exiftool';\r\nimport upath from 'upath';\r\nimport fs from 'fs';\r\nimport Image from './image';\r\nimport fsx from '../fsx';\r\nimport uncSafePath from '../unc-safe-path';\r\nimport _ from '../utils';\r\n\r\n\r\n\r\nexport default class ImageFileReader\r\n{\r\n    /**\r\n     * Create a reader used to generate an Image instance for processing by Adobe host\r\n     */\r\n    constructor() {}\r\n\r\n    /**\r\n     * Create a new Image instance for processing by Adobe host\r\n     * NOTE: When 'path' is a json file, directories will be automatically created for output, processed, and error directories\r\n     * @param {String} path the image path, json file path, document name (e.g. when using Active Document), or empty string. Path should be absolute\r\n     * @param {ImageSource} imageSource the image source that produced the path \r\n     * @param {Array<string>} targetPipelines\r\n     */\r\n    async read(path, imageSource, targetPipelines)\r\n    {\r\n        let { useOutputDirectory, useProcessedDirectory, useErrorDirectory } = imageSource;\r\n        let { outputDirectory, processedDirectory, errorDirectory } = imageSource;\r\n        let readMetadata = imageSource.readMetadata;\r\n\r\n        // Sanity check\r\n        outputDirectory = useOutputDirectory ? outputDirectory : \"\";\r\n        processedDirectory = useProcessedDirectory ? processedDirectory : \"\";\r\n        errorDirectory = useErrorDirectory ? errorDirectory : \"\";\r\n\r\n        let initialInputImagePath = path || \"\";\r\n        let inputImagePath = initialInputImagePath;\r\n        let inputDirectory = this._isPathDefinedAndAbsolute(path) ? uncSafePath.dirname(path) : \"\";\r\n        let pipelines = targetPipelines;\r\n        let jobId = _.guid();\r\n        let data = {};\r\n        let metadata = {};\r\n        let image = new Image();\r\n\r\n        try \r\n        {\r\n            if(this._doesFileExist(inputImagePath)) \r\n            {\r\n                if(this._doesPathHaveJsonExtension(inputImagePath)) \r\n                {\r\n                    data = await this._readJson(inputImagePath);\r\n                    pipelines = data.pipelines || pipelines;\r\n                    pipelines = (typeof pipelines === \"string\") ? pipelines.split(',') : pipelines;\r\n                    readMetadata = (typeof data.readMetadata === \"boolean\") ? data.readMetadata : readMetadata;\r\n                    jobId = data.jobId || jobId;\r\n\r\n                    // Grab new image source path and other paths from json, if available\r\n                    inputImagePath = data.inputImagePath || \"\";\r\n                    outputDirectory = data.outputDirectory || outputDirectory;\r\n                    processedDirectory = data.processedDirectory || processedDirectory;\r\n                    errorDirectory = data.errorDirectory || errorDirectory;\r\n\r\n                    inputImagePath = this._ensureAbsolutePath(inputImagePath, inputDirectory);\r\n                    outputDirectory = this._ensureAbsolutePath(outputDirectory, inputDirectory);\r\n                    processedDirectory = this._ensureAbsolutePath(processedDirectory, inputDirectory);\r\n                    errorDirectory = this._ensureAbsolutePath(errorDirectory, inputDirectory);\r\n\r\n                    useOutputDirectory = await this._makeDirectory(outputDirectory);\r\n                    useProcessedDirectory = await this._makeDirectory(processedDirectory);\r\n                    useErrorDirectory = await this._makeDirectory(errorDirectory);\r\n\r\n                    // Blank paths if directory doesn't exist\r\n                    outputDirectory = useOutputDirectory ? outputDirectory : \"\";\r\n                    processedDirectory = useProcessedDirectory ? processedDirectory : \"\";\r\n                    errorDirectory = useErrorDirectory ? errorDirectory : \"\";\r\n\r\n                    if (uncSafePath.isAncestor(inputImagePath, inputDirectory) \r\n                        && (useProcessedDirectory || useErrorDirectory)) \r\n                    {\r\n                        // Otherwise ImageFileMover would attempt to move the root/source directory\r\n                        // This rule should probably be thrown inside of ImageFileMover\r\n                        throw new Error(`JSON inputImagePath cannot be ancestor directory of or same as input directory when using errorDirectory or processedDirectory options.`);\r\n                    }\r\n                }\r\n                if(this._doesFileExist(inputImagePath) && readMetadata === true) \r\n                {\r\n                    metadata = await this._readMetadata(inputImagePath);\r\n                }\r\n            }\r\n        }\r\n        catch(e) \r\n        {\r\n            image.errors.push(e.toString());\r\n        }\r\n        finally \r\n        {\r\n            image.jobId = jobId;\r\n            image.initialInputImagePath = initialInputImagePath;\r\n            image.inputImagePath = inputImagePath;        \r\n            image.inputDirectory = inputDirectory;\r\n            image.outputDirectory = outputDirectory;\r\n            image.processedDirectory = processedDirectory;\r\n            image.errorDirectory = errorDirectory;\r\n            image.useOutputDirectory = useOutputDirectory;\r\n            image.useProcessedDirectory = useProcessedDirectory;\r\n            image.useErrorDirectory = useErrorDirectory;\r\n            image.data = data;\r\n            image.metadata = metadata;\r\n            image.pipelines = pipelines;\r\n\r\n            return image;\r\n        }\r\n    }\r\n    /**\r\n     * Reads any json from the given data source, if it is json and it exists.\r\n     * @returns {object}\r\n     */\r\n    async _readJson(jsonFilePath)\r\n    {\r\n        return new Promise(resolve => {\r\n            fs.readFile(jsonFilePath, { encoding: 'utf8' }, (error, data) => {\r\n                if(error) {\r\n                    throw new Error(`Image json ${jsonFilePath} could not be read.`);\r\n                }\r\n                resolve(JSON.parse(data));\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Reads any metadata from the given source, if it is a file\r\n     * @returns {object}\r\n     */\r\n    async _readMetadata(inputImagePath)\r\n    {\r\n        let ep = new exiftool.ExiftoolProcess();\r\n        let processid = 0;\r\n\r\n        return ep.open()\r\n        .then(pid => {\r\n            processid = pid;\r\n        })\r\n        .then(() => ep.readMetadata(inputImagePath, ['-File:all']))\r\n        .then(metadata => {\r\n            let fileMetadata = metadata.data[0];\r\n            return fileMetadata;\r\n        })\r\n        .finally(() => {\r\n            ep.close();\r\n        });\r\n    }\r\n    _isPathDefinedAndAbsolute(path) {\r\n        return typeof path === \"string\" && path.length > 0 && upath.isAbsolute(path);\r\n    }\r\n    _ensureAbsolutePath(path, parentDirectory) {\r\n        if(!path) {\r\n            return \"\";\r\n        }\r\n        return upath.isAbsolute(path) ? path : upath.join(parentDirectory, path);\r\n    }\r\n    _doesPathHaveJsonExtension(path) {\r\n        return upath.extname(path) === \".json\";\r\n    }\r\n    _doesFileExist(path) {\r\n        try {\r\n            return fs.lstatSync(path || \"\").isFile();\r\n        } catch(e) {\r\n            if(e && e.code == \"ENOENT\") {\r\n                return false;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n    _doesDirectoryExist(path) {\r\n        try {\r\n            return fs.lstatSync(path || \"\").isDirectory();\r\n        } catch(e) {\r\n            if(e && e.code == \"ENOENT\") {\r\n                return false;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n    _makeDirectory(directory) \r\n    {\r\n        return new Promise((resolve, reject) => {\r\n            if(!directory) {\r\n                resolve(false);\r\n                return;\r\n            }\r\n            fsx.mkdir(directory, { recursive: true }, err => {\r\n                if(err && err.code !== \"ENOENT\") {\r\n                    reject(`${err}\\nCould not create directory.`);\r\n                } else {\r\n                    resolve(true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}","import fs from 'fs';\r\nimport chokidar from 'chokidar';\r\nimport upath from 'upath';\r\nimport isUncPath from 'is-unc-path';\r\nimport EventEmitter from \"events\";\r\nimport ImageSource from './imageSource';\r\nimport ImageSourceType from './imageSourceType';\r\nimport host from '../host';\r\nimport _, { EDebounceType } from '../utils';\r\n\r\n\r\nlet nextProducerId = 0;\r\n/**\r\n * Reads images from source described by ImageSource and produces file paths for consumption\r\n * A producer has a single source.\r\n * A producer will not automatically deplete when sourcing from a File Watcher\r\n * IMPORTANT: Multiple producers should not be created for the same set of files\r\n */\r\nexport default class ImageFileProducer extends EventEmitter\r\n{\r\n    constructor(imageSource) \r\n    {\r\n        super();\r\n        this._id = nextProducerId++;\r\n        this._imageSource = imageSource;\r\n        this._fileWatcher = null;\r\n        this._isDepleted = false;\r\n\r\n        // NOTE: We debounce in order to collect files from file watcher and emit them \r\n        // in one lump. This helps avoid issues where shared files are moved at the end\r\n        // of an IMAGE process pre-maturely, when the next process also needs them.\r\n        // This isn't the best solution, since it is a completely blind process.\r\n        // A better option would be to submit explicit files for processing as one 'job',\r\n        // via a REST api or similar interface.\r\n        this._q = [];\r\n        this._emitQFiles = _.debounce(this._emitQFiles, 5000, EDebounceType.Trailing);\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    produce()\r\n    {\r\n        // TODO: Split source types into their own implementation of a producer interface?\r\n        switch(this._imageSource.sourceType) \r\n        {\r\n            case ImageSourceType.FILEWATCHER: this._sourceFileWatchers(); break;\r\n            case ImageSourceType.DIRECTORY: this._sourceDirectory(); break;\r\n            case ImageSourceType.OPENFILES: this._sourceOpenFiles(); break;\r\n            case ImageSourceType.BLANK: this._sourceBlank(); break;\r\n            case ImageSourceType.ACTIVEDOCUMENT: this._sourceActiveDocument(); break;\r\n            default: throw new Error(\"Unknown ImageSourceType: \" + this._imageSource.sourceType);\r\n        }\r\n    }\r\n    destroy()\r\n    {\r\n        // ASSERT: Should NOT emit any more files from this point\r\n        if(this._fileWatcher) {\r\n            this._fileWatcher.removeAllListeners();\r\n            this._fileWatcher.close();\r\n        }\r\n        this.removeAllListeners();\r\n    }\r\n    getImageSource()\r\n    {\r\n        return this._imageSource;\r\n    }\r\n    toString() {\r\n        return `\\tid = ${this._id}\\n\\timageSource = (${this._imageSource.toString()})`;\r\n    }\r\n    _emitFiles(files) \r\n    {\r\n        if(!files.length > 0) {\r\n            return;\r\n        }\r\n        this.emit(\"files\", this._id, files);\r\n    }\r\n    _emitQFiles()\r\n    {\r\n        const files = this._q;\r\n        this._q = [];\r\n        this._emitFiles(files);\r\n    }\r\n    _sourceFileWatchers() \r\n    {\r\n        const watchPathRoot = this._imageSource.sourceDirectory;\r\n        const watchExtensions = this._imageSource.sourceExtensions;\r\n        const watchPaths = watchExtensions.map(ext => upath.join(watchPathRoot, \"*.\" + ext));\r\n\r\n        if(isUncPath(watchPathRoot)) {\r\n            throw Error(`Watching network paths is problematic. Only local directories supported at this time.`);\r\n        }\r\n        if(!fs.existsSync(watchPathRoot)) {\r\n            throw Error(`Watch path: ${watchPathRoot} does not exist.`);\r\n        }\r\n        const watcher = chokidar.watch(watchPaths, {\r\n            ignored: /^\\./, \r\n            depth: 0,\r\n            usePolling: true,\r\n            interval: 5000,\r\n            awaitWriteFinish: {\r\n                stabilityThreshold: 5000,\r\n                pollInterval: 5000\r\n            }\r\n        })\r\n        .on(\"add\", newPath => \r\n        {\r\n            if(upath.basename(newPath).startsWith(\"manifest\")) {\r\n                return;\r\n            }\r\n            this._q.push(newPath);\r\n            this._emitQFiles();\r\n        });\r\n\r\n        this._fileWatcher = watcher;\r\n    }\r\n    /**\r\n     * Reads source directory for files and filters by extensions\r\n     */\r\n    _sourceDirectory() \r\n    {\r\n        const directory = this._imageSource.sourceDirectory;\r\n        const extensions = this._imageSource.sourceExtensions;\r\n\r\n        fs.readdir(directory, { encoding: \"utf8\" }, (error, files) => {\r\n            if(error) {\r\n                this.emit(\"depleted\", this._id);\r\n                throw new Error(error);\r\n            }\r\n            if(files) \r\n            {\r\n                files = files.map(file => upath.join(directory, file));\r\n                files = files.filter(file => {\r\n                    if(upath.basename(file).startsWith(\"manifest\")) {\r\n                        return false;\r\n                    }\r\n                    const ext = file.split('.').pop();\r\n                    return extensions.includes(ext);\r\n                });\r\n                this._isDepleted = true;\r\n                this._emitFiles(files);\r\n            }\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n    /**\r\n     * Asks Adobe application for currently open documents \r\n     */\r\n    _sourceOpenFiles() \r\n    {\r\n        host.runActionWithParameters(\"action.getOpenDocumentPaths\")\r\n        .then(filePaths => {\r\n            this._isDepleted = true;\r\n            this._emitFiles(filePaths.split(','));\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n    _sourceBlank()\r\n    {\r\n        this._isDepleted = true;\r\n        this._emitFiles([\"\"]);\r\n        this.emit(\"depleted\", this._id);\r\n    }\r\n    _sourceActiveDocument()\r\n    {\r\n        host.runActionWithParameters(\"action.getActiveDocumentPath\")\r\n        .then(filePath => {\r\n            this._isDepleted = true;\r\n            this._emitFiles(filePath ? [filePath] : []);\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport ImageFileProducer from './imageFileProducer';\r\nimport _ from '../utils';\r\n\r\n/**\r\n * Manages ImageFileProducer instances and produces image jobs\r\n */\r\nexport default class ImageFileProducers extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        /**\r\n         * Producer Id => [Listener Names...]\r\n         */\r\n        this._producerIdToListenerNames = new Map();\r\n        /**\r\n         * Producer Id => ImageFileProducer instance\r\n         */\r\n        this._producerIdToProducer = new Map();\r\n\r\n        this._jobs = [];\r\n    }\r\n    destroy()\r\n    {\r\n        this.stopProducers();\r\n        this.removeAllListeners();\r\n    }\r\n    /**\r\n     * Create and start a producer with the given ImageSource\r\n     * @param {ImageSource} imageSource \r\n     * @param {Array<string>} listenerNames \r\n     */\r\n    startProducer(imageSource, listenerNames) \r\n    {\r\n        const producer = new ImageFileProducer(imageSource);\r\n        console.log(`Image File Producer created:\\n${producer.toString()}`);\r\n\r\n        this._producerIdToListenerNames.set(producer.id, listenerNames);\r\n        this._producerIdToProducer.set(producer.id, producer);\r\n\r\n        producer.on(\"files\", this._onProducerFiles.bind(this));\r\n        producer.on(\"depleted\", this._onProducerDepleted.bind(this));\r\n        producer.produce();\r\n    }\r\n    /**\r\n     * Stops all ImageFileProducer instances and clears the job queue\r\n     */\r\n    stopProducers() {\r\n        const producerIds = [...this._producerIdToProducer.keys()];\r\n        this._stopProducers(producerIds);\r\n        this._jobs = [];\r\n    }\r\n    hasProducers() {\r\n        return this._producerIdToProducer.size > 0;\r\n    }\r\n    hasJobs() {\r\n        return this._jobs.length > 0;\r\n    }\r\n    nextJob() {\r\n        return this._jobs.pop();\r\n    }\r\n    /**\r\n     * @readonly\r\n     */\r\n    getAllJobs() {\r\n        return this._jobs; // TODO: Clone?\r\n    }\r\n    getTotalJobs() {\r\n        return this._jobs.length;\r\n    }\r\n    _stopProducers(producerIds)\r\n    {\r\n        producerIds = producerIds.filter(id => this._producerIdToProducer.has(id));\r\n        for(const producerId of producerIds) \r\n        {\r\n            const producer = this._producerIdToProducer.get(producerId);\r\n            console.log(`Image File Producer destroyed:\\n${producer.toString()}`);\r\n\r\n            this._producerIdToProducer.delete(producerId);\r\n            this._producerIdToListenerNames.delete(producerId);\r\n            producer.destroy();\r\n        }\r\n    }\r\n    _onProducerFiles(producerId, files)\r\n    {\r\n        const listenerNames = this._producerIdToListenerNames.get(producerId);\r\n        const imageSource = this._producerIdToProducer.get(producerId).getImageSource();\r\n        this._jobs.push({\r\n            jobId: _.guid(), \r\n            jobCreationTime: _.yyyymmddhhmmss(),\r\n            listenerNames: listenerNames.slice(0),\r\n            files, \r\n            imageSource: imageSource.clone()\r\n        });\r\n        this.emit(\"job\");\r\n        console.log(`Image File Producer ${producerId}: Job produced.`);\r\n    }\r\n    _onProducerDepleted(producerId) \r\n    {\r\n        this._stopProducers([producerId]);\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport _ from '../utils';\r\nimport store from '../store';\r\nimport host from '../host';\r\nimport Image from './image';\r\nimport ImageFileMover from './imageFileMover';\r\nimport ImageFileReader from './imageFileReader';\r\nimport ImageFileProducers from './imageFileProducers';\r\nimport PipelineEngineState from './pipelineEngineState';\r\n\r\nexport class PipelineEngine extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        const self = this;\r\n        this._processingMutex = false; \r\n        this._lastState = PipelineEngineState.STOPPED;\r\n        this._state = PipelineEngineState.STOPPED;\r\n        this._status = new Proxy({\r\n                jobId: \"\", \r\n                jobCreationTime: \"\",\r\n                files: [],\r\n                fileCount: 0,\r\n                file: \"\",\r\n                imageJobId: \"\",\r\n                imageIteration: 0,\r\n                pipeline: \"\", \r\n                action: \"\"\r\n            }, {\r\n                set: function() { \r\n                    Reflect.set(...arguments);\r\n                    self.emit(\"status\", self._status);\r\n                    return true;\r\n                }\r\n        });\r\n        this.on(\"jobstart\", (jobId, jobCreationTime, files) => {\r\n            this._status.jobId = jobId;\r\n            this._status.jobCreationTime = jobCreationTime;\r\n            this._status.files = files;\r\n            this._status.fileCount = files.length;\r\n        });\r\n        this.on(\"jobend\", () => {\r\n            this._status.jobId = \"\";\r\n            this._status.jobCreationTime = \"\";\r\n            this._status.files = [];\r\n            this._status.fileCount = 0;\r\n            this._status.file = \"\";\r\n            this._status.imageJobId = \"\";\r\n            this._status.imageIteration = 0;\r\n            this._status.pipeline = \"\";\r\n            this._status.action = \"\";\r\n        });\r\n        this.on(\"imagejobstart\", (imageJobId, imageIteration, file) => {\r\n            this._status.imageJobId = imageJobId;\r\n            this._status.imageIteration = imageIteration;\r\n            this._status.file = file;\r\n        });\r\n        this.on(\"pipelinestart\", pipelineName => { this._status.pipeline = pipelineName; });\r\n        this.on(\"pipelineend\", () => { this._status.pipeline = \"\"; });\r\n        this.on(\"actionstart\", actionName => { this._status.action = actionName; });\r\n        this.on(\"actionend\", () => { this._status.action = \"\"; });\r\n\r\n\r\n        this._imageFileReader = new ImageFileReader();\r\n        this._imageFileMover = new ImageFileMover();\r\n        this._imageFileProducers = new ImageFileProducers();\r\n        this._imageFileProducers.on(\"job\", this._onProducerJob.bind(this));\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        this._imageFileProducers.destroy();\r\n        this.state = PipelineEngineState.STOPPED;\r\n    }\r\n    /**\r\n     * Run the given pipeline using its configured file source(s)\r\n     * @param {string} pipelineName pipeline name\r\n     */\r\n    run(pipelineName)\r\n    {\r\n        this._run([pipelineName]);\r\n    }\r\n    /**\r\n     * Run all pipelines using their configured file source(s)\r\n     */\r\n    runAll()\r\n    {\r\n        const pipelineNames = store.pipelines.pipelines.map(p => p.name);\r\n        this._run(pipelineNames);\r\n    }\r\n    _run(pipelineNames) \r\n    {\r\n        if(!this.isStopped()) {\r\n            console.log(\"Pipeline engine is already running.\");\r\n            return;\r\n        }\r\n        console.log(`Running pipelines: \"${pipelineNames.join(\",\")}\"`);\r\n        this.state = PipelineEngineState.IDLE;\r\n\r\n        // IMPORTANT: We Do Not want multiple producers for the same files\r\n        // Which would happen if we looped by each pipeline and created its producers\r\n        // since there is a many-to-one relationship between pipelines and file watchers\r\n        const imageSourceNameToPipelineNames = store.pipelines.getImageSourceNameToPipelineNameMap(pipelineNames);\r\n        for(let [imageSourceName, toPipelineNames] of imageSourceNameToPipelineNames.map) \r\n        {\r\n            const imageSource = store.general.getImageSourceByName(imageSourceName);         \r\n            this._imageFileProducers.startProducer(imageSource, toPipelineNames);\r\n        }\r\n    }\r\n    pause() {\r\n        if(this.isProcessing() || this.isIdle()) {\r\n            this.state = PipelineEngineState.PAUSED;\r\n        }\r\n    }\r\n    resume() {\r\n        if(this.isPaused() && this._lastState === PipelineEngineState.PROCESSING) {\r\n            this.state = PipelineEngineState.PROCESSING;\r\n        } else {\r\n            this.state = PipelineEngineState.IDLE;\r\n        }\r\n    }\r\n    stop() {\r\n        this._imageFileProducers.stopProducers();\r\n        this.state = PipelineEngineState.STOPPED;\r\n    }\r\n    _stopIfNoProducersElseIdle()\r\n    {\r\n        if(this.isStopped()) {\r\n            return;\r\n        }\r\n        if(!this._imageFileProducers.hasProducers()) {\r\n            this.stop();\r\n        } else {\r\n            this.state = PipelineEngineState.IDLE;\r\n        }\r\n    }\r\n    \r\n\r\n    _onProducerJob() \r\n    {\r\n        this._process();\r\n    }\r\n    _process()\r\n    {\r\n        if(!this._imageFileProducers.hasJobs()) return;\r\n        if(this._processingMutex) return;\r\n        this._processingMutex = true;\r\n\r\n        this._runWaitOneFrame()\r\n        .then(this._runProcessStart.bind(this))\r\n        .then(this._runProcessLoop.bind(this))\r\n        .then(this._runProcessEnd.bind(this))\r\n        .then(() => {\r\n            this._stopIfNoProducersElseIdle();\r\n            this._processingMutex = false;\r\n        });\r\n    }\r\n    _runWaitOneFrame()\r\n    {\r\n        return new Promise(resolve => { setTimeout(resolve, 0); });\r\n    }\r\n    async _runProcessStart()\r\n    {\r\n        await this._pauseCheck();\r\n        this.state = PipelineEngineState.PROCESSING;\r\n\r\n        console.log(`Pipeline process loop started with ${this._imageFileProducers.getTotalJobs()} jobs in queue.`);\r\n        this.emit(\"processstart\");\r\n        return host.runJsxWithThrow(`app.displayDialogs = DialogModes.NO;`);\r\n    }\r\n    async _runProcessLoop()\r\n    {\r\n        let processedImages = [];\r\n        let file;\r\n        while(!this._stopCheck() && this._imageFileProducers.hasJobs()) \r\n        {\r\n            const { \r\n                jobId, \r\n                jobCreationTime,\r\n                listenerNames, \r\n                files, \r\n                imageSource } = this._imageFileProducers.nextJob();\r\n            this.emit(\"jobstart\", jobId, jobCreationTime, files.slice(0));\r\n\r\n            for(let i = 0; !this._stopCheck() && i < files.length; ++i)\r\n            {\r\n                await this._pauseCheck();\r\n                const file = files[i];\r\n\r\n                // READ\r\n                console.log(`Reading next file ${file} from job ${jobId}. ${files.length} remaining.`);\r\n                const image = await this._imageFileReader.read(file, imageSource, listenerNames);\r\n                const pipelines = store.pipelines.getByNames(image.pipelines);\r\n                this.emit(\"imagejobstart\", image.jobId, i, file);\r\n\r\n                // EXECUTE\r\n                for(const pipeline of pipelines) \r\n                {\r\n                    try \r\n                    {\r\n                        await this._runPipelineStart(image, pipeline);\r\n        \r\n                        for(const action of pipeline.actions) \r\n                        {\r\n                            this.emit(\"actionstart\", action.actionName);\r\n                            let result = await host.runActionWithParameters(action.actionName, action.parameters);\r\n                            \r\n                            if(this._stopCheck(result)) break;\r\n                            await this._pauseCheck(result, store.general.pauseAfterEveryAction);\r\n                            this.emit(\"actionend\");\r\n                        }\r\n                    }\r\n                    catch(e)\r\n                    {\r\n                        console.error(e);\r\n                        image.errors.push(e.toString());\r\n                        await this._pauseCheck(null, store.general.pauseOnExceptions);\r\n                    }\r\n                    finally\r\n                    {\r\n                        if(image.errors.length) break;\r\n                        if(this._stopCheck()) break;\r\n                        await this._pauseCheck(null, store.general.pauseAfterEveryPipeline);\r\n                        await this._runPipelineEnd(image, pipeline);\r\n                    }\r\n                }\r\n                \r\n                processedImages.push(image);\r\n                await this._pauseCheck(null, store.general.pauseAfterEveryImage);\r\n                this.emit(\"imagejobend\");\r\n            }\r\n            this.emit(\"jobend\");\r\n        }\r\n        \r\n        return processedImages;\r\n    }\r\n    _runProcessEnd(processedImages)\r\n    {\r\n        console.log(\"Pipeline process loop exited.\");\r\n\r\n        // MOVE (we move at the end of the process, in case images/jobs are sharing files)\r\n        if(!this._stopCheck())\r\n        {\r\n            console.log(`Moving ${processedImages.length} processed images...`);\r\n            this._imageFileMover.move(processedImages);\r\n        } \r\n\r\n        this.emit(\"processend\");\r\n        return host.runJsxWithThrow(`$.gc();`);\r\n    }\r\n    /**\r\n     * Close all documents. Save Photoshop settings. Instantiate IMAGE instance.\r\n     * @param {Image} image \r\n     * @param {object} pipeline the pipeline configuration object\r\n     * @returns {Promise}\r\n     */\r\n    _runPipelineStart(image, pipeline)\r\n    {\r\n        console.log(`Pipeline '${pipeline.name}' started for image job ${image.jobId}.`);\r\n        this.emit(\"pipelinestart\", pipeline.name);\r\n        return host.runJsxWithThrow(`\r\n        __PIPELINE = {\r\n            name: \"${pipeline.name}\",\r\n            restoreUnits: _.saveUnits()\r\n        };\r\n        IMAGE = new ImageForProcessing(${JSON.stringify(image)});`);\r\n    }\r\n    /**\r\n     * Restore Photoshop settings. Clear IMAGE instance.\r\n     * @param {object} pipeline the pipeline configuration object \r\n     * @returns {Promise}\r\n     */\r\n    _runPipelineEnd(image, pipeline)\r\n    {\r\n        console.log(`Pipeline '${pipeline.name}' ended for image job ${image.jobId}.`);\r\n        this.emit(\"pipelineend\");\r\n        return host.runJsx(`\r\n        __PIPELINE.restoreUnits && __PIPELINE.restoreUnits(); \r\n        __PIPELINE=null;\r\n        IMAGE=null;\r\n        `);\r\n    }\r\n    _stopCheck(actionResult) \r\n    {\r\n        if(this.isStopped() || actionResult === \"STOP\") {\r\n            this.state = PipelineEngineState.STOPPED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _pauseCheck(actionResult, forcePause) \r\n    {\r\n        if(this.isPaused() || forcePause || actionResult === \"PAUSE\") \r\n        {\r\n            console.log(\"Pipeline Engine waiting on pause...\");\r\n            this.state = PipelineEngineState.PAUSED;\r\n\r\n            return new Promise(resolve => {\r\n                this.once(\"state\", state => {\r\n                    if(state != PipelineEngineState.PAUSED) {\r\n                        resolve();\r\n                    }\r\n                });\r\n            });\r\n        } \r\n        return Promise.resolve();\r\n    }\r\n    \r\n    get fullStatus() \r\n    {\r\n        return {\r\n            state: PipelineEngineState.toKey(this._state),\r\n            jobs: this._imageFileProducers.getAllJobs(),\r\n            status: this._status\r\n        };\r\n    }\r\n    get status() {\r\n        return this._status;\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        this._lastState = this._state;\r\n        this._state = value;\r\n        this.emit(\"state\", value);\r\n    }\r\n    isIdle() { return this.state === PipelineEngineState.IDLE; }\r\n    isStopped() { return this.state === PipelineEngineState.STOPPED; }\r\n    isPaused() { return this.state === PipelineEngineState.PAUSED; }\r\n    isProcessing() { return this.state === PipelineEngineState.PROCESSING; }\r\n}","import upath from 'upath';\r\nimport fs from 'fs';\r\nimport EventEmitter from \"events\";\r\nconst jsdoc = require(\"jsdoc-api\");\r\n//import jsdocx from 'jsdoc-x';\r\n\r\nimport store from '../store';\r\nimport host from '../host';\r\nimport global from '../global';\r\nimport FolderTreeNode from '../folderTree';\r\nimport { resolve } from 'path';\r\n\r\nconst ROOT_ACTION_DIRECTORY = \"actions\";\r\nconst ROOT_ACTION_NAMESPACE = \"action\";\r\n\r\n/**\r\n * Describes a JSX Actions signature in full, including parameters\r\n * READONLY\r\n */\r\nexport class ActionDescriptor\r\n{\r\n    constructor()\r\n    {\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.path = \"\";\r\n        this.params = [];\r\n    }\r\n    /**\r\n     * Translate JSDocDescription object to ActionDescriptor\r\n     * @param {JSDocDescription} jsDocDescription the \"function\" description returned by JSDoc\r\n     */\r\n    static fromJSDoc(jsdocDescription)\r\n    {\r\n        /*\r\n            Example JSDoc Output:\r\n            {\r\n                \"name\": \"action.makeNote\",\r\n                \"description\": \"Add a Note/Annotation to the document\",\r\n                \"path\": \"C:\\\\Users\\\\puglisij\\\\AppData\\\\Roaming\\\\Adobe\\\\CEP\\\\extensions\\\\com.mario.panel\\\\public\\\\actions\",\r\n                \"params\": [\r\n                    {\r\n                    \"type\": { \"names\": [\"Number\"] },\r\n                    \"description\": \"x axis position in pixels\",\r\n                    \"name\": \"posX\"\r\n                    },\r\n                    {\r\n                    \"type\": { \"names\": [\"Number\"] },\r\n                    \"description\": \"y axis position in pixels\",\r\n                    \"name\": \"posY\"\r\n                    }\r\n                ]\r\n            }\r\n        */\r\n        \r\n        const d = jsdocDescription;\r\n        const descriptor = new ActionDescriptor();\r\n              descriptor.name = d.longname;\r\n              descriptor.description = d.description;\r\n              descriptor.params = d.params ? d.params.map(p => ActionParameter.fromJSDoc(p)) : [];\r\n              descriptor.path = d.meta.path;\r\n        return descriptor;\r\n    }\r\n}\r\n/**\r\n * Describes an (Input) parameter to a JSX Action function\r\n * READONLY\r\n */\r\nexport class ActionParameter \r\n{\r\n    constructor() \r\n    {\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.typeNames = [];\r\n        this.isRequired = false;\r\n        this.defaultValue = null;\r\n    }\r\n\r\n    static fromJSDoc(jsdocParameter) {\r\n        const { name, description, defaultValue, optional, type } = jsdocParameter;\r\n        const param = new ActionParameter();\r\n            param.name = name;\r\n            param.description = description;\r\n            param.defaultValue = defaultValue || null;\r\n            param.isRequired = !(optional === true);\r\n            param.typeNames = type.names.slice(0);\r\n\r\n        return param;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nclass ActionParameterCurator\r\n{\r\n    constructor(hostInterface)\r\n    {\r\n        this.host = hostInterface;\r\n        this.typeNameToDataCache = {};\r\n    }\r\n    /**\r\n     * Convert jsdoc parameter type name to Vue control component type\r\n     * @param {string} typeName any type for which a control exists (e.g. string, boolean, etc)\r\n     * @returns {string} \r\n     */\r\n    typeNameToControlInputType(typeName)\r\n    {\r\n        // call jsx functions to get type information\r\n        // this.host.runJsx('...');\r\n    }\r\n}\r\n\r\n/**\r\n * Handles reading JSX action files and JSDoc descriptions they contain\r\n */\r\nclass ActionFileDescriptionReader \r\n{\r\n    static _actionNameToJsDoc = new Map();\r\n    /**\r\n     * Reads and caches the JsDocDescription's for all the given actions\r\n     * @param {Action[]} actions \r\n     */\r\n    static async readAll(actions) \r\n    {\r\n        return jsdoc.explain({\r\n            cache: true,\r\n            files: actions.map(a => a.absolutePath)\r\n        })\r\n        .then(descriptions => \r\n        {\r\n            for(let i = 0; i < descriptions.length; ++i) \r\n            {\r\n                const description = descriptions[i];\r\n                if(this._isFunction(description)) {\r\n                    this._actionNameToJsDoc.set(description.longname, description);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Caches and returns the JsDocDescription for the given action\r\n     * @param {Action} action\r\n     * @returns {JSDocDescription}\r\n     */\r\n    static read(action)\r\n    {\r\n        let description = this._actionNameToJsDoc.get(action.name);\r\n        if(!description) {\r\n            console.warn(`JSDoc description not found for action ${action.name}. Do you need to re-load actions?`);\r\n            return {};\r\n        }\r\n        return description;\r\n    }\r\n    // FUNCTIONS:\r\n    // scope: \"static\"\r\n    // kind: \"function\"\r\n    // memberof: \"action\"\r\n    static _isFunction(jsdocDescription) \r\n    {\r\n        return jsdocDescription.scope === \"static\"\r\n            && jsdocDescription.kind === \"function\"\r\n            && jsdocDescription.memberof.startsWith(\"action\");\r\n    }\r\n    // ENUMERATIONS:\r\n    // name starts with capital letter\r\n    // scope: \"global\"\r\n    // kind: \"member\"\r\n    // memberof: undefined\r\n    // isEnum: true (only if @enum is in comment)\r\n    static _isEnum(jsdocDescription) \r\n    {\r\n        return jsdocDescription.scope === \"global\"\r\n            && jsdocDescription.kind === \"member\"\r\n            && jsdocDescription.isEnum === true\r\n            && typeof jsdocDescription.memberof === undefined;\r\n    }\r\n}\r\n\r\n/**\r\n * Handles reading JSX action files for import into Adobe host\r\n */\r\nclass ActionFileImportStringBuilder\r\n{\r\n    /**\r\n     * Reads all jsx files in the given directory and builds an import JSX string for execution.\r\n     * Each new directory encountered becomes a nested namespace.\r\n     * @param {string} pathToActions the directory containing the jsx files\r\n     * @param {string} rootNamespace the root action function namespace. All action names with start with this\r\n     * @returns {string} the stringified JSX script to run which will import all actions\r\n     */\r\n    static build(pathToActions, rootNamespace)\r\n    {\r\n        return this._buildJsxImportString(pathToActions, rootNamespace); \r\n    }\r\n    // NOTE: importAction() is expected to be defined on Host JSX side\r\n    static _buildJsxImportString(absolutePathToActions, rootNamespace)\r\n    {\r\n        let actions = [];\r\n        let imports = [];\r\n        let directory;\r\n        let directories = [\r\n            {\r\n                namespace: rootNamespace,\r\n                absolutePath: absolutePathToActions\r\n            }\r\n        ];\r\n        while(directory = directories.pop()) \r\n        {\r\n            const namespace = directory.namespace;\r\n            const namespaceDefine = `${namespace}= (typeof ${namespace} !== \"undefined\") ? ${namespace} : {};`;\r\n            imports.push(namespaceDefine);\r\n            \r\n            // Read directory contents\r\n            const names = fs.readdirSync(directory.absolutePath);\r\n            for(let i = 0; i < names.length; ++i) \r\n            {\r\n                const nameParts = names[i].split('.');\r\n                if(nameParts.length > 2) {\r\n                    throw new Error(\"Action file and directory names cannot contain periods.\");\r\n                }\r\n\r\n                const nameWithoutExtension = nameParts[0];\r\n                const nameSpacedName = `${namespace}.${nameWithoutExtension}`;\r\n                const absoluteFilePath = upath.join(directory.absolutePath, names[i]);\r\n                if(fs.statSync(absoluteFilePath).isDirectory()) \r\n                {\r\n                    directories.push({\r\n                        namespace: nameSpacedName,\r\n                        absolutePath: absoluteFilePath\r\n                    });\r\n                } \r\n                else \r\n                {\r\n                    imports.push(`importAction(\"${absoluteFilePath}\", \"${nameSpacedName}\");`);\r\n                    actions.push(new Action(nameSpacedName, namespace, absoluteFilePath));\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            importString: imports.join(''),\r\n            actions\r\n        };\r\n    }\r\n}\r\n\r\nclass Action\r\n{\r\n    constructor(name, namespace, absolutePath)\r\n    {\r\n        this.name = name;\r\n        this.namespace = namespace;\r\n        this.absolutePath = absolutePath;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Primary interface for loading/reloading jsx action files and their JSDoc descriptions\r\n */\r\nexport class Actions\r\n{\r\n    constructor() \r\n    {\r\n        this._actionNameToAction = new Map();\r\n        this._actionTree = new FolderTreeNode(ROOT_ACTION_NAMESPACE, true);\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        return this._importAll();\r\n    }\r\n    destroy() {}\r\n\r\n    /**\r\n     * Import all JSX function action files\r\n     */\r\n    async _importAll()\r\n    {\r\n        console.log(\"Import actions started.\");\r\n\r\n        await this._import(store.general.pathToUserActions);\r\n        await this._import(global.appBuiltinActionsPath);\r\n\r\n        console.log(\"Import actions exited.\");\r\n    }\r\n    _import(importDirectory) \r\n    {\r\n        if(!importDirectory.trim()) {\r\n            return;\r\n        }\r\n\r\n        const { importString,  actions } = ActionFileImportStringBuilder.build(importDirectory, ROOT_ACTION_NAMESPACE);\r\n        // Parse to data structures\r\n        for(let i = 0; i < actions.length; ++i) \r\n        {\r\n            const actionPath = actions[i].name.split('.');\r\n            this._actionNameToAction.set(actions[i].name, actions[i]);\r\n            this._actionTree.insert(actionPath, false);\r\n            console.log(\"Action: \" + actions[i].name);\r\n        }\r\n        // Async read and cache jsdoc info\r\n        ActionFileDescriptionReader.readAll(actions);\r\n\r\n        return host.runJsx(importString  + \"act = action;\");\r\n    }\r\n    /**\r\n     * Returns tree structure of all available action nested namespaces/action names\r\n     * @returns {FolderTreeNode} n-ary tree indicating folder and action file structure\r\n     */\r\n    getAllActions() {\r\n        return this._actionTree.cloneTree(); \r\n    }\r\n    /**\r\n     * Return all available action names\r\n     * @returns {string[]}\r\n     */\r\n    getAllActionNames() {\r\n        return Array.from( this._actionNameToAction.keys() );\r\n    }\r\n    /**\r\n     * Converts JSDoc for given action name to instance of ActionDescriptor\r\n     * @param {string} actionName\r\n     * @returns {Promise<ActionDescriptor>}  \r\n     */\r\n    async getActionDescriptorByName(actionName) \r\n    {\r\n        const action = this._actionNameToAction.get(actionName);\r\n        if(!action) {\r\n            throw new Error(`Action doesnt exist by name ${actionName}`);\r\n        }\r\n\r\n        return new Promise(resolve => {\r\n            const d = ActionFileDescriptionReader.read(action)\r\n            const descriptor = ActionDescriptor.fromJSDoc(d);\r\n            resolve(descriptor);\r\n        });\r\n    }\r\n}\r\n","\r\n/* npm modules */\r\nimport EventEmitter from \"events\";\r\n// import express from \"express\";\r\n\r\n/* local modules */\r\nimport { PipelineEngine } from './pipelineEngine';\r\nimport { Actions } from './actions';\r\nimport _ from '../utils';\r\nimport store from '../store';\r\nimport global from '../global';\r\n\r\nlet port = 0;\r\nlet app = null;\r\n\r\n\r\nexport const ServerState = {\r\n    UNINITIALIZED: 0,\r\n    RUNNING: 1\r\n};\r\n\r\n/**\r\n * Backend systems.\r\n * Manages Node REST API, and JS API for managing pipelines. \r\n * Server is not CEP panel aware\r\n */\r\nclass Server extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        this._initialized = false;\r\n        this._state = ServerState.UNINITIALIZED;\r\n\r\n        // Express instance\r\n        this._httpServer = null;\r\n        this._pipelineEngine = new PipelineEngine();\r\n        this._actions = new Actions();\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    async init() \r\n    {\r\n        if(this._initialized) return;\r\n        this._initialized = true;\r\n\r\n        await this._pipelineEngine.init();\r\n        await this._actions.init();\r\n\r\n        // if(store.general.runHttpServer) {\r\n        //     this.startServer();\r\n        // }\r\n        this.state = ServerState.RUNNING;\r\n        this.emit(\"initialized\");\r\n        console.log(\"Server initialized.\");\r\n    }\r\n    async startServer() \r\n    {\r\n        app = express();\r\n        port = store.general.serverPort;\r\n        //-----------------\r\n        // Express Routes\r\n        //-----------------\r\n        // TODO Replace Express with WebSockets (e.g. sockjs)?\r\n        // app.get('/pipeline/:name/configuration', (req, res) => {\r\n        //     res.header(\"Content-Type\", \"application/json\");\r\n        //     res.send(\r\n        //         JSON.stringify(this._pipelineConfig.pipelines.find(p => p.name == req.params.name.toLowerCase()), null, 4)\r\n        //     );\r\n        // });\r\n        // app.post('/pipeline/run', (req, res) => {\r\n        //     res.status(200).json({ success: true });\r\n        // });\r\n        // app.post('/pipeline/stop', (req, res) => {\r\n        //     res.status(200).json({ success: true });\r\n        // });\r\n        // app.use((req, res, next) => {\r\n        //     res.status(404).send(\"Sorry, can't find that!\");\r\n        // });\r\n        // app.use((err, req, res, next) => {\r\n        //     console.error(err.stack);\r\n        //     res.status(500).send('Something broke!')\r\n        // });\r\n        app.get('/status', (req, res) => {\r\n            const status = {\r\n                adobeApp: global.adobeApp,\r\n                adobeVersion: global.adobeVersion,\r\n                version: global.appVersion,\r\n                ...this._pipelineEngine.fullStatus\r\n            };\r\n            res.type('json').send(JSON.stringify(status, null, 2) + '\\n');\r\n            //res.status(200).json(this._pipelineEngine.status);\r\n        });\r\n\r\n        //-----------------\r\n        // Create Server\r\n        //-----------------\r\n        this._httpServer = app.listen(port, function() {\r\n            console.log(`Express is listening to http://localhost:${port}`);\r\n        });\r\n        console.log(\"Server started.\");\r\n    }\r\n    destroy() \r\n    {\r\n        console.log(`Server closing...`);\r\n        this._httpServer && this._httpServer.close(() => {\r\n            this._httpServer = null;\r\n            console.log(`Server closed.`);\r\n        });\r\n        this._pipelineEngine.destroy();\r\n        this._pipelineEngine = null;\r\n        this._actions.destroy();\r\n        this._actions = null;\r\n    }\r\n    get pipelineEngine() {\r\n        return this._pipelineEngine;\r\n    }\r\n    get actions() {\r\n        return this._actions;\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        this._state = value;\r\n        this.emit(\"state\", value);\r\n    }\r\n}\r\n// DELETE. Note, to access in iframe use iframe.contentWindow.server\r\n// TODO: For DEBUG Only. When finished, remove \"window.server = \" from export.\r\nexport default (window.server = new Server());","import upath from \"upath\";\nimport fs from \"fs\";\nimport { EventEmitter } from \"events\";\nimport global from '../global';\nimport store from '../store';\n\nconst CONSOLE_METHODS = [\"log\", \"warn\", \"error\"];\n\nclass Logger extends EventEmitter\n{\n    constructor()\n    {\n        super();\n        this.initialized = false;\n        this.options = {\n            logDirectory: \"./\",\n            logFileEnabled: false,\n            logFilePersistForDays: 7 // number of files/days to keep\n        };\n        this.originalConsoleMethods = {};\n        this.logWriteStream = null;\n        this.logBuffer = [];\n        this.maxBufferSize = 64;\n    }\n    /**\n     * @returns {Promise}\n     */\n    init() \n    {\n        if(this.initialized)\n            return;\n        this.initialized = true;\n        this.emit(\"initializing\");\n\n        this.options = {\n            logDirectory: store.general.logDirectory || global.appDefaultLogPath, \n            logFileEnabled: true,\n            logFilePersistForDays: store.logFilePersistForDays || 3\n        };\n        this._cleanupFiles();\n        this._createFileStream();\n\n        // Override default console logging methods\n        CONSOLE_METHODS.forEach(function(method)\n        {\n            const self = this;\n            const originalMethod = console[method].bind(console);\n            this.originalConsoleMethods[method] = originalMethod;\n\n            console[method] = function() {\n                const args = Array.prototype.slice.call(arguments);\n                originalMethod.apply(\n                    console,\n                    args\n                );\n                self._write(method, args);\n            };\n        }.bind(this));\n\n        this.emit(\"initialized\");\n        console.log(\"Logger initialized\");\n        return Promise.resolve();\n    }\n    _write(method, args)\n    {\n        // write to read buffer\n        const chunk = [new Date().toLocaleTimeString(), `[${method.toUpperCase()}]\\t`, ...args, `\\n`].join(\" \");\n        const htmlChunk = [`<div class=\"${method}\">${new Date().toLocaleTimeString()}`, ...args, `</div>`].join(\" \");\n        this.logWriteStream && this.logWriteStream.write(chunk);\n        this.logBuffer.push(htmlChunk);\n\n        this.emit(\"logs\");\n    }\n    _createFileStream()\n    {\n        if(!this.options.logFileEnabled) {\n            return;\n        }\n        const yyyymmdd = new Date().toISOString().slice(0,10);\n        const logPath = upath.join(this.options.logDirectory, yyyymmdd + \".logs\");\n        this.logWriteStream = fs.createWriteStream(logPath, {\n            flags: \"a\",\n            encoding: \"utf8\"\n        });\n    }\n    _closeFileStream()\n    {\n        this.logWriteStream && this.logWriteStream.end();\n        this.logWriteStream = null;\n    }\n    /**\n     * Erase old log files \n     */\n    _cleanupFiles()\n    {\n        fs.readdir(this.options.logDirectory, (err, paths) => \n        {\n            const logFilenames = paths.filter(name => name.endsWith(\".logs\"));\n            logFilenames.sort(); // sort by date\n            const logPaths = logFilenames.map(name => upath.join(this.options.logDirectory, name));\n            const howManyToDelete = Math.max(logPaths.length - this.options.logFilePersistForDays, 0);\n\n            for(let i = 0; i < howManyToDelete; ++i) \n            {\n                fs.unlink(logPaths[i], err => {\n                    if(err) console.error(\"Could not delete log file. \", err);\n                });\n            }\n        });\n    }\n    /**\n     * Clear the buffered logs\n     */\n    clear() \n    {\n        this.logBuffer = [];\n    }\n    /**\n     * Read all buffered logs formatted with html\n     * @returns {string}\n     */\n    read()\n    {\n        return this.logBuffer.reduce((acc, val) => `${acc}${val}`, ``);\n    }\n    /**\n     * Should be called to release internal resources\n     */\n    destroy() \n    {\n        console.log(\"Logger destroyed.\");\n\n        if(!this.initialized) \n            return;\n        this.initialized = false;\n\n        this._closeFileStream();\n        // Restore console methods\n        CONSOLE_METHODS.forEach(method => {\n            console[method] = this.originalConsoleMethods[method];\n        })\n        logger = null;\n    }\n}\n\nlet logger = new Logger();\nexport default logger;","module.exports = require(\"process\");","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=style&index=0&id=55ac743d&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=style&index=0&id=55ac743d&lang=scss&scoped=true&\"","module.exports = require(\"events\");"],"sourceRoot":""}