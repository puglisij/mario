(function(e){function t(t){for(var i,r,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)r=s[l],a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);h&&h(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},r={app:0},a={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-5ee75350":"880e1ac2","chunk-61cbdd70":"c43b79ac","chunk-970c75f4":"e2c46242","chunk-14da460c":"fbe1f8c4","chunk-b59fd176":"7cad78f9","chunk-ca6540fe":"68850502"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-5ee75350":1,"chunk-61cbdd70":1,"chunk-14da460c":1,"chunk-b59fd176":1,"chunk-ca6540fe":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-5ee75350":"40fcd3af","chunk-61cbdd70":"8e1e1399","chunk-970c75f4":"31d6cfe0","chunk-14da460c":"60205467","chunk-b59fd176":"f2d4ab73","chunk-ca6540fe":"c7ed6f4e"}[e]+".css",a=c.p+i,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===a))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){u=p[s],l=u.getAttribute("data-href");if(l===i||l===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete r[e],h.parentNode.removeChild(h),n(o)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){r[e]=0})));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,n){i=a[e]=[t,n]}));t.push(i[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e),u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");o.type=i,o.request=r,n[1](o)}a[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var h=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"025e":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("b64b"),n("d3b7"),n("25f0"),n("6062"),n("3ca3"),n("ddb0");var i=n("53ca"),r=n("2909"),a={Trailing:0,Leading:1,Both:2};function o(e,t,n){var i;return function(){var r=this,o=arguments,s=function(){i=null,n!==a.Trailing&&n!==a.Both||e.apply(r,o)},c=n&&!i;clearTimeout(i),i=setTimeout(s,t),c&&e.apply(r,o)}}function s(e,t,n){var i=!1;return function(){var r=this,a=arguments;i||(e.apply(r,a),i=!0,setTimeout((function(){i=!1,n&&e.apply(r,a)}),t))}}function c(e){return JSON.parse(JSON.stringify(e))}function u(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}function l(e){function t(e){return(e<10?"0":"")+e}return e=e||new Date,e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())+t(e.getSeconds())}function p(e){return Array.isArray(e)?e[0]:e[Object.keys(e)[0]]}function h(e){return Object(r["a"])(new Set(e))}function f(e,t,n){return void 0===e[t]&&(e[t]=n),e[t]}function d(e){return"boolean"===typeof e}function m(e){return"number"===typeof e&&e===e}function v(e){return null!==e&&"object"===Object(i["a"])(e)}function g(e){return 0===Object.keys(e||{}).length}function b(e){return"string"===typeof e}function y(e){return""===e}function _(e){return Array.isArray(e)}function k(e){return"undefined"===typeof e}function P(e){return null===e}t["b"]={throttle:s,debounce:o,simpleDeepClone:c,guid:u,yyyymmddhhmmss:l,first:p,unique:h,getOrDefine:f,isBoolean:d,isNumber:m,isObject:v,isEmptyObject:g,isString:b,isEmptyString:y,isArray:_,isUndefined:k,isNull:P}},"0639":function(e,t,n){"use strict";n("caad"),n("a15b"),n("d3b7"),n("2532"),n("3ca3"),n("ddb0");var i=n("d4ec"),r=n("bee2"),a=n("8e57"),o=n.n(a),s=n("9b0f"),c=n.n(s),u=n("83dc"),l=n.n(u),p=n("6558"),h=function(){function e(){Object(i["a"])(this,e),this._scriptListenerActive=!1,this._scriptListenerReaderActive=!1,this._scriptListenerJsLogsPath=l.a.join(o.a.homedir(),"Desktop","ScriptingListenerJS.log"),this._scriptListenerVbLogsPath=l.a.join(o.a.homedir(),"Desktop","ScriptingListenerVB.log")}return Object(r["a"])(e,[{key:"init",value:function(){return console.log("HostScriptListener initialized."),Promise.resolve()}},{key:"destroy",value:function(){}},{key:"startScriptListenerReader",value:function(){this._scriptListenerReaderActive=!0}},{key:"stopScriptListenerReader",value:function(){}},{key:"clearScriptListenerLogs",value:function(){c.a.writeFile(this._scriptListenerJsLogsPath,"",(function(e){if(e)throw e})),c.a.writeFile(this._scriptListenerVbLogsPath,"",(function(e){if(e)throw e}))}},{key:"onScriptListenerLogs",value:function(){}},{key:"isScriptListenerActive",value:function(){var e=this;try{c.a.statSync(this._scriptListenerJsLogsPath).size}catch(t){}return Promise.all([p["a"].runJsx('\n                app.bringToFront();\n                var document = app.documents.add("1px", "1px", 1, "ScriptListenerCheck");\n                document.close(SaveOptions.SAVECHANGES);\n            '),p["a"].runJsx("noop();")]).then((function(t){if(t[0].includes("error"))return console.error("Could not determine if ScriptListener is active."),!1;try{c.a.statSync(e._scriptListenerJsLogsPath).size}catch(n){return!1}}))}},{key:"isScriptListenerIstalled",value:function(){return p["a"].runActionWithParameters("action.getIsScriptListenerInstalled").then((function(e){return Boolean(e)}))}},{key:"toggleScriptListener",value:function(e){return p["a"].runActionWithParameters("action.setScriptListenerActive",e)}}]),e}();t["a"]=new h},"0c12":function(e,t,n){"use strict";var i=n("2b0e"),r=new i["a"];t["a"]=r},1032:function(e,t,n){},"117e":function(e,t,n){"use strict";var i=n("748a"),r=new i["a"](["STOPPED","IDLE","PAUSED","PROCESSING"]);t["a"]=r},"1a43":function(e,t,n){"use strict";n("99af"),n("a15b");var i=n("5530"),r=n("83dc"),a=n.n(r),o=n("9224");function s(){var e=new CSInterface,t=e.getHostEnvironment(),n=t.appVersion,i=t.appName,r=e.getCurrentApiVersion(),a=r.major,o=r.minor,s=r.micro;return{adobeApp:i,adobeVersion:n,adobeCEPApiVersion:"".concat(a,".").concat(o,".").concat(s)}}var c=a.a.normalize((new CSInterface).getSystemPath(SystemPath.EXTENSION)),u=a.a.join(c,"/dist"),l=a.a.join(u,"logs"),p=a.a.join(u,"actions"),h=a.a.join(u,"tmp");t["a"]=Object(i["a"])({appVersion:o["a"],appInstallPath:c,appWorkingPath:u,appDefaultLogPath:l,appBuiltinActionsPath:p,appTemporaryPath:h},s())},2849:function(e,t){e.exports=require("http")},3864:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("99af"),n("b0c0"),n("7039");var i=n("b85c"),r=n("d4ec"),a=n("bee2"),o=function(){function e(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",h=arguments.length>10&&void 0!==arguments[10]&&arguments[10];Object(r["a"])(this,e),this.name=n,this.sourceType=t,this.sourceDirectory=i,this.sourceExtensions=a,this.useOutputDirectory=o,this.outputDirectory=s,this.useProcessedDirectory=c,this.processedDirectory=u,this.useErrorDirectory=l,this.errorDirectory=p,this.readMetadata=h}return Object(a["a"])(e,[{key:"clone",value:function(){var t=new e;return Object.assign(t,this)}},{key:"toString",value:function(){return'name = "'.concat(this.name,'" type = ').concat(this.sourceType,' directory = "').concat(this.sourceDirectory,'"')}}],[{key:"fromObject",value:function(t){var n,r=new e,a=Object(i["a"])(Object.getOwnPropertyNames(t));try{for(a.s();!(n=a.n()).done;){var o=n.value;r.hasOwnProperty(o)&&(r[o]=t[o])}}catch(s){a.e(s)}finally{a.f()}return r}}]),e}()},"3c93":function(e,t){e.exports=require("crypto")},4111:function(e,t,n){},"41db":function(e,t){e.exports=require("child_process")},"42cd":function(e,t){e.exports=require("assert")},4360:function(e,t,n){"use strict";n("4de4"),n("7db0"),n("4160"),n("caad"),n("b0c0"),n("c760"),n("7ed3"),n("2532"),n("159b");var i=n("53ca"),r=n("b85c"),a=n("592b"),o=n.n(a),s=n("ff4a"),c=n("3864"),u=(n("d81d"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("d4ec")),l=n("bee2"),p=function(){function e(){var t=this;Object(u["a"])(this,e),this.map=new Map,["get","has","delete","keys","values"].forEach((function(e){t[e]=t.map[e].bind(t.map)}))}return Object(l["a"])(e,[{key:"set",value:function(e,t){var n=this.map.get(e);Array.isArray(n)?n.push(t):this.map.set(e,[t])}}]),e}(),h=(n("025e"),"Mario"),f=new o.a({projectName:h,configName:"general",schema:{checkIsScriptListenerActiveOnStart:{type:"boolean",default:!0},pauseAfterEveryPipeline:{type:"boolean",default:!1},pauseAfterEveryAction:{type:"boolean",default:!1},pauseAfterEveryImage:{type:"boolean",default:!1},pauseOnExceptions:{type:"boolean",default:!1},logDirectory:{type:"string",default:""},logFilePersistForDays:{type:"number",default:3},runHttpServer:{type:"boolean",default:!1},serverPort:{type:"number",default:3001},pathToUserActions:{type:"string",default:""},fileSources:{type:"array",default:[]},currentTab:{type:"string",default:"the-jsx-runner"},isMainDrawerOpen:{type:"boolean",default:!1}}}),d={getImageSourceByName:function(e){var t=this.fileSources.find((function(t){return t.name===e}));return t?c["a"].fromObject(t):null}},m=new o.a({projectName:h,configName:"pipelines",schema:{pipelines:{type:"array",default:[]}}}),v={getByNames:function(e,t){return this.pipelines.filter((function(n){return e.includes(n.name)&&(t||!n.disabled)}))},getByName:function(e,t){return this.pipelines.find((function(n){return n.name===e&&(t||!n.disabled)}))},getImageSourceNameToPipelineNameMap:function(e,t){var n=this,i=new p;return e.forEach((function(e){var t=n.getByName(e);if(t){var a,o=Object(r["a"])(t.sourceNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.set(s,t.name)}}catch(c){o.e(c)}finally{o.f()}}})),i}},g=function(e,t,n){var r={set:function(t,r,a){if(Object(i["a"])(t[r])!==Object(i["a"])(a))throw new Error("Attempt to set configuration property "+r+" with different type. This should not happen.");return Reflect.set(t,r,a),e.set(r,a),n.emit("change",r),console.log("Configuration updated. "+r+" -> "+a),!0},defineProperty:function(e,t,n){if(!Reflect.has(e,t))throw new Error("Attempt to define new property "+t+" on configuration object. This should not happen.")},deleteProperty:function(){throw new Error("Attempt to delete property "+property+" from configuration object. This should not happen.")}};return new Proxy(t,r)},b=new s["EventEmitter"];b.general=g(f,Object.assign(f.store,d),b),b.pipelines=g(m,Object.assign(m.store,v),b);t["a"]=b},"437c":function(e,t,n){},"49e1":function(e,t,n){"use strict";var i=n("748a"),r=new i["a"](["OPENFILES","DIRECTORY","FILEWATCHER","BLANK","ACTIVEDOCUMENT","REST"]);t["a"]=r},"524a":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4de4"),n("7db0"),n("d81d"),n("b0c0");var i=n("d4ec"),r=n("bee2"),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(i["a"])(this,e),this.parent=null,this.isDirectory=n,this.name=t||"",this.children=[]}return Object(r["a"])(e,[{key:"isRoot",value:function(){return null===this.parent}},{key:"isLeaf",value:function(){return!this.hasChildren()}},{key:"hasChildren",value:function(){return this.children.length>0}},{key:"addChild",value:function(e){e.parent=this,this.children.push(e)}},{key:"removeChild",value:function(e){this.children=this.children.filter((function(t){return t!==e}))}},{key:"getChildByName",value:function(e){return this.children.find((function(t){return t.name===e}))}},{key:"getNamePath",value:function(){var e=this,t=[e.name];while(e&&(e=e.parent))t.push(e.name);return t.reverse()}},{key:"insert",value:function(t,n){var i=this,r=this.name===t[0]?t.shift():"";while(r=t.shift()){var a=0===t.length,o=!(a&&!n),s=i.getChildByName(r);s||(s=new e(r,o),i.addChild(s)),i=s}}},{key:"traverse",value:function(e){var t=this,n=this.name===e[0]?e.shift():"";while(t&&(n=e.shift()))t=t.getChildByName(n);return t}},{key:"drop",value:function(){this.parent.removeChild(this),this.parent=null}},{key:"arrayify",value:function(e){if(e.hasChildren()){var t=e.children.map((function(t){return e.arrayify(t)}));return[e.name,t]}return e.name}},{key:"clone",value:function(){return new e(this.name,this.isDirectory)}},{key:"cloneTree",value:function(){var e,t,n=this.clone(),i=[n],r=[this];while((t=r.pop())&&(e=i.pop()))for(var a=0;a<t.children.length;++a){var o=t.children[a],s=o.clone();e.addChild(s),i.push(s),r.push(o)}return n}},{key:"parse",value:function(e){}}]),e}()},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var i,r,a=n("1da1"),o=(n("e623"),n("e379"),n("5dc8"),n("37e1"),n("bcb2")),s=n.n(o),c=n("2b0e"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("a-dialog-root"),n("adobe-menus"),n("tabs",{attrs:{"initial-tab":e.currentTabComponent},on:{changed:e.onTabChanged}},[n("tab",{attrs:{title:"the-console"}},[e._v("Console")]),n("tab",{attrs:{title:"the-jsx-runner"}},[e._v("Jsx")]),n("tab",{attrs:{title:"the-configurator"}},[e._v("Configuration")]),n("tab",{attrs:{title:"the-pipelines"}},[e._v("Pipelines")])],1),n("main-controls"),n("section",{staticClass:"tab-content"},[n("keep-alive",[n(e.currentTabComponent,{tag:"component"})],1)],1)],1)},l=[],p=(n("d3b7"),n("83dc")),h=n.n(p),f=n("4360"),d=(n("a9e3"),n("25f0"),function(){var e=new CSInterface;function t(e){var t=e.panelBackgroundColor.color.red,i=t>128;i?(document.body.classList.remove("dark"),document.body.classList.add("light"),document.getElementById("theme").href="css/topcoat-desktop-light.css"):(document.body.classList.remove("light"),document.body.classList.add("dark"),document.getElementById("theme").href="css/topcoat-desktop-dark.css"),document.body.style.background="#"+n(e.panelBackgroundColor.color)}function n(e){function t(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}var n="";return e&&(n=t(e.red)+t(e.green)+t(e.blue)),n}function i(n){var i=e.getHostEnvironment().appSkinInfo;t(i)}function r(){var n=e.getHostEnvironment().appSkinInfo;t(n),e.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT,i)}return{init:r}}()),m=d,v=(n("d81d"),{name:"Tabs",props:{initialTab:{type:String,required:!0}},data:function(){return{activeTab:this.initialTab}},computed:{tabsList:function(){return this.$slots.default}},mounted:function(){this.$on("tab-click",this.onTabClick)},methods:{onTabClick:function(e){this.activeTab=e,this.$emit("changed",this.activeTab)},isActiveTab:function(e){return this.activeTab===e}},render:function(e){return e("ul",{class:"tabs"},this.$slots.default.map((function(t){return e("li",{class:"tab"},[t])})))}}),g=v,b=(n("e4c2"),n("2877")),y=Object(b["a"])(g,i,r,!1,null,"55ac743d",null),_=y.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:{active:e.isActive},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onClick(t)}}},[e._t("default")],2)},P=[],w={name:"Tab",props:{title:{type:String,required:!0}},computed:{isActive:function(){return this.$parent.activeTab==this.title}},methods:{onClick:function(e){this.$parent.$emit("tab-click",this.title)}}},S=w,x=Object(b["a"])(S,k,P,!1,null,null,null),O=x.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.handleSubmit;return[n("form",{staticClass:"main-controls my2",on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},submit:function(t){return t.preventDefault(),i(e.onPipelineRun)}}},[n("div",{staticClass:"main-controls__controls mb2"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.isStopped,expression:"isStopped"}],staticClass:"topcoat-button--large",attrs:{type:"submit",title:"Run all pipelines on the selected source."}},[e._v("▶")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.isPaused,expression:"isPaused"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Resume processing."},on:{click:e.onPipelineResume}},[e._v("Resume")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.canPause,expression:"canPause"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Pause processing."},on:{click:e.onPipelinePause}},[e._v("❚❚")]),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isStopped,expression:"!isStopped"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Stop all pipelines and file sources."},on:{click:e.onPipelineStop}},[e._v("◼")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMainDrawerOpen,expression:"isMainDrawerOpen"}],staticClass:"main-controls__drawer columns"},[n("div",{staticClass:"column is-half-tablet"},[n("h3",{staticClass:"section-title"},[e._v("Pipelines Status")]),n("div",[e._v(e._s(e.pipelineEngineStateText))]),e.pipelinefilePathText?n("h3",{staticClass:"section-title"},[e._v("Current Source Path")]):e._e(),n("div",[e._v(e._s(e.pipelinefilePathText))])]),n("div",{staticClass:"column is-half-tablet"},[n("h3",{directives:[{name:"show",rawName:"v-show",value:e.pipelineText,expression:"pipelineText"}],staticClass:"section-title"},[e._v("Pipeline")]),n("div",[e._v(e._s(e.pipelineText))]),n("h3",{directives:[{name:"show",rawName:"v-show",value:e.pipelineActionText,expression:"pipelineActionText"}],staticClass:"section-title"},[e._v("Action")]),n("div",[e._v(e._s(e.pipelineActionText))])])]),n("div",{staticClass:"main-controls__drawer-toggle",class:{active:e.isMainDrawerOpen}},[n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){e.isMainDrawerOpen=!e.isMainDrawerOpen}}},[e._v("Source & Status "),n("span",[e._v("❱")])])])])]}}])})},E=[],I=n("7bb1"),D=n("025e"),T=n("0c12"),C=n("af82"),A=n("117e"),N=n("844c"),L={name:"MainControls",components:{ValidationObserver:I["a"],ValidationProvider:I["b"],WaitDots:N["a"]},data:function(){return{pipelineEngineState:C["a"].pipelineEngine.state,pipelineText:"",pipelineActionText:"",pipelinefilePathText:"",isMainDrawerOpen:f["a"].general.isMainDrawerOpen}},watch:{isMainDrawerOpen:function(e){f["a"].general.isMainDrawerOpen=e}},computed:{canPause:function(){return this.pipelineEngineState==A["a"].IDLE||this.pipelineEngineState==A["a"].PROCESSING},isStopped:function(){return this.pipelineEngineState==A["a"].STOPPED},isPaused:function(){return this.pipelineEngineState==A["a"].PAUSED},isProcessing:function(){return this.pipelineEngineState==A["a"].PROCESSING},pipelineEngineStateText:function(){return A["a"].toKey(this.pipelineEngineState)}},created:function(){var e=this;T["a"].$on("pipeline-play",(function(e){C["a"].pipelineEngine.run(e)})),C["a"].pipelineEngine.on("state",(function(t){e.pipelineEngineState=t})),C["a"].pipelineEngine.on("status",(function(t){e.pipelineText=t.pipeline,e.pipelineActionText=t.action,e.pipelinefilePathText=t.file}))},methods:{onPipelineRun:function(){this.$dialog.openConfirm({name:"confirm",message:"This will run all pipelines with their configured sources. Continue?",onYes:function(){C["a"].pipelineEngine.runAll()}})},onPipelineResume:function(){C["a"].pipelineEngine.resume()},onPipelinePause:function(){C["a"].pipelineEngine.pause()},onPipelineStop:function(){C["a"].pipelineEngine.stop()}}},F=L,R=Object(b["a"])(F,j,E,!1,null,null,null),J=R.exports,W={name:"app",components:{MainControls:J,Tabs:_,Tab:O,AdobeMenus:function(){return n.e("chunk-ca6540fe").then(n.bind(null,"bd37"))},TheConsole:function(){return n.e("chunk-5ee75350").then(n.bind(null,"090b"))},TheJsxRunner:function(){return n.e("chunk-61cbdd70").then(n.bind(null,"53fd"))},TheConfigurator:function(){return Promise.all([n.e("chunk-970c75f4"),n.e("chunk-14da460c")]).then(n.bind(null,"ce67"))},ThePipelines:function(){return Promise.all([n.e("chunk-970c75f4"),n.e("chunk-b59fd176")]).then(n.bind(null,"d05b"))}},data:function(){return{currentTabComponent:f["a"].general.currentTab}},mounted:function(){m.init(),this.hideLoadingSpinner()},methods:{onTabChanged:function(e){f["a"].general.currentTab=e,this.currentTabComponent=e},hideLoadingSpinner:function(){var e=document.getElementById("loading");e&&(e.style.display="none")}}},M=W,B=(n("6294"),Object(b["a"])(M,u,l,!1,null,null,null)),q=B.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-dialog",{attrs:{isOpen:e.isOpen,width:e.width,height:e.height,maxWidth:e.maxWidth,maxHeight:e.maxHeight},on:{onBackdropClose:e.backdropClose}},[n(e.component,e._g(e._b({tag:"component",on:{onClose:e.close}},"component",e.props,!1),e.listeners))],1)},$=[],U=(n("b0c0"),n("5530")),V=n("15fd"),z=new c["a"]({name:"a-dialog"}),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"modal-backdrop",class:{open:e.isOpen},on:{click:e.onClose}},[n("div",{ref:"modal",staticClass:"modal",style:{height:e.height,width:e.width,maxHeight:e.maxHeight,maxWidth:e.maxWidth},on:{click:function(e){e.stopPropagation()}}},[e._t("default")],2)])])},Y=[],K={name:"ADialog",props:{isOpen:Boolean,width:{type:String,required:!0},height:{type:String,required:!0},maxWidth:{type:String,required:!1},maxHeight:{type:String,required:!1}},watch:{isOpen:function(e){var t=this;e&&this.$nextTick((function(){t.setModalBodyHeight()}))}},methods:{onClose:function(){this.$emit("onBackdropClose")},setModalBodyHeight:function(){var e=this.$el.querySelector(".modal-header"),t=this.$el.querySelector(".modal-body"),n=this.$el.querySelector(".modal-footer"),i=window.getComputedStyle(this.$refs.modal),r=parseInt(i.height,10),a=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10),o=e?e.clientHeight:0,s=n?n.clientHeight:0;t&&(t.style.maxHeight=r-a-(o+s)+"px")}}},Q=K,Z=Object(b["a"])(Q,G,Y,!1,null,null,null),X=Z.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"modal-body"},[e._v(" "+e._s(e.message)+" ")]),n("footer",{staticClass:"modal-footer"},[e._t("footer",[n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClose",!0)}}},[e._v(" Yes ")]),n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClose",!1)}}},[e._v(" Cancel ")])])],2)])},te=[],ne={name:"Confirm",props:{message:{type:String,required:!0}}},ie=ne,re=Object(b["a"])(ie,ee,te,!1,null,null,null),ae=re.exports,oe={height:"auto",width:"80%",maxWidth:"80%",maxHeight:"80%"},se={name:"ADialogRoot",components:{ADialog:X},data:function(){return{component:null,width:"",height:"",maxWidth:"",maxHeight:"",props:null,listeners:null}},computed:{isOpen:function(){return!!this.component}},mounted:function(){z.$on("openconfirm",this.openConfirm),z.$on("open",this.open),z.$on("close",this.close)},methods:{openConfirm:function(e){var t=e.onYes,n=e.onCancel,i=e.message,r=Object(V["a"])(e,["onYes","onCancel","message"]);this.open(Object(U["a"])({component:ae,listeners:{onClose:function(e){e?t&&t():n&&n()}},props:{message:i}},r))},open:function(e){var t=e.width,n=e.height,i=e.maxWidth,r=e.maxHeight,a=e.component,o=e.props,s=void 0===o?null:o,c=e.listeners,u=void 0===c?null:c;this.isOpen?console.warn("Dialog already open. Ignoring open: "+a.name):(console.log("Dialog open."),this.width=t||oe.width,this.height=n||oe.height,this.maxWidth=i||oe.maxWidth,this.maxHeight=r||oe.maxHeight,this.component=a,this.props=s,this.listeners=u)},backdropClose:function(){this.listeners&&this.listeners.onClose&&this.listeners.onClose(),this.close()},close:function(){console.log("Dialog close."),this.component=null,this.props=null,this.listeners=null}}},ce=se,ue=(n("dc4b"),Object(b["a"])(ce,H,$,!1,null,null,null)),le=ue.exports,pe={install:function(e){e.prototype.$dialog={openConfirm:function(e){z.$emit("openconfirm",e)},open:function(e){z.$emit("open",e)}},e.component("ADialogRoot",le)}},he=pe,fe=n("6558"),de=n("0639"),me=n("b766"),ve=n("1a43"),ge=(n("99af"),n("c975"),n("2ca0"),n("498a"),n("9b0f")),be=n.n(ge);Object(I["d"])("custom",(function(e){return{on:["change","blur"]}})),Object(I["c"])("integer",{validate:function(e,t){var n=t.min,i=t.max;e=parseInt(e,10),n=parseInt(n,10),i=parseInt(i,10);var r="Must be an integer";return D["b"].isNumber(n)&&D["b"].isNumber(i)?r+=" between ".concat(n," and ").concat(i):D["b"].isNumber(n)?r+=" greater than or equal to ".concat(n):D["b"].isNumber(i)&&(r+=" less than or equal to ".concat(i)),D["b"].isNumber(e)?D["b"].isNumber(n)&&e<n?r:!(D["b"].isNumber(i)&&e>i)||r:r},params:["min","max"]}),Object(I["c"])("required",{validate:function(e){return{required:!0,valid:-1===["",null,void 0].indexOf(e)}},message:"This is required",computesRequired:!0}),Object(I["c"])("pathexists",{validate:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){be.a.access(e,(function(e){t(!e)}))}));case 2:if(n=t.sent,!n){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",{valid:!1});case 6:case"end":return t.stop()}}),t)})))()},message:"Path does not exist"}),Object(I["c"])("pathunc",{validate:function(e,t){var n="boolean"===typeof t.allowed?t.allowed:JSON.parse(t.allowed.toLowerCase()),i=e.trim(),r=i.startsWith("//")||i.startsWith("\\\\");return!(r&&!n)},params:["allowed"],message:"Path cannot be a UNC path."}),Object(I["c"])("pathrelative",{validate:function(e,t){var n="boolean"===typeof t.allowed?t.allowed:JSON.parse(t.allowed.toLowerCase()),i=e.trim();return!!n||h.a.isAbsolute(i)},params:["allowed"],message:"Path must be absolute."}),Object(I["c"])("custom",{params:["fn"],validate:function(e,t){var n=t.fn(e);return n.valid?n.valid:n.message}}),console.log("Validation imported");s.a.chdir(ve["a"].appWorkingPath),__dirname=ve["a"].appWorkingPath,c["a"].config.productionTip=!1,c["a"].config.devtools=!0,c["a"].use(he);var ye=function(){C["a"].destroy(),fe["a"].destroy(),de["a"].destroy(),me["a"].destroy()},_e=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me["a"].init();case 2:return e.next=4,C["a"].init();case 4:return e.next=6,fe["a"].init();case 6:return e.next=8,de["a"].init();case 8:window.vue=new c["a"]({render:function(e){return e(q)},beforeDestroy:ye}).$mount("#app");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();_e(),window.addEventListener("beforeunload",ye)},6294:function(e,t,n){"use strict";var i=n("437c"),r=n.n(i);r.a},6558:function(e,t,n){"use strict";n("99af"),n("caad"),n("a15b"),n("a9e3"),n("d3b7"),n("ac1f"),n("2532"),n("1276"),n("96cf");var i=n("1da1"),r=n("d4ec"),a=n("bee2"),o=(n("8e57"),n("83dc")),s=n.n(o),c=n("1a43"),u=(n("2f24"),function(){function e(){Object(r["a"])(this,e),this.interface=new CSInterface,this._initialized=!1}return Object(a["a"])(e,[{key:"init",value:function(){if(!this._initialized){this._initialized=!0,this.importScript("utils.jsx"),this.importScript("polyfil.jsx"),this.importScript("json.jsx"),this.importScript("image.jsx"),this.interface.addEventListener("log",(function(e){console.log("Jsx Event: "+e.data)})),this.interface.addEventListener("setTimeout",this.onSetTimeout.bind(this));var e=this.interface.getCurrentApiVersion();return console.log("Host initialized.\n\n            Install Path: ".concat(c["a"].appInstallPath,"\n\n            Working Path: ").concat(c["a"].appWorkingPath,"\n\n            Default Log Path: ").concat(c["a"].appDefaultLogPath,"\n\n            Builtin Action Path: ").concat(c["a"].appBuiltinActionsPath,"\n\n            Temporary Path: ").concat(c["a"].appTemporaryPath,"\n\n            Creative Suite API Version: ").concat(e.major,".").concat(e.minor,".").concat(e.micro,"\n\n            OS: ").concat(this.interface.getOSInformation(),"\n\n            App Version: ").concat(c["a"].appVersion)),Promise.resolve()}}},{key:"destroy",value:function(){}},{key:"dispatchEvent",value:function(e,t){var n="APPLICATION",i=new CSEvent(e,n);i.data=t,this.interface.dispatchEvent(i)}},{key:"onSetTimeout",value:function(e){var t=e.data.split(","),n=Number(t[0]),i=Number(t[1]),r=this;setTimeout((function(){r.runJsx("executeSetTimeoutCallback(".concat(n,")")).then((function(e){e.includes("error")&&console.error(e)}))}),i)}},{key:"importScript",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.a.join(c["a"].appWorkingPath,t),e.next=3,this.runJsx('importJsx("'.concat(n,'");'));case 3:i=e.sent,console.log("Jsx File Imported: "+n+" Result: "+i);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"runJsx",value:function(e){var t=this;return new Promise((function(n){t.interface.evalScript(e,(function(e){n(e)}))}))}},{key:"runJsxWithThrow",value:function(e){var t=this;return new Promise((function(n,i){t.interface.evalScript("(function(){\n                try {\n                    ".concat(e,"\n                } catch(e) {\n                    return e.toString();\n                }\n            }())"),(function(t){var r=t.toLowerCase();r.includes("error")||r.includes("exception")?i("\nJsx:\n".concat(e,"\nException in Result:\n").concat(t,"\n")):n(t)}))}))}},{key:"runActionWithParameters",value:function(e,t){console.log("Action: ".concat(e));var n=JSON.stringify(t);return this.runJsxWithThrow("\n            var result = ".concat(e,"(").concat(n,");\n            return result;\n        "))}},{key:"convertCharToStringId",value:function(e){return this.runJsx("t2s(c2t('".concat(e,"'))")).then((function(e){return e.includes("error")?"":e}))}},{key:"convertStringToCharId",value:function(e){return this.runJsx("t2c(s2t('".concat(e,"'))")).then((function(e){return e.includes("error")?"":e}))}}]),e}());t["a"]=new u},"748a":function(e,t,n){"use strict";n("fb6a"),n("a9e3"),n("8ba4"),n("d3b7"),n("498a"),n("ddb0");function i(e,t){return this instanceof i?r.call(this,e,t):new i(e,t)}function r(e,t){if(!Array.isArray(e))throw new Error("Enum: create() Invalid parameter type. Expected Array.");var n,i=/[A-Z_][A-Z0-9_]*/gi,r=this;r.keys=[],r.keys.length=e.length,Number.isInteger(t)?r.offset=t:t=0;for(var a=0;a<e.length;++a){if("string"!==typeof e[a]||!i.test(e[a]))throw new Error("Enum: create() Not a string or Invalid name: "+e[a]);i.lastIndex=0,n=e[a],r.keys[a]=n,r[n]=a+t}return r}i.prototype.offset=0,i.prototype.toArray=function(){return this.keys.slice(0)},i.prototype.isValid=function(e){return Number.isInteger(e)&&e-this.offset<this.keys.length&&e-this.offset>=0},i.prototype.toKey=function(e){if(this.isValid(e))return this.keys[e-this.offset]},i.prototype.parse=function(e){if("string"===typeof e){e=e.trim().toUpperCase();for(var t=0;t<this.keys.length;++t)if(this.keys[t].toUpperCase()===e)return t+this.offset}},t["a"]=i},"844c":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{domProps:{innerHTML:e._s(e.dots)}})},r=[],a=(n("a9e3"),n("38cf"),0),o={name:"WaitDots",props:{intervalMs:{type:Number,default:500}},data:function(){return{dotCount:1,dots:"."}},mounted:function(){var e=this;a=setInterval((function(){e.dots=".".repeat(e.dotCount),e.dots+="&nbsp;".repeat(4-e.dotCount),e.dotCount=(e.dotCount+1)%4}),this.intervalMs)},beforeDestroy:function(){clearInterval(a)}},s=o,c=n("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=u.exports},"8cad":function(e,t){e.exports=require("util")},"8e57":function(e,t){e.exports=require("os")},9224:function(e){e.exports={a:"2.1.0"}},"9ac2":function(e,t){e.exports=require("stream")},"9b0f":function(e,t){e.exports=require("fs")},a32b:function(e,t){e.exports=require("path")},af82:function(e,t,n){"use strict";var i=n("5530"),r=(n("96cf"),n("1da1")),a=n("d4ec"),o=n("bee2"),s=n("262e"),c=n("2caf"),u=n("ff4a"),l=n.n(u),p=(n("2849"),n("19ce")),h=n.n(p),f=(n("99af"),n("a15b"),n("d81d"),n("fb6a"),n("b0c0"),n("d3b7"),n("7ed3"),n("25f0"),n("3835")),d=n("b85c"),m=n("257e"),v=n("025e"),g=n("4360"),b=n("6558"),y=function e(){Object(a["a"])(this,e),this.initialInputImagePath="",this.inputImagePath="",this.inputDirectory="",this.outputDirectory="",this.useOutputDirectory=!1,this.processedDirectory="",this.useProcessedDirectory=!1,this.errorDirectory="",this.useErrorDirectory=!1,this.data={},this.metadata={},this.pipelines=[],this.pipeline="",this.jobId="",this.errors=[]},_=(n("4de4"),n("83dc")),k=n.n(_),P=n("9b0f"),w=n.n(P),S=(n("caad"),n("ac1f"),n("2532"),n("53ca")),x=n("41db"),O=n.n(x),j=n("e700"),E=n.n(j);function I(e,t,n){E()(t,(function(i){i?n(i):w.a.rename(e,t,(function(e){n(e)}))}))}function D(e,t,n){"object"===Object(S["a"])(t)&&t.recursive?E()(e,{maxBusyTries:t.maxRetries,emfileWait:retryDelay},n):w.a.rmdir.call(w.a,arguments)}function T(e,t,n){"object"===Object(S["a"])(t)&&t.recursive?C(e,t,n):w.a.mkdir.call(w.a,arguments)}function C(e,t,n){O.a.exec("mkdir".concat(t.mode?" --mode="+t.mode:"",' -p "').concat(e,'"'),(function(e,t,i){e?(e.toString().toLowerCase().includes("already exists")&&(e.code="ENOENT"),n(e)):n()}))}var A={rmdir:D,mkdir:T,overwrite:I},N=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"move",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object(d["a"])(t),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=18;break}if(r=i.value,!r.errors.length){e.next=13;break}if(a=r.errorDirectory||r.inputDirectory,a&&this._writeError(r,a,r.errors.join("\n")),!r.useErrorDirectory){e.next=11;break}return e.next=11,this._moveImage(r,r.errorDirectory);case 11:e.next=16;break;case 13:if(!r.useProcessedDirectory){e.next=16;break}return e.next=16,this._moveImage(r,r.processedDirectory);case 16:e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[1,20,23,26]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_moveImage",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(k.a.isAbsolute(n)){e.next=7;break}if(t.inputDirectory){e.next=6;break}return console.log("Image not moved. Move directory was relative but input directory was not defined."),e.abrupt("return",Promise.resolve());case 6:n=k.a.join(t.inputDirectory,n);case 7:this._moveToDirectory(t,n);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_moveToDirectory",value:function(e,t){var n=this._getImagePaths(e);console.log("Moving paths:\n\t".concat(n.join("\n\t"),"\nTo directory\n\t").concat(t));var i,r=Object(d["a"])(n);try{var a=function(){var e=i.value,n=k.a.basename(e),r=k.a.join(t,n);A.overwrite(e,r,(function(e){if(e){var t=e+"\nImage path could not be moved to "+r;"ENOENT"==e.code?console.log(t):console.warn(t)}}))};for(r.s();!(i=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}},{key:"_getImagePaths",value:function(e){var t=[e.inputImagePath,e.initialInputImagePath!==e.inputImagePath?e.initialInputImagePath:null];return t.filter((function(e){return!!e}))}},{key:"_writeError",value:function(e,t,n){if(n){var i=k.a.join(t,"error.logs");w.a.writeFile(i,["\n","Time: ".concat((new Date).toLocaleString()),"initialInputImagePath: ".concat(e.initialInputImagePath),"inputImagePath: ".concat(e.inputImagePath),n].join("\n"),{flag:"a"},(function(e){e&&console.error(e+"\nCould not write Image error to "+i)}))}}}]),e}(),L=(n("1276"),n("0152")),F=n.n(L);n("8a79"),n("2ca0"),n("498a");function R(e){return e=e.trim(),e.startsWith("//")||e.startsWith("\\\\")}function J(e,t){var n=k.a.relative(e,t);return t.endsWith(n)}function W(e){return q(e,k.a.dirname(e))}function M(e){return q(e,k.a.normalize(e))}function B(e){return q.call(null,e,k.a.join.apply(k.a,arguments))}function q(e,t){return R(e)?t.charAt(0)+t:t}var H={isAncestor:J,isUncPath:R,dirname:W,normalize:M,join:B},$=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"read",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,i){var r,a,o,s,c,u,l,p,h,f,d,m,g,b,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.useOutputDirectory,a=n.useProcessedDirectory,o=n.useErrorDirectory,s=n.outputDirectory,c=n.processedDirectory,u=n.errorDirectory,l=n.readMetadata,s=r?s:"",c=a?c:"",u=o?u:"",p=t||"",h=p,f=this._isPathDefinedAndAbsolute(t)?H.dirname(t):"",d=i,m=v["b"].guid(),g={},b={},_=new y,e.prev=14,!this._doesFileExist(h)){e.next=50;break}if(!this._doesPathHaveJsonExtension(h)){e.next=46;break}return e.next=19,this._readJson(h);case 19:return g=e.sent,d=g.pipelines||d,d="string"===typeof d?d.split(","):d,l="boolean"===typeof g.readMetadata?g.readMetadata:l,m=g.jobId||m,h=g.inputImagePath||"",s=g.outputDirectory||s,c=g.processedDirectory||c,u=g.errorDirectory||u,h=this._ensureAbsolutePath(h,f),s=this._ensureAbsolutePath(s,f),c=this._ensureAbsolutePath(c,f),u=this._ensureAbsolutePath(u,f),e.next=34,this._makeDirectory(s);case 34:return r=e.sent,e.next=37,this._makeDirectory(c);case 37:return a=e.sent,e.next=40,this._makeDirectory(u);case 40:if(o=e.sent,s=r?s:"",c=a?c:"",u=o?u:"",!H.isAncestor(h,f)||!a&&!o){e.next=46;break}throw new Error("JSON inputImagePath cannot be ancestor directory of or same as input directory when using errorDirectory or processedDirectory options.");case 46:if(!this._doesFileExist(h)||!0!==l){e.next=50;break}return e.next=49,this._readMetadata(h);case 49:b=e.sent;case 50:e.next=55;break;case 52:e.prev=52,e.t0=e["catch"](14),_.errors.push(e.t0.toString());case 55:return e.prev=55,_.jobId=m,_.initialInputImagePath=p,_.inputImagePath=h,_.inputDirectory=f,_.outputDirectory=s,_.processedDirectory=c,_.errorDirectory=u,_.useOutputDirectory=r,_.useProcessedDirectory=a,_.useErrorDirectory=o,_.data=g,_.metadata=b,_.pipelines=d,e.abrupt("return",_);case 71:case"end":return e.stop()}}),e,this,[[14,52,55,71]])})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"_readJson",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){w.a.readFile(t,{encoding:"utf8"},(function(n,i){if(n)throw new Error("Image json ".concat(t," could not be read."));e(JSON.parse(i))}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_readMetadata",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new F.a.ExiftoolProcess,0,e.abrupt("return",n.open().then((function(e){e})).then((function(){return n.readMetadata(t,["-File:all"])})).then((function(e){var t=e.data[0];return t})).finally((function(){n.close()})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isPathDefinedAndAbsolute",value:function(e){return"string"===typeof e&&e.length>0&&k.a.isAbsolute(e)}},{key:"_ensureAbsolutePath",value:function(e,t){return e?k.a.isAbsolute(e)?e:k.a.join(t,e):""}},{key:"_doesPathHaveJsonExtension",value:function(e){return".json"===k.a.extname(e)}},{key:"_doesFileExist",value:function(e){try{return w.a.lstatSync(e||"").isFile()}catch(t){if(t&&"ENOENT"==t.code)return!1;throw t}}},{key:"_doesDirectoryExist",value:function(e){try{return w.a.lstatSync(e||"").isDirectory()}catch(t){if(t&&"ENOENT"==t.code)return!1;throw t}}},{key:"_makeDirectory",value:function(e){return new Promise((function(t,n){e?A.mkdir(e,{recursive:!0},(function(e){e&&"ENOENT"!==e.code?n("".concat(e,"\nCould not create directory.")):t(!0)})):t(!1)}))}}]),e}(),U=(n("4ec9"),n("3ca3"),n("ddb0"),n("2909")),V=n("b44e"),z=n.n(V),G=n("ab7e"),Y=n.n(G),K=(n("3864"),n("49e1")),Q=0,Z=function(e){Object(s["a"])(n,e);var t=Object(c["a"])(n);function n(e){var i;return Object(a["a"])(this,n),i=t.call(this),i._id=Q++,i._imageSource=e,i._fileWatcher=null,i._isDepleted=!1,i._q=[],i._emitQFiles=v["b"].debounce(i._emitQFiles,5e3,v["a"].Trailing),i}return Object(o["a"])(n,[{key:"produce",value:function(){switch(this._imageSource.sourceType){case K["a"].FILEWATCHER:this._sourceFileWatchers();break;case K["a"].DIRECTORY:this._sourceDirectory();break;case K["a"].OPENFILES:this._sourceOpenFiles();break;case K["a"].BLANK:this._sourceBlank();break;case K["a"].ACTIVEDOCUMENT:this._sourceActiveDocument();break;default:throw new Error("Unknown ImageSourceType: "+this._imageSource.sourceType)}}},{key:"destroy",value:function(){this._fileWatcher&&(this._fileWatcher.removeAllListeners(),this._fileWatcher.close()),this.removeAllListeners()}},{key:"getImageSource",value:function(){return this._imageSource}},{key:"toString",value:function(){return"\tid = ".concat(this._id,"\n\timageSource = (").concat(this._imageSource.toString(),")")}},{key:"_emitFiles",value:function(e){!e.length>0||this.emit("files",this._id,e)}},{key:"_emitQFiles",value:function(){var e=this._q;this._q=[],this._emitFiles(e)}},{key:"_sourceFileWatchers",value:function(){var e=this,t=this._imageSource.sourceDirectory,n=this._imageSource.sourceExtensions,i=n.map((function(e){return k.a.join(t,"*."+e)}));if(Y()(t))throw Error("Watching network paths is problematic. Only local directories supported at this time.");if(!w.a.existsSync(t))throw Error("Watch path: ".concat(t," does not exist."));var r=z.a.watch(i,{ignored:/^\./,depth:0,usePolling:!0,interval:5e3,awaitWriteFinish:{stabilityThreshold:5e3,pollInterval:5e3}}).on("add",(function(t){k.a.basename(t).startsWith("manifest")||(e._q.push(t),e._emitQFiles())}));this._fileWatcher=r}},{key:"_sourceDirectory",value:function(){var e=this,t=this._imageSource.sourceDirectory,n=this._imageSource.sourceExtensions;w.a.readdir(t,{encoding:"utf8"},(function(i,r){if(i)throw e.emit("depleted",e._id),new Error(i);r&&(r=r.map((function(e){return k.a.join(t,e)})),r=r.filter((function(e){if(k.a.basename(e).startsWith("manifest"))return!1;var t=e.split(".").pop();return n.includes(t)})),e._isDepleted=!0,e._emitFiles(r)),e.emit("depleted",e._id)}))}},{key:"_sourceOpenFiles",value:function(){var e=this;b["a"].runActionWithParameters("action.getOpenDocumentPaths").then((function(t){e._isDepleted=!0,e._emitFiles(t.split(",")),e.emit("depleted",e._id)}))}},{key:"_sourceBlank",value:function(){this._isDepleted=!0,this._emitFiles([""]),this.emit("depleted",this._id)}},{key:"_sourceActiveDocument",value:function(){var e=this;b["a"].runActionWithParameters("action.getActiveDocumentPath").then((function(t){e._isDepleted=!0,e._emitFiles(t?[t]:[]),e.emit("depleted",e._id)}))}},{key:"id",get:function(){return this._id}}]),n}(l.a),X=function(e){Object(s["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e._producerIdToListenerNames=new Map,e._producerIdToProducer=new Map,e._jobs=[],e}return Object(o["a"])(n,[{key:"destroy",value:function(){this.stopProducers(),this.removeAllListeners()}},{key:"startProducer",value:function(e,t){var n=new Z(e);console.log("Image File Producer created:\n".concat(n.toString())),this._producerIdToListenerNames.set(n.id,t),this._producerIdToProducer.set(n.id,n),n.on("files",this._onProducerFiles.bind(this)),n.on("depleted",this._onProducerDepleted.bind(this)),n.produce()}},{key:"stopProducers",value:function(){var e=Object(U["a"])(this._producerIdToProducer.keys());this._stopProducers(e),this._jobs=[]}},{key:"hasProducers",value:function(){return this._producerIdToProducer.size>0}},{key:"hasJobs",value:function(){return this._jobs.length>0}},{key:"nextJob",value:function(){return this._jobs.pop()}},{key:"getAllJobs",value:function(){return this._jobs}},{key:"getTotalJobs",value:function(){return this._jobs.length}},{key:"_stopProducers",value:function(e){var t=this;e=e.filter((function(e){return t._producerIdToProducer.has(e)}));var n,i=Object(d["a"])(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this._producerIdToProducer.get(r);console.log("Image File Producer destroyed:\n".concat(a.toString())),this._producerIdToProducer.delete(r),this._producerIdToListenerNames.delete(r),a.destroy()}}catch(o){i.e(o)}finally{i.f()}}},{key:"_onProducerFiles",value:function(e,t){var n=this._producerIdToListenerNames.get(e),i=this._producerIdToProducer.get(e).getImageSource();this._jobs.push({jobId:v["b"].guid(),jobCreationTime:v["b"].yyyymmddhhmmss(),listenerNames:n.slice(0),files:t,imageSource:i.clone()}),this.emit("job"),console.log("Image File Producer ".concat(e,": Job produced."))}},{key:"_onProducerDepleted",value:function(e){this._stopProducers([e])}}]),n}(l.a),ee=n("117e"),te=function(e){Object(s["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;Object(a["a"])(this,n),e=t.call(this);var i=Object(m["a"])(e);return e._processingMutex=!1,e._lastState=ee["a"].STOPPED,e._state=ee["a"].STOPPED,e._status=new Proxy({jobId:"",jobCreationTime:"",files:[],fileCount:0,file:"",imageJobId:"",imageIteration:0,pipeline:"",action:""},{set:function(){return Reflect.set.apply(Reflect,arguments),i.emit("status",i._status),!0}}),e.on("jobstart",(function(t,n,i){e._status.jobId=t,e._status.jobCreationTime=n,e._status.files=i,e._status.fileCount=i.length})),e.on("jobend",(function(){e._status.jobId="",e._status.jobCreationTime="",e._status.files=[],e._status.fileCount=0,e._status.file="",e._status.imageJobId="",e._status.imageIteration=0,e._status.pipeline="",e._status.action=""})),e.on("imagejobstart",(function(t,n,i){e._status.imageJobId=t,e._status.imageIteration=n,e._status.file=i})),e.on("pipelinestart",(function(t){e._status.pipeline=t})),e.on("pipelineend",(function(){e._status.pipeline=""})),e.on("actionstart",(function(t){e._status.action=t})),e.on("actionend",(function(){e._status.action=""})),e._imageFileReader=new $,e._imageFileMover=new N,e._imageFileProducers=new X,e._imageFileProducers.on("job",e._onProducerJob.bind(Object(m["a"])(e))),e}return Object(o["a"])(n,[{key:"init",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){this._imageFileProducers.destroy(),this.state=ee["a"].STOPPED}},{key:"run",value:function(e){this._run([e])}},{key:"runAll",value:function(){var e=g["a"].pipelines.pipelines.map((function(e){return e.name}));this._run(e)}},{key:"_run",value:function(e){if(this.isStopped()){console.log('Running pipelines: "'.concat(e.join(","),'"')),this.state=ee["a"].IDLE;var t,n=g["a"].pipelines.getImageSourceNameToPipelineNameMap(e),i=Object(d["a"])(n.map);try{for(i.s();!(t=i.n()).done;){var r=Object(f["a"])(t.value,2),a=r[0],o=r[1],s=g["a"].general.getImageSourceByName(a);this._imageFileProducers.startProducer(s,o)}}catch(c){i.e(c)}finally{i.f()}}else console.log("Pipeline engine is already running.")}},{key:"pause",value:function(){(this.isProcessing()||this.isIdle())&&(this.state=ee["a"].PAUSED)}},{key:"resume",value:function(){this.isPaused()&&this._lastState===ee["a"].PROCESSING?this.state=ee["a"].PROCESSING:this.state=ee["a"].IDLE}},{key:"stop",value:function(){this._imageFileProducers.stopProducers(),this.state=ee["a"].STOPPED}},{key:"_stopIfNoProducersElseIdle",value:function(){this.isStopped()||(this._imageFileProducers.hasProducers()?this.state=ee["a"].IDLE:this.stop())}},{key:"_onProducerJob",value:function(){this._process()}},{key:"_process",value:function(){var e=this;this._imageFileProducers.hasJobs()&&(this._processingMutex||(this._processingMutex=!0,this._runWaitOneFrame().then(this._runProcessStart.bind(this)).then(this._runProcessLoop.bind(this)).then(this._runProcessEnd.bind(this)).then((function(){e._stopIfNoProducersElseIdle(),e._processingMutex=!1}))))}},{key:"_runWaitOneFrame",value:function(){return new Promise((function(e){setTimeout(e,0)}))}},{key:"_runProcessStart",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._pauseCheck();case 2:return this.state=ee["a"].PROCESSING,console.log("Pipeline process loop started with ".concat(this._imageFileProducers.getTotalJobs()," jobs in queue.")),this.emit("processstart"),e.abrupt("return",b["a"].runJsxWithThrow("app.displayDialogs = DialogModes.NO;"));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_runProcessLoop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i,r,a,o,s,c,u,l,p,h,f,m,v,y,_,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[];case 1:if(this._stopCheck()||!this._imageFileProducers.hasJobs()){e.next=85;break}n=this._imageFileProducers.nextJob(),i=n.jobId,r=n.jobCreationTime,a=n.listenerNames,o=n.files,s=n.imageSource,this.emit("jobstart",i,r,o.slice(0)),c=0;case 5:if(this._stopCheck()||!(c<o.length)){e.next=82;break}return e.next=8,this._pauseCheck();case 8:return u=o[c],console.log("Reading next file ".concat(u," from job ").concat(i,". ").concat(o.length," remaining.")),e.next=12,this._imageFileReader.read(u,s,a);case 12:l=e.sent,p=g["a"].pipelines.getByNames(l.pipelines),this.emit("imagejobstart",l.jobId,c,u),h=Object(d["a"])(p),e.prev=16,h.s();case 18:if((f=h.n()).done){e.next=67;break}return m=f.value,e.prev=20,e.next=23,this._runPipelineStart(l,m);case 23:v=Object(d["a"])(m.actions),e.prev=24,v.s();case 26:if((y=v.n()).done){e.next=39;break}return _=y.value,this.emit("actionstart",_.actionName),e.next=31,b["a"].runActionWithParameters(_.actionName,_.parameters);case 31:if(k=e.sent,!this._stopCheck(k)){e.next=34;break}return e.abrupt("break",39);case 34:return e.next=36,this._pauseCheck(k,g["a"].general.pauseAfterEveryAction);case 36:this.emit("actionend");case 37:e.next=26;break;case 39:e.next=44;break;case 41:e.prev=41,e.t0=e["catch"](24),v.e(e.t0);case 44:return e.prev=44,v.f(),e.finish(44);case 47:e.next=55;break;case 49:return e.prev=49,e.t1=e["catch"](20),console.error(e.t1),l.errors.push(e.t1.toString()),e.next=55,this._pauseCheck(null,g["a"].general.pauseOnExceptions);case 55:if(e.prev=55,!l.errors.length){e.next=58;break}return e.abrupt("break",67);case 58:if(!this._stopCheck()){e.next=60;break}return e.abrupt("break",67);case 60:return e.next=62,this._pauseCheck(null,g["a"].general.pauseAfterEveryPipeline);case 62:return e.next=64,this._runPipelineEnd(l,m);case 64:return e.finish(55);case 65:e.next=18;break;case 67:e.next=72;break;case 69:e.prev=69,e.t2=e["catch"](16),h.e(e.t2);case 72:return e.prev=72,h.f(),e.finish(72);case 75:return t.push(l),e.next=78,this._pauseCheck(null,g["a"].general.pauseAfterEveryImage);case 78:this.emit("imagejobend");case 79:++c,e.next=5;break;case 82:this.emit("jobend"),e.next=1;break;case 85:return e.abrupt("return",t);case 86:case"end":return e.stop()}}),e,this,[[16,69,72,75],[20,49,55,65],[24,41,44,47]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"_runProcessEnd",value:function(e){return console.log("Pipeline process loop exited."),this._stopCheck()||(console.log("Moving ".concat(e.length," processed images...")),this._imageFileMover.move(e)),this.emit("processend"),b["a"].runJsxWithThrow("$.gc();")}},{key:"_runPipelineStart",value:function(e,t){return console.log("Pipeline '".concat(t.name,"' started for image job ").concat(e.jobId,".")),this.emit("pipelinestart",t.name),b["a"].runJsxWithThrow('\n        __PIPELINE = {\n            name: "'.concat(t.name,'",\n            restoreUnits: _.saveUnits()\n        };\n        IMAGE = new ImageForProcessing(').concat(JSON.stringify(e),");"))}},{key:"_runPipelineEnd",value:function(e,t){return console.log("Pipeline '".concat(t.name,"' ended for image job ").concat(e.jobId,".")),this.emit("pipelineend"),b["a"].runJsx("\n        __PIPELINE.restoreUnits && __PIPELINE.restoreUnits(); \n        __PIPELINE=null;\n        IMAGE=null;\n        ")}},{key:"_stopCheck",value:function(e){return!(!this.isStopped()&&"STOP"!==e)&&(this.state=ee["a"].STOPPED,!0)}},{key:"_pauseCheck",value:function(e,t){var n=this;return this.isPaused()||t||"PAUSE"===e?(console.log("Pipeline Engine waiting on pause..."),this.state=ee["a"].PAUSED,new Promise((function(e){n.once("state",(function(t){t!=ee["a"].PAUSED&&e()}))}))):Promise.resolve()}},{key:"isIdle",value:function(){return this.state===ee["a"].IDLE}},{key:"isStopped",value:function(){return this.state===ee["a"].STOPPED}},{key:"isPaused",value:function(){return this.state===ee["a"].PAUSED}},{key:"isProcessing",value:function(){return this.state===ee["a"].PROCESSING}},{key:"fullStatus",get:function(){return{state:ee["a"].toKey(this._state),jobs:this._imageFileProducers.getAllJobs(),status:this._status}}},{key:"status",get:function(){return this._status}},{key:"state",get:function(){return this._state},set:function(e){this._lastState=this._state,this._state=e,this.emit("state",e)}}]),n}(l.a),ne=(n("a4d3"),n("e01a"),n("a630"),n("ade3")),ie=n("1a43"),re=n("524a"),ae=(n("a32b"),n("448a")),oe="action",se=function(){function e(){Object(a["a"])(this,e),this.name="",this.description="",this.path="",this.params=[]}return Object(o["a"])(e,null,[{key:"fromJSDoc",value:function(t){var n=t,i=new e;return i.name=n.longname,i.description=n.description,i.params=n.params?n.params.map((function(e){return ce.fromJSDoc(e)})):[],i.path=n.meta.path,i}}]),e}(),ce=function(){function e(){Object(a["a"])(this,e),this.name="",this.description="",this.typeNames=[],this.isRequired=!1,this.defaultValue=null}return Object(o["a"])(e,null,[{key:"fromJSDoc",value:function(t){var n=t.name,i=t.description,r=t.defaultValue,a=t.optional,o=t.type,s=new e;return s.name=n,s.description=i,s.defaultValue=r||null,s.isRequired=!(!0===a),s.typeNames=o.names.slice(0),s}}]),e}(),ue=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"readAll",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ae.explain({cache:!0,files:t.map((function(e){return e.absolutePath}))}).then((function(e){for(var t=0;t<e.length;++t){var i=e[t];n._isFunction(i)&&n._actionNameToJsDoc.set(i.longname,i)}})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"read",value:function(e){var t=this._actionNameToJsDoc.get(e.name);return t||(console.warn("JSDoc description not found for action ".concat(e.name,". Do you need to re-load actions?")),{})}},{key:"_isFunction",value:function(e){return"static"===e.scope&&"function"===e.kind&&e.memberof.startsWith("action")}},{key:"_isEnum",value:function(e){return"global"===e.scope&&"member"===e.kind&&!0===e.isEnum&&void 0===Object(S["a"])(e.memberof)}}]),e}();Object(ne["a"])(ue,"_actionNameToJsDoc",new Map);var le=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"build",value:function(e,t){return this._buildJsxImportString(e,t)}},{key:"_buildJsxImportString",value:function(e,t){var n,i=[],r=[],a=[{namespace:t,absolutePath:e}];while(n=a.pop()){var o=n.namespace,s="".concat(o,"= (typeof ").concat(o,' !== "undefined") ? ').concat(o," : {};");r.push(s);for(var c=w.a.readdirSync(n.absolutePath),u=0;u<c.length;++u){var l=c[u].split(".");if(l.length>2)throw new Error("Action file and directory names cannot contain periods.");var p=l[0],h="".concat(o,".").concat(p),f=k.a.join(n.absolutePath,c[u]);w.a.statSync(f).isDirectory()?a.push({namespace:h,absolutePath:f}):(r.push('importAction("'.concat(f,'", "').concat(h,'");')),i.push(new pe(h,o,f)))}}return{importString:r.join(""),actions:i}}}]),e}(),pe=function e(t,n,i){Object(a["a"])(this,e),this.name=t,this.namespace=n,this.absolutePath=i},he=function(){function e(){Object(a["a"])(this,e),this._actionNameToAction=new Map,this._actionTree=new re["a"](oe,!0)}return Object(o["a"])(e,[{key:"init",value:function(){return this._importAll()}},{key:"destroy",value:function(){}},{key:"_importAll",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Import actions started."),e.next=3,this._import(g["a"].general.pathToUserActions);case 3:return e.next=5,this._import(ie["a"].appBuiltinActionsPath);case 5:console.log("Import actions exited.");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_import",value:function(e){if(e.trim()){for(var t=le.build(e,oe),n=t.importString,i=t.actions,r=0;r<i.length;++r){var a=i[r].name.split(".");this._actionNameToAction.set(i[r].name,i[r]),this._actionTree.insert(a,!1),console.log("Action: "+i[r].name)}return ue.readAll(i),b["a"].runJsx(n+"act = action;")}}},{key:"getAllActions",value:function(){return this._actionTree.cloneTree()}},{key:"getAllActionNames",value:function(){return Array.from(this._actionNameToAction.keys())}},{key:"getActionDescriptorByName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this._actionNameToAction.get(t),n){e.next=3;break}throw new Error("Action doesnt exist by name ".concat(t));case 3:return e.abrupt("return",new Promise((function(e){var t=ue.read(n),i=se.fromJSDoc(t);e(i)})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),fe=0,de=null,me={UNINITIALIZED:0,RUNNING:1},ve=function(e){Object(s["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e._initialized=!1,e._state=me.UNINITIALIZED,e._httpServer=null,e._pipelineEngine=new te,e._actions=new he,e}return Object(o["a"])(n,[{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=2;break}return e.abrupt("return");case 2:return this._initialized=!0,e.next=5,this._pipelineEngine.init();case 5:return e.next=7,this._actions.init();case 7:g["a"].general.runHttpServer&&this.startServer(),this.state=me.RUNNING,this.emit("initialized"),console.log("Server initialized.");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"startServer",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:fe=g["a"].general.serverPort,de=h()(),de.get("/status",(function(e,n){var r=Object(i["a"])({adobeApp:ie["a"].adobeApp,adobeVersion:ie["a"].adobeVersion,version:ie["a"].appVersion},t._pipelineEngine.fullStatus);n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(r,null,2)+"\n")})),this._httpServer=de.listen(fe,"0.0.0.0",(function(){console.log("Polka is listening to http://localhost:".concat(fe))})),console.log("Server started.");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var e=this;console.log("Server closing..."),this._httpServer&&this._httpServer.close((function(){e._httpServer=null,console.log("Server closed.")})),this._pipelineEngine.destroy(),this._pipelineEngine=null,this._actions.destroy(),this._actions=null}},{key:"pipelineEngine",get:function(){return this._pipelineEngine}},{key:"actions",get:function(){return this._actions}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.emit("state",e)}}]),n}(l.a);t["a"]=window.server=new ve},b766:function(e,t,n){"use strict";n("99af"),n("4de4"),n("4160"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("4e82"),n("d3b7"),n("8a79");var i=n("2909"),r=n("d4ec"),a=n("bee2"),o=n("262e"),s=n("2caf"),c=n("83dc"),u=n.n(c),l=n("9b0f"),p=n.n(l),h=n("ff4a"),f=n("1a43"),d=n("4360"),m=["log","warn","error"],v=function(e){Object(o["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.call(this),e.initialized=!1,e.options={logDirectory:"./",logFileEnabled:!1,logFilePersistForDays:7},e.originalConsoleMethods={},e.logWriteStream=null,e.logBuffer=[],e.maxBufferSize=64,e}return Object(a["a"])(n,[{key:"init",value:function(){if(!this.initialized)return this.initialized=!0,this.emit("initializing"),this.options={logDirectory:d["a"].general.logDirectory||f["a"].appDefaultLogPath,logFileEnabled:!0,logFilePersistForDays:d["a"].logFilePersistForDays||3},this._cleanupFiles(),this._createFileStream(),m.forEach(function(e){var t=this,n=console[e].bind(console);this.originalConsoleMethods[e]=n,console[e]=function(){var i=Array.prototype.slice.call(arguments);n.apply(console,i),t._write(e,i)}}.bind(this)),this.emit("initialized"),console.log("Logger initialized"),Promise.resolve()}},{key:"_write",value:function(e,t){var n=[(new Date).toLocaleTimeString(),"[".concat(e.toUpperCase(),"]\t")].concat(Object(i["a"])(t),["\n"]).join(" "),r=['<div class="'.concat(e,'">').concat((new Date).toLocaleTimeString())].concat(Object(i["a"])(t),["</div>"]).join(" ");this.logWriteStream&&this.logWriteStream.write(n),this.logBuffer.push(r),this.emit("logs")}},{key:"_createFileStream",value:function(){if(this.options.logFileEnabled){var e=(new Date).toISOString().slice(0,10),t=u.a.join(this.options.logDirectory,e+".logs");this.logWriteStream=p.a.createWriteStream(t,{flags:"a",encoding:"utf8"})}}},{key:"_closeFileStream",value:function(){this.logWriteStream&&this.logWriteStream.end(),this.logWriteStream=null}},{key:"_cleanupFiles",value:function(){var e=this;p.a.readdir(this.options.logDirectory,(function(t,n){var i=n.filter((function(e){return e.endsWith(".logs")}));i.sort();for(var r=i.map((function(t){return u.a.join(e.options.logDirectory,t)})),a=Math.max(r.length-e.options.logFilePersistForDays,0),o=0;o<a;++o)p.a.unlink(r[o],(function(e){e&&console.error("Could not delete log file. ",e)}))}))}},{key:"clear",value:function(){this.logBuffer=[]}},{key:"read",value:function(){return this.logBuffer.reduce((function(e,t){return"".concat(e).concat(t)}),"")}},{key:"destroy",value:function(){var e=this;console.log("Logger destroyed."),this.initialized&&(this.initialized=!1,this._closeFileStream(),m.forEach((function(t){console[t]=e.originalConsoleMethods[t]})),g=null)}}]),n}(h["EventEmitter"]),g=new v;t["a"]=g},bcb2:function(e,t){e.exports=require("process")},dc4b:function(e,t,n){"use strict";var i=n("1032"),r=n.n(i);r.a},e4c2:function(e,t,n){"use strict";var i=n("4111"),r=n.n(i);r.a},f319:function(e,t){e.exports=require("querystring")},ff4a:function(e,t){e.exports=require("events")}});
//# sourceMappingURL=app.c33285a0.js.map