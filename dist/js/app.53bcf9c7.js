(function(e){function t(t){for(var i,r,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)r=s[l],a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);f&&f(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},r={app:0},a={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-206da9c6":"d7ac8b4a","chunk-2d222399":"c941791a","chunk-7960c570":"275163c1","chunk-7cca642c":"e3f813a3","chunk-ea5e9e54":"5bfa1933"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-7960c570":1,"chunk-7cca642c":1,"chunk-ea5e9e54":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-206da9c6":"31d6cfe0","chunk-2d222399":"31d6cfe0","chunk-7960c570":"c7ed6f4e","chunk-7cca642c":"40fcd3af","chunk-ea5e9e54":"8e1e1399"}[e]+".css",a=c.p+i,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===a))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){u=p[s],l=u.getAttribute("data-href");if(l===i||l===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete r[e],f.parentNode.removeChild(f),n(o)},f.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(f)}).then(function(){r[e]=0}));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise(function(t,n){i=a[e]=[t,n]});t.push(i[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e),u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+r+")");o.type=i,o.request=r,n[1](o)}a[e]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var f=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"002f":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",[n("div",{staticClass:"label"},[e._t("default")],2),n("div",{staticClass:"flex"},[n("a-folder-dialog-button",{attrs:{folder:e.path},on:{"update:folder":function(t){e.path=t}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.path,expression:"path"}],staticClass:"topcoat-text-input flex-grow ml1",attrs:{type:"text",placeholder:e.placeholder,title:e.title},domProps:{value:e.path},on:{change:e.onPathChange,input:function(t){t.target.composing||(e.path=t.target.value)}}}),e.errors.length?n("span",{staticClass:"topcoat-notification error"},[e._v(e._s(e.errors[0]))]):e._e()],1)])},r=[],a=n("5dad"),o={name:"AFolderInput",components:{AFolderDialogButton:a["a"]},model:{prop:"value",event:"change"},props:{title:{type:String,default:"Enter a folder path or select a folder"},placeholder:{type:String,default:"/my/folder"},errors:{type:Array,default:[]},value:{type:String,required:!0}},data:function(){return{path:this.value}},methods:{onPathChange:function(e){this.$emit("change",this.path)}}},s=o,c=n("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=u.exports},"025e":function(e,t,n){"use strict";var i=n("7618"),r=(n("5df3"),n("4f7f"),n("75fc"));n("ac6a"),n("456d"),n("6b54");function a(e){return JSON.parse(JSON.stringify(e))}function o(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}function s(e){return Array.isArray(e)?e[0]:e[Object.keys(e)[0]]}function c(e){return Object(r["a"])(new Set(e))}function u(e,t,n){return void 0===e[t]&&(e[t]=n),e[t]}function l(e){return"boolean"===typeof e}function p(e){return"number"===typeof e&&e===e}function f(e){return null!==e&&"object"===Object(i["a"])(e)}function h(e){return 0===Object.keys(e||{}).length}function d(e){return"string"===typeof e}function m(e){return""===e}function v(e){return Array.isArray(e)}function g(e){return"undefined"===typeof e}function y(e){return null===e}t["a"]={simpleDeepClone:a,guid:o,first:s,unique:c,getOrDefine:u,isBoolean:l,isNumber:p,isObject:f,isEmptyObject:h,isString:d,isEmptyString:m,isArray:v,isUndefined:g,isNull:y}},"0639":function(e,t,n){"use strict";n("6762"),n("2fdb"),n("ac6a"),n("5df3");var i=n("d225"),r=n("b0b4"),a=n("8e57"),o=n.n(a),s=n("9b0f"),c=n.n(s),u=n("83dc"),l=n.n(u),p=n("6558"),f=function(){function e(){Object(i["a"])(this,e),this._scriptListenerActive=!1,this._scriptListenerReaderActive=!1,this._scriptListenerJsLogsPath=l.a.join(o.a.homedir(),"Desktop","ScriptingListenerJS.log"),this._scriptListenerVbLogsPath=l.a.join(o.a.homedir(),"Desktop","ScriptingListenerVB.log")}return Object(r["a"])(e,[{key:"init",value:function(){return console.log("HostScriptListener initialized."),Promise.resolve()}},{key:"destroy",value:function(){}},{key:"startScriptListenerReader",value:function(){this._scriptListenerReaderActive=!0}},{key:"stopScriptListenerReader",value:function(){}},{key:"clearScriptListenerLogs",value:function(){c.a.writeFile(this._scriptListenerJsLogsPath,"",function(e){if(e)throw e}),c.a.writeFile(this._scriptListenerVbLogsPath,"",function(e){if(e)throw e})}},{key:"onScriptListenerLogs",value:function(){}},{key:"isScriptListenerActive",value:function(){var e=this;try{c.a.statSync(this._scriptListenerJsLogsPath).size}catch(t){}return Promise.all([p["a"].runJsx('\n                app.bringToFront();\n                var document = app.documents.add("1px", "1px", 1, "ScriptListenerCheck");\n                document.close(SaveOptions.SAVECHANGES);\n            '),p["a"].runJsx("noop();")]).then(function(t){if(t[0].includes("error"))return console.error("Could not determine if ScriptListener is active."),!1;try{c.a.statSync(e._scriptListenerJsLogsPath).size}catch(n){return!1}})}},{key:"isScriptListenerIstalled",value:function(){return p["a"].runActionWithParameters("action.getIsScriptListenerInstalled").then(function(e){return Boolean(e)})}},{key:"toggleScriptListener",value:function(e){return p["a"].runActionWithParameters("action.setScriptListenerActive",e)}}]),e}();t["a"]=new f},"0c12":function(e,t,n){"use strict";var i=n("2b0e"),r=new i["a"];t["a"]=r},"117e":function(e,t,n){"use strict";var i=n("748a"),r=new i["a"](["STOPPED","IDLE","PAUSED","PROCESSING"]);t["a"]=r},"11b3":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",[n("div",{staticClass:"label"},[e._t("default")],2),n("div",{staticClass:"flex"},[n("a-array-input",{staticClass:"topcoat-text-input flex-grow",attrs:{placeholder:"jpg, jpeg, png, psd, tif, etc.",title:e.title,value:e.extensions},on:{change:e.onExtensions}}),e.errors.length?n("span",{staticClass:"topcoat-notification error"},[e._v(e._s(e.errors[0]))]):e._e()],1)])},r=[],a=(n("6762"),n("2fdb"),n("a481"),n("9b0a")),o={name:"AExtensionsInput",components:{AArrayInput:a["a"]},model:{prop:"value",event:"change"},props:{title:{type:String,default:"Enter a folder path or select a folder"},errors:{type:Array,default:[]},value:{type:Array,required:!0}},data:function(){return{extensions:this.value}},methods:{validateExtensions:function(e){return e=e.map(function(e){return e.replace(/[^a-z0-9]/g,"")}),e=e.filter(function(e){return e&&e.length>0}),e.includes("json")?["json"]:e},onExtensions:function(e){this.extensions=this.validateExtensions(e),this.$emit("change",this.extensions)}}},s=o,c=n("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=u.exports},"14c2":function(e,t){e.exports=require("zlib")},"1a43":function(e,t,n){"use strict";var i=n("83dc"),r=n.n(i),a=r.a.normalize((new CSInterface).getSystemPath(SystemPath.EXTENSION)),o=r.a.join(a,"/dist"),s=r.a.join(o,"logs"),c=r.a.join(o,"actions");t["a"]={appInstallPath:a,appWorkingPath:o,appDefaultLogPath:s,appBuiltinActionsPath:c}},2849:function(e,t){e.exports=require("http")},3646:function(e,t){e.exports=require("buffer")},"3c93":function(e,t){e.exports=require("crypto")},"41db":function(e,t){e.exports=require("child_process")},"42cd":function(e,t){e.exports=require("net")},"42cdc":function(e,t){e.exports=require("assert")},4360:function(e,t,n){"use strict";n("f6b3"),n("9253");var i=n("7618"),r=n("592b"),a=n.n(r),o=n("ff4a"),s="Mario",c=new a.a({projectName:s,configName:"general",schema:{checkIsScriptListenerActiveOnStart:{type:"boolean",default:!0},pauseAfterEveryPipeline:{type:"boolean",default:!1},pauseAfterEveryAction:{type:"boolean",default:!1},pauseAfterEveryImage:{type:"boolean",default:!1},pauseOnExceptions:{type:"boolean",default:!1},doReadFileMetadata:{type:"boolean",default:!1},logDirectory:{type:"string",default:""},pathToUserActions:{type:"string",default:""},fileWatchers:{type:"array",default:[]},currentTab:{type:"string",default:"the-jsx-runner"},isMainDrawerOpen:{type:"boolean",default:!1},imageSource:{type:"object",default:{type:"ACTIVEDOCUMENT",directory:"",extensions:[]}}}}),u=new a.a({projectName:s,configName:"pipelines",schema:{pipelines:{type:"array",default:[]}}}),l=function(e,t,n){var r={set:function(t,r,a){if(Object(i["a"])(t[r])!==Object(i["a"])(a))throw new Error("Attempt to set configuration property "+r+" with different type. This should not happen.");return Reflect.set(t,r,a),e.set(r,a),n.emit("change",r),console.log("Configuration updated. "+r+" -> "+a),!0},defineProperty:function(e,t,n){if(!Reflect.has(e,t))throw new Error("Attempt to define new property "+t+" on configuration object. This should not happen.")},deleteProperty:function(){throw new Error("Attempt to delete property "+property+" from configuration object. This should not happen.")}};return new Proxy(t,r)},p=new o["EventEmitter"];p.general=l(c,c.store,p),p.pipelines=l(u,u.store,p),t["a"]=p},"49e1":function(e,t,n){"use strict";var i=n("748a"),r=new i["a"](["OPENFILES","DIRECTORY","FILEWATCHER","BLANK","ACTIVEDOCUMENT"]);t["a"]=r},"50d5":function(e,t){e.exports=require("tty")},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var i,r,a=n("3b8d"),o=(n("cadf"),n("551c"),n("f751"),n("097d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("a-dialog-root"),n("adobe-menus"),n("tabs",{attrs:{"initial-tab":e.currentTabComponent},on:{changed:e.onTabChanged}},[n("tab",{attrs:{title:"the-console"}},[e._v("Console")]),n("tab",{attrs:{title:"the-jsx-runner"}},[e._v("Jsx")]),n("tab",{attrs:{title:"the-configurator"}},[e._v("Configuration")]),n("tab",{attrs:{title:"the-pipelines"}},[e._v("Pipelines")])],1),n("main-controls"),n("section",{staticClass:"tab-content"},[n("keep-alive",[n(e.currentTabComponent,{tag:"component"})],1)],1)],1)},c=[],u=(n("83dc"),n("4360")),l=(n("c5f6"),n("6b54"),function(){var e=new CSInterface;function t(e){var t=e.panelBackgroundColor.color.red,i=t>128;i?(document.body.classList.remove("dark"),document.body.classList.add("light"),document.getElementById("theme").href="css/topcoat-desktop-light.css"):(document.body.classList.remove("light"),document.body.classList.add("dark"),document.getElementById("theme").href="css/topcoat-desktop-dark.css"),document.body.style.background="#"+n(e.panelBackgroundColor.color)}function n(e){function t(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}var n="";return e&&(n=t(e.red)+t(e.green)+t(e.blue)),n}function i(n){var i=e.getHostEnvironment().appSkinInfo;t(i)}function r(){var n=e.getHostEnvironment().appSkinInfo;t(n),e.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT,i)}return{init:r}}()),p=l,f={name:"Tabs",props:{initialTab:{type:String,required:!0}},data:function(){return{activeTab:this.initialTab}},computed:{tabsList:function(){return this.$slots.default}},mounted:function(){this.$on("tab-click",this.onTabClick)},methods:{onTabClick:function(e){this.activeTab=e,this.$emit("changed",this.activeTab)},isActiveTab:function(e){return this.activeTab===e}},render:function(e){return e("ul",{class:"tabs"},this.$slots.default.map(function(t){return e("li",{class:"tab"},[t])}))}},h=f,d=(n("e4c2"),n("2877")),m=Object(d["a"])(h,i,r,!1,null,"55ac743d",null),v=m.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:{active:e.isActive},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onClick(t)}}},[e._t("default")],2)},y=[],b={name:"Tab",props:{title:{type:String,required:!0}},computed:{isActive:function(){return this.$parent.activeTab==this.title}},methods:{onClick:function(e){this.$parent.$emit("tab-click",this.title)}}},_=b,k=Object(d["a"])(_,g,y,!1,null,null,null),w=k.exports,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.handleSubmit;return[n("form",{staticClass:"main-controls my2",on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},submit:function(t){return t.preventDefault(),i(e.onPipelineRun)}}},[n("div",{staticClass:"main-controls__controls mb2"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.isStopped,expression:"isStopped"}],staticClass:"topcoat-button--large",attrs:{type:"submit",title:"Run all pipelines with the defined source."}},[e._v("▶")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.isPaused,expression:"isPaused"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Resume processing."},on:{click:e.onPipelineResume}},[e._v("Resume")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.canPause,expression:"canPause"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Pause processing."},on:{click:e.onPipelinePause}},[e._v("❚❚")]),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isStopped,expression:"!isStopped"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Stop all pipelines and file watchers."},on:{click:e.onPipelineStop}},[e._v("◼")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMainDrawerOpen,expression:"isMainDrawerOpen"}],staticClass:"main-controls__drawer columns"},[n("div",{staticClass:"column is-half-tablet"},[n("h3",{staticClass:"section-title"},[e._v("File Source")]),n("validation-provider",{staticClass:"flex",attrs:{tag:"label",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[n("select",{directives:[{name:"model",rawName:"v-model",value:e.imageSource.type,expression:"imageSource.type"}],staticClass:"topcoat-text-input flex-grow",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.imageSource,"type",t.target.multiple?n:n[0])}}},e._l(e.imageSourceTypeOptions,function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v("\n                            "+e._s(t.text)+" \n                        ")])}),0),i.length?n("span",{staticClass:"topcoat-notification error"},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)}),e.isSourceADirectory?n("validation-provider",{attrs:{slim:"",rules:{required:e.isSourceADirectory,pathunc:{allowed:!1},pathexists:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[n("a-folder-input",{attrs:{title:"The source folder containing files for processing.",errors:i},model:{value:e.imageSource.directory,callback:function(t){e.$set(e.imageSource,"directory",t)},expression:"imageSource.directory"}},[e._v("\n                        Source files from this folder\n                    ")])]}}],null,!0)}):e._e(),e.isSourceADirectory?n("validation-provider",{attrs:{slim:"",rules:{required:e.isSourceADirectory}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.errors;return[n("a-extensions-input",{attrs:{title:"Either multiple image extensions, or json (exclusive). A comma delimited list.",errors:i},model:{value:e.imageSource.extensions,callback:function(t){e.$set(e.imageSource,"extensions",t)},expression:"imageSource.extensions"}},[e._v("\n                        Only these Extensions\n                    ")])]}}],null,!0)}):e._e()],1),n("div",{staticClass:"column is-half-tablet"},[n("h3",{staticClass:"section-title"},[e._v("Pipelines State")]),n("div",[e._v(e._s(e.pipelineEngineStateText))]),n("h3",{directives:[{name:"show",rawName:"v-show",value:e.pipelineActionStateText,expression:"pipelineActionStateText"}],staticClass:"section-title"},[e._v("Action")]),n("div",[e._v(e._s(e.pipelineActionStateText))])])]),n("div",{staticClass:"main-controls__drawer-toggle",class:{active:e.isMainDrawerOpen}},[n("button",{staticClass:"topcoat-button",attrs:{type:"button"},on:{click:function(t){e.isMainDrawerOpen=!e.isMainDrawerOpen}}},[e._v("Status & Source "),n("span",[e._v("❱")])])])])]}}])})},P=[],x=n("7bb1"),E=n("025e"),O=n("0c12"),C=n("af82"),A=n("117e"),D=n("49e1"),I=n("002f"),j=n("11b3"),T=n("e70e"),F=n("844c"),N={name:"MainControls",components:{ValidationObserver:x["a"],ValidationProvider:x["b"],AFolderInput:I["a"],AExtensionsInput:j["a"],ACheckbox:T["a"],WaitDots:F["a"]},data:function(){return{pipelineEngineState:C["a"].pipelineEngine.state,pipelineActionStateText:"",isMainDrawerOpen:u["a"].general.isMainDrawerOpen,imageSource:E["a"].simpleDeepClone(u["a"].general.imageSource),imageSourceTypeOptions:[{text:"Active Document",value:D["a"].ACTIVEDOCUMENT},{text:"Open Files",value:D["a"].OPENFILES},{text:"Directory",value:D["a"].DIRECTORY},{text:"File Watchers",value:D["a"].FILEWATCHER},{text:"None",value:D["a"].BLANK}]}},watch:{isMainDrawerOpen:function(e){u["a"].general.isMainDrawerOpen=e},imageSource:{deep:!0,handler:function(e){u["a"].general.imageSource=e}}},computed:{canPause:function(){return this.pipelineEngineState==A["a"].IDLE||this.pipelineEngineState==A["a"].PROCESSING},isStopped:function(){return this.pipelineEngineState==A["a"].STOPPED},isPaused:function(){return this.pipelineEngineState==A["a"].PAUSED},isProcessing:function(){return this.pipelineEngineState==A["a"].PROCESSING},isSourceADirectory:function(){return this.imageSource.type==D["a"].DIRECTORY},pipelineEngineStateText:function(){return A["a"].toKey(this.pipelineEngineState)}},created:function(){var e=this;O["a"].$on("pipeline-play",function(t){C["a"].pipelineEngine.run(t,e.imageSource.type,e.imageSource.directory,e.imageSource.extensions)}),C["a"].pipelineEngine.on("state",function(t){e.pipelineEngineState=t}),C["a"].pipelineEngine.on("action",function(t){e.pipelineActionStateText=t}),C["a"].pipelineEngine.on("actionend",function(t){e.pipelineActionStateText=""})},methods:{onPipelineRun:function(){var e=this;this.$dialog.openConfirm({name:"confirm",message:"This will run all pipelines with the given source. Continue?",onYes:function(){C["a"].pipelineEngine.runAll(e.imageSource.type,e.imageSource.directory,e.imageSource.extensions)}})},onPipelineResume:function(){C["a"].pipelineEngine.resume()},onPipelinePause:function(){C["a"].pipelineEngine.pause()},onPipelineStop:function(){C["a"].pipelineEngine.stop()}}},L=N,W=Object(d["a"])(L,S,P,!1,null,null,null),R=W.exports,M={name:"app",components:{MainControls:R,Tabs:v,Tab:w,AdobeMenus:function(){return n.e("chunk-7960c570").then(n.bind(null,"bd37"))},TheConsole:function(){return n.e("chunk-7cca642c").then(n.bind(null,"090b"))},TheJsxRunner:function(){return n.e("chunk-ea5e9e54").then(n.bind(null,"53fd"))},TheConfigurator:function(){return n.e("chunk-2d222399").then(n.bind(null,"ce67"))},ThePipelines:function(){return n.e("chunk-206da9c6").then(n.bind(null,"d05b"))}},data:function(){return{currentTabComponent:u["a"].general.currentTab}},mounted:function(){p.init(),this.hideLoadingSpinner()},methods:{onTabChanged:function(e){u["a"].general.currentTab=e,this.currentTabComponent=e},hideLoadingSpinner:function(){var e=document.getElementById("loading");e&&(e.style.display="none")}}},B=M,J=(n("6294"),Object(d["a"])(B,s,c,!1,null,null,null)),q=J.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-dialog",{attrs:{isOpen:e.isOpen,width:e.width,height:e.height}},[n(e.component,e._g(e._b({tag:"component",on:{onClose:e.close}},"component",e.props,!1),e.listeners))],1)},U=[],z=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("bd86")),V=n("a8db"),H=new o["a"]({name:"a-dialog"}),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"modal-backdrop",class:{open:e.isOpen}},[n("div",{staticClass:"modal",style:{height:e.height,width:e.width},on:{click:function(e){e.stopPropagation()}}},[e._t("default")],2)])])},Y=[],K={name:"ADialog",props:{isOpen:Boolean,width:{type:String,required:!0},height:{type:String,required:!0}}},Q=K,Z=Object(d["a"])(Q,G,Y,!1,null,null,null),X=Z.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"modal-body"},[e._v("\n        "+e._s(e.message)+"\n    ")]),n("footer",{staticClass:"modal-footer"},[e._t("footer",[n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClose",!0)}}},[e._v("\n                Yes\n            ")]),n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClose",!1)}}},[e._v("\n                Cancel\n            ")])])],2)])},te=[],ne={name:"Confirm",props:{message:{type:String,required:!0}}},ie=ne,re=Object(d["a"])(ie,ee,te,!1,null,null,null),ae=re.exports;function oe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function se(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{};oe(n,!0).forEach(function(t){Object(z["a"])(e,t,n[t])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t])):oe(n).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(arguments[t],n))});return e}var ce={height:"auto",width:"80%"},ue={name:"ADialogRoot",components:{ADialog:X},data:function(){return{component:null,width:"",height:"",props:null,listeners:null}},computed:{isOpen:function(){return!!this.component}},mounted:function(){H.$on("openconfirm",this.openConfirm),H.$on("open",this.open),H.$on("close",this.close)},methods:{openConfirm:function(e){var t=e.onYes,n=e.onCancel,i=e.message,r=Object(V["a"])(e,["onYes","onCancel","message"]);this.open(se({component:ae,listeners:{onClose:function(e){e?t&&t():n&&n()}},props:{message:i}},r))},open:function(e){var t=e.width,n=e.height,i=e.component,r=e.props,a=void 0===r?null:r,o=e.listeners,s=void 0===o?null:o;this.isOpen?console.warn("Dialog already open. Ignoring open: "+i.name):(console.log("Dialog open."),this.width=t||ce.width,this.height=n||ce.height,this.component=i,this.props=a,this.listeners=s)},close:function(){console.log("Dialog close."),this.component=null,this.props=null,this.listeners=null}}},le=ue,pe=(n("dc4b"),Object(d["a"])(le,$,U,!1,null,null,null)),fe=pe.exports,he={install:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.prototype.$dialog={openConfirm:function(e){H.$emit("openconfirm",e)},open:function(e){H.$emit("open",e)}},e.component("ADialogRoot",fe)}},de=he,me=n("6558"),ve=n("0639"),ge=n("b766"),ye=(n("f559"),n("9b0f")),be=n.n(ye);n("b97d");Object(x["d"])("custom",function(e){return{on:["change","blur"]}}),Object(x["c"])("required",{validate:function(e){return{required:!0,valid:-1===["",null,void 0].indexOf(e)}},message:"This is required",computesRequired:!0}),Object(x["c"])("pathexists",{validate:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){be.a.access(t,function(t){e(!t)})});case 2:if(n=e.sent,!n){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",{valid:!1});case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),message:"Path does not exist"}),Object(x["c"])("pathunc",{validate:function(e,t){var n="boolean"===typeof t.allowed?t.allowed:JSON.parse(t.allowed.toLowerCase()),i=e.trim(),r=i.startsWith("//")||i.startsWith("\\\\");return!(r&&!n)},params:["allowed"],message:"Path cannot be a UNC path."}),Object(x["c"])("custom",{params:["fn"],validate:function(e,t){var n=t.fn(e);return n.valid?n.valid:n.message}}),console.log("Validation imported");o["a"].config.productionTip=!1,o["a"].config.devtools=!0,o["a"].use(de);var _e=function(){C["a"].destroy(),me["a"].destroy(),ve["a"].destroy(),ge["a"].destroy()},ke=function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ge["a"].init();case 2:return e.next=4,C["a"].init();case 4:return e.next=6,me["a"].init();case 6:return e.next=8,ve["a"].init();case 8:window.vue=new o["a"]({render:function(e){return e(q)},beforeDestroy:_e}).$mount("#app");case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();ke(),window.addEventListener("beforeunload",_e)},"5dad":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"topcoat-button",on:{click:e.onClick}},[e._v("🖿")])},r=[],a=(n("6762"),n("2fdb"),n("6558")),o={name:"AFolderDialogButton",props:{folder:{type:String,required:!0}},methods:{onClick:function(e){var t=this;a["a"].runActionWithParameters("action.selectFolder",this.value).then(function(e){e.toLowerCase().includes("error")&&console.error(e),t.$emit("update:folder",e)})}}},s=o,c=(n("8ec9"),n("2877")),u=Object(c["a"])(s,i,r,!1,null,"900aa16c",null);t["a"]=u.exports},6294:function(e,t,n){"use strict";var i=n("9759"),r=n.n(i);r.a},6558:function(e,t,n){"use strict";n("96cf");var i=n("3b8d"),r=(n("6762"),n("2fdb"),n("c5f6"),n("28a5"),n("d225")),a=n("b0b4"),o=(n("8e57"),n("83dc")),s=n.n(o),c=n("1a43"),u=(n("2f24"),function(){function e(){Object(r["a"])(this,e),this.interface=new CSInterface,this._initialized=!1}return Object(a["a"])(e,[{key:"init",value:function(){if(!this._initialized){this._initialized=!0,this.importScript("utils.jsx"),this.importScript("polyfil.jsx"),this.importScript("image.jsx"),this.interface.addEventListener("log",function(e){console.log("Jsx Event: "+e.data)}),this.interface.addEventListener("setTimeout",this.onSetTimeout.bind(this));var e=this.interface.getCurrentApiVersion();return console.log("Host initialized.\n\n            Install Path: ".concat(c["a"].appInstallPath,"\n\n            Working Path: ").concat(c["a"].appWorkingPath,"\n\n            Default Log Path: ").concat(c["a"].appDefaultLogPath,"\n\n            Builtin Action Path: ").concat(c["a"].appBuiltinActionsPath,"\n\n            Creative Suite API Version: ").concat(e.major,".").concat(e.minor,".").concat(e.micro,"\n\n            OS: ").concat(this.interface.getOSInformation())),Promise.resolve()}}},{key:"destroy",value:function(){}},{key:"dispatchEvent",value:function(e,t){var n="APPLICATION",i=new CSEvent(e,n);i.data=t,this.interface.dispatchEvent(i)}},{key:"onSetTimeout",value:function(e){var t=e.data.split(","),n=Number(t[0]),i=Number(t[1]),r=this;setTimeout(function(){r.runJsx("executeSetTimeoutCallback(".concat(n,")")).then(function(e){e.includes("error")&&console.error(e)})},i)}},{key:"importScript",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=s.a.join(c["a"].appWorkingPath,t),e.next=3,this.runJsx('importJsx("'.concat(n,'");'));case 3:i=e.sent,console.log("Jsx File Imported: "+n+" Result: "+i);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"runJsx",value:function(e){var t=this;return new Promise(function(n){t.interface.evalScript(e,function(e){n(e)})})}},{key:"runJsxWithThrow",value:function(e){var t=this;return new Promise(function(n,i){t.interface.evalScript("(function(){\n                try {\n                    ".concat(e,"\n                } catch(e) {\n                    return e.toString();\n                }\n            }())"),function(t){var r=t.toLowerCase();r.includes("error")||r.includes("exception")?i("\nJsx:\n".concat(e,"\nException in Result:\n").concat(t,"\n")):n(t)})})}},{key:"runActionWithParameters",value:function(e,t){var n=JSON.stringify(t);return this.runJsxWithThrow("\n            var result = ".concat(e,"(").concat(n,");\n            return result;\n        "))}},{key:"convertCharToStringId",value:function(e){return this.runJsx("t2s(c2t('".concat(e,"'))")).then(function(e){return e.includes("error")?"":e})}},{key:"convertStringToCharId",value:function(e){return this.runJsx("t2c(s2t('".concat(e,"'))")).then(function(e){return e.includes("error")?"":e})}}]),e}());t["a"]=new u},"6f3a":function(e,t){e.exports=require("url")},"748a":function(e,t,n){"use strict";n("c5f6"),n("7cdf"),n("ac6a");function i(e,t){return this instanceof i?r.call(this,e,t):new i(e,t)}function r(e,t){if(!Array.isArray(e))throw new Error("Enum: create() Invalid parameter type. Expected Array.");var n,i=/[A-Z_][A-Z0-9_]*/gi,r=this;r.keys=[],r.keys.length=e.length,Number.isInteger(t)?r.offset=t:t=0;for(var a=0;a<e.length;++a){if("string"!==typeof e[a]||!i.test(e[a]))throw new Error("Enum: create() Not a string or Invalid name: "+e[a]);i.lastIndex=0,n=e[a],r.keys[a]=n,r[n]=a+t}return r}i.prototype.offset=0,i.prototype.toArray=function(){return this.keys.slice(0)},i.prototype.isValid=function(e){return Number.isInteger(e)&&e-this.offset<this.keys.length&&e-this.offset>=0},i.prototype.toKey=function(e){if(this.isValid(e))return this.keys[e-this.offset]},i.prototype.parse=function(e){if("string"===typeof e){e=e.trim().toUpperCase();for(var t=0;t<this.keys.length;++t)if(this.keys[t].toUpperCase()===e)return t+this.offset}},t["a"]=i},"7fbc":function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="7fbc"},"844c":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{domProps:{innerHTML:e._s(e.dots)}})},r=[],a=(n("14b9"),n("c5f6"),0),o={name:"WaitDots",props:{intervalMs:{type:Number,default:500}},data:function(){return{dotCount:1,dots:"."}},mounted:function(){var e=this;a=setInterval(function(){e.dots=".".repeat(e.dotCount),e.dots+="&nbsp;".repeat(4-e.dotCount),e.dotCount=(e.dotCount+1)%4},this.intervalMs)},beforeDestroy:function(){clearInterval(a)}},s=o,c=n("2877"),u=Object(c["a"])(s,i,r,!1,null,null,null);t["a"]=u.exports},"8cad":function(e,t){e.exports=require("util")},"8e57":function(e,t){e.exports=require("os")},"8ec9":function(e,t,n){"use strict";var i=n("de71"),r=n.n(i);r.a},9759:function(e,t,n){},"9ac2":function(e,t){e.exports=require("stream")},"9b0a":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{attrs:{type:"text"},domProps:{value:e.valueString},on:{input:function(e){e.preventDefault()},change:function(t){return t.preventDefault(),e.onValueChange(t)}}})},r=[],a=(n("28a5"),{name:"AArrayInput",model:{prop:"value",event:"change"},props:{value:{type:Array,required:!0},removeEmpty:{type:Boolean,required:!1,default:!0}},computed:{valueString:function(){return this.value?this.value.join(", "):""}},methods:{emitNewArray:function(e){var t=e.split(",").map(function(e){return e.trim()});this.removeEmpty&&(t=t.filter(function(e){return!!e})),this.$emit("change",t)},onValueChange:function(e){this.emitNewArray(event.target.value)}}}),o=a,s=n("2877"),c=Object(s["a"])(o,i,r,!1,null,null,null);t["a"]=c.exports},"9b0f":function(e,t){e.exports=require("fs")},a32b:function(e,t){e.exports=require("path")},ab34:function(e,t,n){},af82:function(e,t,n){"use strict";n("ac6a"),n("456d"),n("7f7f"),n("7514"),n("96cf");var i=n("3b8d"),r=n("d225"),a=n("b0b4"),o=n("308d"),s=n("6bb5"),c=n("4e2b"),u=(n("b012"),n("b97d")),l=n.n(u),p=n("ff4a"),f=n.n(p),h=(n("6b54"),n("6762"),n("2fdb"),n("ac4d"),n("8a81"),n("75fc")),d=(n("5df3"),n("f400"),n("025e")),m=n("4360"),v=n("6558"),g=function e(){Object(r["a"])(this,e),this.inputImagePath="",this.inputDirectory="",this.inputDataPath="",this.data={},this.metadata={}},y=n("83dc"),b=n.n(y);n("f559");function _(e){return e=e.trim(),e.startsWith("//")||e.startsWith("\\\\")}function k(e){return P(e,b.a.dirname(e))}function w(e){return P(e,b.a.normalize(e))}function S(e){return P.call(null,e,b.a.join.apply(b.a,arguments))}function P(e,t){return _(e)?t.charAt(0)+t:t}var x={isUncPath:_,dirname:k,normalize:w,join:S},E=n("9b0f"),O=n.n(E),C=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,[{key:"move",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(b.a.isAbsolute(n)){e.next=9;break}if(t.inputDirectory){e.next=8;break}return console.log("Image not moved. Move directory was relative but input directory was not defined."),e.abrupt("return",Promise.resolve());case 8:n=x.join(t.inputDirectory,n);case 9:return console.log("Moving file to directory: "+n),e.next=12,this._makeDirectory(n);case 12:this._moveToDirectory(t,n),this._writeError(t,n,i);case 14:case"end":return e.stop()}},e,this)}));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"_makeDirectory",value:function(e){return new Promise(function(t){O.a.mkdir(e,{recursive:!0},function(e){e&&"EEXIST"!=e.code?reject(e+"\nImage move failed. Could not create directory."):t()})})}},{key:"_moveToDirectory",value:function(e,t){var n=this._getImagePaths(e),i=!0,r=!1,a=void 0;try{for(var o,s=function(){var e=o.value,n=b.a.basename(e),i=b.a.join(t,n);O.a.rename(e,i,function(e){e&&console.error(e+"\nImage path could not be moved to "+i)})},c=n[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)s()}catch(u){r=!0,a=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}}},{key:"_getImagePaths",value:function(e){var t=[e.inputImagePath,e.inputDataPath];return t.filter(function(e){return!!e})}},{key:"_writeError",value:function(e,t,n){if(n){var i=b.a.join(t,"error.logs");O.a.writeFile(i,["\n","Time: ".concat((new Date).toLocaleString()),"inputImagePath: ".concat(e.inputImagePath),"inputDataPath: ".concat(e.inputDataPath),n].join("\n"),{flag:"a"},function(e){e&&console.error(e+"\nCould not write Image error to "+i)})}}}]),e}(),A=n("0152"),D=n.n(A),I=n("49e1"),j=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,[{key:"read",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,a,o,s,c,u=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]&&u[1],i=t||"",r=this._isPathDefinedAndAbsolute(t)?x.dirname(t):"",a="",o={},s={},!this._isFile(i)){e.next=17;break}if(!this._isJsonFile(i)){e.next=13;break}return a=i,e.next=11,this._readJson(a);case 11:o=e.sent,i=this._ensureAbsolutePath(o.inputImagePath,r);case 13:if(!this._isFile(i)||!n){e.next=17;break}return e.next=16,this._readMetadata(i);case 16:s=e.sent;case 17:return c=new g,c.inputImagePath=i,c.inputDataPath=a,c.inputDirectory=r,c.data=o,c.metadata=s,e.abrupt("return",c);case 24:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_readJson",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){O.a.readFile(t,{encoding:"utf8"},function(n,i){if(n)throw new Error("Image json ".concat(t," could not be read."));e(JSON.parse(i))})}));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_readMetadata",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this._isFile(t)){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=new D.a.ExiftoolProcess,0,e.abrupt("return",n.open().then(function(e){e}).then(function(){return n.readMetadata(t,["-File:all"])}).then(function(e){var t=e.data[0];return t}).finally(function(){n.close()}));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isPathDefinedAndAbsolute",value:function(e){return"string"===typeof e&&e.length>0&&b.a.isAbsolute(e)}},{key:"_ensureAbsolutePath",value:function(e,t){return e?b.a.isAbsolute(e)?e:b.a.join(t,e):""}},{key:"_itExists",value:function(e){return O.a.existsSync(e||"")}},{key:"_isJsonFile",value:function(e){return".json"===b.a.extname(e)}},{key:"_isFile",value:function(e){try{return O.a.lstatSync(e||"").isFile()}catch(t){return!1}}}]),e}(),T=(n("28a5"),n("b44e")),F=n.n(T),N=n("ab7e"),L=n.n(N),W=function e(t,n){Object(r["a"])(this,e),this.path=t,this.extensions=n},R=function e(t,n){Object(r["a"])(this,e),this.sourceType=t,this.sourcePath=n},M=0,B=function(e){function t(e){var n;return Object(r["a"])(this,t),n=Object(o["a"])(this,Object(s["a"])(t).call(this)),n._id=M++,n._imageTap=e,n._fileWatcher=null,n._isDepleted=!1,n}return Object(c["a"])(t,e),Object(a["a"])(t,[{key:"produce",value:function(){switch(this._imageTap.sourceType){case I["a"].FILEWATCHER:this._sourceFileWatchers();break;case I["a"].DIRECTORY:this._sourceDirectory();break;case I["a"].OPENFILES:this._sourceOpenFiles();break;case I["a"].BLANK:this._sourceBlank();break;case I["a"].ACTIVEDOCUMENT:this._sourceActiveDocument();break;default:throw new Error("Unknown ImageSourceType: "+this._imageTap.sourceType)}}},{key:"destroy",value:function(){this._fileWatcher&&(this._fileWatcher.removeAllListeners(),this._fileWatcher.close()),this.removeAllListeners()}},{key:"_emitFiles",value:function(e){this.emit("files",this._id,e)}},{key:"_sourceFileWatchers",value:function(){var e=this,t=this._imageTap.sourcePath.path,n=this._imageTap.sourcePath.extensions,i=n.map(function(e){return b.a.join(t,"*."+e)});if(L()(t))throw Error("Watching network paths is problematic. Only local directories supported at this time.");if(!O.a.existsSync(t))throw Error("Watch path: ".concat(t," does not exist."));var r=F.a.watch(i,{ignored:/^\./,depth:0,awaitWriteFinish:{stabilityThreshold:2e3,pollInterval:500}}).on("add",function(t){e._emitFiles([t])});this._fileWatcher=r}},{key:"_sourceDirectory",value:function(){var e=this,t=this._imageTap.sourcePath.path,n=this._imageTap.sourcePath.extensions;O.a.readdir(t,{encoding:"utf8"},function(i,r){if(i)throw e.emit("depleted",e._id),new Error(i);r&&(r=r.map(function(e){return b.a.join(t,e)}),r=r.filter(function(e){var t=e.split(".").pop();return n.includes(t)}),e._isDepleted=!0,e._emitFiles(r)),e.emit("depleted",e._id)})}},{key:"_sourceOpenFiles",value:function(){var e=this;v["a"].runActionWithParameters("action.getOpenDocumentPaths").then(function(t){e._isDepleted=!0,e._emitFiles(t.split(",")),e.emit("depleted",e._id)})}},{key:"_sourceBlank",value:function(){this._isDepleted=!0,this._emitFiles([""]),this.emit("depleted",this._id)}},{key:"_sourceActiveDocument",value:function(){var e=this;v["a"].runActionWithParameters("action.getActiveDocumentPath").then(function(t){e._isDepleted=!0,e._emitFiles(t?[t]:[]),e.emit("depleted",e._id)})}},{key:"id",get:function(){return this._id}}]),t}(f.a);B.withFileWatcher=function(e,t){return new B(new R(I["a"].FILEWATCHER,new W(e,t)))},B.withDirectory=function(e,t){return new B(new R(I["a"].DIRECTORY,new W(e,t)))},B.withOpenFiles=function(){return new B(new R(I["a"].OPENFILES,null))},B.withBlank=function(){return new B(new R(I["a"].BLANK,null))},B.withActiveDocument=function(){return new B(new R(I["a"].ACTIVEDOCUMENT,null))};var J=n("117e"),q=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).call(this)),e._processingMutex=!1,e._state=J["a"].STOPPED,e._producerIdToPipelines=new Map,e._producerIdToProducer=new Map,e._producerIdsWhichDepleted=[],e._imageFileQ=[],e._imageFileReader=new j,e._imageFileMover=new C,e}return Object(c["a"])(t,e),Object(a["a"])(t,[{key:"init",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){this._destroyAllProducers(),this.state=J["a"].STOPPED}},{key:"_destroyDepletedProducers",value:function(){this._destroyProducers(this._producerIdsWhichDepleted),this._producerIdsWhichDepleted=[]}},{key:"_destroyAllProducers",value:function(){var e=Object(h["a"])(this._producerIdToProducer.keys());this._destroyProducers(e)}},{key:"_destroyProducers",value:function(e){var t=this;e=e.filter(function(e){return t._producerIdToProducer.has(e)});var n=!0,i=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this._producerIdToProducer.get(s).destroy(),this._producerIdToProducer.delete(s),this._producerIdToPipelines.delete(s),console.log("Image File Producer ".concat(s," destroyed."))}}catch(c){i=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"_addFileProducer",value:function(e,t){this._producerIdToPipelines.set(e.id,t),this._producerIdToProducer.set(e.id,e),e.on("files",this._onProducerFile.bind(this)),e.on("depleted",this._onProducerDepleted.bind(this)),e.produce(),console.log("Image File Producer ".concat(e.id," added."))}},{key:"run",value:function(e,t,n,i){this._run([e],t,n,i)}},{key:"runAll",value:function(e,t,n){this._run(m["a"].pipelines.pipelines.map(function(e){return e.name}),e,t,n)}},{key:"_run",value:function(e,t,n,i){if(this.isStopped())switch(console.log('Running pipelines: "'.concat(e.join(","),'" with source: ').concat(I["a"].toKey(t))),this.state=J["a"].IDLE,t){case I["a"].FILEWATCHER:this._runWithFileWatchers(e);break;case I["a"].DIRECTORY:this._runWithDirectory(e,n,i);break;case I["a"].OPENFILES:this._runWithOpenFiles(e);break;case I["a"].BLANK:this._runWithBlank(e);break;case I["a"].ACTIVEDOCUMENT:this._runWithActiveDocument(e);break;default:console.log("ImageSourceType ".concat(t," not recognized.")),this.state=J["a"].STOPPED}else console.log("Pipeline engine is already running.")}},{key:"_runWithFileWatchers",value:function(e){var t=this,n=e.reduce(function(e,n){var i=t._getConfigurationByPipelineName(n);return e.concat(i.watcherNames)},[]);n=d["a"].unique(n);var i=!0,r=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value,u=this._getFileWatcherByName(c);if(u){var l=this._getConfigurationsByFileWatcherName(c).map(function(e){return e.name}),p=B.withFileWatcher(u.path,u.extensions);this._addFileProducer(p,l)}else console.warn("File watcher ".concat(c," not found."))}}catch(f){r=!0,a=f}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}},{key:"_runWithDirectory",value:function(e,t,n){var i=B.withDirectory(t,n);this._addFileProducer(i,e)}},{key:"_runWithOpenFiles",value:function(e){var t=B.withOpenFiles();this._addFileProducer(t,e)}},{key:"_runWithBlank",value:function(e){var t=B.withBlank();this._addFileProducer(t,e)}},{key:"_runWithActiveDocument",value:function(e){var t=B.withActiveDocument();this._addFileProducer(t,e)}},{key:"pause",value:function(){this.isProcessing()&&(this.state=J["a"].PAUSED)}},{key:"resume",value:function(){this.isPaused()&&(this.state=J["a"].PROCESSING)}},{key:"stop",value:function(){this._destroyAllProducers(),this.state=J["a"].STOPPED}},{key:"_stopIfNoProducers",value:function(){0===this._producerIdToProducer.size&&(this.state=J["a"].STOPPED)}},{key:"_getFileWatcherByName",value:function(e){return m["a"].general.fileWatchers.find(function(t){return t.name===e})}},{key:"_getConfigurationByPipelineName",value:function(e){return m["a"].pipelines.pipelines.find(function(t){return t.name===e})}},{key:"_getConfigurationsByProducerId",value:function(e){var t=this._producerIdToPipelines.get(e);return m["a"].pipelines.pipelines.filter(function(e){return t.includes(e.name)})}},{key:"_getConfigurationsByFileWatcherName",value:function(e){return m["a"].pipelines.pipelines.filter(function(t){return t.watcherNames.includes(e)})}},{key:"_onProducerFile",value:function(e,t){console.log("File produced.");var n=t.map(function(t){return{producerId:e,file:t}});this._imageFileQ=this._imageFileQ.concat(n),this._process()}},{key:"_onProducerDepleted",value:function(e){this._producerIdsWhichDepleted.push(e)}},{key:"_process",value:function(){var e=this;this._processingMutex||(this._processingMutex=!0,this.state=J["a"].PROCESSING,console.log("Pipeline process loop started with ".concat(this._imageFileQ.length," images.")),this._runWaitOneFrame().then(this._runProcessStart.bind(this)).then(this._runProcessLoop.bind(this)).then(this._runProcessEnd.bind(this)).then(function(){e.state=J["a"].IDLE,e._destroyDepletedProducers(),e._stopIfNoProducers(),e._processingMutex=!1,console.log("Pipeline process loop exited.")}))}},{key:"_runWaitOneFrame",value:function(){return new Promise(function(e){setTimeout(e,0)})}},{key:"_runProcessStart",value:function(){return v["a"].runJsxWithThrow("app.displayDialogs = DialogModes.NO;")}},{key:"_runProcessLoop",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,i,r,a,o,s,c,u,l,p,f,h,d,g,y,b,_,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t=this._imageFileQ.pop())){e.next=94;break}return n=t,i=n.file,r=n.producerId,console.log("Reading next file ".concat(i," from producer ").concat(r,".")),e.next=5,this._imageFileReader.read(i,m["a"].general.doReadFileMetadata);case 5:a=e.sent,o=this._getConfigurationsByProducerId(r),console.log("Processing image: ".concat(a.inputImagePath)),e.prev=8,s=!0,c=!1,u=void 0,e.prev=12,l=o[Symbol.iterator]();case 14:if(s=(p=l.next()).done){e.next=63;break}if(f=p.value,!f.disabled){e.next=19;break}return console.log("Skipping disabled pipeline '".concat(f.name,"'")),e.abrupt("continue",60);case 19:return e.next=21,this._runPipelineStart(a,f);case 21:h=!0,d=!1,g=void 0,e.prev=24,y=f.actions[Symbol.iterator]();case 26:if(h=(b=y.next()).done){e.next=40;break}return _=b.value,this.emit("action",_.actionName),e.next=31,v["a"].runActionWithParameters(_.actionName,_.parameters);case 31:if(k=e.sent,this.emit("actionend",_.actionName),!this._stopCheck(k)){e.next=35;break}return e.abrupt("break",40);case 35:return e.next=37,this._pauseCheck(k,m["a"].general.pauseAfterEveryAction);case 37:h=!0,e.next=26;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e["catch"](24),d=!0,g=e.t0;case 46:e.prev=46,e.prev=47,h||null==y.return||y.return();case 49:if(e.prev=49,!d){e.next=52;break}throw g;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return e.next=56,this._runPipelineEnd(f);case 56:if(!this._stopCheck()){e.next=58;break}return e.abrupt("break",63);case 58:return e.next=60,this._pauseCheck(null,m["a"].general.pauseAfterEveryPipeline);case 60:s=!0,e.next=14;break;case 63:e.next=69;break;case 65:e.prev=65,e.t1=e["catch"](12),c=!0,u=e.t1;case 69:e.prev=69,e.prev=70,s||null==l.return||l.return();case 72:if(e.prev=72,!c){e.next=75;break}throw u;case 75:return e.finish(72);case 76:return e.finish(69);case 77:this._imageFileMover.move(a,"./Processed"),e.next=86;break;case 80:return e.prev=80,e.t2=e["catch"](8),console.error(e.t2),e.next=85,this._pauseCheck(null,m["a"].general.pauseOnExceptions);case 85:this._imageFileMover.move(a,"./Errored",e.t2.toString());case 86:return e.prev=86,e.next=89,this._pauseCheck(null,m["a"].general.pauseAfterEveryImage);case 89:if(!this._stopCheck()){e.next=91;break}return e.abrupt("break",94);case 91:return e.finish(86);case 92:e.next=0;break;case 94:case"end":return e.stop()}},e,this,[[8,80,86,92],[12,65,69,77],[24,42,46,54],[47,,49,53],[70,,72,76]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"_runProcessEnd",value:function(){return v["a"].runJsxWithThrow("$.gc();")}},{key:"_runPipelineStart",value:function(e,t){return console.log("Pipeline '".concat(t.name,"' started.")),this.emit("pipelinestart",t.name),v["a"].runJsxWithThrow("\n        __PIPELINE = {\n            restoreUnits: _.saveUnits()\n        };\n        IMAGE = new ImageForProcessing(".concat(JSON.stringify(e),");"))}},{key:"_runPipelineEnd",value:function(e){return console.log("Pipeline '".concat(e.name,"' ended.")),this.emit("pipelineend",e.name),v["a"].runJsxWithThrow("\n        __PIPELINE.restoreUnits && __PIPELINE.restoreUnits(); \n        IMAGE=null;\n        ")}},{key:"_stopCheck",value:function(e){return this.isStopped()||"STOP"===e?(this.state=J["a"].STOPPED,!0):"EXIT"===e&&(this.state=J["a"].IDLE,!0)}},{key:"_pauseCheck",value:function(e,t){var n=this;return this.isPaused()||t||"PAUSE"===e?(console.log("Pipeline Engine waiting on pause..."),this.state=J["a"].PAUSED,new Promise(function(e){n.once("state",function(t){t!=J["a"].PAUSED&&e()})})):Promise.resolve()}},{key:"isIdle",value:function(){return this.state===J["a"].IDLE}},{key:"isStopped",value:function(){return this.state===J["a"].STOPPED}},{key:"isPaused",value:function(){return this.state===J["a"].PAUSED}},{key:"isProcessing",value:function(){return this.state===J["a"].PROCESSING}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.emit("state",e)}}]),t}(f.a),$=(n("b07e"),n("1a43")),U=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,[{key:"build",value:function(e,t){return this._buildJsxImportString(e,t)}},{key:"_buildJsxImportString",value:function(e,t){var n=this,i="".concat(t,"."),r="".concat(t,"= (typeof ").concat(t,' !== "undefined") ? ').concat(t," : {};");return O.a.readdirSync(e).reduce(function(t,r){var a,o=b.a.join(e,r),s=i+r.split(".")[0];return a=O.a.statSync(o).isDirectory()?n._buildJsxImportString(o,i+r):'importAction("'.concat(o,'", "').concat(s,'");'),t+a},r)}}]),e}(),z=function(){function e(){Object(r["a"])(this,e),this._importStringBuilder=new U}return Object(a["a"])(e,[{key:"init",value:function(){return this._importAll()}},{key:"destroy",value:function(){}},{key:"_importAll",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Import actions started."),e.next=3,this._import($["a"].appBuiltinActionsPath);case 3:return e.next=5,this._import(m["a"].general.pathToUserActions);case 5:console.log("Import actions exited.");case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"_import",value:function(e){if(e.trim()){var t=this._importStringBuilder.build(e,"action")+"act = action;";return console.log(t),v["a"].runJsx(t)}}},{key:"getAllActionNames",value:function(){}},{key:"getActionDescriptorByName",value:function(e){}}]),e}(),V=3001,H=l()(),G={UNINITIALIZED:0,RUNNING:1},Y=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).call(this)),e._initialized=!1,e._state=G.UNINITIALIZED,e._httpServer=null,e._pipelineEngine=new q,e._actions=new z,e}return Object(c["a"])(t,e),Object(a["a"])(t,[{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=2;break}return e.abrupt("return");case 2:return this._initialized=!0,e.next=5,this._pipelineEngine.init();case 5:return e.next=7,this._actions.init();case 7:H.get("/pipeline/:name/configuration",function(e,n){n.header("Content-Type","application/json"),n.send(JSON.stringify(t._pipelineConfig.pipelines.find(function(t){return t.name==e.params.name.toLowerCase()}),null,4))}),H.post("/pipeline/run",function(e,t){t.status(200).json({success:!0})}),H.post("/pipeline/stop",function(e,t){t.status(200).json({success:!0})}),H.get("/status",function(e,n){n.status(200).json({status:Object.keys(G).find(function(e){return G[e]===t._state}),needUserInteraction:!1})}),H.use(function(e,t,n){t.status(404).send("Sorry, can't find that!")}),H.use(function(e,t,n,i){console.error(e.stack),n.status(500).send("Something broke!")}),this._httpServer=H.listen(V,function(){console.log("Express is listening to http://localhost:".concat(V))}),this.state=G.RUNNING,this.emit("initialized"),console.log("Server initialized.");case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var e=this;console.log("Server closing..."),this._httpServer&&this._httpServer.close(function(){e._httpServer=null,console.log("Server closed.")}),this._pipelineEngine.destroy(),this._pipelineEngine=null,this._actions.destroy(),this._actions=null}},{key:"pipelineEngine",get:function(){return this._pipelineEngine}},{key:"actions",get:function(){return this._actions}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.emit("state",e)}}]),t}(f.a);t["a"]=new Y},b658:function(e,t){e.exports=require("string_decoder")},b766:function(e,t,n){"use strict";n("55dd"),n("aef6");var i=n("75fc"),r=n("d225"),a=n("b0b4"),o=n("308d"),s=n("6bb5"),c=n("4e2b"),u=n("83dc"),l=n.n(u),p=n("9b0f"),f=n.n(p),h=n("ff4a"),d=n("1a43"),m=n("4360"),v=["log","warn","error"],g=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).call(this)),e.initialized=!1,e.options={logDirectory:"./",logFileEnabled:!1,logFilePersistForDays:7},e.originalConsoleMethods={},e.logWriteStream=null,e.logBuffer=[],e.maxBufferSize=64,e}return Object(c["a"])(t,e),Object(a["a"])(t,[{key:"init",value:function(){if(!this.initialized)return this.initialized=!0,this.emit("initializing"),this.options={logDirectory:m["a"].general.logDirectory||d["a"].appDefaultLogPath,logFileEnabled:!0},this._cleanupFiles(),this._createFileStream(),v.forEach(function(e){var t=this,n=console[e].bind(console);this.originalConsoleMethods[e]=n,console[e]=function(){var i=Array.prototype.slice.call(arguments);n.apply(console,i),t._write(e,i)}}.bind(this)),this.emit("initialized"),console.log("Logger initialized"),Promise.resolve()}},{key:"_write",value:function(e,t){var n=[(new Date).toLocaleTimeString(),"[".concat(e.toUpperCase(),"]\t")].concat(Object(i["a"])(t),["\n"]).join(" "),r=['<div class="'.concat(e,'">').concat((new Date).toLocaleTimeString())].concat(Object(i["a"])(t),["</div>"]).join(" ");this.logWriteStream&&this.logWriteStream.write(n),this.logBuffer.push(r),this.emit("logs")}},{key:"_createFileStream",value:function(){if(this.options.logFileEnabled){var e=(new Date).toISOString().slice(0,10),t=l.a.join(this.options.logDirectory,e+".logs");this.logWriteStream=f.a.createWriteStream(t,{flags:"a",encoding:"utf8"})}}},{key:"_closeFileStream",value:function(){this.logWriteStream&&this.logWriteStream.end(),this.logWriteStream=null}},{key:"_cleanupFiles",value:function(){var e=this,t=f.a.readdirSync(this.options.logDirectory),n=t.filter(function(e){return e.endsWith(".logs")});n.sort();for(var i=n.map(function(t){return l.a.join(e.options.logDirectory,t)}),r=Math.max(i.length-this.options.logFilePersistForDays,0),a=0;a<r;++a)f.a.unlink(i[a],function(e){e&&console.error("Could not delete log file. ",e)})}},{key:"clear",value:function(){this.logBuffer=[]}},{key:"read",value:function(){return this.logBuffer.reduce(function(e,t){return"".concat(e).concat(t)},"")}},{key:"destroy",value:function(){var e=this;console.log("Logger destroyed."),this.initialized&&(this.initialized=!1,this._closeFileStream(),v.forEach(function(t){console[t]=e.originalConsoleMethods[t]}),y=null)}}]),t}(h["EventEmitter"]),y=new g;t["a"]=y},dc4b:function(e,t,n){"use strict";var i=n("ab34"),r=n.n(i);r.a},de71:function(e,t,n){},e15b:function(e,t,n){},e4c2:function(e,t,n){"use strict";var i=n("e15b"),r=n.n(i);r.a},e70e:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"topcoat-checkbox"},[n("input",{attrs:{type:"checkbox",name:e.name},domProps:{value:e.value,checked:e.localChecked},on:{change:e.onCheckbox}}),n("div",{staticClass:"topcoat-checkbox__checkmark"}),e._t("default")],2)},r=[],a=(n("7f7f"),{name:"ACheckbox",model:{prop:"checked",event:"change"},props:{checked:null,value:String,name:String},computed:{localChecked:function(){return!!this.checked}},methods:{onCheckbox:function(e){this.$emit("change",e.target.checked,e.target.name)}}}),o=a,s=n("2877"),c=Object(s["a"])(o,i,r,!1,null,"c98e07b8",null);t["a"]=c.exports},f319:function(e,t){e.exports=require("querystring")},ff4a:function(e,t){e.exports=require("events")}});
//# sourceMappingURL=app.53bcf9c7.js.map