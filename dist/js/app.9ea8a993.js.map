{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.js","webpack:///./src/host/hostScriptListener.js","webpack:///./src/eventBus.js","webpack:///./src/server/pipelineEngineState.js","webpack:///./src/global/envPaths.js","webpack:///./src/global/index.js","webpack:///external \"http\"","webpack:///./src/server/imageSource.js","webpack:///external \"crypto\"","webpack:///external \"child_process\"","webpack:///external \"assert\"","webpack:///./src/arrayMap.js","webpack:///./src/store/config.js","webpack:///./src/store/index.js","webpack:///./src/server/imageSourceType.js","webpack:///./src/folderTree.js","webpack:///./src/components/tabs.vue","webpack:///./src/app.vue?be97","webpack:///./src/themeManager.js","webpack:///src/components/tabs.vue","webpack:///./src/components/tabs.vue?7bcf","webpack:///./src/components/tab.vue?3305","webpack:///src/components/tab.vue","webpack:///./src/components/tab.vue?07ab","webpack:///./src/components/tab.vue","webpack:///./src/components/main-controls.vue?1441","webpack:///src/components/main-controls.vue","webpack:///./src/components/main-controls.vue?ab1d","webpack:///./src/components/main-controls.vue","webpack:///src/app.vue","webpack:///./src/app.vue?b1d1","webpack:///./src/app.vue","webpack:///./src/dialog/a-dialog-root.vue?34fc","webpack:///./src/dialog/events.js","webpack:///./src/dialog/a-dialog.vue?9ee7","webpack:///src/dialog/a-dialog.vue","webpack:///./src/dialog/a-dialog.vue?3e02","webpack:///./src/dialog/a-dialog.vue","webpack:///./src/dialog/confirm.vue?645a","webpack:///src/dialog/confirm.vue","webpack:///./src/dialog/confirm.vue?f650","webpack:///./src/dialog/confirm.vue","webpack:///src/dialog/a-dialog-root.vue","webpack:///./src/dialog/a-dialog-root.vue?ac8f","webpack:///./src/dialog/a-dialog-root.vue","webpack:///./src/dialog/index.js","webpack:///./src/validation/index.js","webpack:///./src/main.js","webpack:///./src/app.vue?9486","webpack:///./src/host/hostCallbackTunnelExec.js","webpack:///./src/host/hostCallbackTunnelSetTimeout.js","webpack:///./src/host/index.js","webpack:///./src/enum.js","webpack:///./src/components/wait-dots.vue?cc43","webpack:///src/components/wait-dots.vue","webpack:///./src/components/wait-dots.vue?2eb9","webpack:///./src/components/wait-dots.vue","webpack:///external \"util\"","webpack:///external \"os\"","webpack:///external \"stream\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///./src/server/image.js","webpack:///./src/server/imageFileMover.js","webpack:///./src/unc-safe-path/index.js","webpack:///./src/server/imageFileReader.js","webpack:///./src/server/imageFileProducer.js","webpack:///./src/server/imageFileProducers.js","webpack:///./src/server/pipelineEngineStatus.js","webpack:///./src/server/pipelineEngine.js","webpack:///./src/server/actions.js","webpack:///./src/server/index.js","webpack:///./src/circleBuffer.js","webpack:///./src/console/index.js","webpack:///external \"process\"","webpack:///./src/components/tabs.vue?b5ef","webpack:///./src/dialog/a-dialog-root.vue?ab78","webpack:///external \"querystring\"","webpack:///./src/fsx.js","webpack:///external \"events\""],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","EDebounceType","Trailing","Leading","Both","debounce","func","wait","immediate","context","this","args","arguments","later","callNow","throttle","callback","limit","trailingEdge","simpleDeepClone","obj","JSON","parse","stringify","guid","_p8","Math","random","toString","substr","yyyymmddhhmmss","date","pad2","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","defaultForNativeType","first","Array","isArray","keys","unique","arr","Set","getOrDefine","defaultValue","isBoolean","val","isNumber","isObject","isEmptyObject","isString","isEmptyString","isUndefined","isNull","HostScriptListener","_scriptListenerActive","_scriptListenerReaderActive","_scriptListenerJsLogsPath","upath","join","os","homedir","_scriptListenerVbLogsPath","log","fs","writeFile","statSync","size","host","runJsx","values","includes","runActionWithParameters","Boolean","active","eventBus","Vue","PipelineEngineState","Enum","tmpdir","env","process","macos","library","path","config","temp","windows","appData","APPDATA","localAppData","LOCALAPPDATA","envPaths","options","TypeError","assign","suffix","platform","csInterface","CSInterface","getHostEnvironment","appVersion","appName","getCurrentApiVersion","major","minor","micro","getOSInformation","installPath","getSystemPath","SystemPath","EXTENSION","appInstallPath","normalize","appWorkingPath","appDefaultLogPath","appDefaultConfigPath","appBuiltinActionsPath","marioAppVersion","adobeApp","adobeVersion","adobeCEPApiVersion","require","ImageSource","sourceType","sourceDirectory","sourceExtensions","useOutputDirectory","outputDirectory","useProcessedDirectory","processedDirectory","useErrorDirectory","errorDirectory","readMetadata","imageSource","getOwnPropertyNames","ArrayMap","map","Map","forEach","array","set","VALID_JSON_TYPES","Config","opts","_isLoaded","_isLoading","_isSaved","_isSaving","_isAnotherSavePending","_lastSavedTime","_doAutoSave","autoSave","_schema","schema","_data","_createDefaultConfigObject","_dataFilePath","filePath","doExtend","_extend","entries","_isValidJsonTypeName","default","_typeOf","_defaultForTypeName","configurable","readFile","jsonString","_validateConfig","emit","now","nextTick","save","split","reduce","accumulator","tokens","lastToken","pop","parent","EventEmitter","GeneralConfig","appGlobal","checkIsScriptListenerActiveOnStart","pauseAfterEveryPipeline","pauseAfterEveryAction","pauseAfterEveryImage","pauseOnExceptions","logDirectory","logFilePersistForDays","logHtmlBufferMaxSize","runHttpServer","serverPort","pathToUserActions","fileSources","currentTab","isMainDrawerOpen","source","find","fromObject","PipelinesConfig","pipelines","pipelineNames","includeDisabled","filter","disabled","pipelineName","fileSourceNameToPipelineNames","pipeline","getByName","sourceNames","fileSourceName","Store","general","on","load","ImageSourceType","FolderTreeNode","isDirectory","children","hasChildren","node","names","reverse","namePath","nodeName","isEndOfPath","childIsDirectory","child","getChildByName","addChild","arrayify","newNode","oldNode","newRoot","clone","newStack","oldStack","oldChild","newChild","model","_vm","_h","$createElement","_c","_self","attrs","currentTabComponent","onTabChanged","_v","staticClass","staticRenderFns","themeManager","updateThemeWithAppSkinInfo","appSkinInfo","sentinelColor","panelBackgroundColor","color","red","themeIsLight","body","classList","remove","add","getElementById","style","background","toHex","computeValue","rgb","hex","Number","green","blue","onAppThemeColorChanged","init","addEventListener","THEME_COLOR_CHANGED_EVENT","component","class","isActive","$event","preventDefault","stopPropagation","onClick","_t","ref","scopedSlots","_u","fn","handleSubmit","indexOf","_k","keyCode","onPipelineRun","directives","rawName","expression","onPipelineResume","onPipelinePause","isStopped","onPipelineStop","_s","pipelineEngineStateText","_e","pipelinefilePathText","pipelineText","pipelineActionText","isOpen","width","height","maxWidth","maxHeight","backdropClose","_g","_b","close","props","listeners","events","open","onClose","$emit","Plugin","install","$dialog","openConfirm","ADialogRoot","setInteractionMode","extend","validate","min","max","parseInt","_","params","required","valid","computesRequired","access","exists","allowed","toLowerCase","trim","isUnc","startsWith","isAbsolute","global","setWindowTitle","chdir","__dirname","productionTip","devtools","use","Dialog","destroy","Server","Host","Logger","Validation","vue","render","h","App","beforeDestroy","$mount","HostCallbackTunnelExec","cwd","childProcess","tunnelId","id","stream","callbackId","command","child_process","exec","stdout","stderr","jsx","killed","kill","removeAllListeners","HostCallbackTunnelSetTimeout","timeoutId","delay","interface","_initialized","_nextTunnelId","_tunnelIdToTunnel","importScript","_onExec","_onSetTimeout","tunnel","eventName","scope","CSEvent","dispatchEvent","once","_openTunnel","store","setId","getId","_exitTunnel","delete","runJsxWithThrow","finally","fileName","importPath","evalScript","lowerCaseResult","functionName","parameters","parametersJson","charId","stringId","enumArr","offset","create_","nextKey","validName","enumer","isInteger","test","lastIndex","toArray","isValid","toKey","toUpperCase","domProps","dots","Image","initialInputImagePath","inputImagePath","inputDirectory","metadata","jobId","errors","ImageFileMover","images","image","_writeError","_moveImage","toDirectory","_moveToDirectory","directory","paths","_getImagePaths","basename","toPath","fsx","overwrite","warn","logPath","toLocaleString","append","catch","isUncPath","isAncestor","ancestor","descendant","relative","endsWith","dirname","_preserveUnc","firstPart","originalPath","newPath","charAt","ImageFileReader","targetPipelines","_isPathDefinedAndAbsolute","uncSafePath","_doesFileExist","_doesPathHaveJsonExtension","_readJson","_ensureAbsolutePath","_makeDirectory","_readMetadata","jsonFilePath","encoding","ep","exiftool","ExiftoolProcess","pid","fileMetadata","parentDirectory","extname","lstatSync","isFile","mkdir","recursive","nextProducerId","ImageFileProducer","_id","_imageSource","_fileWatcher","_isDepleted","_q","_emitQFiles","FILEWATCHER","_sourceFileWatchers","DIRECTORY","_sourceDirectory","OPENFILES","_sourceOpenFiles","BLANK","_sourceBlank","ACTIVEDOCUMENT","_sourceActiveDocument","files","_emitFiles","watchPathRoot","watchExtensions","watchPaths","ext","existsSync","watcher","chokidar","watch","ignored","depth","usePolling","interval","awaitWriteFinish","stabilityThreshold","pollInterval","extensions","readdir","file","filePaths","ImageFileProducers","_producerIdToListenerNames","_producerIdToProducer","_jobs","stopProducers","listenerNames","producer","_onProducerFiles","_onProducerDepleted","produce","producerIds","_stopProducers","has","producerId","getImageSource","jobCreationTime","PipelineEngineStatus","reset","seal","fileCount","imageJobId","imageIteration","action","PipelineEngine","self","_processingMutex","_lastState","STOPPED","_state","_status","Proxy","Reflect","actionName","_imageFileReader","_imageFileMover","_imageFileProducers","_onProducerJob","state","_run","IDLE","imageSourceNameToPipelineNames","getImageSourceNameToPipelineNameMap","imageSourceName","toPipelineNames","getImageSourceByName","startProducer","isProcessing","isIdle","PAUSED","isPaused","PROCESSING","hasProducers","stop","_process","_stopIfNoProducersElseIdle","hasJobs","_runWaitOneFrame","_runProcessStart","_runProcessLoop","_runProcessEnd","_pauseCheck","getTotalJobs","processedImages","_stopCheck","nextJob","read","_runPipelinesLoop","move","getByNames","_runPipelineStart","actions","_runPipelineEnd","actionResult","forcePause","jobs","getAllJobs","status","serialize","jsdoc","ROOT_ACTION_NAMESPACE","ActionDescriptor","description","jsdocDescription","descriptor","longname","ActionParameter","fromJSDoc","meta","typeNames","isRequired","jsdocParameter","optional","param","ActionFileDescriptionReader","explain","cache","a","absolutePath","descriptions","_isFunction","_actionNameToJsDoc","kind","memberof","isEnum","ActionFileImportStringBuilder","pathToActions","rootNamespace","_buildJsxImportString","absolutePathToActions","imports","directories","namespace","namespaceDefine","readdirSync","nameParts","nameWithoutExtension","nameSpacedName","absoluteFilePath","Action","importString","Actions","_actionNameToAction","_actionTree","_importAll","pathToBuildInActions","_import","importDirectory","build","actionPath","insert","readAll","cloneTree","from","port","app","ServerState","UNINITIALIZED","RUNNING","_httpServer","_pipelineEngine","_actions","startServer","polka","req","res","version","time","fullStatus","writeHead","end","listen","server","CircleBuffer","_array","_size","_pointer","CONSOLE_METHODS","initialized","originalConsoleMethods","logWriteStream","currentLogFileMonthDay","htmlLogBuffer","method","originalMethod","_write","_createLogsDirectory","_cleanupOldFiles","_createFileStream","toLocaleTimeString","htmlChunk","write","_closeFileStream","toISOString","createWriteStream","flags","autoClose","logFilenames","sort","logPaths","howManyToDelete","unlink","clear","acc","logger","str","createFileAndStatSize","position","writeAtPosition","fd","buffer","Buffer","closeSync","stat","stats","createFile","fromPath","rimraf","rename","rmdir","cb","maxBusyTries","maxRetries","emfileWait","retryDelay","dirPath","_mkdirRecursive"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAGnBC,EAAqB,CACxB,IAAO,GAMJjB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASa,EAAe7B,GACvB,OAAOyB,EAAoBK,EAAI,OAAS,GAAG9B,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,MAI5P,SAASyB,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAUgC,QAGnC,IAAIC,EAASL,EAAiB5B,GAAY,CACzCK,EAAGL,EACHkC,GAAG,EACHF,QAAS,IAUV,OANAlB,EAAQd,GAAUW,KAAKsB,EAAOD,QAASC,EAAQA,EAAOD,QAASN,GAG/DO,EAAOC,GAAI,EAGJD,EAAOD,QAKfN,EAAoBS,EAAI,SAAuBlC,GAC9C,IAAImC,EAAW,GAIXC,EAAY,CAAC,iBAAiB,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,iBAAiB,GAC3GR,EAAmB5B,GAAUmC,EAASvB,KAAKgB,EAAmB5B,IACzB,IAAhC4B,EAAmB5B,IAAkBoC,EAAUpC,IACtDmC,EAASvB,KAAKgB,EAAmB5B,GAAW,IAAIqC,SAAQ,SAASC,EAASC,GAIzE,IAHA,IAAIC,EAAO,QAAU,GAAGxC,IAAUA,GAAW,IAAM,CAAC,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,WAAW,iBAAiB,YAAYA,GAAW,OACpOyC,EAAWhB,EAAoBK,EAAIU,EACnCE,EAAmBC,SAASC,qBAAqB,QAC7CxC,EAAI,EAAGA,EAAIsC,EAAiBpC,OAAQF,IAAK,CAChD,IAAIyC,EAAMH,EAAiBtC,GACvB0C,EAAWD,EAAIE,aAAa,cAAgBF,EAAIE,aAAa,QACjE,GAAe,eAAZF,EAAIG,MAAyBF,IAAaN,GAAQM,IAAaL,GAAW,OAAOH,IAErF,IAAIW,EAAoBN,SAASC,qBAAqB,SACtD,IAAQxC,EAAI,EAAGA,EAAI6C,EAAkB3C,OAAQF,IAAK,CAC7CyC,EAAMI,EAAkB7C,GACxB0C,EAAWD,EAAIE,aAAa,aAChC,GAAGD,IAAaN,GAAQM,IAAaL,EAAU,OAAOH,IAEvD,IAAIY,EAAUP,SAASQ,cAAc,QACrCD,EAAQF,IAAM,aACdE,EAAQE,KAAO,WACfF,EAAQG,OAASf,EACjBY,EAAQI,QAAU,SAASC,GAC1B,IAAIC,EAAUD,GAASA,EAAME,QAAUF,EAAME,OAAOC,KAAOjB,EACvDkB,EAAM,IAAIC,MAAM,qBAAuB5D,EAAU,cAAgBwD,EAAU,KAC/EG,EAAIE,KAAO,wBACXF,EAAIH,QAAUA,SACP5B,EAAmB5B,GAC1BkD,EAAQY,WAAWC,YAAYb,GAC/BX,EAAOoB,IAERT,EAAQV,KAAOC,EAEf,IAAIuB,EAAOrB,SAASC,qBAAqB,QAAQ,GACjDoB,EAAKC,YAAYf,MACfgB,MAAK,WACPtC,EAAmB5B,GAAW,MAMhC,IAAImE,EAAqBxD,EAAgBX,GACzC,GAA0B,IAAvBmE,EAGF,GAAGA,EACFhC,EAASvB,KAAKuD,EAAmB,QAC3B,CAEN,IAAIC,EAAU,IAAI/B,SAAQ,SAASC,EAASC,GAC3C4B,EAAqBxD,EAAgBX,GAAW,CAACsC,EAASC,MAE3DJ,EAASvB,KAAKuD,EAAmB,GAAKC,GAGtC,IACIC,EADAC,EAAS3B,SAASQ,cAAc,UAGpCmB,EAAOC,QAAU,QACjBD,EAAOE,QAAU,IACb/C,EAAoBgD,IACvBH,EAAOI,aAAa,QAASjD,EAAoBgD,IAElDH,EAAOZ,IAAM7B,EAAe7B,GAG5B,IAAI2E,EAAQ,IAAIf,MAChBS,EAAmB,SAAUd,GAE5Be,EAAOhB,QAAUgB,EAAOjB,OAAS,KACjCuB,aAAaJ,GACb,IAAIK,EAAQlE,EAAgBX,GAC5B,GAAa,IAAV6E,EAAa,CACf,GAAGA,EAAO,CACT,IAAIC,EAAYvB,IAAyB,SAAfA,EAAMH,KAAkB,UAAYG,EAAMH,MAChE2B,EAAUxB,GAASA,EAAME,QAAUF,EAAME,OAAOC,IACpDiB,EAAMK,QAAU,iBAAmBhF,EAAU,cAAgB8E,EAAY,KAAOC,EAAU,IAC1FJ,EAAMM,KAAO,iBACbN,EAAMvB,KAAO0B,EACbH,EAAMnB,QAAUuB,EAChBF,EAAM,GAAGF,GAEVhE,EAAgBX,QAAWkF,IAG7B,IAAIV,EAAUW,YAAW,WACxBd,EAAiB,CAAEjB,KAAM,UAAWK,OAAQa,MAC1C,MACHA,EAAOhB,QAAUgB,EAAOjB,OAASgB,EACjC1B,SAASqB,KAAKC,YAAYK,GAG5B,OAAOjC,QAAQ+C,IAAIjD,IAIpBV,EAAoB4D,EAAIxE,EAGxBY,EAAoB6D,EAAI3D,EAGxBF,EAAoB8D,EAAI,SAASxD,EAASkD,EAAMO,GAC3C/D,EAAoBgE,EAAE1D,EAASkD,IAClC1E,OAAOmF,eAAe3D,EAASkD,EAAM,CAAEU,YAAY,EAAMC,IAAKJ,KAKhE/D,EAAoBoE,EAAI,SAAS9D,GACX,qBAAX+D,QAA0BA,OAAOC,aAC1CxF,OAAOmF,eAAe3D,EAAS+D,OAAOC,YAAa,CAAEC,MAAO,WAE7DzF,OAAOmF,eAAe3D,EAAS,aAAc,CAAEiE,OAAO,KAQvDvE,EAAoBwE,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQvE,EAAoBuE,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAK7F,OAAO8F,OAAO,MAGvB,GAFA5E,EAAoBoE,EAAEO,GACtB7F,OAAOmF,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOvE,EAAoB8D,EAAEa,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIR3E,EAAoB+E,EAAI,SAASxE,GAChC,IAAIwD,EAASxD,GAAUA,EAAOmE,WAC7B,WAAwB,OAAOnE,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAP,EAAoB8D,EAAEC,EAAQ,IAAKA,GAC5BA,GAIR/D,EAAoBgE,EAAI,SAASgB,EAAQC,GAAY,OAAOnG,OAAOC,UAAUC,eAAeC,KAAK+F,EAAQC,IAGzGjF,EAAoBK,EAAI,GAGxBL,EAAoBkF,GAAK,SAAShD,GAA2B,MAApBiD,QAAQjC,MAAMhB,GAAYA,GAEnE,IAAIkD,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAWjG,KAAK2F,KAAKM,GAC5CA,EAAWjG,KAAOf,EAClBgH,EAAaA,EAAWG,QACxB,IAAI,IAAI5G,EAAI,EAAGA,EAAIyG,EAAWvG,OAAQF,IAAKP,EAAqBgH,EAAWzG,IAC3E,IAAIU,EAAsBiG,EAI1B/F,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,2LC1QI+F,EAAgB,CACzBC,SAAU,EACVC,QAAS,EACTC,KAAM,GAUV,SAASC,EAASC,EAAMC,EAAMC,GAC1B,IAAIhD,EACJ,OAAO,WACH,IAAIiD,EAAUC,KAAMC,EAAOC,UACvBC,EAAQ,WACRrD,EAAU,KACNgD,IAAcP,EAAcC,UAAYM,IAAcP,EAAcG,MACpEE,EAAKrG,MAAMwG,EAASE,IAExBG,EAAUN,IAAchD,EAC5BI,aAAaJ,GACbA,EAAUW,WAAW0C,EAAON,GACxBO,GAAWR,EAAKrG,MAAMwG,EAASE,IAO3C,SAASI,EAAUC,EAAUC,EAAOC,GAChC,IAAIX,GAAO,EACX,OAAO,WACH,IAAIE,EAAUC,KAAMC,EAAOC,UACtBL,IACDS,EAAS/G,MAAMwG,EAASE,GACxBJ,GAAO,EACPpC,YAAW,WACPoC,GAAO,EACJW,GACCF,EAAS/G,MAAMwG,EAASE,KAC7BM,KASf,SAASE,EAAgBC,GAErB,OAAOC,KAAKC,MAAMD,KAAKE,UAAUH,IASrC,SAASI,IAEL,SAASC,EAAI/G,GACT,IAAII,GAAK4G,KAAKC,SAASC,SAAS,IAAI,aAAaC,OAAO,EAAE,GAC1D,OAAOnH,EAAI,IAAMI,EAAE+G,OAAO,EAAE,GAAK,IAAM/G,EAAE+G,OAAO,EAAE,GAAK/G,EAE3D,OAAO2G,IAAQA,GAAI,GAAQA,GAAI,GAAQA,IAM3C,SAASK,EAAeC,GAEpB,SAASC,EAAKxC,GACV,OAAQA,EAAI,GAAK,IAAM,IAAMA,EAGjC,OADAuC,EAAOA,GAAQ,IAAIE,KACZF,EAAKG,cACJF,EAAKD,EAAKI,WAAa,GACvBH,EAAKD,EAAKK,WACVJ,EAAKD,EAAKM,YACVL,EAAKD,EAAKO,cACVN,EAAKD,EAAKQ,cAGtB,SAASC,EAAqBxD,GAE1B,cAAeA,GACX,IAAK,UAAc,OAAO,EAC1B,IAAK,WAAc,OAAO,aAC1B,IAAK,OAAc,OAAO,KAC1B,IAAK,SAAc,OAAO,EAC1B,IAAK,SAAc,MAAO,GAC1B,IAAK,SAAc,MAAO,GAC1B,IAAK,SAAc,OAAOF,SAC1B,IAAK,YAAc,OACnB,QAAS,OAAO,MAIxB,SAAS2D,EAAMrB,GAEX,OAAGsB,MAAMC,QAAQvB,GACNA,EAAI,GAERA,EAAI7H,OAAOqJ,KAAKxB,GAAK,IAOhC,SAASyB,EAAOC,GACZ,sBAAW,IAAIC,IAAID,IAEvB,SAASE,EAAY5B,EAAK9B,EAAK2D,GAK3B,YAHgB/E,IAAbkD,EAAI9B,KACH8B,EAAI9B,GAAO2D,GAER7B,EAAI9B,GAEf,SAAS4D,EAAUC,GACf,MAAsB,mBAARA,EAElB,SAASC,EAASD,GACd,MAAsB,kBAARA,GAAoBA,IAAQA,EAE9C,SAASE,EAASF,GACd,OAAe,OAARA,GAAgC,kBAATA,EAElC,SAASG,EAAclC,GAEnB,OAAyC,IAAlC7H,OAAOqJ,KAAKxB,GAAO,IAAI9H,OAElC,SAASiK,EAASJ,GACd,MAAsB,kBAARA,EAElB,SAASK,EAAcL,GACnB,MAAe,KAARA,EAEX,SAASR,EAAQQ,GAEb,OAAOT,MAAMC,QAAQQ,GAEzB,SAASM,EAAYN,GACjB,MAAsB,qBAARA,EAElB,SAASO,EAAOP,GACZ,OAAe,OAARA,EAII,QACXpC,WACAV,WACAc,kBACAK,OACAM,iBACAU,uBACAC,QACAI,SACAG,cACAE,YACAE,WACAC,WACAC,gBACAC,WACAC,gBACAb,UACAc,cACAC,W,mLCvKEC,E,WAEF,aAAc,uBACVjD,KAAKkD,uBAAwB,EAC7BlD,KAAKmD,6BAA8B,EAEnCnD,KAAKoD,0BAA4BC,IAAMC,KAAKC,IAAGC,UAAW,UAAW,2BACrExD,KAAKyD,0BAA4BJ,IAAMC,KAAKC,IAAGC,UAAW,UAAW,2B,2CAKzE,WAGI,OADAtE,QAAQwE,IAAI,mCACL/I,QAAQC,Y,qBAEnB,c,uCAIA,WAiBIoF,KAAKmD,6BAA8B,I,sCAEvC,c,qCAIA,WAEIQ,IAAGC,UAAU5D,KAAKoD,0BAA2B,IAAI,SAAAnH,GAC7C,GAAGA,EAAK,MAAMA,KAElB0H,IAAGC,UAAU5D,KAAKyD,0BAA2B,IAAI,SAAAxH,GAC7C,GAAGA,EAAK,MAAMA,O,kCAGtB,c,oCAUA,WACA,WAEI,IACkB0H,IAAGE,SAAS7D,KAAKoD,2BAA2BU,KAC5D,UAMF,OAAOnJ,QAAQ+C,IAAI,CACfqG,OAAKC,OAAQ,4MAKbD,OAAKC,OAAQ,aAEhBxH,MAAK,SAAAyH,GACF,GAAGA,EAAO,GAAGC,SAAS,SAElB,OADAhF,QAAQjC,MAAM,qDACP,EAEX,IACI0G,IAAGE,SAAS,EAAKT,2BAA2BU,KAC9C,SACE,OAAO,Q,sCAInB,WAEI,OAAOC,OAAKI,wBAAwB,uCACnC3H,MAAK,SAAA/C,GAAM,OAAI2K,QAAQ3K,Q,kCAE5B,SAAqB4K,GAEjB,OAAON,OAAKI,wBAAwB,iCAAkCE,O,KAI/D,WAAIpB,G,oCCjHnB,gBACMqB,EAAW,IAAIC,OACND,U,2DCFf,gBAEME,EAAsB,IAAIC,OAAK,CACjC,UACA,OACA,SACA,eAGWD,U,uGCFThB,EAAUD,IAAGC,UACbkB,EAASnB,IAAGmB,SACVC,GAAQC,Q,sEAEVC,EAAQ,SAAAtH,GACb,IAAMuH,EAAUC,IAAKzB,KAAKE,EAAS,WAEnC,MAAO,CACNwB,OAAQD,IAAKzB,KAAKwB,EAAS,cAAevH,GAC1CmG,IAAKqB,IAAKzB,KAAKwB,EAAS,OAAQvH,GAChC0H,KAAMF,IAAKzB,KAAKoB,EAAQnH,KAIpB2H,EAAU,SAAA3H,GACf,IAAM4H,EAAUR,EAAIS,SAAWL,IAAKzB,KAAKE,EAAS,UAAW,WACvD6B,EAAeV,EAAIW,cAAgBP,IAAKzB,KAAKE,EAAS,UAAW,SAEvE,MAAO,CACNwB,OAAQD,IAAKzB,KAAK6B,EAAS5H,EAAM,UACjCmG,IAAKqB,IAAKzB,KAAK+B,EAAc9H,EAAM,OACnC0H,KAAMF,IAAKzB,KAAKoB,EAAQnH,KAIpBgI,EAAW,SAAChI,EAAMiI,GACvB,GAAoB,kBAATjI,EACV,MAAM,IAAIkI,UAAW,+BAA8BlI,GAUpD,OAPAiI,EAAU3M,OAAO6M,OAAO,CAACC,OAAQ,UAAWH,GAExCA,EAAQG,SAEXpI,GAAS,IAAGiI,EAAQG,QAGI,WAArBf,QAAQgB,SACJf,EAAMtH,GAEW,UAArBqH,QAAQgB,SACJV,EAAQ3H,GAGT,MAGOgI,I,YCjDC,kBAGZ,IAAMM,EAAc,IAAIC,YAF5B,EAGoCD,EAAYE,qBAApCC,EAHZ,EAGYA,WAAYC,EAHxB,EAGwBA,QAHxB,EAIoCJ,EAAYK,uBAApCC,EAJZ,EAIYA,MAAOC,EAJnB,EAImBA,MAAOC,EAJ1B,EAI0BA,MAChB9C,EAAKsC,EAAYS,mBACjB3B,EAAMY,EAAS,SAEfgB,EAAcV,EAAYW,cAAcC,WAAWC,WACnDC,EAAiBtD,IAAMuD,UAAUL,GACjCM,EAAiBxD,IAAMC,KAAKqD,EAAgB/B,SAC5CkC,EAAoBzD,IAAMuD,UAAUjC,EAAIjB,KACxCqD,EAAuB1D,IAAMuD,UAAUjC,EAAIK,QAC3CgC,EAAwB3D,IAAMC,KAAKuD,EAAgB,WAEzD,MAAO,CACHhB,cACAtC,KACAyC,WAAYiB,OACZN,iBACAE,iBACAC,oBACAC,uBACAC,wBACAE,SAAUjB,EACVkB,aAAcnB,EACdoB,mBAAqB,GAAEjB,KAASC,KAASC,KA3BjC,I,mBCLhB/L,EAAOD,QAAUgN,QAAQ,S,4GCCJC,E,WAgBjB,WACIC,EACAhK,EACAiK,EACAC,GAQJ,IAPIC,EAOJ,wDANIC,EAMJ,uDANsB,GAClBC,EAKJ,wDAJIC,EAIJ,uDAJyB,GACrBC,EAGJ,wDAFIC,EAEJ,uDAFqB,GACjBC,EACJ,kFACIhI,KAAKzC,KAAOA,EACZyC,KAAKuH,WAAaA,EAClBvH,KAAKwH,gBAAkBA,EACvBxH,KAAKyH,iBAAmBA,EAExBzH,KAAK0H,mBAAqBA,EAC1B1H,KAAK2H,gBAAkBA,EACvB3H,KAAK4H,sBAAwBA,EAC7B5H,KAAK6H,mBAAqBA,EAC1B7H,KAAK8H,kBAAoBA,EACzB9H,KAAK+H,eAAiBA,EACtB/H,KAAKgI,aAAeA,E,4CAGxB,WAGI,IAAIC,EAAc,IAAIX,EACtB,OAAOzO,OAAO6M,OAAOuC,EAAajI,Q,sBAEtC,WAEI,MAAQ,WAAUA,KAAKzC,gBAAgByC,KAAKuH,2BAA2BvH,KAAKwH,sB,yBAGhF,SAAkBzI,GAEd,IADJ,EACQkJ,EAAc,IAAIX,EAD1B,iBAEqBzO,OAAOqP,oBAAoBnJ,IAFhD,IAEI,2BAAqD,KAA3CH,EAA2C,QAC9CqJ,EAAYlP,eAAe6F,KAC1BqJ,EAAYrJ,GAAOG,EAAOH,KAJtC,8BAOI,OAAOqJ,M,2BC/Df3N,EAAOD,QAAUgN,QAAQ,W,qBCAzB/M,EAAOD,QAAUgN,QAAQ,kB,qBCAzB/M,EAAOD,QAAUgN,QAAQ,W,qNCCJc,G,mDAEjB,aAAc,kCACVnI,KAAKoI,IAAM,IAAIC,IACf,CAAC,MAAO,MAAO,SAAU,OAAQ,UAAUC,SAAQ,SAAA1J,GAC/C,EAAKA,GAAO,EAAKwJ,IAAIxJ,GAAKC,KAAK,EAAKuJ,Q,0CAG5C,SAAIxJ,EAAKN,GACL,IAAIiK,EAAQvI,KAAKoI,IAAIlK,IAAIU,GACtBoD,MAAMC,QAAQsG,GACbA,EAAMrP,KAAKoF,GAEX0B,KAAKoI,IAAII,IAAI5J,EAAK,CAACN,Q,4FCXlBmK,EAAmB,CAC5B,SACA,SACA,SACA,QACA,WAQiBC,E,wDAUjB,WAAYC,GACZ,oCACI,eAEA,EAAKC,WAAY,EACjB,EAAKC,YAAa,EAClB,EAAKC,UAAW,EAChB,EAAKC,WAAY,EACjB,EAAKC,uBAAwB,EAC7B,EAAKC,eAAiB,EAEtB,EAAKC,aAAgC,IAAlBP,EAAKQ,SACxB,EAAKC,QAAUT,EAAKU,OACpB,EAAKC,MAAQ,EAAKC,6BAClB,EAAKC,cAAgBb,EAAKc,SAEvBd,EAAKe,UACJ,EAAKC,UAhBb,E,iEAmBA,WAGI,IADA,IAAI3E,EAAS,GACb,MAA2BnM,OAAO+Q,QAAQ5J,KAAKoJ,SAA/C,eACA,8BADYxK,EACZ,KADiBN,EACjB,KACI,IAAK0B,KAAK6J,qBAAqBvL,EAAM5C,MACjC,MAAM,IAAI+J,UAAW,UAASnH,EAAM5C,YAAYkD,mCAEpD,GAAGN,EAAMwL,SAAW9J,KAAK+J,QAAQzL,EAAMwL,WAAaxL,EAAM5C,KACtD,MAAM,IAAI+J,UAAW,kBAAiBzF,KAAK+J,QAAQzL,EAAMwL,4CAE7D9E,EAAOpG,GAAON,EAAMwL,SAAW9J,KAAKgK,oBAAoB1L,EAAM5C,MAElE,OAAOsJ,I,6BAEX,WAEI,cAA2BnM,OAAO+Q,QAAQ5J,KAAKsJ,OAA/C,eACA,8BADY1K,EACZ,KADiBN,EACjB,KACI,IAAI0B,KAAKoJ,QAAQxK,GACb,MAAM,IAAI1C,MAAO,YAAW0C,yBAEhC,GAAGoB,KAAK+J,QAAQzL,KAAW0B,KAAKoJ,QAAQxK,GAAKlD,KACzC,MAAM,IAAI+J,UAAW,GAAEzF,KAAK+J,QAAQzL,iCAAqC0B,KAAKoJ,QAAQxK,GAAKlD,W,kCAIvG,SAAqBA,GACjB,OAAO+M,EAAiBvE,SAASxI,K,iCAErC,SAAoBA,GAChB,OAAOA,GACH,IAAK,SAAU,MAAO,GACtB,IAAK,SAAU,OAAO,EACtB,IAAK,SAAU,MAAO,GACtB,IAAK,QAAS,MAAO,GACrB,IAAK,UAAW,OAAO,EAE3B,MAAM,IAAIQ,MAAO,gCAA+BR,K,qBAEpD,SAAQ4C,GACJ,OAAG0D,MAAMC,QAAQ3D,GACN,eAEGA,I,qBAElB,WAEI,IADJ,qDACgBM,EADhB,UAGQ/F,OAAOmF,eAAe,EAAMY,EAAK,CAC7BV,IAD6B,WAEzB,OAAO8B,KAAK9B,IAAIU,IAEpB4J,IAJ6B,SAIzBlK,GACA,OAAO0B,KAAKwI,IAAI5J,EAAKN,IAEzBL,YAAY,EACZgM,cAAc,KAVtB,MAA2BpR,OAAO+Q,QAAQ5J,KAAKoJ,SAA/C,eACA,M,kBAcJ,WACA,WACI,OAAGpJ,KAAK4I,WAAa5I,KAAK6I,WACflO,QAAQC,UAEZ,IAAID,SAAQ,SAAAC,GAEf,EAAKiO,YAAa,EAClBlF,IAAGuG,SAAS,EAAKV,eAAe,SAACvN,EAAKkO,GAGlC,GAFA,EAAKtB,YAAa,EAEf5M,GAAoB,WAAbA,EAAIE,KAAmB,MAAMF,EACvC,IAAIA,EAAK,CAEL,IAAM7D,EAAOuI,KAAKC,MAAMuJ,GACxB,EAAKb,MAAQzQ,OAAO6M,OAAO,EAAK4D,MAAOlR,GACvC,EAAKgS,kBAET,EAAKtB,UAAW,EAChB,EAAKF,WAAY,EACjB,EAAKyB,KAAK,UACVzP,Y,kBAIZ,WACA,WACI,OAAGoF,KAAK8I,SACGnO,QAAQC,UAChBoF,KAAK+I,WACJ/I,KAAKgJ,uBAAwB,EACtBrO,QAAQC,WAGZ,IAAID,SAAQ,SAAAC,GAEf,EAAKmO,WAAY,EACjBpF,IAAGC,UAAU,EAAK4F,cAAe7I,KAAKE,UAAU,EAAKyI,MAAO,KAAM,IAAI,SAAArN,GAElE,GADA,EAAK8M,WAAY,EACd9M,EAAK,MAAMA,EAEd,EAAK2M,WAAY,EACjB,EAAKE,UAAW,EAChB,EAAKG,eAAiB1H,KAAK+I,MAC3B,EAAKD,KAAK,QAAS,EAAKpB,gBAErB,EAAKD,wBACJ,EAAKA,uBAAwB,EAC7BpE,QAAQ2F,UAAS,kBAAM,EAAKC,SAEhC5P,Y,8BAIZ,WACI,OAAOoF,KAAKiJ,iB,mBAKhB,WAEI,OAAOtI,KAAKC,MAAMD,KAAKE,UAAUb,KAAKsJ,U,oBAK1C,WAEI,OAAOtJ,KAAKsJ,Q,iBAEhB,SAAI1K,GAEN,OAAOA,EAAI6L,MAAM,KAAKC,QAAO,SAACC,EAAa3L,GAAd,OAA2B2L,EAAY3L,KAAWgB,KAAKsJ,S,iBAElF,SAAI1K,EAAKN,GAEL0B,KAAK8I,UAAW,EAEhB,IAAM8B,EAAShM,EAAI6L,MAAM,KACnBI,EAAYD,EAAOE,MACnBC,EAASH,EAAOF,QAAO,SAACC,EAAa3L,GAAd,OAA2B2L,EAAY3L,KAAWgB,KAAKsJ,OAC9EtK,EAAW+L,EAAOF,GACxB,GAAuB,qBAAb7L,EACN,MAAM,IAAI9C,MAAO,YAAW0C,gBAEhC,GAAGoB,KAAK+J,QAAQ/K,KAAcgB,KAAK+J,QAAQzL,GACvC,MAAM,IAAImH,UAAW,YAAW7G,UAAYoB,KAAK+J,QAAQ/K,2BAAkCV,eAAmB0B,KAAK+J,QAAQzL,MAG/HyM,EAAOF,GAAavM,EACpBY,QAAQwE,IAAK,0BAAyB9E,QAAUN,KAE7C0B,KAAKkJ,aACJlJ,KAAKwK,W,GA3LmBQ,K,YCH9BC,G,kEAEF,aAAc,0CACJ,CACFxB,SAAUpG,IAAMC,KAAK4H,OAAUnE,qBAAsB,gBACrD2C,UAAU,EACVL,OAAQ,CACJ8B,mCAAoC,CAChCzP,KAAM,UACNoO,SAAS,GAEbsB,wBAAyB,CACrB1P,KAAM,UACNoO,SAAS,GAEbuB,sBAAuB,CACnB3P,KAAM,UACNoO,SAAS,GAEbwB,qBAAsB,CAClB5P,KAAM,UACNoO,SAAS,GAEbyB,kBAAmB,CACf7P,KAAM,UACNoO,SAAS,GAEb0B,aAAc,CACV9P,KAAM,SACNoO,QAAS,IAEb2B,sBAAuB,CACnB/P,KAAM,SACNoO,QAAS,GAEb4B,qBAAsB,CAClBhQ,KAAM,SACNoO,QAAS,KAEb6B,cAAe,CACXjQ,KAAM,UACNoO,SAAS,GAEb8B,WAAY,CACRlQ,KAAM,SACNoO,QAAS,MAEb+B,kBAAmB,CACfnQ,KAAM,SACNoO,QAAS,IAEbgC,YAAa,CACTpQ,KAAM,QACNoO,QAAS,IAIbiC,WAAY,CACRrQ,KAAM,SACNoO,QAAS,kBAEbkC,iBAAkB,CACdtQ,KAAM,UACNoO,SAAS,M,2DAUzB,SAAqBvM,GAEjB,IAAM0O,EAASjM,KAAKsJ,MAAMwC,YAAYI,MAAK,SAAAlS,GAAC,OAAIA,EAAEuD,OAASA,KAC3D,OAAG0O,EACQ3E,OAAY6E,WAAWF,GAE3B,S,GA/EavD,IAsFtB0D,E,wDAEF,aACA,0CACU,CACF3C,SAAUpG,IAAMC,KAAK4H,OAAUnE,qBAAsB,kBACrD2C,UAAU,EACVL,OAAQ,CACJgD,UAAW,CACP3Q,KAAM,QACNoO,QAAS,O,iDAKzB,SAAWwC,EAAeC,GAEtB,OAAOvM,KAAKsJ,MAAM+C,UAAUG,QAAO,SAAApS,GAC/B,OAAOkS,EAAcpI,SAAS9J,EAAEmD,QAAUgP,IAAoBnS,EAAEqS,e,uBAGxE,SAAUC,EAAcH,GAEpB,OAAOvM,KAAKsJ,MAAM+C,UAAUH,MAAK,SAAA9R,GAC7B,OAAOA,EAAEmD,OAASmP,IAAiBH,IAAoBnS,EAAEqS,e,iDASjE,SAAoCH,EAAeC,GACnD,WAEQI,EAAgC,IAAIxE,EAWxC,OAVAmE,EAAchE,SAAQ,SAAAoE,GAElB,IAAME,EAAW,EAAKC,UAAUH,GAChC,GAAIE,EAAJ,CAFJ,uBAK8BA,EAASE,aALvC,IAKI,2BAAgD,KAAxCC,EAAwC,QAC5CJ,EAA8BnE,IAAIuE,EAAgBH,EAASrP,OANnE,mCASOoP,M,GA/CejE,GAmDxBsE,E,WAEF,aACA,uBAKIhN,KAAKiN,QAAU,IAAIhC,EACnBjL,KAAKiN,QAAQC,GAAG,UAAU,WACtBhO,QAAQwE,IAAI,sCAEhB1D,KAAKiN,QAAQC,GAAG,SAAS,WACrBhO,QAAQwE,IAAI,qCAMhB1D,KAAKqM,UAAY,IAAID,EACrBpM,KAAKqM,UAAUa,GAAG,UAAU,WACxBhO,QAAQwE,IAAI,wCAEhB1D,KAAKqM,UAAUa,GAAG,SAAS,WACvBhO,QAAQwE,IAAI,uC,oGAGpB,qGAEIxE,QAAQwE,IAAI,mCAFhB,SAIU1D,KAAKiN,QAAQE,OAJvB,uBAKUnN,KAAKqM,UAAUc,OALzB,OAOIjO,QAAQwE,IAAI,0BAPhB,gD,gEAYW,WAAIsJ,G,6DC7LnB,gBAEMI,EAAkB,IAAI3I,OAAK,CAC7B,YACA,YACA,cACA,QACA,iBACA,SAGW2I,U,gICXMC,E,WAEjB,aAA4C,IAAhC9P,EAAgC,uDAAzB,GAAI+P,EAAqB,+EAExCtN,KAAK+K,OAAS,KAEd/K,KAAKsN,YAAcA,EAEnBtN,KAAKzC,KAAOA,GAAQ,GAEpByC,KAAKuN,SAAW,G,6CAEpB,WACI,OAAuB,OAAhBvN,KAAK+K,S,oBAEhB,WACI,OAAQ/K,KAAKwN,gB,yBAEjB,WACI,OAAOxN,KAAKuN,SAAS3U,OAAS,I,sBAElC,SAAS6U,GAELA,EAAK1C,OAAS/K,KACdA,KAAKuN,SAASrU,KAAKuU,K,yBAEvB,SAAYA,GAERzN,KAAKuN,SAAWvN,KAAKuN,SAASf,QAAO,SAAA5O,GAAC,OAAIA,IAAM6P,O,4BAEpD,SAAelQ,GACX,OAAOyC,KAAKuN,SAASrB,MAAK,SAAAtO,GAAC,OAAIA,EAAEL,OAASA,O,yBAK9C,WACI,IAAIkQ,EAAOzN,KACP0N,EAAQ,CAACD,EAAKlQ,MAClB,MAAMkQ,IAASA,EAAOA,EAAK1C,QACvB2C,EAAMxU,KAAKuU,EAAKlQ,MAEpB,OAAOmQ,EAAMC,Y,oBAEjB,SAAOC,EAAUN,GAEb,IAAIG,EAAOzN,KACP6N,EAAY7N,KAAKzC,OAASqQ,EAAS,GAAMA,EAASvU,QAAU,GAChE,MAAMwU,EAAWD,EAASvU,QAC1B,CACI,IAAMyU,EAAkC,IAApBF,EAAShV,OACvBmV,IAAmBD,IAAgBR,GACrCU,EAAQP,EAAKQ,eAAeJ,GAC5BG,IACAA,EAAQ,IAAIX,EAAeQ,EAAUE,GACrCN,EAAKS,SAASF,IAElBP,EAAOO,K,sBAQf,SAASJ,GAEL,IAAIH,EAAOzN,KACP6N,EAAY7N,KAAKzC,OAASqQ,EAAS,GAAMA,EAASvU,QAAU,GAChE,MAAMoU,IAASI,EAAWD,EAASvU,SAC/BoU,EAAOA,EAAKQ,eAAeJ,GAE/B,OAAOJ,I,kBAEX,WAEIzN,KAAK+K,OAAO1O,YAAY2D,MACxBA,KAAK+K,OAAS,O,sBAElB,SAAS0C,GAGL,GAAGA,EAAKD,cAAe,CACnB,IAAM/T,EAASgU,EAAKF,SAASnF,KAAI,SAAAxK,GAAC,OAAI6P,EAAKU,SAASvQ,MACpD,MAAO,CAAC6P,EAAKlQ,KAAM9D,GAEnB,OAAOgU,EAAKlQ,O,mBAMpB,WAEI,OAAO,IAAI8P,EAAerN,KAAKzC,KAAMyC,KAAKsN,e,uBAK9C,WAEI,IAGIc,EAASC,EAHTC,EAAUtO,KAAKuO,QACfC,EAAW,CAACF,GACZG,EAAW,CAACzO,MAEhB,OAAOqO,EAAUI,EAAS3D,SAAWsD,EAAUI,EAAS1D,OAEpD,IAAI,IAAIpS,EAAI,EAAGA,EAAI2V,EAAQd,SAAS3U,SAAUF,EAC9C,CACI,IAAIgW,EAAWL,EAAQd,SAAS7U,GAC5BiW,EAAWD,EAASH,QACxBH,EAAQF,SAASS,GACjBH,EAAStV,KAAKyV,GACdF,EAASvV,KAAKwV,GAGtB,OAAOJ,I,mBAEX,SAAMM,Q,+DCtHN,EAAQ,E,uFCAR,EAAS,WAAa,IAAIC,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,iBAAiBA,EAAG,eAAeA,EAAG,OAAO,CAACE,MAAM,CAAC,cAAcL,EAAIM,qBAAqBjC,GAAG,CAAC,QAAU2B,EAAIO,eAAe,CAACJ,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,gBAAgB,CAACL,EAAIQ,GAAG,aAAaL,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,mBAAmB,CAACL,EAAIQ,GAAG,SAASL,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,qBAAqB,CAACL,EAAIQ,GAAG,mBAAmBL,EAAG,MAAM,CAACE,MAAM,CAAC,MAAQ,kBAAkB,CAACL,EAAIQ,GAAG,gBAAgB,GAAGL,EAAG,iBAAiBA,EAAG,UAAU,CAACM,YAAY,eAAe,CAACN,EAAG,aAAa,CAACA,EAAGH,EAAIM,oBAAoB,CAAChU,IAAI,eAAe,IAAI,IAAI,IAC5oBoU,EAAkB,G,6CCDhBC,G,UAAgB,WAGlB,IAAM3J,EAAc,IAAIC,YAKxB,SAAS2J,EAA2BC,GAEhC,IAAIC,EAAgBD,EAAYE,qBAAqBC,MAAMC,IACvDC,EAAeJ,EAAgB,IAE/BI,GACA9U,SAAS+U,KAAKC,UAAUC,OAAO,QAC/BjV,SAAS+U,KAAKC,UAAUE,IAAI,SAC5BlV,SAASmV,eAAe,SAAStV,KAAO,kCAExCG,SAAS+U,KAAKC,UAAUC,OAAO,SAC/BjV,SAAS+U,KAAKC,UAAUE,IAAI,QAC5BlV,SAASmV,eAAe,SAAStV,KAAO,gCAG5CG,SAAS+U,KAAKK,MAAMC,WAAa,IAAMC,EAAMb,EAAYE,qBAAqBC,OAGlF,SAASU,EAAMV,GAEX,SAASW,EAAaC,GAClB,IAAIC,EAAMC,OAAOF,GAAKvP,SAAS,IAE/B,OADIwP,EAAI9X,OAAS,IAAK8X,EAAM,IAAMA,GAC3BA,EAEX,IAAIA,EAAM,GAMV,OALIb,IACAa,EAAMF,EAAaX,EAAMC,KACjBU,EAAaX,EAAMe,OACnBJ,EAAaX,EAAMgB,OAExBH,EAGX,SAASI,EAAuBjV,GAE5B,IAAI6T,EAAc7J,EAAYE,qBAAqB2J,YACnDD,EAA2BC,GAG/B,SAASqB,IAEL,IAAIrB,EAAc7J,EAAYE,qBAAqB2J,YACnDD,EAA2BC,GAC3B7J,EAAYmL,iBAAiBlL,YAAYmL,0BAA2BH,GAGxE,MAAO,CACHC,KAAMA,GAxDQ,IA6DLvB,IC1DjB,G,UAAA,CACE,KAAF,OACE,MAAF,CACI,WAAJ,CACM,KAAN,OACM,UAAN,IAGE,KARF,WASI,MAAJ,CACM,UAAN,kBAGE,SAAF,CACI,SADJ,WAEM,OAAN,sBAGE,QAlBF,WAmBI,KAAJ,kCAEE,QAAF,CACI,WADJ,SACA,GACM,KAAN,YACM,KAAN,iCAEI,YALJ,SAKA,GACM,OAAN,qBAGE,OAAF,YAEI,OAAJ,EACA,KACA,CACM,MAAN,QAGI,KAAJ,gCACM,OAAN,EACA,KACA,CACQ,MAAR,OAEA,YC/C8U,I,wBJQ1U0B,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QKnBX,EAAS,WAAa,IAAIrC,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACmC,MAAM,CAAE9M,OAAQwK,EAAIuC,UAAWlC,MAAM,CAAC,KAAO,UAAUhC,GAAG,CAAC,MAAQ,SAASmE,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyB1C,EAAI2C,QAAQH,MAAW,CAACxC,EAAI4C,GAAG,YAAY,IAChS,EAAkB,GCUtB,GACE,KAAF,MACE,MAAF,CACI,MAAJ,CACM,KAAN,OACM,UAAN,IAGE,SAAF,CACI,SADJ,WAEM,OAAN,qCAGE,QAAF,CACI,QADJ,SACA,GACM,KAAN,yCC1B6U,ICOzU,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QClBX,EAAS,WAAa,IAAI5C,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,sBAAsB,CAAC0C,IAAI,WAAWxC,MAAM,CAAC,KAAO,IAAIyC,YAAY9C,EAAI+C,GAAG,CAAC,CAAChT,IAAI,UAAUiT,GAAG,SAASH,GAC1M,IAAII,EAAeJ,EAAII,aACvB,MAAO,CAAC9C,EAAG,OAAO,CAACM,YAAY,oBAAoBpC,GAAG,CAAC,QAAU,SAASmE,GAAQ,IAAIA,EAAO3V,KAAKqW,QAAQ,QAAQlD,EAAImD,GAAGX,EAAOY,QAAQ,QAAQ,GAAGZ,EAAOzS,IAAI,SAAW,OAAO,KAAOyS,EAAOC,kBAAmB,OAAS,SAASD,GAAgC,OAAxBA,EAAOC,iBAAwBQ,EAAajD,EAAIqD,kBAAkB,CAAClD,EAAG,MAAM,CAACM,YAAY,+BAA+B,CAACN,EAAG,SAAS,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAa,UAAEwD,WAAW,cAAc/C,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,SAAS,MAAQ,8CAA8C,CAACL,EAAIQ,GAAG,OAAOL,EAAG,SAAS,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAY,SAAEwD,WAAW,aAAa/C,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,SAAS,MAAQ,sBAAsBhC,GAAG,CAAC,MAAQ2B,EAAIyD,mBAAmB,CAACzD,EAAIQ,GAAG,YAAYL,EAAG,SAAS,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAY,SAAEwD,WAAW,aAAa/C,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,SAAS,MAAQ,qBAAqBhC,GAAG,CAAC,MAAQ2B,EAAI0D,kBAAkB,CAAC1D,EAAIQ,GAAG,QAAQL,EAAG,SAAS,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,OAAQuQ,EAAI2D,UAAWH,WAAW,eAAe/C,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,SAAS,MAAQ,wCAAwChC,GAAG,CAAC,MAAQ2B,EAAI4D,iBAAiB,CAAC5D,EAAIQ,GAAG,SAASL,EAAG,MAAM,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAoB,iBAAEwD,WAAW,qBAAqB/C,YAAY,iCAAiC,CAACN,EAAG,MAAM,CAACM,YAAY,yBAAyB,CAACN,EAAG,KAAK,CAACM,YAAY,iBAAiB,CAACT,EAAIQ,GAAG,sBAAsBL,EAAG,MAAM,CAACH,EAAIQ,GAAGR,EAAI6D,GAAG7D,EAAI8D,4BAA6B9D,EAAwB,qBAAEG,EAAG,KAAK,CAACM,YAAY,iBAAiB,CAACT,EAAIQ,GAAG,yBAAyBR,EAAI+D,KAAK5D,EAAG,MAAM,CAACH,EAAIQ,GAAGR,EAAI6D,GAAG7D,EAAIgE,2BAA2B7D,EAAG,MAAM,CAACM,YAAY,yBAAyB,CAACN,EAAG,KAAK,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAgB,aAAEwD,WAAW,iBAAiB/C,YAAY,iBAAiB,CAACT,EAAIQ,GAAG,cAAcL,EAAG,MAAM,CAACH,EAAIQ,GAAGR,EAAI6D,GAAG7D,EAAIiE,iBAAiB9D,EAAG,KAAK,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAsB,mBAAEwD,WAAW,uBAAuB/C,YAAY,iBAAiB,CAACT,EAAIQ,GAAG,YAAYL,EAAG,MAAM,CAACH,EAAIQ,GAAGR,EAAI6D,GAAG7D,EAAIkE,2BAA2B/D,EAAG,MAAM,CAACM,YAAY,+BAA+B6B,MAAM,CAAE9M,OAAQwK,EAAI7C,mBAAoB,CAACgD,EAAG,SAAS,CAACM,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,UAAUhC,GAAG,CAAC,MAAQ,SAASmE,GAAQxC,EAAI7C,kBAAoB6C,EAAI7C,oBAAoB,CAAC6C,EAAIQ,GAAG,oBAAoBL,EAAG,OAAO,CAACH,EAAIQ,GAAG,qBAChhF,EAAkB,G,wECoEtB,GACE,KAAF,eACE,WAAF,CACI,mBAAJ,OACI,mBAAJ,OACI,SAAJ,QAEE,KAPF,WAQI,MAAJ,CACM,oBAAN,4BACM,aAAN,GACM,mBAAN,GACM,qBAAN,GACM,iBAAN,kCAGE,MAAF,CACI,iBAAJ,YACM,EAAN,gCACM,EAAN,sBASE,SAAF,CACI,SADJ,WAEM,OAAN,uCACA,6CAEI,UALJ,WAMM,OAAN,0CAEI,SARJ,WASM,OAAN,yCAEI,aAXJ,WAYM,OAAN,6CAEI,wBAdJ,WAeM,OAAN,yCAGE,QA9CF,WA+CI,IAAJ,OACI,EAAJ,sCACM,EAAN,8BAEI,EAAJ,4CACM,EAAN,yBAEI,EAAJ,6CACM,EAAN,wBACM,EAAN,4BACM,EAAN,gCAGE,QAAF,CAII,cAJJ,WAKM,KAAN,qBACQ,KAAR,UACQ,QAAR,uEACQ,MAAR,WACU,EAAV,iCAII,iBAbJ,WAcM,EAAN,8BAEI,gBAhBJ,WAiBM,EAAN,6BAEI,eAnBJ,WAoBM,EAAN,8BCvJuV,ICOnV,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCgBf,GACE,KAAF,MACE,WAAF,CACI,aAAJ,EACI,KAAJ,EACI,IAAJ,EACI,WAAJ,WAAM,OAAN,iDACI,WAAJ,WAAM,OAAN,iDACI,aAAJ,WAAM,OAAN,iDACI,gBAAJ,WAAM,OAAN,sFACI,aAAJ,WAAM,OAAN,uFAEE,KAAF,WACI,MAAJ,CACM,oBAAN,4BAGE,QAjBF,WAkBI,EAAJ,OACI,KAAJ,sBAEE,QAAF,CACI,aADJ,SACA,GACM,EAAN,0BACM,EAAN,oBACM,KAAN,uBAEI,mBANJ,WAOM,IAAN,qCACA,IACA,2BChE8T,ICQ1T,G,UAAY,eACd,EACA,EACAE,GACA,EACA,KACA,KACA,OAIa,I,QCnBX,EAAS,WAAa,IAAIV,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,OAASL,EAAImE,OAAO,MAAQnE,EAAIoE,MAAM,OAASpE,EAAIqE,OAAO,SAAWrE,EAAIsE,SAAS,UAAYtE,EAAIuE,WAAWlG,GAAG,CAAC,gBAAkB2B,EAAIwE,gBAAgB,CAACrE,EAAGH,EAAIqC,UAAUrC,EAAIyE,GAAGzE,EAAI0E,GAAG,CAACpY,IAAI,YAAY+R,GAAG,CAAC,QAAU2B,EAAI2E,QAAQ,YAAY3E,EAAI4E,OAAM,GAAO5E,EAAI6E,aAAa,IAClY,EAAkB,G,wBCCTC,EAAS,IAAIpP,OAAI,CAAEhH,KAAM,aCFlC,EAAS,WAAa,IAAIsR,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,eAAe,CAACF,EAAG,MAAM,CAACmD,WAAW,CAAC,CAAC5U,KAAK,OAAO6U,QAAQ,SAAS9T,MAAOuQ,EAAU,OAAEwD,WAAW,WAAW/C,YAAY,iBAAiB6B,MAAM,CAACyC,KAAM/E,EAAImE,QAAQ9F,GAAG,CAAC,MAAQ2B,EAAIgF,UAAU,CAAC7E,EAAG,MAAM,CAAC0C,IAAI,QAAQpC,YAAY,QAAQe,MAAM,CAAG6C,OAAQrE,EAAIqE,OAAQD,MAAOpE,EAAIoE,MAAOG,UAAWvE,EAAIuE,UAAWD,SAAUtE,EAAIsE,UAAYjG,GAAG,CAAC,MAAQ,SAASmE,GAAQA,EAAOE,qBAAsB,CAAC1C,EAAI4C,GAAG,YAAY,QACphB,EAAkB,GCatB,GACE,KAAF,UACE,MAAF,CACI,OAAJ,QACI,MAAJ,CACM,KAAN,OACM,UAAN,GAEI,OAAJ,CACM,KAAN,OACM,UAAN,GAEI,SAAJ,CACM,KAAN,OACM,UAAN,GAEI,UAAJ,CACM,KAAN,OACM,UAAN,IAGE,MAAF,CACI,OADJ,SACA,GAAM,IAAN,OACA,GAGM,KAAN,sBACQ,EAAR,0BAIE,QAAF,CACI,QADJ,WAEM,KAAN,0BAEI,mBAJJ,WAMM,IAAN,0CACA,wCACA,0CACA,4CACA,wBACA,yDACA,qBACA,qBAEA,IACQ,EAAR,mCC7DkV,ICO9U,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QClBX,GAAS,WAAa,IAAI5C,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACM,YAAY,cAAc,CAACT,EAAIQ,GAAG,IAAIR,EAAI6D,GAAG7D,EAAIvR,SAAS,OAAO0R,EAAG,SAAS,CAACM,YAAY,gBAAgB,CAACT,EAAI4C,GAAG,SAAS,CAACzC,EAAG,SAAS,CAACM,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,UAAUhC,GAAG,CAAC,MAAQ,SAASmE,GAAQ,OAAOxC,EAAIiF,MAAM,WAAW,MAAS,CAACjF,EAAIQ,GAAG,WAAWL,EAAG,SAAS,CAACM,YAAY,wBAAwBJ,MAAM,CAAC,KAAO,UAAUhC,GAAG,CAAC,MAAQ,SAASmE,GAAQ,OAAOxC,EAAIiF,MAAM,WAAW,MAAU,CAACjF,EAAIQ,GAAG,iBAAiB,MACnjB,GAAkB,GCkBtB,IACE,KAAF,UACE,MAAF,CACI,QAAJ,CACM,KAAN,OACM,UAAN,KCxBiV,MCO7U,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QCIf,IACE,OAAF,OACE,MAAF,MACE,SAAF,MACE,UAAF,OAGA,IACE,KAAF,cACE,WAAF,CACI,QAAJ,GAEE,KAAF,WAAI,MAAJ,CACM,UAAN,KACM,MAAN,GACM,OAAN,GACM,SAAN,GACM,UAAN,GACM,MAAN,KACM,UAAN,OAEE,SAAF,CACI,OADJ,WAEM,QAAN,iBAGE,QAnBF,WAoBI,EAAJ,oCACI,EAAJ,sBACI,EAAJ,yBAEE,QAAF,CACI,YADJ,YAEM,IADN,EACA,EADA,QACA,EADA,WACA,EADA,UACA,iDACM,KAAN,qBACQ,UAAR,GACQ,UAAR,CACU,QAAV,YACA,EACA,OAEA,SAGQ,MAAR,CACU,QAAV,IAEA,KAGI,KAnBJ,YAoBM,IADN,EACA,EADA,QACA,EADA,SACA,EADA,WACA,EADA,YACA,EADA,UACA,IADA,aACA,MADA,KACA,MADA,iBACA,MADA,KACA,EACA,YACQ,QAAR,qDAGM,QAAN,oBAEM,KAAN,kBACM,KAAN,oBACM,KAAN,wBACM,KAAN,0BACM,KAAN,YACM,KAAN,QACM,KAAN,cAEI,cAnCJ,WAqCA,wCACQ,KAAR,oBAEM,KAAN,SAMI,MA9CJ,WA+CM,QAAN,qBAEM,KAAN,eACM,KAAN,WACM,KAAN,kBCxGuV,MCQnV,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,OAIa,M,QChBT0E,GAAS,CACXC,QADW,SACFzP,GAELA,EAAIzL,UAAUmb,QAAU,CAOpBC,YAPoB,SAOR1O,GACRmO,EAAOG,MAAM,cAAetO,IAEhCoO,KAVoB,SAUdpO,GACFmO,EAAOG,MAAM,OAAQtO,KAI7BjB,EAAI2M,UAAU,cAAeiD,MAItBJ,M,4GCpBfK,eAAmB,UAAU,SAAArU,GACzB,MAAO,CACHmN,GAAI,CAAC,SAAU,YAIvBmH,eAAO,UAAW,CACdC,SADc,SACLhW,EADK,GACgB,IAAZiW,EAAY,EAAZA,IAAKC,EAAO,EAAPA,IACnBlW,EAAQmW,SAASnW,EAAO,IACxBiW,EAAME,SAASF,EAAK,IACpBC,EAAMC,SAASD,EAAK,IAEpB,IAAIlX,EAAW,qBAQf,OAPGoX,OAAEhS,SAAS6R,IAAQG,OAAEhS,SAAS8R,GAC7BlX,GAAY,YAAWiX,SAAWC,IAC5BE,OAAEhS,SAAS6R,GACjBjX,GAAY,6BAA4BiX,EAClCG,OAAEhS,SAAS8R,KACjBlX,GAAY,0BAAyBkX,GAErCE,OAAEhS,SAASpE,GAGZoW,OAAEhS,SAAS6R,IAAQjW,EAAQiW,EACnBjX,IAERoX,OAAEhS,SAAS8R,IAAQlW,EAAQkW,IACnBlX,EANAA,GAUfqX,OAAQ,CAAC,MAAO,SAGpBN,eAAO,WAAY,CACfC,SADe,SACLhW,GACN,MAAO,CACHsW,UAAU,EACVC,OAAiD,IAA1C,CAAC,GAAI,UAAMrX,GAAWuU,QAAQzT,MAAmB0D,MAAMC,QAAQ3D,IAA2B,IAAjBA,EAAM1F,UAG9F0E,QAAS,mBACTwX,kBAAkB,IAGtBT,eAAO,aAAc,CACXC,SADW,SACFhW,GACf,mKACyB,IAAI3D,SAAQ,SAAAC,GAC7B+I,KAAGoR,OAAOzW,GAAO,SAAArB,GACbrC,GAASqC,SAHrB,UACU+X,EADV,QAMOA,EANP,0CAOe,GAPf,gCASW,CACHH,OAAO,IAVf,8CAaAvX,QAAS,wBAGb+W,eAAO,UAAW,CACdC,SADc,SACLhW,EAAO2B,GACZ,IAAMgV,EAAkC,mBAAjBhV,EAAKgV,QAAwBhV,EAAKgV,QAAUtU,KAAKC,MAAMX,EAAKgV,QAAQC,eACrFnQ,EAAOzG,EAAM6W,OACbC,EAAQrQ,EAAKsQ,WAAW,OAAStQ,EAAKsQ,WAAW,QACvD,QAASD,IAAUH,IAEvBN,OAAQ,CAAC,WACTrX,QAAU,+BAGd+W,eAAO,eAAgB,CACnBC,SADmB,SACVhW,EAAO2B,GACZ,IAAMgV,EAAkC,mBAAjBhV,EAAKgV,QAAwBhV,EAAKgV,QAAUtU,KAAKC,MAAMX,EAAKgV,QAAQC,eACrFnQ,EAAOzG,EAAM6W,OACnB,QAAIF,GACO5R,IAAMiS,WAAWvQ,IAIhC4P,OAAQ,CAAC,WACTrX,QAAU,2BAGd+W,eAAO,SAAU,CACbM,OAAQ,CAAC,MACTL,SAFa,SAEJhW,EAAOqW,GACZ,IAAMlb,EAASkb,EAAO9C,GAAGvT,GACzB,OAAO7E,EAAOob,MAAQpb,EAAOob,MAAQpb,EAAO6D,WAIpD4B,QAAQwE,IAAI,uBACG,QACXqN,KAAM,WACF,OAAOpW,QAAQC,YC3FvB2a,QAAO1P,YAAY2P,eAAe,UAAYD,QAAOvP,YAGrDpB,IAAQ6Q,MAAMF,QAAO1O,gBACrB6O,UAAYH,QAAO1O,eAGnBtC,OAAIS,OAAO2Q,eAAgB,EAC3BpR,OAAIS,OAAO4Q,UAAW,EACtBrR,OAAIsR,IAAIC,IAER,IAAMC,GAAU,WACZC,OAAOD,UACPE,QAAKF,UACL9S,QAAmB8S,UACnBG,QAAOH,WAGLpX,GAAM,yDAAG,8GACLqO,OAAM+D,OADD,uBAELmF,QAAOnF,OAFF,uBAGLiF,OAAOjF,OAHF,uBAILkF,QAAKlF,OAJA,wBAKL9N,QAAmB8N,OALd,yBAMLoF,GAAWpF,OANN,QAQX3R,OAAOgX,IAAM,IAAI7R,OAAI,CACjB8R,OAAQ,SAAAC,GAAC,OAAIA,EAAEC,IACfC,cAAeT,KAChBU,OAAO,QAXC,4CAAH,qDAcZ9X,KAEAS,OAAO4R,iBAAiB,eAAgB+E,K,2DC9CxC,W,iQCOqBW,E,wDAEjB,WAAYC,GACZ,oCACI,eAEA,EAAKA,IAAMA,EACX,EAAKC,aAAe,KACpB,EAAKC,SAAW,EALpB,E,yCAOA,WACI,MAAO,S,mBAEX,WACI,OAAO7W,KAAK6W,W,mBAEhB,SAAMC,GACF9W,KAAK6W,SAAWC,I,kBAMpB,SAAKC,GACL,WACU3e,EAAO2e,EAAOtM,MAAM,KACpBuM,EAAarG,OAAOvY,EAAK,IACzB6e,EAAU7e,EAAK,GAMrB4H,KAAK4W,aAAeM,IAAcC,KAAKF,EACvC,CACIN,IAAK3W,KAAK2W,IACV7Z,QAAS,MAEb,SAACb,EAAKmb,EAAQC,GAEV,EAAKT,aAAe,KACpB,IAAIU,EAAM,GAEPrb,GACCiD,QAAQjC,MAAMhB,GACdiD,QAAQwE,IAAI2T,KAEZD,EAASzW,KAAKE,UAAUuW,GACxBC,EAAS1W,KAAKE,UAAUwW,GACxBC,EAAO,uBAAsBN,KAAcI,KAAUC,OAGzD,EAAKhN,KAAK,OAAQiN,GAClB,EAAK9D,WAGTxT,KAAKqK,KAAK,W,mBAKd,WAE6B,OAAtBrK,KAAK4W,cAA0B5W,KAAK4W,aAAaW,QAChDvX,KAAK4W,aAAaY,OAEtBxX,KAAKyX,yB,GAlEuCzM,KCD/B0M,E,wDAEjB,aACA,oCACI,eAEA,EAAKC,UAAY,EACjB,EAAKd,SAAW,EAJpB,E,yCAMA,WACI,MAAO,e,mBAEX,WACI,OAAO7W,KAAK6W,W,mBAEhB,SAAMC,GACF9W,KAAK6W,SAAWC,I,kBAMpB,SAAKC,GACL,WACU3e,EAAO2e,EAAOtM,MAAM,KACpBuM,EAAarG,OAAOvY,EAAK,IACzBwf,EAAQjH,OAAOvY,EAAK,IAE1B4H,KAAK+W,OAASA,EACd/W,KAAK2X,UAAYla,YAAW,WAExB,EAAKka,UAAY,EACjB,EAAKtN,KAAK,OAAS,6BAA4B2M,MAC/C,EAAKxD,UACNoE,GAEH5X,KAAKqK,KAAK,W,mBAKd,WAEOrK,KAAK2X,WACJza,aAAa8C,KAAK2X,WAEtB3X,KAAKyX,yB,GA9C6CzM,K,wBCMpDiL,E,wDAEF,aACA,oCACI,eAIA,EAAK4B,UAAY,IAAI/R,YACrB,EAAKgS,cAAe,EACpB,EAAKC,cAAgB,EACrB,EAAKC,kBAAoB,IAAI3P,IARjC,E,2CAaA,WAEI,IAAGrI,KAAK8X,aA6BR,OA5BA9X,KAAK8X,cAAe,EAGpB9X,KAAKiY,aAAa,aAClBjY,KAAKiY,aAAa,eAClBjY,KAAKiY,aAAa,eAClBjY,KAAKiY,aAAa,YAClBjY,KAAKiY,aAAa,cAClBjY,KAAKiY,aAAa,aAGlBjY,KAAK6X,UAAU7G,iBAAiB,OAAO,SAAAnV,GACnCqD,QAAQwE,IAAI,YAAa7H,EAAMzD,SAGnC4H,KAAK6X,UAAU7G,iBAAiB,OAAQhR,KAAKkY,QAAQrZ,KAAKmB,OAC1DA,KAAK6X,UAAU7G,iBAAiB,aAAchR,KAAKmY,cAActZ,KAAKmB,OAEtEd,QAAQwE,IAAK,kDACOwH,OAAUvE,+CACVuE,OAAUrE,mDACNqE,OAAUpE,yDACPoE,OAAUnE,4DACVmE,OAAUlE,oEACHkE,OAAU9D,yCAClC8D,OAAU3H,kCACD2H,OAAUlF,cAEtBrL,QAAQC,Y,qBAEnB,WACA,uBAC8BoF,KAAKgY,mBADnC,IACI,2BAAkD,iCAAnCI,GAAmC,WAC9CA,EAAO5E,SAFf,iC,2BAQA,SAAc6E,EAAWjgB,GAErB,IAAMkgB,EAAQ,cACRzc,EAAQ,IAAI0c,QAAQF,EAAWC,GAC/Bzc,EAAMzD,KAAOA,EACnB4H,KAAK6X,UAAUW,cAAc3c,K,kBAMjC,WAAO,WACH,OAA0B,IAAvBmE,KAAK+X,cACGpd,QAAQC,UAGZ,IAAID,SAAQ,SAAAC,GAEf,EAAK6d,KAAK,qBAAsB7d,Q,2BAGxC,SAAciB,GAEV,IAAMuc,EAAS,IAAIV,EACnB1X,KAAK0Y,YAAYN,EAAQvc,EAAMzD,Q,qBAEnC,SAAQyD,GAEJ,IAAMuc,EAAS,IAAI1B,EACfiC,OAAM1L,QAAQpB,mBAElB7L,KAAK0Y,YAAYN,EAAQvc,EAAMzD,Q,yBAEnC,SAAYggB,EAAQrB,GACpB,WACUF,EAAW7W,KAAK+X,gBACtB/X,KAAKgY,kBAAkBxP,IAAIqO,EAAUuB,GAErCA,EAAOQ,MAAM/B,GACbuB,EAAOK,KAAK,SAAS,WACjBvZ,QAAQwE,IAAK,UAAS0U,EAAOS,YAAYT,EAAO7a,YAAYwZ,qBAEhEqB,EAAOK,KAAK,QAAQ,SAACnB,GACjBpY,QAAQwE,IAAK,UAAS0U,EAAOS,YAAYT,EAAO7a,YAAYwZ,+BAAoCO,KAChG,EAAKwB,YAAYV,EAAQd,MAE7Bc,EAAOxE,KAAKmD,K,yBAEhB,SAAYqB,EAAQd,GACpB,WACItX,KAAKgY,kBAAkBe,OAAOX,EAAOS,SAErC7Y,KAAKgZ,gBAAgB1B,GACpB2B,SAAQ,WAEL/Z,QAAQwE,IAAK,UAAS0U,EAAOS,4CAEM,IAAhC,EAAKb,kBAAkBlU,OACtB,EAAKiU,cAAgB,EACrB,EAAK1N,KAAK,4B,mFAuBtB,WAAmB6O,GAAnB,gGAEUC,EAAa9V,IAAMC,KAAK4H,OAAUrE,eAAgBqS,GAF5D,SAGyBlZ,KAAKgE,OAAQ,cAAamV,QAHnD,OAGU1f,EAHV,OAIIyF,QAAQwE,IAAI,sBAAwByV,EAAa,YAAc1f,GAJnE,gD,8EAWA,SAAOmD,GACP,WACI,OAAO,IAAIjC,SAAQ,SAAAC,GACf,EAAKid,UAAUuB,WAAWxc,GAAQ,SAAAnD,GAC9BmB,EAAQnB,W,6BAUpB,SAAgBmD,GAChB,WACI,OAAO,IAAIjC,SAAQ,SAACC,EAASC,GAEzB,EAAKgd,UAAUuB,WAAY,4DAEjBxc,kHAKV,SAACnD,GACG,IAAM4f,EAAkB5f,EAAOyb,cAC5BmE,EAAgBnV,SAAS,UAAYmV,EAAgBnV,SAAS,aAC7DrJ,EAAQ,WAAU+B,4BAAiCnD,OAEnDmB,EAAQnB,W,qCAWxB,SAAwB6f,EAAcC,GAElCra,QAAQwE,IAAK,WAAU4V,GACvB,IAAME,EAAiB7Y,KAAKE,UAAU0Y,GACtC,OAAOvZ,KAAKgZ,gBAAiB,8BACVM,KAAgBE,+C,mCAUvC,SAAsBC,GAClB,OAAOzZ,KAAKgE,OAAQ,YAAWyV,QAC9Bjd,MAAK,SAAA/C,GACF,OAAOA,EAAOyK,SAAS,SAAW,GAAKzK,O,mCAQ/C,SAAsBigB,GAClB,OAAO1Z,KAAKgE,OAAQ,YAAW0V,QAC9Bld,MAAK,SAAA/C,GACF,OAAOA,EAAOyK,SAAS,SAAW,GAAKzK,S,GA7NhCuR,KAkOJ,WAAIiL,G,oCC9OnB,wCAGA,SAASxR,EAAKkV,EAASC,GAEnB,OAAK5Z,gBAAgByE,EAEdoV,EAAQ7gB,KAAKgH,KAAM2Z,EAASC,GAFE,IAAInV,EAAKkV,EAASC,GAqC3D,SAASC,EAAQF,EAASC,GAEtB,IAAI5X,MAAMC,QAAQ0X,GACd,MAAM,IAAIzd,MAAM,0DAGpB,IAaI4d,EAbAC,EAAY,qBAGZC,EAASha,KACTga,EAAO9X,KAAO,GACd8X,EAAO9X,KAAKtJ,OAAS+gB,EAAQ/gB,OAE9B+X,OAAOsJ,UAAUL,GAChBI,EAAOJ,OAASA,EAEhBA,EAAS,EAIb,IAAI,IAAIlhB,EAAI,EAAGA,EAAIihB,EAAQ/gB,SAAUF,EAAG,CACpC,GAA0B,kBAAfihB,EAAQjhB,KAAoBqhB,EAAUG,KAAKP,EAAQjhB,IAC1D,MAAM,IAAIwD,MAAM,gDAAkDyd,EAAQjhB,IAE9EqhB,EAAUI,UAAY,EAEtBL,EAAUH,EAAQjhB,GAClBshB,EAAO9X,KAAKxJ,GAAKohB,EACjBE,EAAQF,GAAYphB,EAAIkhB,EAU5B,OAAOI,EAtEXvV,EAAK3L,UAAU8gB,OAAS,EAExBnV,EAAK3L,UAAUshB,QAAU,WACrB,OAAOpa,KAAKkC,KAAK5C,MAAM,IAG3BmF,EAAK3L,UAAUuhB,QAAU,SAAS5X,GAC9B,OAAOkO,OAAOsJ,UAAUxX,IAASA,EAAMzC,KAAK4Z,OAAU5Z,KAAKkC,KAAKtJ,QAAW6J,EAAMzC,KAAK4Z,QAAW,GAGrGnV,EAAK3L,UAAUwhB,MAAQ,SAAS7X,GAC5B,GAAKzC,KAAKqa,QAAQ5X,GAClB,OAAOzC,KAAKkC,KAAKO,EAAMzC,KAAK4Z,SAGhCnV,EAAK3L,UAAU8H,MAAQ,SAAShC,GAC5B,GAAqB,kBAARA,EAAb,CAEAA,EAAMA,EAAIuW,OAAOoF,cACjB,IAAI,IAAI7hB,EAAI,EAAGA,EAAIsH,KAAKkC,KAAKtJ,SAAUF,EACnC,GAAIsH,KAAKkC,KAAKxJ,GAAG6hB,gBAAkB3b,EAC/B,OAAOlG,EAAIsH,KAAK4Z,SAoDbnV,U,oCCnFf,IAAI4R,EAAS,WAAa,IAAIxH,EAAI7O,KAAS8O,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACwL,SAAS,CAAC,UAAY3L,EAAI6D,GAAG7D,EAAI4L,UACxIlL,EAAkB,GCItB,IAEA,GACE,KAAF,WACE,MAAF,CACI,WAAJ,CACM,KAAN,OACM,QAAN,MAGE,KARF,WASI,MAAJ,CACM,SAAN,EACM,KAAN,MAGE,QAdF,WAcI,IAAJ,OACI,EAAJ,wBACM,EAAN,4BACM,EAAN,oCACM,EAAN,4BACA,kBAEE,cArBF,WAsBI,cAAJ,KC7BmV,I,YCO/U2B,EAAY,eACd,EACAmF,EACA9G,GACA,EACA,KACA,KACA,MAIa,OAAA2B,E,8BClBf5W,EAAOD,QAAUgN,QAAQ,S,qBCAzB/M,EAAOD,QAAUgN,QAAQ,O,6ECAzB/M,EAAOD,QAAUgN,QAAQ,W,qBCAzB/M,EAAOD,QAAUgN,QAAQ,O,mBCAzB/M,EAAOD,QAAUgN,QAAQ,S,4SCKJqT,EAEjB,aACA,uBAQI1a,KAAK2a,sBAAwB,GAM7B3a,KAAK4a,eAAiB,GAItB5a,KAAK6a,eAAiB,GAItB7a,KAAK2H,gBAAkB,GACvB3H,KAAK0H,oBAAqB,EAI1B1H,KAAK6H,mBAAqB,GAC1B7H,KAAK4H,uBAAwB,EAI7B5H,KAAK+H,eAAiB,GACtB/H,KAAK8H,mBAAoB,EAIzB9H,KAAK5H,KAAO,GAIZ4H,KAAK8a,SAAW,GAIhB9a,KAAKqM,UAAY,GAIjBrM,KAAK4M,SAAW,GAGhB5M,KAAK+a,MAAQ,GAKb/a,KAAKgb,OAAS,I,kEC5DDC,E,WAEjB,aAAc,uB,oGAQd,WAAWC,GAAX,6FAEIhc,QAAQwE,IAAK,UAASwX,EAAOtiB,8BAFjC,iBAGuBsiB,GAHvB,4DAGcC,EAHd,SAKWA,EAAMH,OAAOpiB,OALxB,oBAMkBmP,EAAiBoT,EAAMpT,gBAAkBoT,EAAMN,eAClD9S,GACC/H,KAAKob,YAAYD,EAAOpT,EAAgBoT,EAAMH,OAAO1X,KAAK,QAE3D6X,EAAMrT,kBAVrB,kCAWsB9H,KAAKqb,WAAWF,EAAOA,EAAMpT,gBAXnD,oCAakBoT,EAAMvT,sBAbxB,kCAekB5H,KAAKqb,WAAWF,EAAOA,EAAMtT,oBAf/C,kJAkBI3I,QAAQwE,IAAK,mBAlBjB,gE,2IAwBA,WAAiByX,EAAOG,GAAxB,oFAEQjY,IAAMiS,WAAWgG,GAFzB,mBAIYH,EAAMN,eAJlB,uBAKY3b,QAAQwE,IAAI,qFALxB,kBAMmB/I,QAAQC,WAN3B,OAQY0gB,EAAcjY,IAAMC,KAAK6X,EAAMN,eAAgBS,GAR3D,OAYItb,KAAKub,iBAAiBJ,EAAOG,GAZjC,gD,0FAcA,SAAiBH,EAAOK,GAEpB,IAAMC,EAAQzb,KAAK0b,eAAeP,GAClCjc,QAAQwE,IAAK,oBAAmB+X,EAAMnY,KAAK,4BAA4BkY,KAF3E,uBAIsBC,GAJtB,yBAIc1W,EAJd,QAMc4W,EAAWtY,IAAMsY,SAAS5W,GAC1B6W,EAASvY,IAAMC,KAAKkY,EAAWG,GACrCE,OAAIC,UAAU/W,EAAM6W,GAAQ,SAAA3f,GACxB,GAAGA,EAAK,CACJ,IAAMqB,EAAUrB,EAAM,sCAAwC2f,EAC/C,UAAZ3f,EAAIE,KACH+C,QAAQwE,IAAIpG,GAEZ4B,QAAQ6c,KAAKze,QAV7B,2BACA,IALJ,iC,4BAoBA,SAAe6d,GAEX,IAAMM,EAAQ,CACVN,EAAMP,eACLO,EAAMR,wBAA0BQ,EAAMP,eAAkBO,EAAMR,sBAAwB,MAE3F,OAAOc,EAAMjP,QAAO,SAAApS,GAAC,QAAMA,O,yBAE/B,SAAY+gB,EAAOK,EAAWle,GAE1B,GAAIA,EAAJ,CAGA,IAAM0e,EAAU3Y,IAAMC,KAAKkY,EAAW,cAChCpjB,EAAO,CACR,KACA,UAAQ,IAAImJ,MAAO0a,iBACnB,0BAAyBd,EAAMR,sBAC/B,mBAAkBQ,EAAMP,eACzBtd,GACFgG,KAAM,MAERuY,OAAIK,OAAOF,EAAS5jB,GACnB+jB,OAAM,SAAAlgB,GACHiD,QAAQjC,MAAMhB,EAAM,oCAAsC+f,W,oEC5FtE,SAASI,EAAU3Z,GAGf,OADAA,EAAMA,EAAI0S,OACH1S,EAAI4S,WAAW,OAAS5S,EAAI4S,WAAW,QASlD,SAASgH,EAAWC,EAAUC,GAE1B,IAAMC,EAAWnZ,IAAMmZ,SAASF,EAAUC,GAE1C,OAAOA,EAAWE,SAASD,GAO/B,SAASE,EAAQja,GAEb,OAAOka,EAAala,EAAKY,IAAMqZ,QAAQja,IAM3C,SAASmE,EAAUnE,GAEf,OAAOka,EAAala,EAAKY,IAAMuD,UAAUnE,IAM7C,SAASa,EAAKsZ,GAEV,OAAOD,EAAa3jB,KAAK,KAAM4jB,EAAWvZ,IAAMC,KAAK/J,MAAM8J,IAAOnD,YAGtE,SAASyc,EAAaE,EAAcC,GAEhC,OAAGV,EAAUS,GACFC,EAAQC,OAAO,GAAKD,EAExBA,EAGI,OACXT,aACAD,YACAM,UACA9V,YACAtD,QCrDiB0Z,E,WAKjB,aAAc,uB,oGASd,WAAWjY,EAAMkD,EAAagV,GAA9B,sHAEUvV,EAAiEO,EAAjEP,mBAAoBE,EAA6CK,EAA7CL,sBAAuBE,EAAsBG,EAAtBH,kBAC3CH,EAAwDM,EAAxDN,gBAAiBE,EAAuCI,EAAvCJ,mBAAoBE,EAAmBE,EAAnBF,eACvCC,EAAeC,EAAYD,aAG/BL,EAAkBD,EAAqBC,EAAkB,GACzDE,EAAqBD,EAAwBC,EAAqB,GAClEE,EAAiBD,EAAoBC,EAAiB,GAElD4S,EAAwB5V,GAAQ,GAChC6V,EAAiBD,EACjBE,EAAiB7a,KAAKkd,0BAA0BnY,GAAQoY,EAAYT,QAAQ3X,GAAQ,GACpFsH,EAAY4Q,EACZlC,EAAQrG,OAAE5T,OACV1I,EAAO,GACP0iB,EAAW,GACXK,EAAQ,IAAIT,EAlBpB,WAsBW1a,KAAKod,eAAexC,GAtB/B,qBAwBe5a,KAAKqd,2BAA2BzC,GAxB/C,kCA0B6B5a,KAAKsd,UAAU1C,GA1B5C,eA0BgBxiB,EA1BhB,OA2BgBiU,EAAYjU,EAAKiU,WAAaA,EAC9BA,EAAkC,kBAAdA,EAA0BA,EAAU5B,MAAM,KAAO4B,EACrErE,EAA6C,mBAAtB5P,EAAK4P,aAA8B5P,EAAK4P,aAAeA,EAC9E+S,EAAQ3iB,EAAK2iB,OAASA,EAGtBH,EAAiBxiB,EAAKwiB,gBAAkB,GACxCjT,EAAkBvP,EAAKuP,iBAAmBA,EAC1CE,EAAqBzP,EAAKyP,oBAAsBA,EAChDE,EAAiB3P,EAAK2P,gBAAkBA,EAExC6S,EAAiB5a,KAAKud,oBAAoB3C,EAAgBC,GAC1DlT,EAAkB3H,KAAKud,oBAAoB5V,EAAiBkT,GAC5DhT,EAAqB7H,KAAKud,oBAAoB1V,EAAoBgT,GAClE9S,EAAiB/H,KAAKud,oBAAoBxV,EAAgB8S,GAzC1E,UA2C2C7a,KAAKwd,eAAe7V,GA3C/D,eA2CgBD,EA3ChB,iBA4C8C1H,KAAKwd,eAAe3V,GA5ClE,eA4CgBD,EA5ChB,iBA6C0C5H,KAAKwd,eAAezV,GA7C9D,WA6CgBD,EA7ChB,OAgDgBH,EAAkBD,EAAqBC,EAAkB,GACzDE,EAAqBD,EAAwBC,EAAqB,GAClEE,EAAiBD,EAAoBC,EAAiB,IAElDoV,EAAYd,WAAWzB,EAAgBC,KACnCjT,IAAyBE,EArDjD,uBAyD0B,IAAI5L,MAAO,2IAzDrC,YA4De8D,KAAKod,eAAexC,KAAoC,IAAjB5S,EA5DtD,kCA8DiChI,KAAKyd,cAAc7C,GA9DpD,QA8DgBE,EA9DhB,qEAoEQK,EAAMH,OAAO9hB,KAAK,KAAEgI,YApE5B,yBAwEQia,EAAMJ,MAAQA,EACdI,EAAMR,sBAAwBA,EAC9BQ,EAAMP,eAAiBA,EACvBO,EAAMN,eAAiBA,EACvBM,EAAMxT,gBAAkBA,EACxBwT,EAAMtT,mBAAqBA,EAC3BsT,EAAMpT,eAAiBA,EACvBoT,EAAMzT,mBAAqBA,EAC3ByT,EAAMvT,sBAAwBA,EAC9BuT,EAAMrT,kBAAoBA,EAC1BqT,EAAM/iB,KAAOA,EACb+iB,EAAML,SAAWA,EACjBK,EAAM9O,UAAYA,EApF1B,kBAsFe8O,GAtFf,iE,8IA6FA,WAAgBuC,GAAhB,0GAEW,IAAI/iB,SAAQ,SAACC,EAASC,GACzB8I,IAAGuG,SAASwT,EAAc,CAAEC,SAAU,SAAU,SAAC1gB,EAAOkN,GACpD,GAAGlN,EACCpC,EAAQ,cAAa6iB,8BAAyCzgB,UAGlE,IACI,IAAM7E,EAAOuI,KAAKC,MAAMuJ,GACxBvP,EAAQxC,GACV,MAAMoC,GACJK,EAAOL,WAZvB,2C,8IAqBA,WAAoBogB,GAApB,8FAEQgD,EAAK,IAAIC,IAASC,gBACN,EAHpB,kBAKWF,EAAGhK,OACTpX,MAAK,SAAAuhB,GACUA,KAEfvhB,MAAK,kBAAMohB,EAAG5V,aAAa4S,EAAgB,CAAC,iBAC5Cpe,MAAK,SAAAse,GACF,IAAIkD,EAAelD,EAAS1iB,KAAK,GACjC,OAAO4lB,KAEV/E,SAAQ,WACL2E,EAAGpK,YAfX,2C,iGAkBA,SAA0BzO,GACtB,MAAuB,kBAATA,GAAqBA,EAAKnM,OAAS,GAAKyK,IAAMiS,WAAWvQ,K,iCAE3E,SAAoBA,EAAMkZ,GACtB,OAAIlZ,EAGG1B,IAAMiS,WAAWvQ,GAAQA,EAAO1B,IAAMC,KAAK2a,EAAiBlZ,GAFxD,K,wCAIf,SAA2BA,GACvB,MAA+B,UAAxB1B,IAAM6a,QAAQnZ,K,4BAEzB,SAAeA,GACX,IACI,OAAOpB,IAAGwa,UAAUpZ,GAAQ,IAAIqZ,SAClC,MAAM5jB,GACJ,GAAGA,GAAe,UAAVA,EAAE2B,KACN,OAAO,EAEP,MAAM3B,K,iCAIlB,SAAoBuK,GAChB,IACI,OAAOpB,IAAGwa,UAAUpZ,GAAQ,IAAIuI,cAClC,MAAM9S,GACJ,GAAGA,GAAe,UAAVA,EAAE2B,KACN,OAAO,EAEP,MAAM3B,K,4BAIlB,SAAeghB,GAEX,OAAO,IAAI7gB,SAAQ,SAACC,EAASC,GACrB2gB,EAIJK,OAAIwC,MAAM7C,EAAW,CAAE8C,WAAW,IAAQ,SAAAriB,GACnCA,GAAoB,WAAbA,EAAIE,KACVtB,EAAUoB,EAAF,iCAERrB,GAAQ,MAPZA,GAAQ,U,+HCvLpB2jB,EAAiB,EAOAC,E,wDAEjB,WAAYvW,GACZ,oCACI,eACA,EAAKwW,IAAMF,IACX,EAAKG,aAAezW,EACpB,EAAK0W,aAAe,KACpB,EAAKC,aAAc,EAQnB,EAAKC,GAAK,GACV,EAAKC,YAAcpK,OAAE/U,SAAS,EAAKmf,YAAa,IAAMvf,OAAcC,UAdxE,E,uCAgBA,WACI,OAAOQ,KAAKye,M,qBAEhB,WAGI,OAAOze,KAAK0e,aAAanX,YAErB,KAAK6F,OAAgB2R,YAAa/e,KAAKgf,sBAAuB,MAC9D,KAAK5R,OAAgB6R,UAAWjf,KAAKkf,mBAAoB,MACzD,KAAK9R,OAAgB+R,UAAWnf,KAAKof,mBAAoB,MACzD,KAAKhS,OAAgBiS,MAAOrf,KAAKsf,eAAgB,MACjD,KAAKlS,OAAgBmS,eAAgBvf,KAAKwf,wBAAyB,MACnE,QAAS,MAAM,IAAItjB,MAAM,4BAA8B8D,KAAK0e,aAAanX,e,qBAGjF,WAGOvH,KAAK2e,eACJ3e,KAAK2e,aAAalH,qBAClBzX,KAAK2e,aAAanL,SAEtBxT,KAAKyX,uB,4BAET,WAEI,OAAOzX,KAAK0e,e,sBAEhB,WACI,MAAQ,UAAS1e,KAAKye,yBAAyBze,KAAK0e,aAAaxd,gB,wBAErE,SAAWue,IAEHA,EAAM7mB,OAAS,GAGnBoH,KAAKqK,KAAK,QAASrK,KAAKye,IAAKgB,K,yBAEjC,WAEI,IAAMA,EAAQzf,KAAK6e,GACnB7e,KAAK6e,GAAK,GACV7e,KAAK0f,WAAWD,K,iCAEpB,WACA,WACUE,EAAgB3f,KAAK0e,aAAalX,gBAClCoY,EAAkB5f,KAAK0e,aAAajX,iBACpCoY,EAAaD,EAAgBxX,KAAI,SAAA0X,GAAG,OAAIzc,IAAMC,KAAKqc,EAAe,KAAOG,MAE/E,GAAG1D,IAAUuD,GACT,MAAMzjB,MAAO,yFAEjB,IAAIyH,IAAGoc,WAAWJ,GACd,MAAMzjB,MAAO,eAAcyjB,qBAE/B,IAAMK,EAAUC,IAASC,MAAML,EAAY,CACvCM,QAAS,MACTC,MAAO,EACPC,YAAY,EACZC,SAAU,IACVC,iBAAkB,CACdC,mBAAoB,IACpBC,aAAc,OAGrBvT,GAAG,OAAO,SAAA4P,GAEJzZ,IAAMsY,SAASmB,GAASzH,WAAW,cAGtC,EAAKwJ,GAAG3lB,KAAK4jB,GACb,EAAKgC,kBAGT9e,KAAK2e,aAAeqB,I,8BAKxB,WACA,WACUxE,EAAYxb,KAAK0e,aAAalX,gBAC9BkZ,EAAa1gB,KAAK0e,aAAajX,iBAErC9D,IAAGgd,QAAQnF,EAAW,CAAEmC,SAAU,SAAU,SAAC1gB,EAAOwiB,GAChD,GAAGxiB,EAEC,MADA,EAAKoN,KAAK,WAAY,EAAKoU,KACrB,IAAIviB,MAAMe,GAEjBwiB,IAECA,EAAQA,EAAMrX,KAAI,SAAAwY,GAAI,OAAIvd,IAAMC,KAAKkY,EAAWoF,MAChDnB,EAAQA,EAAMjT,QAAO,SAAAoU,GACjB,GAAGvd,IAAMsY,SAASiF,GAAMvL,WAAW,YAC/B,OAAO,EAEX,IAAMyK,EAAMc,EAAKnW,MAAM,KAAKK,MAC5B,OAAO4V,EAAWxc,SAAS4b,MAE/B,EAAKlB,aAAc,EACnB,EAAKc,WAAWD,IAEpB,EAAKpV,KAAK,WAAY,EAAKoU,U,8BAMnC,WACA,WACI1a,OAAKI,wBAAwB,+BAC5B3H,MAAK,SAAAqkB,GACF,EAAKjC,aAAc,EACnB,EAAKc,WAAWmB,EAAUpW,MAAM,MAChC,EAAKJ,KAAK,WAAY,EAAKoU,U,0BAGnC,WAEIze,KAAK4e,aAAc,EACnB5e,KAAK0f,WAAW,CAAC,KACjB1f,KAAKqK,KAAK,WAAYrK,KAAKye,O,mCAE/B,WACA,WACI1a,OAAKI,wBAAwB,gCAC5B3H,MAAK,SAAAiN,GACF,EAAKmV,aAAc,EACnB,EAAKc,WAAWjW,EAAW,CAACA,GAAY,IACxC,EAAKY,KAAK,WAAY,EAAKoU,Y,GAtJQzT,KCX1B8V,E,wDAEjB,aACA,oCACI,eAIA,EAAKC,2BAA6B,IAAI1Y,IAItC,EAAK2Y,sBAAwB,IAAI3Y,IAEjC,EAAK4Y,MAAQ,GAXjB,E,8CAaA,WAEIjhB,KAAKkhB,gBACLlhB,KAAKyX,uB,2BAOT,SAAcxP,EAAakZ,GAEvB,IAAMC,EAAW,IAAI5C,EAAkBvW,GACvC/I,QAAQwE,IAAK,iCAAgC0d,EAASlgB,YAEtDlB,KAAK+gB,2BAA2BvY,IAAI4Y,EAAStK,GAAIqK,GACjDnhB,KAAKghB,sBAAsBxY,IAAI4Y,EAAStK,GAAIsK,GAE5CA,EAASlU,GAAG,QAASlN,KAAKqhB,iBAAiBxiB,KAAKmB,OAChDohB,EAASlU,GAAG,WAAYlN,KAAKshB,oBAAoBziB,KAAKmB,OACtDohB,EAASG,Y,2BAKb,WACI,IAAMC,EAAc,eAAIxhB,KAAKghB,sBAAsB9e,QACnDlC,KAAKyhB,eAAeD,GACpBxhB,KAAKihB,MAAQ,K,0BAEjB,WACI,OAAOjhB,KAAKghB,sBAAsBld,KAAO,I,qBAE7C,WACI,OAAO9D,KAAKihB,MAAMroB,OAAS,I,qBAE/B,WACI,OAAOoH,KAAKihB,MAAMnW,Q,wBAKtB,WACI,OAAO9K,KAAKihB,Q,0BAEhB,WACI,OAAOjhB,KAAKihB,MAAMroB,S,4BAEtB,SAAe4oB,GACf,WACIA,EAAcA,EAAYhV,QAAO,SAAAsK,GAAE,OAAI,EAAKkK,sBAAsBU,IAAI5K,MAD1E,uBAE4B0K,GAF5B,IAEI,2BACA,KADUG,EACV,QACUP,EAAWphB,KAAKghB,sBAAsB9iB,IAAIyjB,GAChDziB,QAAQwE,IAAK,mCAAkC0d,EAASlgB,YAExDlB,KAAKghB,sBAAsBjI,OAAO4I,GAClC3hB,KAAK+gB,2BAA2BhI,OAAO4I,GACvCP,EAASrL,WATjB,iC,8BAYA,SAAiB4L,EAAYlC,GAEzB,IAAM0B,EAAgBnhB,KAAK+gB,2BAA2B7iB,IAAIyjB,GACpD1Z,EAAcjI,KAAKghB,sBAAsB9iB,IAAIyjB,GAAYC,iBAC/D5hB,KAAKihB,MAAM/nB,KAAK,CACZ6hB,MAAOrG,OAAE5T,OACT+gB,gBAAiBnN,OAAEtT,iBACnB+f,cAAeA,EAAc7hB,MAAM,GACnCmgB,QACAxX,YAAaA,EAAYsG,UAE7BvO,KAAKqK,KAAK,OACVnL,QAAQwE,IAAK,uBAAsBie,sB,iCAEvC,SAAoBA,GAEhB3hB,KAAKyhB,eAAe,CAACE,IACrB3hB,KAAKqK,KAAK,gB,GA9F8BW,K,YCN3B8W,G,qBAEjB,aACA,uBACI9hB,KAAK+hB,QACLlpB,OAAOmpB,KAAKhiB,M,4CAEhB,WACIA,KAAK+a,MAAQ,GACb/a,KAAK6hB,gBAAkB,GACvB7hB,KAAKyf,MAAQ,GACbzf,KAAKiiB,UAAY,EACjBjiB,KAAK4gB,KAAO,GACZ5gB,KAAKkiB,WAAa,GAClBliB,KAAKmiB,eAAiB,EACtBniB,KAAK4M,SAAW,GAChB5M,KAAKoiB,OAAS,K,uBAElB,WACI,yBACOpiB,U,MCRFqiB,EAAb,wDAEI,aACA,6BACI,eACA,IAAMC,EAAO,kBAFjB,OAGI,EAAKC,kBAAmB,EACxB,EAAKC,WAAahe,OAAoBie,QACtC,EAAKC,OAASle,OAAoBie,QAClC,EAAKE,QAAU,IAAIC,MAAM,IAAId,EACzB,CACItZ,IAAK,WAGD,OAFAqa,QAAQra,IAAR,MAAAqa,QAAe3iB,WACfoiB,EAAKjY,KAAK,SAAUiY,EAAKK,UAClB,KAInB,EAAKzV,GAAG,YAAY,SAAC6N,EAAO8G,EAAiBpC,GACzC,EAAKkD,QAAQ5H,MAAQA,EACrB,EAAK4H,QAAQd,gBAAkBA,EAC/B,EAAKc,QAAQlD,MAAQA,EACrB,EAAKkD,QAAQV,UAAYxC,EAAM7mB,UAEnC,EAAKsU,GAAG,iBAAiB,SAACgV,EAAYC,EAAgBvB,GAClD,EAAK+B,QAAQT,WAAaA,EAC1B,EAAKS,QAAQR,eAAiBA,EAC9B,EAAKQ,QAAQ/B,KAAOA,KAExB,EAAK1T,GAAG,iBAAiB,SAAAR,GACrB,EAAKiW,QAAQ/V,SAAWF,KAE5B,EAAKQ,GAAG,eAAe,WACnB,EAAKyV,QAAQ/V,SAAW,MAE5B,EAAKM,GAAG,eAAe,SAAA4V,GACnB,EAAKH,QAAQP,OAASU,KAE1B,EAAK5V,GAAG,aAAa,WACjB,EAAKyV,QAAQP,OAAS,MAE1B,EAAKlV,GAAG,UAAU,kBAAM,EAAKyV,QAAQZ,WACrC,EAAK7U,GAAG,gBAAgB,kBAAM,EAAKyV,QAAQZ,WAC3C,EAAK7U,GAAG,cAAc,kBAAM,EAAKyV,QAAQZ,WAEzC,EAAKgB,iBAAmB,IAAI/F,EAC5B,EAAKgG,gBAAkB,IAAI/H,EAC3B,EAAKgI,oBAAsB,IAAInC,EAC/B,EAAKmC,oBAAoB/V,GAAG,MAAO,EAAKgW,eAAerkB,KAApB,oBACnC,EAAKokB,oBAAoB/V,GAAG,WAAY,EAAKoU,oBAAoBziB,KAAzB,oBA9C5C,EAHJ,2CAsDI,WAEI,OAAOlE,QAAQC,YAxDvB,qBA0DI,WAEIoF,KAAKijB,oBAAoBlN,UACzB/V,KAAKmjB,MAAQ3e,OAAoBie,UA7DzC,iBAmEI,SAAI/V,GAEA1M,KAAKojB,KAAK,CAAC1W,MArEnB,oBA0EI,WAEI,IAAMJ,EAAgBqM,OAAMtM,UAAUA,UAAUjE,KAAI,SAAAhO,GAAC,OAAIA,EAAEmD,QAC3DyC,KAAKojB,KAAK9W,KA7ElB,kBA+EI,SAAKA,GAED,GAAItM,KAAKwS,YAAT,CAIAtT,QAAQwE,IAAK,uBAAsB4I,EAAchJ,KAAK,SACtDtD,KAAKmjB,MAAQ3e,OAAoB6e,KAKjC,IAXJ,EAWUC,EAAiC3K,OAAMtM,UAAUkX,oCAAoCjX,GAX/F,iBAYkDgX,EAA+Blb,KAZjF,IAYI,2BACA,iCADSob,EACT,KAD0BC,EAC1B,KACUxb,EAAc0Q,OAAM1L,QAAQyW,qBAAqBF,GACvDxjB,KAAKijB,oBAAoBU,cAAc1b,EAAawb,IAf5D,oCAEQvkB,QAAQwE,IAAI,yCAlFxB,mBAkGI,YACO1D,KAAK4jB,gBAAkB5jB,KAAK6jB,YAC3B7jB,KAAKmjB,MAAQ3e,OAAoBsf,UApG7C,oBAuGI,WACO9jB,KAAK+jB,YAAc/jB,KAAKwiB,aAAehe,OAAoBwf,WAC1DhkB,KAAKmjB,MAAQ3e,OAAoBwf,WAEjChkB,KAAKmjB,MAAQ3e,OAAoB6e,OA3G7C,kBA8GI,WACIrjB,KAAKijB,oBAAoB/B,gBACzBlhB,KAAKmjB,MAAQ3e,OAAoBie,UAhHzC,wCAkHI,WAEOziB,KAAKwS,cAGJxS,KAAKijB,oBAAoBgB,eAGzBjkB,KAAKmjB,MAAQ3e,OAAoB6e,KAFjCrjB,KAAKkkB,UAxHjB,4BA+HI,WAEIlkB,KAAKmkB,aAjIb,iCAmII,WACOnkB,KAAK4jB,gBACR5jB,KAAKokB,+BArIb,sBAuII,WACA,WACQpkB,KAAKijB,oBAAoBoB,YAC1BrkB,KAAKuiB,mBACRviB,KAAKuiB,kBAAmB,EACxBviB,KAAKmjB,MAAQ3e,OAAoBwf,WAEjChkB,KAAKskB,mBACJ9nB,KAAKwD,KAAKukB,iBAAiB1lB,KAAKmB,OAChCxD,KAAKwD,KAAKwkB,gBAAgB3lB,KAAKmB,OAC/BxD,KAAKwD,KAAKykB,eAAe5lB,KAAKmB,OAC9BxD,MAAK,WACF,EAAK4nB,6BACL,EAAK7B,kBAAmB,SApJpC,8BAuJI,WAEI,OAAO,IAAI5nB,SAAQ,SAAAC,GAAa6C,WAAW7C,EAAS,QAzJ5D,uFA2JI,8GAEUoF,KAAK0kB,cAFf,cAIIxlB,QAAQwE,IAAK,sCAAqC1D,KAAKijB,oBAAoB0B,iCAC3E3kB,KAAKqK,KAAK,gBALd,SAMUtG,OAAKiV,gBAAiB,wCANhC,gDA3JJ,+IAmKI,sHAEQ4L,EAAkB,GAF1B,UAIW5kB,KAAK6kB,eAAgB7kB,KAAKijB,oBAAoBoB,UAJzD,mBAW4BrkB,KAAKijB,oBAAoB6B,UAJzC/J,EAPZ,EAOYA,MACA8G,EARZ,EAQYA,gBACAV,EATZ,EASYA,cACA1B,EAVZ,EAUYA,MACAxX,EAXZ,EAWYA,YACJjI,KAAKqK,KAAK,WAAY0Q,EAAO8G,EAAiBpC,EAAMngB,MAAM,IAC1DJ,QAAQwE,IAAK,OAAMqX,kBAAsB0E,EAAM7mB,iBAEvCF,EAAI,EAfpB,UAewBsH,KAAK6kB,gBAAgBnsB,EAAI+mB,EAAM7mB,QAfvD,iCAiBkBoH,KAAK0kB,cAjBvB,cAkBkB9D,EAAOnB,EAAM/mB,GAGnBwG,QAAQwE,IAAK,qBAAoBhL,MAAMkoB,MArBnD,UAsBgC5gB,KAAK+iB,iBAAiBgC,KAAKnE,EAAM3Y,EAAakZ,GAtB9E,WAsBkBhG,EAtBlB,UAyBgBA,EAAMH,OAAOpiB,OAAS,GAzBtC,wBA2BgBoH,KAAKqK,KAAK,gBAAiB8Q,EAAMJ,MAAOriB,EAAGkoB,GA3B3D,UA4BsB5gB,KAAKglB,kBAAkB7J,GA5B7C,QA6BgBnb,KAAKqK,KAAK,eA7B1B,eAgCYua,EAAgB1rB,KAAKiiB,GAhCjC,UAiCkBnb,KAAK0kB,YAAY,KAAM/L,OAAM1L,QAAQ3B,sBAjCvD,UAeiE5S,EAfjE,uBAmCQsH,KAAKqK,KAAK,UAnClB,gDAsCWua,GAtCX,iDAnKJ,8IA2MI,WAAqBA,GAArB,wFAEI1lB,QAAQwE,IAAI,8CAFhB,SAGUK,OAAKT,OAHf,cAMOtD,KAAK6kB,aACJ9gB,OAAKI,wBAAyB,8BAG9BnE,KAAKgjB,gBAAgBiC,KAAKL,GAG9B1lB,QAAQwE,IAAI,4BACZ1D,KAAKqK,KAAK,cAdd,SAeUtG,OAAKiV,gBAAiB,WAfhC,gDA3MJ,kJAgOI,WAAwBmC,GAAxB,qGAEU9O,EAAYsM,OAAMtM,UAAU6Y,WAAW/J,EAAM9O,WAFvD,iBAG0BA,GAH1B,gEAGcO,EAHd,0BAOkB5M,KAAKmlB,kBAAkBhK,EAAOvO,GAPhD,wBAUgCA,EAASwY,SAVzC,kEAUsBhD,EAVtB,QAYgBpiB,KAAKqK,KAAK,cAAe+X,EAAOU,YAZhD,UAamC/e,OAAKI,wBAAwBie,EAAOU,WAAYV,EAAO7I,YAb1F,WAaoB9f,EAbpB,QAemBuG,KAAK6kB,WAAWprB,GAfnC,sEAgBsBuG,KAAK0kB,YAAYjrB,EAAQkf,OAAM1L,QAAQ5B,uBAhB7D,QAiBgBrL,KAAKqK,KAAK,aAjB1B,gNAsBYnL,QAAQjC,MAAR,MACAke,EAAMH,OAAO9hB,KAAK,KAAEgI,YAvBhC,UAwBkB6C,OAAKI,wBAAyB,8BAxBhD,yBAyBkBnE,KAAK0kB,YAAY,KAAM/L,OAAM1L,QAAQ1B,mBAzBvD,sBA6Be4P,EAAMH,OAAOpiB,OA7B5B,yDA8BeoH,KAAK6kB,aA9BpB,sEA+BkB7kB,KAAK0kB,YAAY,KAAM/L,OAAM1L,QAAQ7B,yBA/BvD,yBAgCkBpL,KAAKqlB,gBAAgBlK,EAAOvO,GAhC9C,iQAhOJ,yFA0QI,SAAkBuO,EAAOvO,GAIrB,OAFA1N,QAAQwE,IAAK,aAAYkJ,EAASrP,+BAA+B4d,EAAMJ,UACvE/a,KAAKqK,KAAK,gBAAiBuC,EAASrP,MAC7BwG,OAAKiV,gBAAiB,gDAEhBpM,EAASrP,uGAGWoD,KAAKE,UAAUsa,UAnRxD,6BA0RI,SAAgBA,EAAOvO,GAInB,OAFA1N,QAAQwE,IAAK,aAAYkJ,EAASrP,6BAA6B4d,EAAMJ,UACrE/a,KAAKqK,KAAK,eACHtG,OAAKC,OAAQ,+HA9R5B,wBAoSI,SAAWshB,GAEP,SAAGtlB,KAAKwS,aAAgC,SAAjB8S,KACnBtlB,KAAKmjB,MAAQ3e,OAAoBie,SAC1B,KAxSnB,yBA4SI,SAAY6C,EAAcC,GAC1B,WACI,OAAGvlB,KAAK+jB,YAAcwB,GAA+B,UAAjBD,GAEhCpmB,QAAQwE,IAAI,uCACZ1D,KAAKmjB,MAAQ3e,OAAoBsf,OAE1B,IAAInpB,SAAQ,SAAAC,GACf,EAAK6d,KAAK,SAAS,SAAA0K,GACZA,GAAS3e,OAAoBsf,QAC5BlpB,WAKTD,QAAQC,YA3TvB,sBA8TI,WAEI,MAAO,CACHuoB,MAAO3e,OAAoB8V,MAAMta,KAAK0iB,QACtC8C,KAAMxlB,KAAKijB,oBAAoBwC,aAC/BC,OAAQ1lB,KAAK2iB,QAAQgD,eAnUjC,kBAsUI,WACI,OAAO3lB,KAAK2iB,QAAQgD,cAvU5B,iBAyUI,WACI,OAAO3lB,KAAK0iB,QA1UpB,IA4UI,SAAUpkB,GACN0B,KAAKwiB,WAAaxiB,KAAK0iB,OACvB1iB,KAAK0iB,OAASpkB,EACd0B,KAAKqK,KAAK,QAAS/L,KA/U3B,oBAiVI,WAAW,OAAO0B,KAAKmjB,QAAU3e,OAAoB6e,OAjVzD,uBAkVI,WAAc,OAAOrjB,KAAKmjB,QAAU3e,OAAoBie,UAlV5D,sBAmVI,WAAa,OAAOziB,KAAKmjB,QAAU3e,OAAoBsf,SAnV3D,0BAoVI,WAAiB,OAAO9jB,KAAKmjB,QAAU3e,OAAoBwf,eApV/D,GAAoChZ,K,oECV9B4a,G,UAAQve,EAAQ,SAUhBwe,EAAwB,SAMjBC,EAAb,WAEI,aACA,uBACI9lB,KAAKzC,KAAO,GACZyC,KAAK+lB,YAAc,GACnB/lB,KAAK+E,KAAO,GACZ/E,KAAK2U,OAAS,GAPtB,qDAaI,SAAiBqR,GAuBb,IAAMnoB,EAAImoB,EACJC,EAAa,IAAIH,EAKvB,OAJMG,EAAW1oB,KAAOM,EAAEqoB,SACpBD,EAAWF,YAAcloB,EAAEkoB,YAC3BE,EAAWtR,OAAS9W,EAAE8W,OAAS9W,EAAE8W,OAAOvM,KAAI,SAAAhO,GAAC,OAAI+rB,GAAgBC,UAAUhsB,MAAM,GACjF6rB,EAAWlhB,KAAOlH,EAAEwoB,KAAKthB,KACxBkhB,MA1Cf,KAiDaE,GAAb,WAEI,aACA,uBACInmB,KAAKzC,KAAO,GACZyC,KAAK+lB,YAAc,GACnB/lB,KAAKsmB,UAAY,GACjBtmB,KAAKumB,YAAa,EAClBvmB,KAAKuC,aAAe,KAR5B,qDAWI,SAAiBikB,GAAgB,IACrBjpB,EAAoDipB,EAApDjpB,KAAMwoB,EAA8CS,EAA9CT,YAAaxjB,EAAiCikB,EAAjCjkB,aAAckkB,EAAmBD,EAAnBC,SAAU/qB,EAAS8qB,EAAT9qB,KAC7CgrB,EAAQ,IAAIP,EAOlB,OANIO,EAAMnpB,KAAOA,EACbmpB,EAAMX,YAAcA,EACpBW,EAAMnkB,aAAeA,GAAgB,KACrCmkB,EAAMH,cAA4B,IAAbE,GACrBC,EAAMJ,UAAY5qB,EAAKgS,MAAMpO,MAAM,GAEhConB,MApBf,KAiDMC,G,2JAOF,WAAqBvB,GAArB,qHAEWQ,EAAMgB,QAAQ,CACjBC,OAAO,EACPpH,MAAO2F,EAAQhd,KAAI,SAAA0e,GAAC,OAAIA,EAAEC,kBAE7BvqB,MAAK,SAAAwqB,GAEF,IAAI,IAAItuB,EAAI,EAAGA,EAAIsuB,EAAapuB,SAAUF,EAC1C,CACI,IAAMqtB,EAAciB,EAAatuB,GAC9B,EAAKuuB,YAAYlB,IAChB,EAAKmB,mBAAmB1e,IAAIud,EAAYG,SAAUH,QAZlE,2C,4EAsBA,SAAY3D,GAER,IAAI2D,EAAc/lB,KAAKknB,mBAAmBhpB,IAAIkkB,EAAO7kB,MACrD,OAAIwoB,IACA7mB,QAAQ6c,KAAM,0CAAyCqG,EAAO7kB,yCACvD,M,yBAQf,SAAmByoB,GAEf,MAAkC,WAA3BA,EAAiB1N,OACS,aAA1B0N,EAAiBmB,MACjBnB,EAAiBoB,SAAS/R,WAAW,Y,qBAQhD,SAAe2Q,GAEX,MAAkC,WAA3BA,EAAiB1N,OACS,WAA1B0N,EAAiBmB,OACW,IAA5BnB,EAAiBqB,aACoB7pB,WAA9BwoB,EAAiBoB,a,oBA3DjCT,G,qBAE0B,IAAIte,K,IAgE9Bif,G,gGASF,SAAaC,EAAeC,GAExB,OAAOxnB,KAAKynB,sBAAsBF,EAAeC,K,mCAGrD,SAA6BE,EAAuBF,GAEhD,IAEIhM,EAFA4J,EAAU,GACVuC,EAAU,GAEVC,EAAc,CACd,CACIC,UAAWL,EACXT,aAAcW,IAGtB,MAAMlM,EAAYoM,EAAY9c,MAC9B,CACI,IAAM+c,EAAYrM,EAAUqM,UACtBC,EAAmB,GAAED,cAAsBA,wBAAgCA,UACjFF,EAAQzuB,KAAK4uB,GAIb,IADA,IAAMpa,EAAQ/J,IAAGokB,YAAYvM,EAAUuL,cAC/BruB,EAAI,EAAGA,EAAIgV,EAAM9U,SAAUF,EACnC,CACI,IAAMsvB,EAAYta,EAAMhV,GAAG+R,MAAM,KACjC,GAAGud,EAAUpvB,OAAS,EAClB,MAAM,IAAIsD,MAAM,2DAGpB,IAAM+rB,EAAuBD,EAAU,GACjCE,EAAkB,GAAEL,KAAaI,IACjCE,EAAmB9kB,IAAMC,KAAKkY,EAAUuL,aAAcrZ,EAAMhV,IAC/DiL,IAAGE,SAASskB,GAAkB7a,cAE7Bsa,EAAY1uB,KAAK,CACb2uB,UAAWK,EACXnB,aAAcoB,KAKlBR,EAAQzuB,KAAM,iBAAgBivB,QAAuBD,QACrD9C,EAAQlsB,KAAK,IAAIkvB,GAAOF,EAAgBL,EAAWM,MAI/D,MAAO,CACHE,aAAcV,EAAQrkB,KAAK,IAC3B8hB,e,KAKNgD,GAEF,WAAY7qB,EAAMsqB,EAAWd,GAC7B,uBACI/mB,KAAKzC,KAAOA,EACZyC,KAAK6nB,UAAYA,EACjB7nB,KAAK+mB,aAAeA,GAQfuB,GAAb,WAEI,aACA,uBACItoB,KAAKuoB,oBAAsB,IAAIlgB,IAC/BrI,KAAKwoB,YAAc,IAAInb,OAAewY,GAAuB,GALrE,2CAUI,WAEI,OAAO7lB,KAAKyoB,eAZpB,qBAcI,cAdJ,iFAmBI,6GAEU5c,EAAoB8M,OAAM1L,QAAQpB,kBAClC6c,EAAuBnT,OAAOvO,sBACpC9H,QAAQwE,IAAI,2BACZxE,QAAQwE,IAAK,sBAAqBmI,QAAwB6c,KAL9D,SAOU1oB,KAAK2oB,QAAQD,GAPvB,WAQO7c,EARP,iCAUc7L,KAAK2oB,QAAQ9c,GAV3B,wBAWc9H,OAAKC,OAAQ,8CAA6C6H,QAXxE,QAcI3M,QAAQwE,IAAI,0BAdhB,iDAnBJ,8EAmCI,SAAQklB,GAEJ,GAAIA,EAAgBzT,OAApB,CAMA,IAPJ,MAKuCmS,GAA8BuB,MAAMD,EAAiB/C,GAAhFwC,EALZ,EAKYA,aAAejD,EAL3B,EAK2BA,QAEf1sB,EAAI,EAAGA,EAAI0sB,EAAQxsB,SAAUF,EACrC,CACI,IAAMowB,EAAa1D,EAAQ1sB,GAAG6E,KAAKkN,MAAM,KACzCzK,KAAKuoB,oBAAoB/f,IAAI4c,EAAQ1sB,GAAG6E,KAAM6nB,EAAQ1sB,IACtDsH,KAAKwoB,YAAYO,OAAOD,GAAY,GACpC5pB,QAAQwE,IAAI,WAAa0hB,EAAQ1sB,GAAG6E,MAKxC,OAFAopB,GAA4BqC,QAAQ5D,GAE7BrhB,OAAKC,OAAOqkB,EAAgB,oBArD3C,2BA2DI,WACI,OAAOroB,KAAKwoB,YAAYS,cA5DhC,+BAkEI,WACI,OAAOjnB,MAAMknB,KAAMlpB,KAAKuoB,oBAAoBrmB,UAnEpD,gGA0EI,WAAgC4gB,GAAhC,0FAEUV,EAASpiB,KAAKuoB,oBAAoBrqB,IAAI4kB,GACxCV,EAHR,sBAIc,IAAIlmB,MAAO,+BAA8B4mB,GAJvD,gCAOW,IAAInoB,SAAQ,SAAAC,GACf,IAAMiD,EAAI8oB,GAA4B5B,KAAK3C,GACrC6D,EAAaH,EAAiBM,UAAUvoB,GAC9CjD,EAAQqrB,OAVhB,gDA1EJ,iECzPIkD,GAAO,EACPC,GAAM,KAGGC,GAAc,CACvBC,cAAe,EACfC,QAAS,GAQPvT,G,wDAEF,aACA,oCACI,eACA,EAAK8B,cAAe,EACpB,EAAK4K,OAAS2G,GAAYC,cAG1B,EAAKE,YAAc,KACnB,EAAKC,gBAAkB,IAAIpH,EAC3B,EAAKqH,SAAW,IAAIpB,GARxB,E,oGAaA,kGAEOtoB,KAAK8X,aAFZ,wDAGI9X,KAAK8X,cAAe,EAHxB,SAKU9X,KAAKypB,gBAAgB1Y,OAL/B,uBAMU/Q,KAAK0pB,SAAS3Y,OANxB,OAQO4H,OAAM1L,QAAQtB,eACb3L,KAAK2pB,cAET3pB,KAAKmjB,MAAQkG,GAAYE,QACzBvpB,KAAKqK,KAAK,eACVnL,QAAQwE,IAAI,uBAbhB,iD,2IAeA,yGAEIylB,GAAOxQ,OAAM1L,QAAQrB,WACrBwd,GAAMQ,MAgBNR,GAAIlrB,IAAI,WAAW,SAAC2rB,EAAKC,GACrB,IAAMpE,EAAS,gBACXxe,SAAUqO,OAAOrO,SACjBC,aAAcoO,OAAOpO,aACrB4iB,QAASxU,OAAOvP,WAChBgkB,MAAM,IAAIzoB,MAAO0a,kBACd,EAAKwN,gBAAgBQ,YAG5BH,EAAII,UAAU,IAAK,CACf,eAAgB,qBAEpBJ,EAAIK,IAAIxpB,KAAKE,UAAU6kB,EAAQ,KAAM,GAAK,SAM9C1lB,KAAKwpB,YAAcJ,GAAIgB,OAAOjB,GAAM,WAAW,WAC3CjqB,QAAQwE,IAAK,0CAAyCylB,OACvDkB,OAWHnrB,QAAQwE,IAAI,mBAlDhB,gD,8EAoDA,WACA,WACIxE,QAAQwE,IAAK,qBACb1D,KAAKwpB,aAAexpB,KAAKwpB,YAAYhW,OAAM,WACvC,EAAKgW,YAAc,KACnBtqB,QAAQwE,IAAK,qBAEjB1D,KAAKypB,gBAAgB1T,UACrB/V,KAAKypB,gBAAkB,KACvBzpB,KAAK0pB,SAAS3T,UACd/V,KAAK0pB,SAAW,O,0BAEpB,WACI,OAAO1pB,KAAKypB,kB,mBAEhB,WACI,OAAOzpB,KAAK0pB,W,iBAEhB,WACI,OAAO1pB,KAAK0iB,Q,IAEhB,SAAUpkB,GACN0B,KAAK0iB,OAASpkB,EACd0B,KAAKqK,KAAK,QAAS/L,O,GA1GN0M,KA+GL5L,cAAOirB,OAAS,IAAIrU,I,8SCvIfsU,E,WAEjB,WAAYxmB,GAER,GADJ,uBACOA,GAAQ,EACP,MAAM,IAAI5H,MAAM,gCAEpB8D,KAAKuqB,OAAS,IAAIvoB,MAAM8B,GACxB9D,KAAKwqB,MAAQ1mB,EACb9D,KAAKyqB,SAAW,E,2CAGpB,SAAKhoB,GAEDzC,KAAKuqB,OAAOvqB,KAAKyqB,UAAYhoB,EAC7BzC,KAAKyqB,UAAYzqB,KAAKyqB,SAAW,GAAKzqB,KAAKwqB,Q,mBAE/C,WACIxqB,KAAKuqB,OAAS,IAAIvoB,MAAMhC,KAAKwqB,OAC7BxqB,KAAKyqB,SAAW,I,qBAKpB,WAEI,+BACOzqB,KAAKuqB,OAAOjrB,MAAMU,KAAKyqB,WAD9B,eAEOzqB,KAAKuqB,OAAOjrB,MAAM,EAAGU,KAAKyqB,gB,KCtBnCC,EAAkB,CAAC,MAAO,OAAQ,SAElCxU,E,wDAEF,aACA,oCACI,eACA,EAAKyU,aAAc,EACnB,EAAKnlB,QAAU,CACXgG,aAAc,GACdC,sBAAuB,GAE3B,EAAKmf,uBAAyB,GAC9B,EAAKC,eAAiB,KACtB,EAAKC,uBAAyB,EAC9B,EAAKC,cAAgB,KAVzB,E,oGAeA,kGAEO/qB,KAAK2qB,YAFZ,wDAKI3qB,KAAK2qB,aAAc,EACnB3qB,KAAKwF,QAAU,CACXgG,aAAcmN,OAAM1L,QAAQzB,cAAgB+J,OAAOzO,kBACnD2E,sBAAuBkN,OAAM1L,QAAQxB,sBAAwB,EAAIkN,OAAM1L,QAAQxB,sBAAwB,EACvGC,qBAAsBiN,OAAM1L,QAAQvB,qBAAuB,EAAIiN,OAAM1L,QAAQvB,qBAAuB,KAExG1L,KAAK+qB,cAAgB,IAAIT,EAAatqB,KAAKwF,QAAQkG,sBAGnDgf,EAAgBpiB,QAAQ,SAAS0iB,GAE7B,IAAM1I,EAAOtiB,KACPirB,EAAiB/rB,QAAQ8rB,GAAQnsB,KAAKK,SAC5Cc,KAAK4qB,uBAAuBI,GAAUC,EAEtC/rB,QAAQ8rB,GAAU,WACd,IAAM/qB,EAAO+B,MAAMlJ,UAAUwG,MAAMtG,KAAKkH,WACxC+qB,EAAe1xB,MACX2F,QACAe,GAEJqiB,EAAK4I,OAAOF,EAAQ/qB,KAE1BpB,KAAKmB,OA5BX,SA8BUA,KAAKmrB,uBA9Bf,OA+BInrB,KAAKorB,mBACLprB,KAAKqrB,oBAELrrB,KAAKqK,KAAK,eACVnL,QAAQwE,IAAK,0BAAyB1D,KAAKwF,QAAQgG,cAnCvD,iD,6EAqCA,SAAOwf,EAAQ/qB,GAEX,IAAMoB,EAAO,IAAIE,KACXpE,EAAQ,CAACkE,EAAKiqB,qBAAuB,IAAGN,EAAOzQ,oBAAvC,sBAA8Dta,GAA9D,CAAqE,OAAKqD,KAAK,KACvFioB,EAAY,CAAE,eAAcP,MAAW3pB,EAAKiqB,wBAAhC,sBAA2DrrB,GAA3D,CAAkE,WAASqD,KAAK,KAE/FjC,EAAKK,YAAc1B,KAAK8qB,wBACvB9qB,KAAKqrB,oBAETrrB,KAAK6qB,gBAAkB7qB,KAAK6qB,eAAeW,MAAMruB,GACjD6C,KAAK+qB,cAAc7xB,KAAKqyB,GACxBvrB,KAAKqK,KAAK,U,kCAEd,WACA,WACI,OAAO,IAAI1P,SAAQ,SAACC,EAASC,GACzBghB,OAAIwC,MAAM,EAAK7Y,QAAQgG,aAAc,CAAE8S,WAAW,IAAQ,SAAAriB,GACnDA,GAAoB,WAAbA,EAAIE,KAAmBtB,EAAUoB,EAAF,iCACpCrB,Y,+BAIjB,WACA,WACIoF,KAAKyrB,mBAEL,IAAMpqB,EAAO,IAAIE,KACXya,EAAU3Y,IAAMC,KAAKtD,KAAKwF,QAAQgG,aAAcnK,EAAKqqB,cAAcpsB,MAAM,EAAE,IAAM,SACvFU,KAAK8qB,uBAAyBzpB,EAAKK,UACnC1B,KAAK6qB,eAAiBlnB,IAAGgoB,kBAAkB3P,EAAS,CAChD4P,MAAO,IACPjO,SAAU,OACVkO,WAAW,IAEf7rB,KAAK6qB,eAAe3d,GAAG,SAAS,SAAAjQ,GAC5B,EAAKwuB,mBAELvsB,QAAQwE,IAAK,2BAA0BzG,MAE3C+C,KAAK6qB,eAAe3d,GAAG,SAAS,SAAArR,GAC5B,EAAK4vB,mBACLvsB,QAAQwE,IAAK,gC,8BAGrB,WAEO1D,KAAK6qB,iBACJ7qB,KAAK6qB,eAAepT,qBACpBzX,KAAK6qB,eAAeV,MACpBnqB,KAAK6qB,eAAiB,Q,8BAG9B,WACA,WACIlnB,IAAGgd,QAAQ3gB,KAAKwF,QAAQgG,cAAc,SAACvP,EAAKwf,GAExC,IAAGxf,EAAH,CAGA,IAAM6vB,EAAerQ,EAAMjP,QAAO,SAAAjP,GAAI,OAAIA,EAAKkf,SAAS,YAClDqP,EAAaC,OACbD,EAAahhB,MAInB,IAHA,IAAMkhB,EAAWF,EAAa1jB,KAAI,SAAA7K,GAAI,OAAI8F,IAAMC,KAAK,EAAKkC,QAAQgG,aAAcjO,MAC1E0uB,EAAkBjrB,KAAKwT,IAAIwX,EAASpzB,OAAS,EAAK4M,QAAQiG,sBAAuB,GAE/E/S,EAAI,EAAGA,EAAIuzB,IAAmBvzB,EAElCiL,IAAGuoB,OAAOF,EAAStzB,IAAI,SAAAuD,GAChBA,GAAKiD,QAAQjC,MAAM,8BAA+BhB,Y,mBAQrE,WAEI+D,KAAK+qB,cAAcoB,U,kBAMvB,WAEI,OAAOnsB,KAAK+qB,cAAc3Q,UAAU1P,QAAO,SAAC0hB,EAAK3pB,GAAN,MAAe,GAAE2pB,IAAM3pB,MAAQ,M,qBAK9E,WACA,WACIvD,QAAQwE,IAAI,qBAER1D,KAAK2qB,cAET3qB,KAAK2qB,aAAc,EAEnB3qB,KAAKyrB,mBAGLf,EAAgBpiB,SAAQ,SAAA0iB,GACpB9rB,QAAQ8rB,GAAU,EAAKJ,uBAAuBI,MAGlDqB,EAAS,U,GAjKIrhB,mBAqKjBqhB,EAAS,IAAInW,EACFmW,U,mBChLf/xB,EAAOD,QAAUgN,QAAQ,Y,kCCAzB,W,kCCAA,W,mBCAA/M,EAAOD,QAAUgN,QAAQ,gB,yJCezB,SAAS6U,EAAOnX,EAAMunB,GAElB,OAAOC,EAAsBxnB,GAC5BvI,MAAK,SAAAgwB,GACF,OAAOC,EAAgB1nB,EAAMunB,EAAKE,MAI1C,SAASC,EAAgB1nB,EAAMunB,EAAKE,GAEhC,OAAO,IAAI7xB,SAAQ,SAACC,EAASC,GAEzB8I,IAAGiQ,KAAK7O,EAAM,MAAM,SAAC9I,EAAKywB,GAEtB,GAAGzwB,EACC,OAAOpB,EAAOoB,GAGlB,IAAM0wB,EAASC,OAAO1D,KAAKoD,EAAK,QAChC3oB,IAAG6nB,MAAMkB,EAAIC,EAAQ,EAAGA,EAAO/zB,OAAQ4zB,GAAU,SAACvwB,GAE9C0H,IAAGkpB,UAAUH,GAEVzwB,EACCpB,EAAOoB,GAEPrB,aAUpB,SAAS2xB,EAAsBxnB,GAE3B,OAAO+nB,EAAK/nB,GACXvI,MAAK,SAAAuwB,GACF,OAAGA,EACQA,EAAMjpB,KAENkpB,EAAWjoB,GAAMvI,MAAK,SAAAkY,GAAC,OAAI,QAU9C,SAASsY,EAAWjoB,GAEhB,OAAO,IAAIpK,SAAQ,SAACC,EAASC,GACzB8I,IAAGiQ,KAAK7O,EAAM,MAAM,SAAC9I,EAAKywB,GACtB/oB,IAAGkpB,UAAUH,GAEVzwB,EACCpB,EAAOoB,GAEPrB,UAShB,SAASkyB,EAAK/nB,GAEV,OAAO,IAAIpK,SAAQ,SAACC,EAASC,GACzB8I,IAAGmpB,KAAK/nB,GAAM,SAAC9I,EAAK8wB,GAChB,GAAG9wB,GAAoB,WAAbA,EAAIE,KACV,OAAOtB,EAAOoB,GAElBrB,EAAQmyB,SAWpB,SAASjR,EAAUmR,EAAUrR,EAAQtb,GAEjC4sB,IAAOtR,GAAQ,SAAA3f,GAERA,EACCqE,EAASrE,GAGb0H,IAAGwpB,OAAOF,EAAUrR,GAAQ,SAAA3f,GACxBqE,EAASrE,SAWrB,SAASmxB,EAAMroB,EAAMS,EAAS6nB,GAEJ,kBAAZ7nB,GAAwBA,EAAQ8Y,UACtC4O,IAAOnoB,EAAM,CACTuoB,aAAc9nB,EAAQ+nB,WACtBC,WAAYC,YACbJ,GAEH1pB,IAAGypB,MAAMp0B,KAAK2K,IAAIzD,WAe1B,SAASme,EAAMqP,EAASloB,EAASlF,GAEP,kBAAZkF,GAAwBA,EAAQ8Y,UACtCqP,EAAgBD,EAASloB,EAASlF,GAElCqD,IAAG0a,MAAMrlB,KAAK2K,IAAIzD,WAG1B,SAASytB,EAAgBD,EAASloB,EAASlF,GAEvC4W,IAAcC,KACT,QAAO3R,EAAQhH,KAAO,qBAAuBgH,EAAQhH,KAAO,OAAOkvB,MACpE,SAACzwB,EAAOma,EAAQC,GACTpa,GAIIA,EAAMiE,WAAWgU,cAAchR,SAAS,oBACvCjH,EAAMd,KAAO,UAEjBmE,EAASrD,IAETqD,OAOD,QACX8sB,QACA/O,QACAvC,YACAI,W,mBCpLJ5hB,EAAOD,QAAUgN,QAAQ","file":"js/app.9ea8a993.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-46f29937\":\"b90ee1f7\",\"chunk-5ee75350\":\"ea12cb90\",\"chunk-61cbdd70\":\"117e785b\",\"chunk-96e18c9a\":\"7ac19764\",\"chunk-6c0ab2ad\":\"e4fe15cf\",\"chunk-ff8c1068\":\"cb004cd1\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-46f29937\":1,\"chunk-5ee75350\":1,\"chunk-61cbdd70\":1,\"chunk-6c0ab2ad\":1,\"chunk-ff8c1068\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-46f29937\":\"9570654b\",\"chunk-5ee75350\":\"40fcd3af\",\"chunk-61cbdd70\":\"8e1e1399\",\"chunk-96e18c9a\":\"31d6cfe0\",\"chunk-6c0ab2ad\":\"bc3553f5\",\"chunk-ff8c1068\":\"f2d4ab73\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const EDebounceType = {\r\n    Trailing: 0,\r\n    Leading: 1,\r\n    Both: 2\r\n};\r\n\r\n/**\r\n *  Returns a function, that, as long as it continues to be invoked, will not\r\n * be triggered. The function will be called after it stops being called for\r\n * N milliseconds.\r\n * If `immediate` is EDebounceType.Trailing, trigger the function on the trailing edge, instead of the leading.\r\n * If `immediate` is EDebounceType.Both, trigger the function on both leading and trailing edges.\r\n */\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n        var context = this, args = arguments;\r\n        var later = function() {\r\n            timeout = null;\r\n            if (immediate === EDebounceType.Trailing || immediate === EDebounceType.Both) \r\n                func.apply(context, args);\r\n        };\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n        if (callNow) { func.apply(context, args); }\r\n    }\r\n}\r\n\r\n/** \r\n * Returns a function which may only be called once every 'limit' milliseconds.\r\n*/\r\nfunction throttle (callback, limit, trailingEdge) {\r\n    var wait = false;\r\n    return function () {\r\n        var context = this, args = arguments;\r\n        if (!wait) {\r\n            callback.apply(context, args);\r\n            wait = true;\r\n            setTimeout(function () {\r\n                wait = false;\r\n                if(trailingEdge) \r\n                    callback.apply(context, args);         \r\n            }, limit);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Basic object deep cloning using JSON parse & stringify\r\n * @param {object|array} obj \r\n */\r\nfunction simpleDeepClone(obj)\r\n{\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n/**\r\n * Generates a GUID string. Not a standard-compliant GUID.\r\n * @returns {string} The generated GUID.\r\n * @example af8a8416-6e18-a307-bd9c-f2c947bbb3aa\r\n * @author Slavik Meltser.\r\n * @link http://slavik.meltser.info/?p=142\r\n */\r\nfunction guid() \r\n{\r\n    function _p8(s) {\r\n        var p = (Math.random().toString(16)+\"000000000\").substr(2,8);\r\n        return s ? \"-\" + p.substr(0,4) + \"-\" + p.substr(4,4) : p ;\r\n    }\r\n    return _p8() + _p8(true) + _p8(true) + _p8();\r\n}\r\n\r\n/**\r\n* Returns the date in format YYYYMMDDhhmmss\r\n*/\r\nfunction yyyymmddhhmmss(date) \r\n{\r\n    function pad2(n) {  // always returns a string\r\n        return (n < 10 ? '0' : '') + n;\r\n    }\r\n    date = date || new Date();\r\n    return date.getFullYear() +\r\n            pad2(date.getMonth() + 1) + \r\n            pad2(date.getDate()) +\r\n            pad2(date.getHours()) +\r\n            pad2(date.getMinutes()) +\r\n            pad2(date.getSeconds());\r\n}\r\n\r\nfunction defaultForNativeType(value) \r\n{\r\n    switch (typeof value) {\r\n        case 'boolean'   : return false;\r\n        case 'function'  : return function () {};\r\n        case 'null'      : return null;\r\n        case 'number'    : return 0;\r\n        case 'object'    : return {};\r\n        case 'string'    : return \"\";\r\n        case 'symbol'    : return Symbol();\r\n        case 'undefined' : return void 0;\r\n        default: return null;\r\n    }\r\n}\r\n\r\nfunction first(obj) \r\n{\r\n    if(Array.isArray(obj)) {\r\n        return obj[0];\r\n    } \r\n    return obj[Object.keys(obj)[0]];\r\n}\r\n/**\r\n * Returns new array containing only unique values\r\n * Works for Numbers, Strings, and Boolean\r\n * @param {Array} arr \r\n */\r\nfunction unique(arr) {\r\n    return [...new Set(arr)];\r\n}\r\nfunction getOrDefine(obj, key, defaultValue) \r\n{\r\n    if(obj[key] === undefined) {\r\n        obj[key] = defaultValue;\r\n    }\r\n    return obj[key];\r\n}\r\nfunction isBoolean(val) {\r\n    return typeof val === \"boolean\";\r\n}\r\nfunction isNumber(val) {\r\n    return typeof val === \"number\" && val === val;\r\n}\r\nfunction isObject(val) {\r\n    return val !== null && typeof(val) === \"object\";\r\n}\r\nfunction isEmptyObject(obj) \r\n{\r\n    return Object.keys(obj || {}).length === 0;\r\n}\r\nfunction isString(val) {\r\n    return typeof val === \"string\";\r\n}\r\nfunction isEmptyString(val) {\r\n    return val === \"\";\r\n}\r\nfunction isArray(val) \r\n{\r\n    return Array.isArray(val)\r\n}\r\nfunction isUndefined(val) {\r\n    return typeof val === \"undefined\";\r\n}\r\nfunction isNull(val) {\r\n    return val === null;\r\n}\r\n\r\n\r\nexport default {\r\n    throttle,\r\n    debounce,\r\n    simpleDeepClone,\r\n    guid, \r\n    yyyymmddhhmmss,\r\n    defaultForNativeType,\r\n    first,\r\n    unique,\r\n    getOrDefine,\r\n    isBoolean, \r\n    isNumber,\r\n    isObject,\r\n    isEmptyObject,\r\n    isString,\r\n    isEmptyString,\r\n    isArray,\r\n    isUndefined, \r\n    isNull\r\n}","import os from 'os';\r\nimport fs from 'fs';\r\nimport upath from 'upath';\r\nimport host from './index';\r\n\r\n/**\r\n * Creative Suite Extendscript Script Listener Interface\r\n */\r\nclass HostScriptListener\r\n{\r\n    constructor() {\r\n        this._scriptListenerActive = false;\r\n        this._scriptListenerReaderActive = false;\r\n\r\n        this._scriptListenerJsLogsPath = upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerJS.log\");\r\n        this._scriptListenerVbLogsPath = upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerVB.log\");\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        console.log(\"HostScriptListener initialized.\");\r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        // Cleanup\r\n    }\r\n    startScriptListenerReader()\r\n    {\r\n        // Determine if ScriptListener is on \r\n        // Folder.desktop\r\n        // const listenerLogsPath =  upath.join(os.homedir(), \"Desktop\", \"ScriptingListenerJS.log\");\r\n        // const scriptWatcher = chokidar.watch(listenerLogsPath, {\r\n        //     awaitWriteFinish: {\r\n        //         pollInterval: 100,\r\n        //         stabilityThreshold: 2000\r\n        //     }\r\n        // });\r\n        // scriptWatcher.on(\"change\", debounce(this.readScriptListenerLog, 1000));\r\n        // //...\r\n        // scriptWatcher.removeAllListeners();\r\n        // scriptWatcher.close();\r\n        // //...\r\n\r\n        this._scriptListenerReaderActive = true;\r\n    }\r\n    stopScriptListenerReader() \r\n    {\r\n\r\n    }\r\n    clearScriptListenerLogs() \r\n    {\r\n        fs.writeFile(this._scriptListenerJsLogsPath, \"\", err => {\r\n            if(err) throw err; \r\n        });\r\n        fs.writeFile(this._scriptListenerVbLogsPath, \"\", err => {\r\n            if(err) throw err;\r\n        });\r\n    }\r\n    onScriptListenerLogs() \r\n    {\r\n        // IMPORTANT: Somme commands generated by ScriptListenerPlugin will not run via evalScript.\r\n        // In particular, modal commands, such as \"modalStateChanged\" will throw an error\r\n        // fs.readFile(path, (err, data) => {\r\n        //     if(err) throw err; \r\n\r\n        //     fire event? or call registered callback?\r\n        // });\r\n    }\r\n    isScriptListenerActive() \r\n    {\r\n        let initialSize = 0;\r\n        try {\r\n            initialSize = fs.statSync(this._scriptListenerJsLogsPath).size;\r\n        } catch {}\r\n        \r\n        // How this works:\r\n        // Since Extendscript runs on a single thread, and ScriptListener runs on this same thread.\r\n        // The 1st call triggers ScriptListener to record actions.\r\n        // The 2nd call is to ensure ScriptListener is done recording, before we read log file stats.\r\n        return Promise.all([\r\n            host.runJsx(`\r\n                app.bringToFront();\r\n                var document = app.documents.add(\"1px\", \"1px\", 1, \"ScriptListenerCheck\");\r\n                document.close(SaveOptions.SAVECHANGES);\r\n            `),\r\n            host.runJsx(`noop();`)\r\n        ])\r\n        .then(values => {\r\n            if(values[0].includes(\"error\")) {\r\n                console.error(\"Could not determine if ScriptListener is active.\");\r\n                return false;\r\n            }\r\n            try {\r\n                fs.statSync(this._scriptListenerJsLogsPath).size > initialSize;\r\n            } catch {\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    isScriptListenerIstalled()\r\n    {\r\n        return host.runActionWithParameters(\"action.getIsScriptListenerInstalled\")\r\n        .then(result => Boolean(result));\r\n    }\r\n    toggleScriptListener(active)\r\n    {\r\n        return host.runActionWithParameters(\"action.setScriptListenerActive\", active);\r\n    }\r\n}\r\n\r\nexport default new HostScriptListener();","import Vue from 'vue';\r\nconst eventBus = new Vue();\r\nexport default eventBus;\r\n","import Enum from '../enum';\r\n\r\nconst PipelineEngineState = new Enum([\r\n    \"STOPPED\",\r\n    \"IDLE\", \r\n    \"PAUSED\",\r\n    \"PROCESSING\",\r\n]);\r\n\r\nexport default PipelineEngineState;","'use strict';\r\n/*\r\n    See npm \"env-paths\"\r\n*/\r\nimport path from 'path';\r\nimport os from 'os';\r\n\r\nconst homedir = os.homedir();\r\nconst tmpdir = os.tmpdir();\r\nconst { env } = process;\r\n\r\nconst macos = name => {\r\n\tconst library = path.join(homedir, 'Library');\r\n\r\n\treturn {\r\n\t\tconfig: path.join(library, 'Preferences', name),\r\n\t\tlog: path.join(library, 'Logs', name),\r\n\t\ttemp: path.join(tmpdir, name)\r\n\t};\r\n};\r\n\r\nconst windows = name => {\r\n\tconst appData = env.APPDATA || path.join(homedir, 'AppData', 'Roaming');\r\n\tconst localAppData = env.LOCALAPPDATA || path.join(homedir, 'AppData', 'Local');\r\n\r\n\treturn {\r\n\t\tconfig: path.join(appData, name, 'Config'),\r\n\t\tlog: path.join(localAppData, name, 'Log'),\r\n\t\ttemp: path.join(tmpdir, name)\r\n\t};\r\n};\r\n\r\nconst envPaths = (name, options) => {\r\n\tif (typeof name !== 'string') {\r\n\t\tthrow new TypeError(`Expected string, got ${typeof name}`);\r\n\t}\r\n\r\n\toptions = Object.assign({suffix: 'nodejs'}, options);\r\n\r\n\tif (options.suffix) {\r\n\t\t// Add suffix to prevent possible conflict with native apps\r\n\t\tname += `-${options.suffix}`;\r\n\t}\r\n\r\n\tif (process.platform === 'darwin') {\r\n\t\treturn macos(name);\r\n\t}\r\n\tif (process.platform === 'win32') {\r\n\t\treturn windows(name);\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nexport default envPaths;\r\n","import upath from 'upath';\r\nimport envPaths from './envPaths';\r\nimport { version as marioAppVersion } from '../../package.json';\r\n\r\n\r\nexport default (function() \r\n{\r\n    // Also see \"process.versions\"\r\n    const csInterface = new CSInterface();\r\n    const { appVersion, appName } = csInterface.getHostEnvironment();\r\n    const { major, minor, micro } = csInterface.getCurrentApiVersion();\r\n    const os = csInterface.getOSInformation()\r\n    const env = envPaths(\"Mario\");\r\n\r\n    const installPath = csInterface.getSystemPath(SystemPath.EXTENSION);\r\n    const appInstallPath = upath.normalize(installPath);\r\n    const appWorkingPath = upath.join(appInstallPath, process.env.VUE_APP_HOST_DIR);\r\n    const appDefaultLogPath = upath.normalize(env.log);\r\n    const appDefaultConfigPath = upath.normalize(env.config);\r\n    const appBuiltinActionsPath = upath.join(appWorkingPath, \"actions\");\r\n\r\n    return {\r\n        csInterface,\r\n        os,\r\n        appVersion: marioAppVersion,\r\n        appInstallPath, \r\n        appWorkingPath,\r\n        appDefaultLogPath,\r\n        appDefaultConfigPath,\r\n        appBuiltinActionsPath,\r\n        adobeApp: appName,\r\n        adobeVersion: appVersion, \r\n        adobeCEPApiVersion: `${major}.${minor}.${micro}`\r\n    }\r\n}());\r\n","module.exports = require(\"http\");","\r\nexport default class ImageSource\r\n{\r\n    /**\r\n     * Configuration for sourcing new images for processing\r\n     * @param {ImageSourceType} sourceType e.g. ImageSourceType.FILEWATCHER\r\n     * @param {string} name a user friendly name for the image source \r\n     * @param {string} [sourceDirectory] \r\n     * @param {Array<string>} [sourceExtensions] file extensions allowed by this file source (without '.')\r\n     * @param {boolean} [useOutputDirectory = false]\r\n     * @param {string} [outputDirectory] directory where pipeline outputs will be written\r\n     * @param {boolean} [useProcessedDirectory = false]\r\n     * @param {string} [processedDirectory] directory where source files will be moved to when finished processing\r\n     * @param {boolean} [useErrorDirectory = false]\r\n     * @param {string} [errorDirectory] directory where source files will be moved when an error is encountered\r\n     * @param {boolean} [readMetadata = false]\r\n     */\r\n    constructor(\r\n        sourceType, \r\n        name,\r\n        sourceDirectory, \r\n        sourceExtensions, \r\n        useOutputDirectory = false, \r\n        outputDirectory = \"\", \r\n        useProcessedDirectory = false,\r\n        processedDirectory = \"\", \r\n        useErrorDirectory = false,\r\n        errorDirectory = \"\",\r\n        readMetadata = false)\r\n    {\r\n        this.name = name;\r\n        this.sourceType = sourceType;\r\n        this.sourceDirectory = sourceDirectory;\r\n        this.sourceExtensions = sourceExtensions;\r\n\r\n        this.useOutputDirectory = useOutputDirectory;\r\n        this.outputDirectory = outputDirectory;\r\n        this.useProcessedDirectory = useProcessedDirectory;\r\n        this.processedDirectory = processedDirectory;\r\n        this.useErrorDirectory = useErrorDirectory;\r\n        this.errorDirectory = errorDirectory;\r\n        this.readMetadata = readMetadata;\r\n    }\r\n\r\n    clone() \r\n    {\r\n        // Shallow copy\r\n        let imageSource = new ImageSource();\r\n        return Object.assign(imageSource, this);\r\n    }\r\n    toString() \r\n    {\r\n        return `name = \"${this.name}\" type = ${this.sourceType} directory = \"${this.sourceDirectory}\"`;\r\n    }\r\n\r\n    static fromObject(object)\r\n    {\r\n        let imageSource = new ImageSource();\r\n        for(const key of Object.getOwnPropertyNames(object)) {\r\n            if(imageSource.hasOwnProperty(key)) {\r\n                imageSource[key] = object[key];\r\n            }\r\n        }\r\n        return imageSource;\r\n    }\r\n}\r\n","module.exports = require(\"crypto\");","module.exports = require(\"child_process\");","module.exports = require(\"assert\");","\r\nexport default class ArrayMap \r\n{\r\n    constructor() {\r\n        this.map = new Map();\r\n        [\"get\", \"has\", \"delete\", \"keys\", \"values\"].forEach(key => {\r\n            this[key] = this.map[key].bind(this.map);\r\n        });\r\n    }\r\n    set(key, value) {\r\n        let array = this.map.get(key);\r\n        if(Array.isArray(array)) {\r\n            array.push(value);\r\n        } else {\r\n            this.map.set(key, [value]);\r\n        }\r\n    }\r\n}","import fs from 'fs';\r\nimport EventEmitter from \"events\";\r\n\r\nexport const VALID_JSON_TYPES = [\r\n    'string',\r\n    'number',\r\n    'object',\r\n    'array',\r\n    'boolean'\r\n];\r\n\r\n/**\r\n * Configuration class for saving/loading data via JSON file.\r\n * Note that load() should be called after construction to read from file.\r\n * If save() is called before load(), any previous configuration will be overwritten.\r\n */\r\nexport default class Config extends EventEmitter\r\n{\r\n    /**\r\n     * Create a Config instance\r\n     * @param {Object} opts \r\n     * @param {boolean} [opts.autoSave = false] if true, automatically save to file when data changes\r\n     * @param {boolean} [opts.doExtend = false] if true, this instance is extended with setters/getters for property names specified in the schema\r\n     * @param {string} opts.filePath the absolute path to the configuration file, including its extension \r\n     * @param {Object} opts.schema\r\n     */\r\n    constructor(opts) \r\n    {\r\n        super();\r\n\r\n        this._isLoaded = false;\r\n        this._isLoading = false;\r\n        this._isSaved = false;\r\n        this._isSaving = false;\r\n        this._isAnotherSavePending = false;\r\n        this._lastSavedTime = 0;\r\n\r\n        this._doAutoSave = opts.autoSave === true;\r\n        this._schema = opts.schema;\r\n        this._data = this._createDefaultConfigObject();\r\n        this._dataFilePath = opts.filePath;\r\n        \r\n        if(opts.doExtend) {\r\n            this._extend();\r\n        }\r\n    }\r\n    _createDefaultConfigObject() \r\n    {\r\n        let config = {};\r\n        for (const [key, value] of Object.entries(this._schema)) \r\n        {\r\n            if (!this._isValidJsonTypeName(value.type)) {\r\n                throw new TypeError(`'type' ${value.type} for ${key} is not a valid JSON type name`);\r\n            } \r\n            if(value.default && this._typeOf(value.default) !== value.type) {\r\n                throw new TypeError(`'default' type ${this._typeOf(value.default)} does not match specified 'type'`);\r\n            }\r\n            config[key] = value.default || this._defaultForTypeName(value.type);\r\n        }\r\n        return config;\r\n    }\r\n    _validateConfig() \r\n    {\r\n        for (const [key, value] of Object.entries(this._data)) \r\n        {\r\n            if(!this._schema[key]) {\r\n                throw new Error(`Property ${key} not found in schema`);\r\n            }\r\n            if(this._typeOf(value) !== this._schema[key].type) {\r\n                throw new TypeError(`${this._typeOf(value)} does not match schema type ${this._schema[key].type}`)\r\n            }\r\n        }\r\n    }\r\n    _isValidJsonTypeName(type) {\r\n        return VALID_JSON_TYPES.includes(type);\r\n    }\r\n    _defaultForTypeName(type) {\r\n        switch(type) {\r\n            case 'string': return \"\";\r\n            case 'number': return 0;\r\n            case 'object': return {};\r\n            case 'array': return [];\r\n            case 'boolean': return false;\r\n        }\r\n        throw new Error(`default not defined for type ${type}`);\r\n    }\r\n    _typeOf(value) {\r\n        if(Array.isArray(value)) {\r\n            return \"array\";\r\n        } \r\n        return typeof value;\r\n    }\r\n    _extend() \r\n    {\r\n        for (const [key, value] of Object.entries(this._schema)) \r\n        {\r\n            Object.defineProperty(this, key, {\r\n                get() { \r\n                    return this.get(key);\r\n                },\r\n                set(value) { \r\n                    return this.set(key, value);\r\n                },\r\n                enumerable: true, \r\n                configurable: false\r\n            });\r\n        }\r\n    }\r\n\r\n    load() \r\n    {\r\n        if(this._isLoaded || this._isLoading) \r\n            return Promise.resolve();\r\n\r\n        return new Promise(resolve => \r\n        {\r\n            this._isLoading = true;\r\n            fs.readFile(this._dataFilePath, (err, jsonString) => {\r\n                this._isLoading = false;\r\n                // ENOENT = file missing\r\n                if(err && err.code !== 'ENOENT') throw err;\r\n                if(!err) {\r\n                    // Assume file exists and data read successfully\r\n                    const data = JSON.parse(jsonString);\r\n                    this._data = Object.assign(this._data, data);\r\n                    this._validateConfig();\r\n                }\r\n                this._isSaved = true;\r\n                this._isLoaded = true;\r\n                this.emit(\"loaded\");\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    save() \r\n    {\r\n        if(this._isSaved) \r\n            return Promise.resolve();\r\n        if(this._isSaving) {\r\n            this._isAnotherSavePending = true;\r\n            return Promise.resolve();\r\n        }\r\n\r\n        return new Promise(resolve => \r\n        {\r\n            this._isSaving = true;\r\n            fs.writeFile(this._dataFilePath, JSON.stringify(this._data, null, 2), err => {\r\n                this._isSaving = false;\r\n                if(err) throw err;\r\n\r\n                this._isLoaded = true;\r\n                this._isSaved = true;\r\n                this._lastSavedTime = Date.now();\r\n                this.emit(\"saved\", this._lastSavedTime);\r\n\r\n                if(this._isAnotherSavePending) {\r\n                    this._isAnotherSavePending = false;\r\n                    process.nextTick(() => this.save);\r\n                }\r\n                resolve();\r\n            });\r\n        });\r\n    }\r\n    getLastSavedTime() {\r\n        return this._lastSavedTime;\r\n    }\r\n    /**\r\n     * Same as getAll() except returns a deep copy\r\n     */\r\n    clone() \r\n    {\r\n        return JSON.parse(JSON.stringify(this._data));\r\n    }\r\n    /**\r\n     * Returns entire configuration object by reference\r\n     */\r\n    getAll() \r\n    {\r\n        return this._data;\r\n    }\r\n    get(key) \r\n    {\r\n\t\treturn key.split('.').reduce((accumulator, property) => accumulator[property], this._data);\r\n    }\r\n    set(key, value) \r\n    {\r\n        this._isSaved = false;\r\n\r\n        const tokens = key.split('.');\r\n        const lastToken = tokens.pop();\r\n        const parent = tokens.reduce((accumulator, property) => accumulator[property], this._data);\r\n        const property = parent[lastToken];\r\n        if(typeof property === \"undefined\") {\r\n            throw new Error(`Property ${key} not found.`);\r\n        }\r\n        if(this._typeOf(property) !== this._typeOf(value)) {\r\n            throw new TypeError(`Property ${key} type ${this._typeOf(property)} does not match value ${value} with type ${this._typeOf(value)}`);\r\n        }\r\n        // Set value\r\n        parent[lastToken] = value;\r\n        console.log(`Configuration updated. ${key} -> ${value}`);\r\n\r\n        if(this._doAutoSave) {\r\n            this.save();\r\n        }\r\n    }\r\n}","import upath from 'upath';\r\n\r\nimport ImageSource from '../server/imageSource';\r\nimport ArrayMap from '../arrayMap';\r\nimport Config from '../store/config';\r\nimport appGlobal from '../global';\r\nimport _ from '../utils';\r\n\r\n// TODO: Split General & Pipelines into their own Classes (and files)\r\n\r\n/**\r\n * General app configuration data \r\n */\r\nclass GeneralConfig extends Config\r\n{\r\n    constructor() {\r\n        super({\r\n            filePath: upath.join(appGlobal.appDefaultConfigPath, \"general.json\"),\r\n            doExtend: true,\r\n            schema: {\r\n                checkIsScriptListenerActiveOnStart: {\r\n                    type: \"boolean\", \r\n                    default: true\r\n                },\r\n                pauseAfterEveryPipeline: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                pauseAfterEveryAction: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                pauseAfterEveryImage: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                pauseOnExceptions: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                logDirectory: { \r\n                    type: \"string\",\r\n                    default: \"\"\r\n                },\r\n                logFilePersistForDays: {\r\n                    type: \"number\", \r\n                    default: 3\r\n                },\r\n                logHtmlBufferMaxSize: {\r\n                    type: \"number\",\r\n                    default: 256\r\n                },\r\n                runHttpServer: {\r\n                    type: \"boolean\",\r\n                    default: false\r\n                },\r\n                serverPort: {\r\n                    type: \"number\",\r\n                    default: 3001\r\n                },\r\n                pathToUserActions: {\r\n                    type: \"string\",\r\n                    default: \"\"\r\n                }, \r\n                fileSources: {\r\n                    type: \"array\",\r\n                    default: [\r\n                        // Objects matching ImageSource\r\n                    ]\r\n                },\r\n                currentTab: {\r\n                    type: \"string\",\r\n                    default: \"the-jsx-runner\"\r\n                },\r\n                isMainDrawerOpen: {\r\n                    type: \"boolean\", \r\n                    default: false\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns the ImageSource by the given name\r\n     * @param {string} name \r\n     * @returns {ImageSource}\r\n     */\r\n    getImageSourceByName(name) \r\n    {\r\n        const source = this._data.fileSources.find(s => s.name === name);\r\n        if(source) {\r\n            return ImageSource.fromObject(source);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\n/**\r\n * Pipeline configurations \r\n */\r\nclass PipelinesConfig extends Config\r\n{\r\n    constructor() \r\n    {\r\n        super({\r\n            filePath: upath.join(appGlobal.appDefaultConfigPath, \"pipelines.json\"),\r\n            doExtend: true,\r\n            schema: {\r\n                pipelines: {\r\n                    type: \"array\",\r\n                    default: []\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getByNames(pipelineNames, includeDisabled)\r\n    {\r\n        return this._data.pipelines.filter(p => {\r\n            return pipelineNames.includes(p.name) && (includeDisabled || !p.disabled);\r\n        });\r\n    }\r\n    getByName(pipelineName, includeDisabled) \r\n    {\r\n        return this._data.pipelines.find(p => {\r\n            return p.name === pipelineName && (includeDisabled || !p.disabled); \r\n        });\r\n    }\r\n    /**\r\n     * Returns unique mapping of image source name -> pipeline name\r\n     * @param {Array<string>} pipelineNames\r\n     * @param {boolean} [includeDisabled = false]\r\n     * @returns {ArrayMap<string, string>}\r\n     */\r\n    getImageSourceNameToPipelineNameMap(pipelineNames, includeDisabled) \r\n    {\r\n        // Collect all unique file sources for given pipelines\r\n        let fileSourceNameToPipelineNames = new ArrayMap();\r\n        pipelineNames.forEach(pipelineName =>\r\n        {\r\n            const pipeline = this.getByName(pipelineName);\r\n            if(!pipeline) {\r\n                return;\r\n            }\r\n            for(let fileSourceName of pipeline.sourceNames) {\r\n                fileSourceNameToPipelineNames.set(fileSourceName, pipeline.name);\r\n            }\r\n        });\r\n        return fileSourceNameToPipelineNames;\r\n    }\r\n}\r\n\r\nclass Store \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * General configuration storage\r\n         * NOTE: Properties are set by Reference.\r\n         */\r\n        this.general = new GeneralConfig();\r\n        this.general.on(\"loaded\", () => {\r\n            console.log(\"Configuration 'general' loaded.\");\r\n        });\r\n        this.general.on(\"saved\", () => {\r\n            console.log(\"Configuration 'general' saved.\");\r\n        });\r\n        /**\r\n         * Pipeline configuration storage\r\n         * NOTE: Properties are set by Reference.\r\n         */\r\n        this.pipelines = new PipelinesConfig();\r\n        this.pipelines.on(\"loaded\", () => {\r\n            console.log(\"Configuration 'pipelines' loaded.\");\r\n        });\r\n        this.pipelines.on(\"saved\", () => {\r\n            console.log(\"Configuration 'pipelines' saved.\");\r\n        });\r\n    }\r\n    async init() \r\n    {\r\n        console.log(\"Configurations loading started.\");\r\n\r\n        await this.general.load();\r\n        await this.pipelines.load();\r\n\r\n        console.log(\"Configurations loaded.\");\r\n    }\r\n}\r\n\r\n\r\nexport default new Store();","import Enum from '../enum';\r\n\r\nconst ImageSourceType = new Enum([\r\n    \"OPENFILES\", \r\n    \"DIRECTORY\", \r\n    \"FILEWATCHER\",\r\n    \"BLANK\",\r\n    \"ACTIVEDOCUMENT\",\r\n    \"REST\"\r\n]);\r\n\r\nexport default ImageSourceType","export default class FolderTreeNode\r\n{\r\n    constructor(name = \"\", isDirectory = false) {\r\n        // FolderTree\r\n        this.parent = null;\r\n        // boolean\r\n        this.isDirectory = isDirectory;\r\n        // string\r\n        this.name = name || \"\";\r\n        // Array<FolderTree>\r\n        this.children = [];\r\n    }\r\n    isRoot() { \r\n        return this.parent === null;\r\n    }\r\n    isLeaf() {\r\n        return !this.hasChildren();\r\n    }\r\n    hasChildren() {\r\n        return this.children.length > 0;\r\n    }\r\n    addChild(node)\r\n    {\r\n        node.parent = this;\r\n        this.children.push(node);\r\n    }\r\n    removeChild(node)\r\n    {\r\n        this.children = this.children.filter(c => c !== node);\r\n    }\r\n    getChildByName(name) {\r\n        return this.children.find(c => c.name === name);\r\n    }\r\n    /**\r\n     * @returns {string[]} an array of node names indicating the path to this node from the root\r\n     */\r\n    getNamePath() {\r\n        let node = this;\r\n        let names = [node.name];\r\n        while(node && (node = node.parent)) {\r\n            names.push(node.name);\r\n        }\r\n        return names.reverse();\r\n    }\r\n    insert(namePath, isDirectory)\r\n    {\r\n        let node = this;\r\n        let nodeName = (this.name === namePath[0]) ? namePath.shift() : \"\";\r\n        while(nodeName = namePath.shift())\r\n        {\r\n            const isEndOfPath = namePath.length === 0;\r\n            const childIsDirectory = isEndOfPath && !isDirectory ? false : true;\r\n            let child = node.getChildByName(nodeName);\r\n            if(!child) {\r\n                child = new FolderTreeNode(nodeName, childIsDirectory);\r\n                node.addChild(child);\r\n            } \r\n            node = child;\r\n        }\r\n    }\r\n    /**\r\n     * Returns the node given at the end of the name path by traversing the tree\r\n     * @param {string[]} namePath \r\n     * @returns {FolderTreeNode} or null\r\n     */\r\n    traverse(namePath)\r\n    {\r\n        let node = this;\r\n        let nodeName = (this.name === namePath[0]) ? namePath.shift() : \"\";\r\n        while(node && (nodeName = namePath.shift())) {\r\n            node = node.getChildByName(nodeName);\r\n        }\r\n        return node;\r\n    }\r\n    drop()\r\n    {\r\n        this.parent.removeChild(this);\r\n        this.parent = null;\r\n    }\r\n    arrayify(node)\r\n    {\r\n        // pre order traversal\r\n        if(node.hasChildren()) {\r\n            const result = node.children.map(c => node.arrayify(c));\r\n            return [node.name, result];\r\n        } else {\r\n            return node.name;\r\n        }\r\n    }\r\n    /**\r\n     * Clones this Folder tree node\r\n     */\r\n    clone()\r\n    {\r\n        return new FolderTreeNode(this.name, this.isDirectory);\r\n    }\r\n    /**\r\n     * Clones the Folder tree using this node as the root node\r\n     */\r\n    cloneTree()\r\n    {\r\n        let newRoot = this.clone();\r\n        let newStack = [newRoot];\r\n        let oldStack = [this];\r\n        let newNode, oldNode;\r\n        while((oldNode = oldStack.pop()) && (newNode = newStack.pop()))\r\n        {\r\n            for(let i = 0; i < oldNode.children.length; ++i)\r\n            {\r\n                let oldChild = oldNode.children[i];\r\n                let newChild = oldChild.clone();\r\n                newNode.addChild(newChild);\r\n                newStack.push(newChild);\r\n                oldStack.push(oldChild);\r\n            }\r\n        }\r\n        return newRoot;\r\n    }\r\n    parse(model)\r\n    {\r\n\r\n    }\r\n}\r\n","var render, staticRenderFns\nimport script from \"./tabs.vue?vue&type=script&lang=js&\"\nexport * from \"./tabs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tabs.vue?vue&type=style&index=0&id=67906525&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67906525\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('a-dialog-root'),_c('adobe-menus'),_c('tabs',{attrs:{\"initial-tab\":_vm.currentTabComponent},on:{\"changed\":_vm.onTabChanged}},[_c('tab',{attrs:{\"title\":\"the-console\"}},[_vm._v(\"Console\")]),_c('tab',{attrs:{\"title\":\"the-jsx-runner\"}},[_vm._v(\"Jsx\")]),_c('tab',{attrs:{\"title\":\"the-configurator\"}},[_vm._v(\"Configuration\")]),_c('tab',{attrs:{\"title\":\"the-pipelines\"}},[_vm._v(\"Pipelines\")])],1),_c('main-controls'),_c('section',{staticClass:\"tab-content\"},[_c('keep-alive',[_c(_vm.currentTabComponent,{tag:\"component\"})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const themeManager = (function () \n{\n    'use strict';\n    const csInterface = new CSInterface();\n\n    /**\n     * Update theme with AppSkinInfo from Host Product\n     */\n    function updateThemeWithAppSkinInfo(appSkinInfo) \n    {\n        let sentinelColor = appSkinInfo.panelBackgroundColor.color.red;\n        let themeIsLight = sentinelColor > 128;\n        \n        if (themeIsLight) {\n            document.body.classList.remove(\"dark\");\n            document.body.classList.add(\"light\");\n            document.getElementById(\"theme\").href = \"css/topcoat-desktop-light.css\";\n        } else {\n            document.body.classList.remove(\"light\");\n            document.body.classList.add(\"dark\");\n            document.getElementById(\"theme\").href = \"css/topcoat-desktop-dark.css\";\n        }\n        \n        document.body.style.background = \"#\" + toHex(appSkinInfo.panelBackgroundColor.color);\n    }\n\n    function toHex(color) \n    {\n        function computeValue(rgb) { \n            let hex = Number(rgb).toString(16);\n            if (hex.length < 2) { hex = \"0\" + hex }\n            return hex;\n        };\n        let hex = \"\";\n        if (color) {\n            hex = computeValue(color.red) + \n                    computeValue(color.green) + \n                    computeValue(color.blue);\n        }\n        return hex;\n    }\n  \n    function onAppThemeColorChanged(event) \n    {\n        let appSkinInfo = csInterface.getHostEnvironment().appSkinInfo;\n        updateThemeWithAppSkinInfo(appSkinInfo);\n    }\n  \n    function init() \n    {\n        let appSkinInfo = csInterface.getHostEnvironment().appSkinInfo;\n        updateThemeWithAppSkinInfo(appSkinInfo);\n        csInterface.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT, onAppThemeColorChanged);\n    }\n  \n    return {\n        init: init\n    };\n  \n  }());\n\n  export default themeManager;","\r\n\r\n<script>\r\nexport default {\r\n    name: \"Tabs\",\r\n    props: {\r\n        initialTab: {\r\n            type: String,\r\n            required: true\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            activeTab: this.initialTab\r\n        }\r\n    },\r\n    computed: {\r\n        tabsList() {\r\n            return this.$slots.default;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$on('tab-click', this.onTabClick);\r\n    },\r\n    methods: {\r\n        onTabClick(tab) {\r\n            this.activeTab = tab;\r\n            this.$emit(\"changed\", this.activeTab);\r\n        },\r\n        isActiveTab(tab) {\r\n            return this.activeTab === tab;\r\n        }\r\n    },\r\n    render: function(createElement) {\r\n        // return a vnode (virtual dom node)\r\n        return createElement(\r\n            \"ul\",\r\n            {\r\n                class: \"tabs\"\r\n            },\r\n            // array of children\r\n            this.$slots.default.map(child => {\r\n                return createElement(\r\n                    \"li\", \r\n                    {\r\n                        class: \"tab\"\r\n                    },\r\n                    [child]\r\n                )\r\n            })\r\n        );\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .tabs {\r\n        display: flex;\r\n        flex-shrink: 0;\r\n        justify-items: center;\r\n        list-style: none;\r\n        margin: .5em auto;\r\n        margin-right: auto;\r\n        padding: 0;\r\n        width: 300px;\r\n    }\r\n    .tab {\r\n        flex-grow: 1;\r\n    }\r\n    .tab button {\r\n        height: 1.5rem;\r\n        width: 100%;\r\n    }\r\n    .tab:first-of-type button {\r\n        border-left-width: 1px;\r\n        border-radius: 5px 0 0 5px;\r\n    }\r\n    .tab:last-of-type button {\r\n        border-radius: 0 5px 5px 0;\r\n    }\r\n    .dark button {\r\n        background: $dark-button-bg-inactive;\r\n        border: 1px solid $dark-button-border;\r\n        border-left-width: 0;\r\n        color: $dark-text-color;\r\n\r\n        &.active {\r\n            background: $dark-button-bg-active;\r\n            color: $dark-button-text-color-active;\r\n        }\r\n    }\r\n    .light button {\r\n        background: $light-button-bg-inactive;\r\n        border: 1px solid $light-button-border;\r\n        border-left-width: 0;\r\n        color: $light-text-color;\r\n\r\n        &.active {\r\n            background: $light-button-bg-active;\r\n            color: $light-button-text-color-active;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=script&lang=js&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{class:{ active: _vm.isActive },attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.onClick($event)}}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <button \r\n        :class=\"{ active: isActive }\" \r\n        @click.prevent.stop=\"onClick\" \r\n        type=\"button\"\r\n    >\r\n        <slot></slot>\r\n    </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Tab\",\r\n    props: {\r\n      title: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    computed: {\r\n        isActive() {\r\n            return this.$parent.activeTab == this.title;\r\n        }\r\n    },\r\n    methods: {\r\n        onClick(e) {\r\n            this.$parent.$emit(\"tab-click\", this.title);\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tab.vue?vue&type=template&id=539a276c&\"\nimport script from \"./tab.vue?vue&type=script&lang=js&\"\nexport * from \"./tab.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('validation-observer',{ref:\"observer\",attrs:{\"slim\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('form',{staticClass:\"main-controls my2\",on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();},\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onPipelineRun)}}},[_c('div',{staticClass:\"main-controls__controls mb2\"},[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isStopped),expression:\"isStopped\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"submit\",\"title\":\"Run all pipelines on the selected source.\"}},[_vm._v(\"▶\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isPaused),expression:\"isPaused\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Resume processing.\"},on:{\"click\":_vm.onPipelineResume}},[_vm._v(\"Resume\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canPause),expression:\"canPause\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Pause processing.\"},on:{\"click\":_vm.onPipelinePause}},[_vm._v(\"❚❚\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isStopped),expression:\"!isStopped\"}],staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\",\"title\":\"Stop all pipelines and file sources.\"},on:{\"click\":_vm.onPipelineStop}},[_vm._v(\"◼\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isMainDrawerOpen),expression:\"isMainDrawerOpen\"}],staticClass:\"main-controls__drawer columns\"},[_c('div',{staticClass:\"column is-half-tablet\"},[_c('h3',{staticClass:\"section-title\"},[_vm._v(\"Pipelines Status\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineEngineStateText))]),(_vm.pipelinefilePathText)?_c('h3',{staticClass:\"section-title\"},[_vm._v(\"Current Source Path\")]):_vm._e(),_c('div',[_vm._v(_vm._s(_vm.pipelinefilePathText))])]),_c('div',{staticClass:\"column is-half-tablet\"},[_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pipelineText),expression:\"pipelineText\"}],staticClass:\"section-title\"},[_vm._v(\"Pipeline\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineText))]),_c('h3',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pipelineActionText),expression:\"pipelineActionText\"}],staticClass:\"section-title\"},[_vm._v(\"Action\")]),_c('div',[_vm._v(_vm._s(_vm.pipelineActionText))])])]),_c('div',{staticClass:\"main-controls__drawer-toggle\",class:{ active: _vm.isMainDrawerOpen }},[_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isMainDrawerOpen = !_vm.isMainDrawerOpen}}},[_vm._v(\"Source & Status \"),_c('span',[_vm._v(\"❱\")])])])])]}}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <validation-observer \r\n        ref=\"observer\"\r\n        slim\r\n        v-slot=\"{ handleSubmit }\"\r\n    >\r\n        <form \r\n            class=\"main-controls my2\"\r\n            @keydown.enter.prevent\r\n            @submit.prevent=\"handleSubmit(onPipelineRun)\"\r\n        >\r\n            <div class=\"main-controls__controls mb2\">\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"submit\"\r\n                    title=\"Run all pipelines on the selected source.\"\r\n                    v-show=\"isStopped\">&#9654;</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelineResume\"\r\n                    title=\"Resume processing.\"\r\n                    v-show=\"isPaused\">Resume</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelinePause\"\r\n                    title=\"Pause processing.\"\r\n                    v-show=\"canPause\">&#10074;&#10074;</button>\r\n                <button class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"onPipelineStop\"\r\n                    title=\"Stop all pipelines and file sources.\"\r\n                    v-show=\"!isStopped\" \r\n                    >&#9724;</button>\r\n            </div>\r\n            <div class=\"main-controls__drawer columns\" \r\n                v-show=\"isMainDrawerOpen\"\r\n            >\r\n                <div class=\"column is-half-tablet\">\r\n                    <h3 class=\"section-title\">Pipelines Status</h3>\r\n                    <div>{{ pipelineEngineStateText }}</div>\r\n                    <h3 class=\"section-title\" v-if=\"pipelinefilePathText\">Current Source Path</h3>\r\n                    <div>{{ pipelinefilePathText }}</div>\r\n                    <!-- <div v-if=\"isInitializing\">Initializing<wait-dots/></div> -->\r\n                </div>\r\n                <div class=\"column is-half-tablet\">\r\n                    <h3 class=\"section-title\" v-show=\"pipelineText\">Pipeline</h3>\r\n                    <div>{{ pipelineText }}</div>\r\n                    <h3 class=\"section-title\" v-show=\"pipelineActionText\">Action</h3>\r\n                    <div>{{ pipelineActionText }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"main-controls__drawer-toggle\" :class=\"{ active: isMainDrawerOpen }\">\r\n                <button \r\n                    class=\"topcoat-button--large\" \r\n                    type=\"button\"\r\n                    @click=\"isMainDrawerOpen = !isMainDrawerOpen\"\r\n                >Source &amp; Status <span>❱</span></button>\r\n            </div>\r\n        </form>\r\n    </validation-observer>\r\n</template>\r\n\r\n<script>\r\nimport { ValidationProvider, ValidationObserver } from \"vee-validate\";\r\n\r\nimport _ from \"../utils\";\r\nimport store from \"../store\"; \r\nimport eventBus from \"../eventBus\";\r\nimport Server from '../server';\r\nimport PipelineEngineState from '../server/pipelineEngineState';\r\nimport WaitDots from './wait-dots.vue';\r\n\r\nexport default {\r\n    name: 'MainControls',\r\n    components: {\r\n        ValidationObserver,\r\n        ValidationProvider,\r\n        WaitDots\r\n    },\r\n    data() {\r\n        return {\r\n            pipelineEngineState: Server.pipelineEngine.state,\r\n            pipelineText: \"\",\r\n            pipelineActionText: \"\",\r\n            pipelinefilePathText: \"\",\r\n            isMainDrawerOpen: store.general.isMainDrawerOpen\r\n        }\r\n    },\r\n    watch: {\r\n        isMainDrawerOpen: v => { \r\n            store.general.isMainDrawerOpen = v; \r\n            store.general.save();\r\n        }\r\n        // imageSource: {\r\n        //     deep: true, \r\n        //     handler: function(v) {\r\n        //         store.general.imageSource = v;\r\n        //     }\r\n        // }\r\n    },\r\n    computed: {\r\n        canPause() {\r\n            return this.pipelineEngineState == PipelineEngineState.IDLE \r\n                || this.pipelineEngineState == PipelineEngineState.PROCESSING;\r\n        },\r\n        isStopped() {\r\n            return this.pipelineEngineState == PipelineEngineState.STOPPED;\r\n        },\r\n        isPaused() {\r\n            return this.pipelineEngineState == PipelineEngineState.PAUSED;\r\n        },\r\n        isProcessing() {\r\n            return this.pipelineEngineState == PipelineEngineState.PROCESSING;\r\n        },\r\n        pipelineEngineStateText() {\r\n            return PipelineEngineState.toKey(this.pipelineEngineState);\r\n        }\r\n    },\r\n    created() \r\n    {\r\n        eventBus.$on(\"pipeline-play\", pipelineName => {\r\n            Server.pipelineEngine.run(pipelineName);\r\n        });\r\n        Server.pipelineEngine.on(\"state\", state => {\r\n            this.pipelineEngineState = state;\r\n        });\r\n        Server.pipelineEngine.on(\"status\", status => {\r\n            this.pipelineText = status.pipeline;\r\n            this.pipelineActionText = status.action;\r\n            this.pipelinefilePathText = status.file;\r\n        });\r\n    },\r\n    methods: {\r\n        /**\r\n         * Submit handler\r\n         */\r\n        onPipelineRun() {\r\n            this.$dialog.openConfirm({\r\n                name: \"confirm\",\r\n                message: \"This will run all pipelines with their configured sources. Continue?\",\r\n                onYes: () => {\r\n                    Server.pipelineEngine.runAll();\r\n                }\r\n            });\r\n        },\r\n        onPipelineResume() {\r\n            Server.pipelineEngine.resume();\r\n        },\r\n        onPipelinePause() {\r\n            Server.pipelineEngine.pause();\r\n        },\r\n        onPipelineStop() {\r\n            Server.pipelineEngine.stop();\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-controls.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main-controls.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./main-controls.vue?vue&type=template&id=5a07d08a&\"\nimport script from \"./main-controls.vue?vue&type=script&lang=js&\"\nexport * from \"./main-controls.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <a-dialog-root />\r\n    <adobe-menus />\r\n    \r\n    <tabs @changed=\"onTabChanged\" :initial-tab=\"currentTabComponent\">\r\n        <tab title=\"the-console\">Console</tab>\r\n        <tab title=\"the-jsx-runner\">Jsx</tab>\r\n        <tab title=\"the-configurator\">Configuration</tab>\r\n        <tab title=\"the-pipelines\">Pipelines</tab>\r\n    </tabs>\r\n\r\n    <main-controls />\r\n\r\n    <section class=\"tab-content\">\r\n        <keep-alive>\r\n            <component :is=\"currentTabComponent\"></component>\r\n        </keep-alive>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* Can also use cep_node.require */\r\n/* npm modules */ \r\nimport upath from 'upath'; \r\n\r\n/* local modules */\r\nimport store from './store';\r\nimport themeManager from \"./themeManager\";\r\nimport Tabs from './components/tabs.vue';\r\nimport Tab from './components/tab.vue';\r\nimport MainControls from './components/main-controls.vue';\r\n\r\nexport default {\r\n    name: \"app\",\r\n    components: {\r\n        MainControls,\r\n        Tabs, \r\n        Tab,\r\n        AdobeMenus: () => import(\"./components/adobe-menus.vue\"),\r\n        TheConsole: () => import('./components/the-console.vue'),\r\n        TheJsxRunner: () => import(\"./components/the-jsx-runner.vue\"),\r\n        TheConfigurator: () => import(\"./components/the-configurator.vue\"),\r\n        ThePipelines: () => import(\"./components/the-pipelines.vue\")\r\n    },\r\n    data: () => {\r\n        return {\r\n            currentTabComponent: store.general.currentTab\r\n        }\r\n    },\r\n    mounted() {\r\n        themeManager.init();\r\n        this.hideLoadingSpinner();\r\n    },\r\n    methods: {\r\n        onTabChanged(tabTitle) {\r\n            store.general.currentTab = tabTitle;\r\n            store.general.save();\r\n            this.currentTabComponent = tabTitle;\r\n        },\r\n        hideLoadingSpinner() {\r\n            let spinnerEl = document.getElementById(\"loading\");\r\n            if (spinnerEl) \r\n                spinnerEl.style.display = \"none\";\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n/* Various helper styles to match application theme */\r\n@import url(\"http://fonts.googleapis.com/css?family=Source+Sans+Pro:300\");\r\n@import url(\"http://fonts.googleapis.com/css?family=Source+Code+Pro\");\r\n@import \"./styles/columns\";\r\n\r\n\r\n\r\nhtml, body {\r\n    font-size: 14px;\r\n    margin: 0;\r\n    padding: 0;\r\n    height: 100%;\r\n}\r\nbody {\r\n    font-family: source-sans-pro, sans-serif;\r\n    line-height: 1.5rem;\r\n\r\n    &.light {\r\n        background: #F4F4F4;\r\n        color: #181919;\r\n    }\r\n    &.dark {\r\n        color: $dark-text-color;\r\n        background: $dark-bg;\r\n    }\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n}\r\n\r\nh1, h2, h3 {\r\n    margin: 0 0 0.5em 0;\r\n}\r\nh1 {\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    margin: 0.5em;\r\n}\r\nh2 {\r\n    font-size: 16px;\r\n    font-weight: 300;\r\n}\r\nh3 {\r\n    font-size: 14px;\r\n    font-weight: 400;\r\n}\r\nh4 {\r\n    font-size: 12px; \r\n    font-weight: 400;\r\n}\r\n.dark .text-highlight {\r\n    color: $dark-text-highlight-color;\r\n}\r\n\r\n\r\n#app {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n}\r\n\r\n.tab-title {\r\n    font-weight: bold;\r\n    padding: .25rem .5rem;\r\n    left: -.5rem;\r\n    position: relative;\r\n    width: 100vw;\r\n\r\n    @at-root .dark & {\r\n        background: #424242;\r\n    }\r\n}\r\n.tab-content {\r\n    flex-grow: 1;\r\n    flex-shrink: 1;\r\n    padding: .5rem;\r\n}\r\n.section-title {\r\n    font-weight: bold;\r\n    margin: .5rem 0 0 0;\r\n    padding: .25rem 0;\r\n}\r\n.section-content {\r\n    padding: 0;\r\n}\r\n.section-content--inset {\r\n    background: rgba(0,0,0,0.2);\r\n    border: none;\r\n    border-radius: 7px;\r\n    padding: 1rem;\r\n}\r\n\r\n\r\n#app::-webkit-scrollbar {\r\n  display: block;\r\n}\r\nbody::-webkit-scrollbar {\r\n  width: 0px;\r\n}\r\n::-webkit-scrollbar-resizer {\r\n  display: none;\r\n  width: 0px;\r\n  background-color: transparent;\r\n}\r\n::-webkit-scrollbar-button {\r\n  height: 0px;\r\n}\r\n::-webkit-scrollbar-corner {\r\n  display: none;\r\n}\r\ninput[type=number] {\r\n    -moz-appearance:textfield;\r\n}\r\n::-webkit-outer-spin-button,\r\n::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n//-------------------\r\n// Utilities\r\n//-------------------\r\n@mixin clearfix() {\r\n  &::after {\r\n    display: block;\r\n    content: \"\";\r\n    clear: both;\r\n  }\r\n}\r\n.clearfix {\r\n    @include clearfix();\r\n}\r\n.flex {\r\n    display: flex;\r\n}\r\n.flex-grow {\r\n    flex-grow: 1;\r\n}\r\n.full-width {\r\n    width: 100%;\r\n}\r\n\r\n$space-1: $column-gap;\r\n$space-2: $column-gap * 2;\r\n\r\n.m0  { margin:        0 }\r\n.mt0 { margin-top:    0 }\r\n.mr0 { margin-right:  0 }\r\n.mb0 { margin-bottom: 0 }\r\n.ml0 { margin-left:   0 }\r\n.mx0 { margin-left:   0; margin-right:  0 }\r\n.my0 { margin-top:    0; margin-bottom: 0 }\r\n\r\n.m1  { margin:        $space-1 }\r\n.mt1 { margin-top:    $space-1 }\r\n.mr1 { margin-right:  $space-1 }\r\n.mb1 { margin-bottom: $space-1 }\r\n.ml1 { margin-left:   $space-1 }\r\n.mx1 { margin-left:   $space-1; margin-right:  $space-1 }\r\n.my1 { margin-top:    $space-1; margin-bottom: $space-1 }\r\n\r\n.m2  { margin:        $space-2 }\r\n.mt2 { margin-top:    $space-2 }\r\n.mr2 { margin-right:  $space-2 }\r\n.mb2 { margin-bottom: $space-2 }\r\n.ml2 { margin-left:   $space-2 }\r\n.mx2 { margin-left:   $space-2; margin-right:  $space-2 }\r\n.my2 { margin-top:    $space-2; margin-bottom: $space-2 }\r\n\r\n.ml-auto { margin-left: auto }\r\n.mr-auto { margin-right: auto }\r\n.mx-auto { margin-left: auto; margin-right: auto; }\r\n\r\n.left {\r\n    float: left;\r\n}\r\n.right {\r\n    float: right;\r\n}\r\n\r\n//-------------------\r\n// Topcoat Overrides\r\n//-------------------\r\n.topcoat-checkbox,\r\n.topcoat-text-input {\r\n    line-height: 1.5rem;\r\n}\r\n.topcoat-checkbox {\r\n    display: flex;\r\n    align-items: center;\r\n    margin: $column-gap 0;\r\n\r\n    &__checkmark {\r\n        margin-right: .5rem;\r\n    }\r\n}\r\n.topcoat-notification {\r\n    min-width: 24px;\r\n}\r\n.topcoat-notification.error {\r\n    bottom: 0;\r\n    opacity: .9;\r\n    overflow: visible;\r\n    position: absolute;\r\n    right: 0;\r\n    transform: translateY(100%);\r\n    z-index: 1;\r\n\r\n    &::after {\r\n        content: '\\25B6';\r\n        color: #ec514e;\r\n        font-size: 18px;\r\n        position: absolute;\r\n        right: 8px;\r\n        top: -16px;\r\n        transform: rotateZ(-90deg);\r\n    }\r\n}\r\n\r\nlabel {\r\n    display: block;\r\n    position: relative;\r\n}\r\n.label {\r\n    margin-bottom: .25rem;    \r\n}\r\n\r\n\r\n.main-controls {\r\n    z-index: 1;\r\n\r\n    &__controls {\r\n        text-align: center;\r\n    }\r\n    &__drawer {\r\n        background: rgba(0,0,0,0.2);\r\n        box-shadow: inset 0px 0px 8px 2px rgba(0, 0, 0, 0.2);\r\n        // max-height: 1000px;\r\n        overflow: hidden;\r\n        padding: .5rem .5rem 2rem .5rem;\r\n        \r\n        // &.v-enter-active,\r\n        // &.v-leave-active {\r\n        //     transition: max-height 0.4s;\r\n        // }\r\n        // &.v-enter,\r\n        // &.v-leave-to {\r\n        //     max-height: 0;\r\n        // }\r\n    }\r\n    &__drawer-toggle {\r\n        height: 0;\r\n        text-align: center;\r\n\r\n        button {\r\n            box-shadow: none !important;\r\n            border: inherit !important;\r\n        }\r\n        & span {\r\n            display: inline-block;\r\n            margin: 0  $column-gap * 2;\r\n            transform: rotateZ(90deg);\r\n        }\r\n        &.active span {\r\n            transform: rotateZ(-90deg);\r\n        }\r\n    }\r\n}\r\n\r\n.source,\r\n.pipeline {\r\n    background: rgba(0,0,0,0.2);\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    border-radius: 7px;\r\n    padding: 1rem;\r\n    margin-bottom: .5rem;\r\n\r\n    label {\r\n        position: relative;\r\n    }\r\n    label:not(.topcoat-checkbox) {\r\n        display: block;\r\n        margin-bottom: $column-gap;\r\n    }\r\n    &:last-of-type {\r\n        margin-bottom: ($column-gap * 2);\r\n    }\r\n}\r\n\r\n.configurator-buttons,\r\n.pipeline-buttons {\r\n    margin: ($column-gap * 2) 0;\r\n\r\n    button {\r\n        margin-right: .5rem;\r\n    }\r\n}\r\n\r\n.pipeline {\r\n    &.disabled {\r\n        background: rgba(255,0,0,0.03);\r\n    }\r\n}\r\n\r\n.pipeline-body,\r\n.source-body {\r\n    padding-left: 2rem;\r\n}\r\n/*\r\n    -----------------------------------------------\r\n    | Handle | Expand | Data                      |\r\n    |        |        | Name (Name | X)  |\r\n    |        |        | Parameters                |\r\n    _______________________________________________\r\n*/\r\n.action {\r\n    align-items: flex-start;\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: flex-start;\r\n}\r\n\r\n.action {\r\n    border: none;\r\n    border-bottom: 1px solid #333;\r\n    padding: ($column-gap * 2);\r\n\r\n    label {\r\n        position: relative;\r\n    }\r\n    label:not(.topcoat-checkbox) {\r\n        display: block;\r\n        margin-bottom: $column-gap;\r\n    }\r\n    &:last-of-type {\r\n        margin-bottom: ($column-gap * 2);\r\n    }\r\n}\r\n\r\n.pipeline-handle,\r\n.action-handle,\r\n.source-handle,\r\n.expand {\r\n    padding-left: $column-gap * 2;\r\n    padding-right: $column-gap * 2;\r\n}\r\n.pipeline-handle,\r\n.action-handle,\r\n.source-handle {\r\n    cursor: row-resize;\r\n}\r\n.expand {\r\n    cursor: pointer;\r\n    i {\r\n        font-style: normal;\r\n    }\r\n    &.open {\r\n        transform: rotateZ(90deg);\r\n    }\r\n}\r\n\r\n.action-data {\r\n    display: block;\r\n    flex-grow: 1;\r\n}\r\n.action-data {\r\n    .action-name {\r\n        display: flex;\r\n        width: 100%;\r\n        input[type=text] {\r\n            flex-grow: 1;\r\n        }\r\n    }\r\n    .action-parameters {\r\n        display: flex;\r\n        flex-direction: column;\r\n        width: 100%;\r\n\r\n        h3 {\r\n            margin: $column-gap 0;\r\n        }\r\n    }\r\n    .action-parameter {\r\n        display: flex;\r\n        margin-bottom: $column-gap;\r\n\r\n        &__input {\r\n            flex-grow: 1;\r\n        }\r\n        input {\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./app.vue?vue&type=template&id=c499e466&\"\nimport script from \"./app.vue?vue&type=script&lang=js&\"\nexport * from \"./app.vue?vue&type=script&lang=js&\"\nimport style0 from \"./app.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-dialog',{attrs:{\"isOpen\":_vm.isOpen,\"width\":_vm.width,\"height\":_vm.height,\"maxWidth\":_vm.maxWidth,\"maxHeight\":_vm.maxHeight},on:{\"onBackdropClose\":_vm.backdropClose}},[_c(_vm.component,_vm._g(_vm._b({tag:\"component\",on:{\"onClose\":_vm.close}},'component',_vm.props,false),_vm.listeners))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import Vue from 'vue'\n\nexport const events = new Vue({ name: 'a-dialog' })","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"modal-fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOpen),expression:\"isOpen\"}],staticClass:\"modal-backdrop\",class:{open: _vm.isOpen},on:{\"click\":_vm.onClose}},[_c('div',{ref:\"modal\",staticClass:\"modal\",style:({ height: _vm.height, width: _vm.width, maxHeight: _vm.maxHeight, maxWidth: _vm.maxWidth }),on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"default\")],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <transition name=\"modal-fade\">\r\n        <div class=\"modal-backdrop\" \r\n            :class=\"{open: isOpen}\"\r\n            @click=\"onClose\"\r\n            v-show=\"isOpen\">\r\n            <div class=\"modal\" v-bind:style=\"{ height, width, maxHeight, maxWidth }\" @click.stop ref=\"modal\">\r\n                <slot />\r\n            </div>\r\n        </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"ADialog\",\r\n    props: {\r\n        isOpen: Boolean,\r\n        width: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        height: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        maxWidth: {\r\n            type: String,\r\n            required: false\r\n        },\r\n        maxHeight: {\r\n            type: String,\r\n            required: false\r\n        }\r\n    },\r\n    watch: {\r\n        isOpen(value) {\r\n            if(!value) {\r\n                return;\r\n            }\r\n            this.$nextTick(() => {\r\n                this.setModalBodyHeight();\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        onClose() {\r\n            this.$emit('onBackdropClose');\r\n        },\r\n        setModalBodyHeight()\r\n        {\r\n            const headerEl = this.$el.querySelector(\".modal-header\");\r\n            const bodyEl = this.$el.querySelector(\".modal-body\");\r\n            const footerEl = this.$el.querySelector(\".modal-footer\");\r\n            const modalStyle = window.getComputedStyle(this.$refs.modal);\r\n            const modalHeight = parseInt(modalStyle.height, 10);\r\n            const modalPadding = parseInt(modalStyle.paddingTop, 10) + parseInt(modalStyle.paddingBottom, 10);\r\n            const headerHeight = headerEl ? headerEl.clientHeight : 0;\r\n            const footerHeight = footerEl ? footerEl.clientHeight : 0;\r\n\r\n            if(bodyEl) {\r\n                bodyEl.style.maxHeight = ((modalHeight - modalPadding) - (headerHeight + footerHeight)) + \"px\";\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./a-dialog.vue?vue&type=template&id=6b2b94b0&\"\nimport script from \"./a-dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./a-dialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('section',{staticClass:\"modal-body\"},[_vm._v(\" \"+_vm._s(_vm.message)+\" \")]),_c('footer',{staticClass:\"modal-footer\"},[_vm._t(\"footer\",[_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('onClose', true)}}},[_vm._v(\" Yes \")]),_c('button',{staticClass:\"topcoat-button--large\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('onClose', false)}}},[_vm._v(\" Cancel \")])])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <section class=\"modal-body\">\r\n            {{ message }}\r\n        </section>\r\n        <footer class=\"modal-footer\">\r\n            <slot name=\"footer\">\r\n                <button type=\"button\" class=\"topcoat-button--large\" @click=\"$emit('onClose', true)\">\r\n                    Yes\r\n                </button>\r\n                <button type=\"button\" class=\"topcoat-button--large\" @click=\"$emit('onClose', false)\">\r\n                    Cancel\r\n                </button>\r\n            </slot>\r\n        </footer>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Confirm\",\r\n    props: {\r\n        message: {\r\n            type: String, \r\n            required: true\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=1cefc03c&\"\nimport script from \"./confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./confirm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <a-dialog \r\n        :isOpen=\"isOpen\" \r\n        :width=\"width\" \r\n        :height=\"height\" \r\n        :maxWidth=\"maxWidth\" \r\n        :maxHeight=\"maxHeight\"\r\n        @onBackdropClose=\"backdropClose\"\r\n    >\r\n        <component \r\n            :is=\"component\" \r\n            v-bind=\"props\" \r\n            v-on=\"listeners\" \r\n            @onClose=\"close\" />\r\n    </a-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {events} from './events';\r\nimport ADialog from './a-dialog.vue';\r\nimport Confirm from './confirm.vue';\r\n\r\nconst defaultOptions = {\r\n    height: \"auto\",\r\n    width: \"80%\",\r\n    maxWidth: \"80%\",\r\n    maxHeight: \"80%\"\r\n};\r\n\r\nexport default {\r\n    name: 'ADialogRoot',\r\n    components: {\r\n        ADialog\r\n    },\r\n    data: () => ({\r\n        component: null,\r\n        width: \"\",\r\n        height: \"\",\r\n        maxWidth: \"\",\r\n        maxHeight: \"\",\r\n        props: null,\r\n        listeners: null\r\n    }),\r\n    computed: {\r\n        isOpen() {\r\n            return !!this.component;\r\n        }\r\n    },\r\n    mounted () {\r\n        events.$on('openconfirm', this.openConfirm);\r\n        events.$on('open', this.open);\r\n        events.$on('close', this.close);\r\n    },\r\n    methods: {\r\n        openConfirm({ onYes, onCancel, message, ...args }) \r\n        {\r\n            this.open({ \r\n                component: Confirm, \r\n                listeners: {\r\n                    onClose: (isYes) => {\r\n                        if(isYes)\r\n                            onYes && onYes();\r\n                        else \r\n                            onCancel && onCancel();\r\n                    }\r\n                },\r\n                props: {\r\n                    message\r\n                },\r\n                ...args\r\n            });\r\n        },\r\n        open({ width, height, maxWidth, maxHeight, component, props = null, listeners = null }) \r\n        {\r\n            if(this.isOpen) {\r\n                console.warn(\"Dialog already open. Ignoring open: \" + component.name);\r\n                return;\r\n            }\r\n            console.log(`Dialog open.`);\r\n\r\n            this.width = width || defaultOptions.width;\r\n            this.height = height || defaultOptions.height;\r\n            this.maxWidth = maxWidth || defaultOptions.maxWidth;\r\n            this.maxHeight = maxHeight || defaultOptions.maxHeight;\r\n            this.component = component;\r\n            this.props = props;\r\n            this.listeners = listeners;\r\n        },\r\n        backdropClose() {\r\n            // Force close\r\n            if(this.listeners && this.listeners.onClose) {\r\n                this.listeners.onClose();\r\n            }\r\n            this.close();\r\n        },\r\n        /**\r\n         * IMPORTANT: Should only be called by child component 'onClose' event.\r\n         * Otherwise previous open() calls could be left hanging (e.g. waiting for a callback)\r\n         */\r\n        close() {\r\n            console.log(`Dialog close.`);\r\n\r\n            this.component = null;\r\n            this.props = null;\r\n            this.listeners = null;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .modal-backdrop {\r\n        position: fixed;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background-color: rgba(0, 0, 0, 0.4);\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        z-index: 2;\r\n    }\r\n\r\n    .modal {\r\n        background: #444;\r\n        overflow-x: auto;\r\n        display: flex;\r\n        flex-direction: column;\r\n        padding: 1rem;\r\n    }\r\n\r\n    .modal-body {\r\n        min-height: 3rem;\r\n        overflow: auto;\r\n        padding: .25rem;\r\n        position: relative;\r\n    }\r\n\r\n    .modal-header {\r\n        padding-bottom: 1rem;\r\n    }\r\n\r\n    .modal-footer {\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        padding-top: 1rem;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./a-dialog-root.vue?vue&type=template&id=4c0bda4e&\"\nimport script from \"./a-dialog-root.vue?vue&type=script&lang=js&\"\nexport * from \"./a-dialog-root.vue?vue&type=script&lang=js&\"\nimport style0 from \"./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import ADialogRoot from './a-dialog-root.vue';\r\nimport {events} from './events';\r\n\r\nconst Plugin = {\r\n    install (Vue, globalOptions = {}) \r\n    {\r\n        Vue.prototype.$dialog = {\r\n            /**\r\n             * Opens a simple message confirmation dialog\r\n             * @param {string} message message to display\r\n             * @param {function} onYes callback for Yes answer\r\n             * @param {function} onCancel callback for Cancel answer\r\n             */\r\n            openConfirm(options) {\r\n                events.$emit('openconfirm', options);\r\n            },\r\n            open (options) {\r\n                events.$emit('open', options);\r\n            }\r\n        };\r\n\r\n        Vue.component('ADialogRoot', ADialogRoot)\r\n    }\r\n}\r\n  \r\nexport default Plugin","import fs from 'fs';\r\nimport upath from 'upath';\r\nimport { configure, setInteractionMode, extend } from 'vee-validate';\r\nimport _ from '../utils';\r\n\r\nsetInteractionMode(\"custom\", context => {\r\n    return {\r\n        on: [\"change\", \"blur\"]\r\n    }\r\n});\r\n\r\nextend(\"integer\", {\r\n    validate(value, { min, max }) {\r\n        value = parseInt(value, 10);\r\n        min = parseInt(min, 10);\r\n        max = parseInt(max, 10);\r\n\r\n        let message = `Must be an integer`;\r\n        if(_.isNumber(min) && _.isNumber(max)) {\r\n            message += ` between ${min} and ${max}`;\r\n        } else if(_.isNumber(min)) {\r\n            message += ` greater than or equal to ${min}`;\r\n        } else if(_.isNumber(max)) {\r\n            message += ` less than or equal to ${max}`;\r\n        }\r\n        if(!_.isNumber(value)) {\r\n            return message;\r\n        }\r\n        if(_.isNumber(min) && value < min) {\r\n            return message;\r\n        }\r\n        if(_.isNumber(max) && value > max) {\r\n            return message;\r\n        }\r\n        return true;\r\n    },\r\n    params: ['min', 'max']\r\n})\r\n\r\nextend('required', {\r\n    validate (value) {\r\n        return {\r\n            required: true,\r\n            valid: ['', null, undefined].indexOf(value) === -1 && !(Array.isArray(value) && value.length === 0)\r\n        };\r\n    },\r\n    message: 'This is required',\r\n    computesRequired: true\r\n});\r\n\r\nextend('pathexists', { \r\n    async validate(value) \r\n    {\r\n        const exists = await new Promise(resolve => {\r\n            fs.access(value, error => {\r\n                resolve(!error);\r\n            });\r\n        });\r\n        if(exists) {\r\n            return true;\r\n        }\r\n        return {\r\n            valid: false\r\n        }\r\n    },\r\n    message: \"Path does not exist\"\r\n});\r\n\r\nextend('pathunc', {\r\n    validate(value, args) {\r\n        const allowed = typeof args.allowed === \"boolean\" ? args.allowed : JSON.parse(args.allowed.toLowerCase());\r\n        const path = value.trim();\r\n        const isUnc = path.startsWith(\"//\") || path.startsWith(\"\\\\\\\\\");\r\n        return !(isUnc && !allowed)\r\n    },\r\n    params: ['allowed'],\r\n    message: `Path cannot be a UNC path.`\r\n})\r\n\r\nextend('pathrelative', {\r\n    validate(value, args) {\r\n        const allowed = typeof args.allowed === \"boolean\" ? args.allowed : JSON.parse(args.allowed.toLowerCase());\r\n        const path = value.trim();\r\n        if(!allowed) {\r\n            return upath.isAbsolute(path);\r\n        }\r\n        return true;\r\n    },\r\n    params: ['allowed'],\r\n    message: `Path must be absolute.`\r\n})\r\n\r\nextend('custom', {\r\n    params: ['fn'],\r\n    validate(value, params) {\r\n        const result = params.fn(value);\r\n        return result.valid ? result.valid : result.message;\r\n    }\r\n});\r\n\r\nconsole.log(\"Validation imported\");\r\nexport default { \r\n    init: () => {\r\n        return Promise.resolve();\r\n    } \r\n};\r\n\r\n\r\n// extend(\"uniq\", {\r\n//     validate: async value => {\r\n//       const response = await checkEmail(value);\r\n  \r\n//       if (response.valid) {\r\n//         return true;\r\n//       }\r\n  \r\n//       return {\r\n//         valid: false,\r\n//         data: {\r\n//           // this will be used to interpolate the message.\r\n//           serverMessage: response.errors[0]\r\n//         }\r\n//       };\r\n//     },\r\n//     // same prop as returned in the `data` object.\r\n//     message: `{serverMessage}`\r\n// });\r\n\r\n// /**\r\n//  * Master validation instance. Keeps track of validation components and their validity. \r\n//  * Should be imported at root <form> component and instance passed down to child components.\r\n//  */\r\n// class Validation\r\n// {\r\n//     constructor(root) {\r\n//         this.root = root;\r\n//         this.validatorComponents = [];\r\n//     }\r\n//     register(validator) \r\n//     {\r\n//         this.validatorComponents.push(validator);\r\n//     }\r\n//     unregister(validator) \r\n//     {\r\n//         this.validatorComponents = this.validatorComponents.filter(c => c !== validator);\r\n//     }\r\n//     isValid() {\r\n//         return this.validatorComponents.every(c => c.isValid());\r\n//     }\r\n// }\r\n// Validation.mixin = {\r\n//     directives: {\r\n//         \"errors\": {\r\n//             bind: function(el, binding, vnode) {\r\n//                 var s = JSON.stringify\r\n//                 el.innerHTML =\r\n//                 'name: '       + s(binding.name) + '<br>' +\r\n//                 'value: '      + s(binding.value) + '<br>' +\r\n//                 'expression: ' + s(binding.expression) + '<br>' +\r\n//                 'argument: '   + s(binding.arg) + '<br>' +\r\n//                 'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//                 'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//             }\r\n//         }\r\n//     },\r\n//     props: {\r\n//         validation: Object\r\n//     },\r\n//     data() {\r\n//         return {\r\n//             errors: {}\r\n//         }\r\n//     },\r\n//     beforeCreate() { \r\n//         // Make errors observable\r\n//         this.$validator = new Validator(this.errors);  \r\n\r\n//         // Register with Master \r\n//         this.validation = this.validation || new Validation();\r\n//         this.validation.register(this.$validator);\r\n//     },\r\n//     beforeDestroy() {\r\n//         // Un-Register with Master \r\n//         this.validation.unregister(this.$validate);\r\n//     }\r\n// }\r\n// /**\r\n//  * Holds current component errors. An instance is created on each component using the Validation.mixin\r\n//  */\r\n// class Validator\r\n// {\r\n//     constructor(validationErrors) {\r\n//         this._validationErrors = validationErrors;\r\n//     }\r\n//     /**\r\n//      * Set the validity/message of a given field\r\n//      * @param {string} key the name of the form field \r\n//      * @param {*} message the validation message or empty if valid\r\n//      */\r\n//     pushError(key, message) \r\n//     {\r\n//         this._validationErrors[key] = message;\r\n//     }\r\n//     isValid() \r\n//     {\r\n//         return Object.values(this._validationErrors).filter(error => !!error).length == 0;\r\n//     }\r\n// }\r\n\r\n// export default Validation;  \r\n\r\n\r\n\r\n\r\n\r\n// Vue.directive(\"demo\", {\r\n//     bind: function(el, binding, vnode) {\r\n//         var s = JSON.stringify\r\n//         el.innerHTML =\r\n//         'name: '       + s(binding.name) + '<br>' +\r\n//         'value: '      + s(binding.value) + '<br>' +\r\n//         'expression: ' + s(binding.expression) + '<br>' +\r\n//         'argument: '   + s(binding.arg) + '<br>' +\r\n//         'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//         'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//     }\r\n// });","import process from 'process';\r\nimport Vue from 'vue';\r\nimport App from './app.vue';\r\nimport Dialog from './dialog';\r\nimport Host from './host';\r\nimport HostScriptListener from './host/hostScriptListener';\r\nimport Logger from './console';\r\nimport Server from './server';\r\nimport global from './global';\r\nimport Validation from './validation';\r\nimport Store from './store';\r\n\r\nglobal.csInterface.setWindowTitle(\"Mario v\" + global.appVersion);\r\n\r\n// Fixes module resolution issues for dependencies within node_modules\r\nprocess.chdir(global.appWorkingPath);\r\n__dirname = global.appWorkingPath;\r\n\r\n\r\nVue.config.productionTip = false;\r\nVue.config.devtools = true;\r\nVue.use(Dialog);\r\n\r\nconst destroy = () => {\r\n    Server.destroy();\r\n    Host.destroy();\r\n    HostScriptListener.destroy();\r\n    Logger.destroy();\r\n};\r\n\r\nconst create = async () => {\r\n    await Store.init();\r\n    await Logger.init();\r\n    await Server.init();\r\n    await Host.init(); \r\n    await HostScriptListener.init();\r\n    await Validation.init();\r\n\r\n    window.vue = new Vue({\r\n        render: h => h(App),\r\n        beforeDestroy: destroy\r\n    }).$mount('#app');\r\n};\r\n\r\ncreate();\r\n\r\nwindow.addEventListener(\"beforeunload\", destroy);\r\n\r\n/**  \r\n    beforeCreate - about to be initialized. data is not yet reactive \r\n    created - events and data observation setup. not yet in native DOM. access data here, not in mounting hooks \r\n    beforeMount - right before render happens. template compiled and virtual DOM update by vue.  \r\n    mounted - $el added and native DOM updated. do modify DOM for integration of non-Vue libraries here.\r\n    beforeUpdate - data has changed and update cycle starting. do get data before actually is rendered. \r\n    updated - data changed and native DOM updated. do access DOM after property changes here. \r\n    beforeDestroy - about to teardown. still fully present and functional. do cleanup events, and subscriptions \r\n    destroyed - nothing left on your component. do last minute cleanups, etc. \r\n*/\r\n\r\n\r\n// Vue.directive(\"print\", {\r\n//     bind: function(el, binding, vnode) {\r\n//         var s = JSON.stringify\r\n//         el.innerHTML =\r\n//         'name: '       + s(binding.name) + '<br>' +\r\n//         'value: '      + s(binding.value) + '<br>' +\r\n//         'expression: ' + s(binding.expression) + '<br>' +\r\n//         'argument: '   + s(binding.arg) + '<br>' +\r\n//         'modifiers: '  + s(binding.modifiers) + '<br>' +\r\n//         'vnode keys: ' + Object.keys(vnode).join(', ')\r\n//     }\r\n// });","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=style&index=0&lang=scss&\"","import EventEmitter from \"events\";\r\nimport child_process from 'child_process';\r\n\r\n/**\r\n * @fires HostCallbackTunnelExec#enter immediately after exec() is called\r\n * @fires HostCallbackTunnelExec#exit when exec() callback is complete. this.close() is called immediately after this event.\r\n */\r\nexport default class HostCallbackTunnelExec extends EventEmitter\r\n{\r\n    constructor(cwd) \r\n    {\r\n        super();\r\n\r\n        this.cwd = cwd;\r\n        this.childProcess = null;\r\n        this.tunnelId = 0;\r\n    }\r\n    get name() {\r\n        return \"exec\";\r\n    }\r\n    getId() {\r\n        return this.tunnelId;\r\n    }\r\n    setId(id) {\r\n        this.tunnelId = id;\r\n    }\r\n    /**\r\n     * Execute the exec() tunnel\r\n     * @param {string} stream the raw parameters string (e.g. \"<callback id>, cp myFile.txt newFile.txt\")\r\n     */\r\n    open(stream) \r\n    {\r\n        const data = stream.split(\",\");\r\n        const callbackId = Number(data[0]);\r\n        const command = data[1];\r\n\r\n        /*\r\n            Since ExtendScript can't execute shell commands without blocking. \r\n            We're hijacking node.js exec() here.\r\n        */\r\n        this.childProcess = child_process.exec(command, \r\n        {\r\n            cwd: this.cwd,\r\n            timeout: 5 * 60 * 1000 // terminate long running processes\r\n        }, \r\n        (err, stdout, stderr) => \r\n        {\r\n            this.childProcess = null\r\n            let jsx = \"\";\r\n\r\n            if(err) {\r\n                console.error(err);\r\n                console.log(stderr);\r\n            } else {\r\n                stdout = JSON.stringify(stdout);\r\n                stderr = JSON.stringify(stderr);\r\n                jsx = `executeExecCallback(${callbackId},${stdout},${stderr});`;\r\n            }\r\n\r\n            this.emit(\"exit\", jsx);\r\n            this.close();\r\n        });\r\n\r\n        this.emit(\"enter\");\r\n    }\r\n    /**\r\n     * Sends a SIGTERM to the child process\r\n     */\r\n    close()\r\n    {\r\n        if(this.childProcess !== null && !this.childProcess.killed) \r\n            this.childProcess.kill();\r\n\r\n        this.removeAllListeners();\r\n    }\r\n}\r\n\r\n\r\n","import EventEmitter from \"events\";\r\n\r\n/**\r\n * @fires HostCallbackTunnelSetTimeout#enter immediately after setTimeout() is called\r\n * @fires HostCallbackTunnelSetTimeout#exit when setTimeout() callback is complete. this.close() is called immediately after this event.\r\n */\r\nexport default class HostCallbackTunnelSetTimeout extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n\r\n        this.timeoutId = 0;\r\n        this.tunnelId = 0;\r\n    }\r\n    get name() {\r\n        return \"setTimeout\";\r\n    }\r\n    getId() {\r\n        return this.tunnelId;\r\n    }\r\n    setId(id) {\r\n        this.tunnelId = id;\r\n    }\r\n    /**\r\n     * Execute the setTimeout() tunnel\r\n     * @param {string} stream the raw parameters string (e.g. \"<callback id>, 1000\")\r\n     */\r\n    open(stream) \r\n    {\r\n        const data = stream.split(\",\");\r\n        const callbackId = Number(data[0]);\r\n        const delay = Number(data[1]);\r\n\r\n        this.stream = stream;\r\n        this.timeoutId = setTimeout(() =>\r\n        {\r\n            this.timeoutId = 0;\r\n            this.emit(\"exit\", `executeSetTimeoutCallback(${callbackId})`);\r\n            this.close();\r\n        }, delay);\r\n\r\n        this.emit(\"enter\");\r\n    }\r\n    /**\r\n     * Force clears the setTimeout\r\n     */\r\n    close()\r\n    {\r\n        if(this.timeoutId)\r\n            clearTimeout(this.timeoutId);\r\n        \r\n        this.removeAllListeners();\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport upath from 'upath';\r\n\r\nimport HostCallbackTunnelExec from './hostCallbackTunnelExec';\r\nimport HostCallbackTunnelSetTimeout from './hostCallbackTunnelSetTimeout';\r\nimport appGlobal from '../global';\r\nimport store from '../store';\r\n\r\n\r\n/*\r\n    Creative Suite Extendscript Interface / Decorator\r\n*/\r\nclass Host extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        /**\r\n         * To reduce coupling with GUI, this raw interface should not be used in Vue components\r\n         */\r\n        this.interface = new CSInterface();\r\n        this._initialized = false;\r\n        this._nextTunnelId = 0;\r\n        this._tunnelIdToTunnel = new Map();\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        if(this._initialized) return;\r\n        this._initialized = true;\r\n\r\n        // Host Environment Setup\r\n        this.importScript(\"utils.jsx\");\r\n        this.importScript(\"polyfil.jsx\");\r\n        this.importScript(\"console.jsx\");\r\n        this.importScript(\"json.jsx\"); \r\n        this.importScript(\"events.jsx\");\r\n        this.importScript(\"image.jsx\"); \r\n        \r\n        // Listeners\r\n        this.interface.addEventListener(\"log\", event => {\r\n            console.log(\"Jsx Log: \", event.data);\r\n        });\r\n        // Tunnel Listeners\r\n        this.interface.addEventListener(\"exec\", this._onExec.bind(this));\r\n        this.interface.addEventListener(\"setTimeout\", this._onSetTimeout.bind(this));\r\n\r\n        console.log(`Host initialized.\\n\r\n            Install Path: ${appGlobal.appInstallPath}\\n\r\n            Working Path: ${appGlobal.appWorkingPath}\\n\r\n            Default Log Path: ${appGlobal.appDefaultLogPath}\\n\r\n            Default Config Path: ${appGlobal.appDefaultConfigPath}\\n\r\n            Builtin Action Path: ${appGlobal.appBuiltinActionsPath}\\n\r\n            Creative Suite API Version: ${appGlobal.adobeCEPApiVersion}\\n\r\n            OS: ${appGlobal.os}\\n\r\n            App Version: ${appGlobal.appVersion}`);\r\n            \r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        for(const [id, tunnel] of this._tunnelIdToTunnel) {\r\n            tunnel.close();\r\n        }\r\n    }\r\n    /*---------------------\r\n            Events\r\n    ---------------------*/\r\n    dispatchEvent(eventName, data) \r\n    {\r\n        const scope = \"APPLICATION\";\r\n        const event = new CSEvent(eventName, scope);\r\n              event.data = data;\r\n        this.interface.dispatchEvent(event);\r\n    }\r\n    /**\r\n     * Returns a promise that is fulfilled when all jsx callbacks are completed (e.g. setTimeout() and exec())\r\n     * @returns {Promise}\r\n     */\r\n    join() {\r\n        if(this._nextTunnelId === 0) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        return new Promise(resolve => \r\n        {\r\n            this.once(\"host.callback.join\", resolve);\r\n        });\r\n    }\r\n    _onSetTimeout(event)\r\n    {\r\n        const tunnel = new HostCallbackTunnelSetTimeout();\r\n        this._openTunnel(tunnel, event.data);\r\n    }\r\n    _onExec(event) \r\n    {\r\n        const tunnel = new HostCallbackTunnelExec(\r\n            store.general.pathToUserActions\r\n        );\r\n        this._openTunnel(tunnel, event.data);\r\n    }\r\n    _openTunnel(tunnel, stream) \r\n    {\r\n        const tunnelId = this._nextTunnelId++;\r\n        this._tunnelIdToTunnel.set(tunnelId, tunnel);\r\n\r\n        tunnel.setId(tunnelId);\r\n        tunnel.once(\"enter\", () => {\r\n            console.log(`Tunnel ${tunnel.getId()}: ${tunnel.name}\\n\\t ${stream}\\n\\t Entered.`);\r\n        });\r\n        tunnel.once(\"exit\", (jsx) => {\r\n            console.log(`Tunnel ${tunnel.getId()}: ${tunnel.name}\\n\\t ${stream}\\n\\t Exited.\\nWith Jsx:\\n\\t${jsx}`);\r\n            this._exitTunnel(tunnel, jsx);\r\n        });\r\n        tunnel.open(stream);\r\n    }\r\n    _exitTunnel(tunnel, jsx) \r\n    {\r\n        this._tunnelIdToTunnel.delete(tunnel.getId());\r\n\r\n        this.runJsxWithThrow(jsx)\r\n        .finally(() => \r\n        {\r\n            console.log(`Tunnel ${tunnel.getId()} Finished Executing Jsx Callback.`);\r\n\r\n            if(this._tunnelIdToTunnel.size === 0) {\r\n                this._nextTunnelId = 0;\r\n                this.emit(\"host.callback.join\");\r\n            }\r\n        });\r\n    }\r\n\r\n    /*---------------------\r\n        Extend Script\r\n    ---------------------*/\r\n    // NOTES:\r\n    // ActionReference is what to perform the action on within Photoshop  (e.g. document, marque tool, etc)\r\n    // The Action Manager system keeps track of a large number of Descriptors keys relative to the status of:\r\n    // - The Application\r\n    // - Documents\r\n    // - Layers\r\n    // - Channels\r\n    // - Paths\r\n    // - History\r\n    // - ActionSets and Actions \r\n\r\n    /**\r\n     * Import/Execute an ExtendScript file, such as a library.\r\n     * @param {string} fileName - name of file relative to app distribution path\r\n     */\r\n    async importScript(fileName) \r\n    {\r\n        const importPath = upath.join(appGlobal.appWorkingPath, fileName);\r\n        const result = await this.runJsx(`importJsx(\"${importPath}\");`);\r\n        console.log(\"Jsx File Imported: \" + importPath + \" Result: \" + result);\r\n    }\r\n    /**\r\n     * Evaluate ExtendScript/JSX script on Host\r\n     * @param {string} script \r\n     * @returns {Promise}\r\n     */\r\n    runJsx(script) \r\n    {\r\n        return new Promise(resolve => {\r\n            this.interface.evalScript(script, result => {\r\n                resolve(result);\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * Evaluate ExtendScript/JSX script on Host and throw an Exception if string \"error\" or \"exception\" is in the result.\r\n     * NOTE: If result is 'Evalscript error.' there may be a syntax error in the script string\r\n     * @param {string} script \r\n     * @returns {Promise}\r\n     */\r\n    runJsxWithThrow(script) \r\n    {\r\n        return new Promise((resolve, reject) => \r\n        {\r\n            this.interface.evalScript(`(function(){\r\n                try {\r\n                    ${script}\r\n                } catch(e) {\r\n                    return e.toString();\r\n                }\r\n            }())`, \r\n            (result) => {\r\n                const lowerCaseResult = result.toLowerCase();\r\n                if(lowerCaseResult.includes(\"error\") || lowerCaseResult.includes(\"exception\")) {\r\n                    reject(`\\nJsx:\\n${script}\\nException in Result:\\n${result}\\n`);\r\n                } else {\r\n                    resolve(result);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    /**\r\n     * Run the ExtendScript action function by the given name\r\n     * @param {string} functionName \r\n     * @param {number|string|boolean|object|array} parameters \r\n     * @returns {Promise}\r\n     */\r\n    runActionWithParameters(functionName, parameters)\r\n    {\r\n        console.log(`Action: ${functionName}`);\r\n        const parametersJson = JSON.stringify(parameters);\r\n        return this.runJsxWithThrow(`\r\n            var result = ${functionName}(${parametersJson});\r\n            return result;\r\n        `);\r\n    }\r\n    \r\n    /**\r\n     * Converts an Action Manager charId to a stringId\r\n     * Returns empty string if error occurred.\r\n     * @param {string} charId \r\n     */\r\n    convertCharToStringId(charId) {\r\n        return this.runJsx(`t2s(c2t('${charId}'))`)\r\n        .then(result => {\r\n            return result.includes(\"error\") ? \"\" : result;\r\n        });\r\n    }\r\n    /**\r\n     * Converts an Action Manager stringId to a charId\r\n     * Returns empty string if error occurred.\r\n     * @param {string} charId \r\n     */\r\n    convertStringToCharId(stringId) {\r\n        return this.runJsx(`t2c(s2t('${stringId}'))`)\r\n        .then(result => {\r\n            return result.includes(\"error\") ? \"\" : result;\r\n        });\r\n    }\r\n}\r\n\r\nexport default new Host();","\"use strict\";\r\n\r\n\r\nfunction Enum(enumArr, offset) \r\n{\r\n    if(!(this instanceof Enum)) { return new Enum(enumArr, offset); }\r\n\r\n    return create_.call(this, enumArr, offset);\r\n}\r\n/** Essentially the enumeration starting value. Default is 0 */\r\nEnum.prototype.offset = 0;\r\n/** Return a copy of this.keys */\r\nEnum.prototype.toArray = function() {\r\n    return this.keys.slice(0);\r\n};\r\n/** Returns whether the given value is in the enumeration */\r\nEnum.prototype.isValid = function(val) {\r\n    return Number.isInteger(val) && (val - this.offset) < this.keys.length && (val - this.offset) >= 0;\r\n};\r\n/** Returns the key associated with the given value, else undefined. */\r\nEnum.prototype.toKey = function(val) {\r\n    if( !this.isValid(val) ) { return undefined; }\r\n    return this.keys[val - this.offset];\r\n};\r\n/** Returns the value associated with the given key, else undefined. */\r\nEnum.prototype.parse = function(key) {\r\n    if( !(typeof key === \"string\") ) { return undefined; }\r\n\r\n    key = key.trim().toUpperCase();\r\n    for(var i = 0; i < this.keys.length; ++i) {\r\n        if( this.keys[i].toUpperCase() === key ) { \r\n            return i + this.offset; \r\n        }\r\n    }\r\n    return undefined;\r\n};\r\n\r\n/**\r\n * TODO: Needs Performance Improvement\r\n * @param {*} enumArr \r\n * @param {*} offset \r\n */\r\nfunction create_(enumArr, offset) \r\n{\r\n    if(!Array.isArray(enumArr)) {\r\n        throw new Error(\"Enum: create() Invalid parameter type. Expected Array.\");\r\n    }\r\n\r\n    var validName = /[A-Z_][A-Z0-9_]*/gi;\r\n\r\n    // Define array keys as properties\r\n    var enumer = this;\r\n        enumer.keys = [];\r\n        enumer.keys.length = enumArr.length;\r\n\r\n    if(Number.isInteger(offset)) {\r\n        enumer.offset = offset;\r\n    } else {\r\n        offset = 0;\r\n    }\r\n        \r\n    var nextKey;\r\n    for(var i = 0; i < enumArr.length; ++i) {\r\n        if( typeof enumArr[i] !== \"string\" || !validName.test(enumArr[i]) ) {\r\n            throw new Error(\"Enum: create() Not a string or Invalid name: \" + enumArr[i]);\r\n        }\r\n        validName.lastIndex = 0;\r\n        \r\n        nextKey = enumArr[i];\r\n        enumer.keys[i] = nextKey;\r\n        enumer[ nextKey ] = i + offset;       \r\n    }\r\n\r\n    // TODO: \r\n    // Object.defineProperty(this, 'enumValues', {\r\n    //     value: [],\r\n    //     configurable: false,\r\n    //     writable: false,\r\n    //     enumerable: true\r\n    // });\r\n    return enumer;\r\n}\r\n\r\nexport default Enum;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{domProps:{\"innerHTML\":_vm._s(_vm.dots)}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <span v-html=\"dots\"></span>\r\n</template>\r\n\r\n<script>\r\nlet handle = 0;\r\n\r\nexport default {\r\n    name: \"WaitDots\", \r\n    props: {\r\n        intervalMs: {\r\n            type: Number,\r\n            default: 500\r\n        }\r\n    },\r\n    data() {\r\n        return { \r\n            dotCount: 1,\r\n            dots: \".\" \r\n        };\r\n    },\r\n    mounted() {\r\n        handle = setInterval(() => {\r\n            this.dots = \".\".repeat(this.dotCount);\r\n            this.dots += \"&nbsp;\".repeat(4 - this.dotCount);\r\n            this.dotCount = (this.dotCount + 1) % 4;\r\n        }, this.intervalMs);\r\n    },\r\n    beforeDestroy() {\r\n        clearInterval(handle);\r\n    }\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wait-dots.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wait-dots.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wait-dots.vue?vue&type=template&id=692bef91&\"\nimport script from \"./wait-dots.vue?vue&type=script&lang=js&\"\nexport * from \"./wait-dots.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = require(\"util\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","\r\n\r\n/**\r\n * Represents a single Image process\r\n */\r\nexport default class Image \r\n{\r\n    constructor() \r\n    {\r\n        /**\r\n         * The path value that initiated this Image process.\r\n         * Depending on the File Source, this will be one of the following:\r\n         * 1) the absolute input file/directory path\r\n         * 2) the file/document name when full path is not available (e.g. an un-saved active document).\r\n         * 3) empty string (e.g. File Source is Blank)\r\n         */\r\n        this.initialInputImagePath = \"\";\r\n        /**\r\n         * Same as initialInputImagePath except when initialInputImagePath is a json data file\r\n         * in which case, this value is sourced from the json data.\r\n         * NOTE: an invalid/blank inputImagePath will cause an error when using a json input file\r\n         */\r\n        this.inputImagePath = \"\";\r\n        /**\r\n         * The parent directory of initialInputImagePath, or blank if not available \r\n         */\r\n        this.inputDirectory = \"\";\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where output files should be written\r\n         */\r\n        this.outputDirectory = \"\";\r\n        this.useOutputDirectory = false;\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where processed input files will be moved\r\n         */\r\n        this.processedDirectory = \"\";\r\n        this.useProcessedDirectory = false;\r\n        /**\r\n         * If available (either via json or GUI configuration), the directory where input files and error loges will be moved\r\n         */\r\n        this.errorDirectory = \"\";\r\n        this.useErrorDirectory = false;\r\n        /**\r\n         * External data (stored outside file) metadata necessary for processing, as sourced from JSON\r\n         */\r\n        this.data = {};     \r\n        /**\r\n         * Internal data (Metadata stored in the file)\r\n         */\r\n        this.metadata = {}; \r\n        /**\r\n         * (Optional) pipelines that should process this Image\r\n         */\r\n        this.pipelines = [];\r\n        /**\r\n         * The current pipeline processing this Image\r\n         */\r\n        this.pipeline = \"\";\r\n        /**\r\n         * The current job id for this Image (may be sourced from JSON) */\r\n        this.jobId = \"\";\r\n        /**\r\n         * An array of error messages encountered during processing, if applicable\r\n         * @type {Array<string>} \r\n         */\r\n        this.errors = [];\r\n    }\r\n}\r\n\r\n","import upath from 'upath';\r\nimport fs from 'fs';\r\nimport fsx from '../fsx';\r\nimport Image from './image';\r\n\r\nexport default class ImageFileMover \r\n{\r\n    constructor() {\r\n    }\r\n\r\n    /**\r\n     * Moves the given Image instances and associated files to the given processed directory.\r\n     * Also writes any errors to the output directory\r\n     * @param {Array<Image>} images \r\n     */\r\n    async move(images) \r\n    {\r\n        console.log(`Moving ${images.length} processed images...`);\r\n        for(const image of images)\r\n        {\r\n            if(image.errors.length) {\r\n                const errorDirectory = image.errorDirectory || image.inputDirectory;\r\n                if(errorDirectory) {\r\n                    this._writeError(image, errorDirectory, image.errors.join('\\n'));\r\n                }\r\n                if(image.useErrorDirectory) {\r\n                    await this._moveImage(image, image.errorDirectory);\r\n                }\r\n            } else if(image.useProcessedDirectory) {\r\n                // TODO: Uncomment next line after Debugging\r\n                await this._moveImage(image, image.processedDirectory);\r\n            }\r\n        }\r\n        console.log(`Move completed.`);\r\n    }\r\n    /**\r\n     * @param {Image} image \r\n     * @param {string} toDirectory target directory. Absolute or relative to input or data source path.\r\n     */\r\n    async _moveImage(image, toDirectory)\r\n    {\r\n        if(!upath.isAbsolute(toDirectory)) \r\n        {\r\n            if(!image.inputDirectory) {\r\n                console.log(\"Image not moved. Move directory was relative but input directory was not defined.\");\r\n                return Promise.resolve();\r\n            } else {\r\n                toDirectory = upath.join(image.inputDirectory, toDirectory);\r\n            }\r\n        }\r\n\r\n        this._moveToDirectory(image, toDirectory);\r\n    }\r\n    _moveToDirectory(image, directory) \r\n    {\r\n        const paths = this._getImagePaths(image);\r\n        console.log(`Moving paths:\\n\\t${paths.join('\\n\\t')}\\nTo directory\\n\\t${directory}`);\r\n\r\n        for(const path of paths) \r\n        {\r\n            const basename = upath.basename(path);\r\n            const toPath = upath.join(directory, basename);\r\n            fsx.overwrite(path, toPath, err => {\r\n                if(err) {\r\n                    const message = err + \"\\nImage path could not be moved to \" + toPath;\r\n                    if(err.code == \"ENOENT\") {\r\n                        console.log(message);\r\n                    } else {\r\n                        console.warn(message);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _getImagePaths(image) \r\n    {\r\n        const paths = [\r\n            image.inputImagePath,\r\n            (image.initialInputImagePath !== image.inputImagePath) ? image.initialInputImagePath : null\r\n        ];\r\n        return paths.filter(p => !!p); // remove empty paths\r\n    }\r\n    _writeError(image, directory, message) \r\n    {\r\n        if(!message) {\r\n            return;\r\n        }\r\n        const logPath = upath.join(directory, \"error.logs\");\r\n        const data = [   \r\n            `\\n`,\r\n            `Time: ${new Date().toLocaleString()}`,\r\n            `initialInputImagePath: ${image.initialInputImagePath}`, \r\n            `inputImagePath: ${image.inputImagePath}`, \r\n            message\r\n        ].join(`\\n`);\r\n\r\n        fsx.append(logPath, data)\r\n        .catch(err => {\r\n            console.error(err + \"\\nCould not write Image error to \" + logPath);\r\n        });\r\n    }\r\n}","import upath from 'upath';\r\n\r\n/**\r\n * Returns true if path starts with // or \\\\ \r\n * @param {string} val the path string\r\n */\r\nfunction isUncPath(val) \r\n{\r\n    val = val.trim();\r\n    return val.startsWith(\"//\") || val.startsWith(\"\\\\\\\\\");\r\n}\r\n\r\n/**\r\n * Normalizes and compares the two paths to determine \r\n * if the given child is a child path of the given ancestor\r\n * @param {string} descendant \r\n * @param {string} ancestor \r\n */\r\nfunction isAncestor(ancestor, descendant)\r\n{\r\n    const relative = upath.relative(ancestor, descendant);\r\n    // If not ancestor, beginning of path will contain directory traversal (e.g. ../../)\r\n    return descendant.endsWith(relative);\r\n}\r\n\r\n/**\r\n * Same as upath.dirname except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction dirname(val)\r\n{\r\n    return _preserveUnc(val, upath.dirname(val));\r\n}\r\n/**\r\n * Same as upath.normalize except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction normalize(val)\r\n{\r\n    return _preserveUnc(val, upath.normalize(val));\r\n}\r\n/**\r\n * Same as upath.join except ensures that double slash is maintained for UNC paths\r\n * @param {string} val the path string\r\n */\r\nfunction join(firstPart)\r\n{\r\n    return _preserveUnc.call(null, firstPart, upath.join.apply(upath, arguments));\r\n}\r\n\r\nfunction _preserveUnc(originalPath, newPath) \r\n{\r\n    if(isUncPath(originalPath)) {\r\n        return newPath.charAt(0) + newPath;\r\n    } \r\n    return newPath;\r\n}\r\n\r\nexport default {\r\n    isAncestor,\r\n    isUncPath,\r\n    dirname,\r\n    normalize, \r\n    join\r\n}","import exiftool from 'node-exiftool';\r\nimport upath from 'upath';\r\nimport fs from 'fs';\r\nimport Image from './image';\r\nimport fsx from '../fsx';\r\nimport uncSafePath from '../unc-safe-path';\r\nimport _ from '../utils';\r\n\r\n\r\n\r\nexport default class ImageFileReader\r\n{\r\n    /**\r\n     * Create a reader used to generate an Image instance for processing by Adobe host\r\n     */\r\n    constructor() {} \r\n\r\n    /**\r\n     * Create a new Image instance for processing by Adobe host\r\n     * NOTE: When 'path' is a json file, directories will be automatically created for output, processed, and error directories\r\n     * @param {String} path the image path, json file path, document name (e.g. when using Active Document), or empty string. Path should be absolute\r\n     * @param {ImageSource} imageSource the image source that produced the path \r\n     * @param {Array<string>} targetPipelines\r\n     */\r\n    async read(path, imageSource, targetPipelines)\r\n    {\r\n        let { useOutputDirectory, useProcessedDirectory, useErrorDirectory } = imageSource;\r\n        let { outputDirectory, processedDirectory, errorDirectory } = imageSource;\r\n        let readMetadata = imageSource.readMetadata;\r\n\r\n        // Sanity check\r\n        outputDirectory = useOutputDirectory ? outputDirectory : \"\";\r\n        processedDirectory = useProcessedDirectory ? processedDirectory : \"\";\r\n        errorDirectory = useErrorDirectory ? errorDirectory : \"\";\r\n\r\n        let initialInputImagePath = path || \"\";\r\n        let inputImagePath = initialInputImagePath;\r\n        let inputDirectory = this._isPathDefinedAndAbsolute(path) ? uncSafePath.dirname(path) : \"\";\r\n        let pipelines = targetPipelines;\r\n        let jobId = _.guid();\r\n        let data = {};\r\n        let metadata = {};\r\n        let image = new Image();\r\n\r\n        try \r\n        {\r\n            if(this._doesFileExist(inputImagePath)) \r\n            {\r\n                if(this._doesPathHaveJsonExtension(inputImagePath)) \r\n                {\r\n                    data = await this._readJson(inputImagePath);\r\n                    pipelines = data.pipelines || pipelines;\r\n                    pipelines = (typeof pipelines === \"string\") ? pipelines.split(',') : pipelines;\r\n                    readMetadata = (typeof data.readMetadata === \"boolean\") ? data.readMetadata : readMetadata;\r\n                    jobId = data.jobId || jobId;\r\n\r\n                    // Grab new image source path and other paths from json, if available\r\n                    inputImagePath = data.inputImagePath || \"\";\r\n                    outputDirectory = data.outputDirectory || outputDirectory;\r\n                    processedDirectory = data.processedDirectory || processedDirectory;\r\n                    errorDirectory = data.errorDirectory || errorDirectory;\r\n\r\n                    inputImagePath = this._ensureAbsolutePath(inputImagePath, inputDirectory);\r\n                    outputDirectory = this._ensureAbsolutePath(outputDirectory, inputDirectory);\r\n                    processedDirectory = this._ensureAbsolutePath(processedDirectory, inputDirectory);\r\n                    errorDirectory = this._ensureAbsolutePath(errorDirectory, inputDirectory);\r\n\r\n                    useOutputDirectory = await this._makeDirectory(outputDirectory);\r\n                    useProcessedDirectory = await this._makeDirectory(processedDirectory);\r\n                    useErrorDirectory = await this._makeDirectory(errorDirectory);\r\n\r\n                    // Blank paths if directory doesn't exist\r\n                    outputDirectory = useOutputDirectory ? outputDirectory : \"\";\r\n                    processedDirectory = useProcessedDirectory ? processedDirectory : \"\";\r\n                    errorDirectory = useErrorDirectory ? errorDirectory : \"\";\r\n\r\n                    if (uncSafePath.isAncestor(inputImagePath, inputDirectory) \r\n                        && (useProcessedDirectory || useErrorDirectory)) \r\n                    {\r\n                        // Otherwise ImageFileMover would attempt to move the root/source directory\r\n                        // This rule should probably be thrown inside of ImageFileMover\r\n                        throw new Error(`JSON inputImagePath cannot be ancestor directory of or same as input directory when using errorDirectory or processedDirectory options.`);\r\n                    }\r\n                }\r\n                if(this._doesFileExist(inputImagePath) && readMetadata === true) \r\n                {\r\n                    metadata = await this._readMetadata(inputImagePath);\r\n                }\r\n            }\r\n        }\r\n        catch(e) \r\n        {\r\n            image.errors.push(e.toString());\r\n        }\r\n        finally \r\n        {\r\n            image.jobId = jobId;\r\n            image.initialInputImagePath = initialInputImagePath;\r\n            image.inputImagePath = inputImagePath;        \r\n            image.inputDirectory = inputDirectory;\r\n            image.outputDirectory = outputDirectory;\r\n            image.processedDirectory = processedDirectory;\r\n            image.errorDirectory = errorDirectory;\r\n            image.useOutputDirectory = useOutputDirectory;\r\n            image.useProcessedDirectory = useProcessedDirectory;\r\n            image.useErrorDirectory = useErrorDirectory;\r\n            image.data = data;\r\n            image.metadata = metadata;\r\n            image.pipelines = pipelines;\r\n\r\n            return image;\r\n        }\r\n    }\r\n    /**\r\n     * Reads any json from the given data source, if it is json and it exists.\r\n     * @returns {object}\r\n     */\r\n    async _readJson(jsonFilePath)\r\n    {\r\n        return new Promise((resolve, reject) => {\r\n            fs.readFile(jsonFilePath, { encoding: 'utf8' }, (error, jsonString) => {\r\n                if(error) {\r\n                    reject(`Image json ${jsonFilePath} file could not be read.\\n${error}`);\r\n                    return;\r\n                }\r\n                try {\r\n                    const data = JSON.parse(jsonString);\r\n                    resolve(data);\r\n                } catch(e) {\r\n                    reject(e);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Reads any metadata from the given source, if it is a file\r\n     * @returns {object}\r\n     */\r\n    async _readMetadata(inputImagePath)\r\n    {\r\n        let ep = new exiftool.ExiftoolProcess();\r\n        let processid = 0;\r\n\r\n        return ep.open()\r\n        .then(pid => {\r\n            processid = pid;\r\n        })\r\n        .then(() => ep.readMetadata(inputImagePath, ['-File:all']))\r\n        .then(metadata => {\r\n            let fileMetadata = metadata.data[0];\r\n            return fileMetadata;\r\n        })\r\n        .finally(() => {\r\n            ep.close();\r\n        });\r\n    }\r\n    _isPathDefinedAndAbsolute(path) {\r\n        return typeof path === \"string\" && path.length > 0 && upath.isAbsolute(path);\r\n    }\r\n    _ensureAbsolutePath(path, parentDirectory) {\r\n        if(!path) {\r\n            return \"\";\r\n        }\r\n        return upath.isAbsolute(path) ? path : upath.join(parentDirectory, path);\r\n    }\r\n    _doesPathHaveJsonExtension(path) {\r\n        return upath.extname(path) === \".json\";\r\n    }\r\n    _doesFileExist(path) {\r\n        try {\r\n            return fs.lstatSync(path || \"\").isFile();\r\n        } catch(e) {\r\n            if(e && e.code == \"ENOENT\") {\r\n                return false;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n    _doesDirectoryExist(path) {\r\n        try {\r\n            return fs.lstatSync(path || \"\").isDirectory();\r\n        } catch(e) {\r\n            if(e && e.code == \"ENOENT\") {\r\n                return false;\r\n            } else {\r\n                throw e;\r\n            }\r\n        }\r\n    }\r\n    _makeDirectory(directory) \r\n    {\r\n        return new Promise((resolve, reject) => {\r\n            if(!directory) {\r\n                resolve(false);\r\n                return;\r\n            }\r\n            fsx.mkdir(directory, { recursive: true }, err => {\r\n                if(err && err.code !== \"ENOENT\") {\r\n                    reject(`${err}\\nCould not create directory.`);\r\n                } else {\r\n                    resolve(true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}","import fs from 'fs';\r\nimport chokidar from 'chokidar';\r\nimport upath from 'upath';\r\nimport isUncPath from 'is-unc-path';\r\nimport EventEmitter from \"events\";\r\nimport ImageSource from './imageSource';\r\nimport ImageSourceType from './imageSourceType';\r\nimport host from '../host';\r\nimport _, { EDebounceType } from '../utils';\r\n\r\n\r\nlet nextProducerId = 0;\r\n/**\r\n * Reads images from source described by ImageSource and produces file paths for consumption\r\n * A producer has a single source.\r\n * A producer will not automatically deplete when sourcing from a File Watcher\r\n * IMPORTANT: Multiple producers should not be created for the same set of files\r\n */\r\nexport default class ImageFileProducer extends EventEmitter\r\n{\r\n    constructor(imageSource) \r\n    {\r\n        super();\r\n        this._id = nextProducerId++;\r\n        this._imageSource = imageSource;\r\n        this._fileWatcher = null;\r\n        this._isDepleted = false;\r\n\r\n        // NOTE: We debounce in order to collect files from file watcher and emit them \r\n        // in one lump. This helps avoid issues where shared files are moved at the end\r\n        // of an IMAGE process pre-maturely, when the next process also needs them.\r\n        // This isn't the best solution, since it is a completely blind process.\r\n        // A better option would be to submit explicit files for processing as one 'job',\r\n        // via a REST api or similar interface.\r\n        this._q = [];\r\n        this._emitQFiles = _.debounce(this._emitQFiles, 5000, EDebounceType.Trailing);\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    produce()\r\n    {\r\n        // TODO: Split source types into their own implementation of a producer interface?\r\n        switch(this._imageSource.sourceType) \r\n        {\r\n            case ImageSourceType.FILEWATCHER: this._sourceFileWatchers(); break;\r\n            case ImageSourceType.DIRECTORY: this._sourceDirectory(); break;\r\n            case ImageSourceType.OPENFILES: this._sourceOpenFiles(); break;\r\n            case ImageSourceType.BLANK: this._sourceBlank(); break;\r\n            case ImageSourceType.ACTIVEDOCUMENT: this._sourceActiveDocument(); break;\r\n            default: throw new Error(\"Unknown ImageSourceType: \" + this._imageSource.sourceType);\r\n        }\r\n    }\r\n    destroy()\r\n    {\r\n        // ASSERT: Should NOT emit any more files from this point\r\n        if(this._fileWatcher) {\r\n            this._fileWatcher.removeAllListeners();\r\n            this._fileWatcher.close();\r\n        }\r\n        this.removeAllListeners();\r\n    }\r\n    getImageSource()\r\n    {\r\n        return this._imageSource;\r\n    }\r\n    toString() {\r\n        return `\\tid = ${this._id}\\n\\timageSource = (${this._imageSource.toString()})`;\r\n    }\r\n    _emitFiles(files) \r\n    {\r\n        if(!files.length > 0) {\r\n            return;\r\n        }\r\n        this.emit(\"files\", this._id, files);\r\n    }\r\n    _emitQFiles()\r\n    {\r\n        const files = this._q;\r\n        this._q = [];\r\n        this._emitFiles(files);\r\n    }\r\n    _sourceFileWatchers() \r\n    {\r\n        const watchPathRoot = this._imageSource.sourceDirectory;\r\n        const watchExtensions = this._imageSource.sourceExtensions;\r\n        const watchPaths = watchExtensions.map(ext => upath.join(watchPathRoot, \"*.\" + ext));\r\n\r\n        if(isUncPath(watchPathRoot)) {\r\n            throw Error(`Watching network paths is problematic. Only local directories supported at this time.`);\r\n        }\r\n        if(!fs.existsSync(watchPathRoot)) {\r\n            throw Error(`Watch path: ${watchPathRoot} does not exist.`);\r\n        }\r\n        const watcher = chokidar.watch(watchPaths, {\r\n            ignored: /^\\./, \r\n            depth: 0,\r\n            usePolling: true,\r\n            interval: 5000,\r\n            awaitWriteFinish: {\r\n                stabilityThreshold: 5000,\r\n                pollInterval: 5000\r\n            }\r\n        })\r\n        .on(\"add\", newPath => \r\n        {\r\n            if(upath.basename(newPath).startsWith(\"manifest\")) {\r\n                return;\r\n            }\r\n            this._q.push(newPath);\r\n            this._emitQFiles();\r\n        });\r\n\r\n        this._fileWatcher = watcher;\r\n    }\r\n    /**\r\n     * Reads source directory for files and filters by extensions\r\n     */\r\n    _sourceDirectory() \r\n    {\r\n        const directory = this._imageSource.sourceDirectory;\r\n        const extensions = this._imageSource.sourceExtensions;\r\n\r\n        fs.readdir(directory, { encoding: \"utf8\" }, (error, files) => {\r\n            if(error) {\r\n                this.emit(\"depleted\", this._id);\r\n                throw new Error(error);\r\n            }\r\n            if(files) \r\n            {\r\n                files = files.map(file => upath.join(directory, file));\r\n                files = files.filter(file => {\r\n                    if(upath.basename(file).startsWith(\"manifest\")) {\r\n                        return false;\r\n                    }\r\n                    const ext = file.split('.').pop();\r\n                    return extensions.includes(ext);\r\n                });\r\n                this._isDepleted = true;\r\n                this._emitFiles(files);\r\n            }\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n    /**\r\n     * Asks Adobe application for currently open documents \r\n     */\r\n    _sourceOpenFiles() \r\n    {\r\n        host.runActionWithParameters(\"action.getOpenDocumentPaths\")\r\n        .then(filePaths => {\r\n            this._isDepleted = true;\r\n            this._emitFiles(filePaths.split(','));\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n    _sourceBlank()\r\n    {\r\n        this._isDepleted = true;\r\n        this._emitFiles([\"\"]);\r\n        this.emit(\"depleted\", this._id);\r\n    }\r\n    _sourceActiveDocument()\r\n    {\r\n        host.runActionWithParameters(\"action.getActiveDocumentPath\")\r\n        .then(filePath => {\r\n            this._isDepleted = true;\r\n            this._emitFiles(filePath ? [filePath] : []);\r\n            this.emit(\"depleted\", this._id);\r\n        });\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport ImageFileProducer from './imageFileProducer';\r\nimport _ from '../utils';\r\n\r\n/**\r\n * Manages ImageFileProducer instances and produces image jobs\r\n */\r\nexport default class ImageFileProducers extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        /**\r\n         * Producer Id => [Listener Names...]\r\n         */\r\n        this._producerIdToListenerNames = new Map();\r\n        /**\r\n         * Producer Id => ImageFileProducer instance\r\n         */\r\n        this._producerIdToProducer = new Map();\r\n\r\n        this._jobs = [];\r\n    }\r\n    destroy()\r\n    {\r\n        this.stopProducers();\r\n        this.removeAllListeners();\r\n    }\r\n    /**\r\n     * Create and start a producer with the given ImageSource\r\n     * @param {ImageSource} imageSource \r\n     * @param {Array<string>} listenerNames \r\n     */\r\n    startProducer(imageSource, listenerNames) \r\n    {\r\n        const producer = new ImageFileProducer(imageSource);\r\n        console.log(`Image File Producer created:\\n${producer.toString()}`);\r\n\r\n        this._producerIdToListenerNames.set(producer.id, listenerNames);\r\n        this._producerIdToProducer.set(producer.id, producer);\r\n\r\n        producer.on(\"files\", this._onProducerFiles.bind(this));\r\n        producer.on(\"depleted\", this._onProducerDepleted.bind(this));\r\n        producer.produce();\r\n    }\r\n    /**\r\n     * Stops all ImageFileProducer instances and clears the job queue\r\n     */\r\n    stopProducers() {\r\n        const producerIds = [...this._producerIdToProducer.keys()];\r\n        this._stopProducers(producerIds);\r\n        this._jobs = [];\r\n    }\r\n    hasProducers() {\r\n        return this._producerIdToProducer.size > 0;\r\n    }\r\n    hasJobs() {\r\n        return this._jobs.length > 0;\r\n    }\r\n    nextJob() {\r\n        return this._jobs.pop();\r\n    }\r\n    /**\r\n     * @readonly\r\n     */\r\n    getAllJobs() {\r\n        return this._jobs; // TODO: Clone?\r\n    }\r\n    getTotalJobs() {\r\n        return this._jobs.length;\r\n    }\r\n    _stopProducers(producerIds)\r\n    {\r\n        producerIds = producerIds.filter(id => this._producerIdToProducer.has(id));\r\n        for(const producerId of producerIds) \r\n        {\r\n            const producer = this._producerIdToProducer.get(producerId);\r\n            console.log(`Image File Producer destroyed:\\n${producer.toString()}`);\r\n\r\n            this._producerIdToProducer.delete(producerId);\r\n            this._producerIdToListenerNames.delete(producerId);\r\n            producer.destroy();\r\n        }\r\n    }\r\n    _onProducerFiles(producerId, files)\r\n    {\r\n        const listenerNames = this._producerIdToListenerNames.get(producerId);\r\n        const imageSource = this._producerIdToProducer.get(producerId).getImageSource();\r\n        this._jobs.push({\r\n            jobId: _.guid(), \r\n            jobCreationTime: _.yyyymmddhhmmss(),\r\n            listenerNames: listenerNames.slice(0),\r\n            files, \r\n            imageSource: imageSource.clone()\r\n        });\r\n        this.emit(\"job\");\r\n        console.log(`Image File Producer ${producerId}: Job produced.`);\r\n    }\r\n    _onProducerDepleted(producerId) \r\n    {\r\n        this._stopProducers([producerId]);\r\n        this.emit(\"depleted\");\r\n    }\r\n}","\r\nexport default class PipelineEngineStatus\r\n{\r\n    constructor() \r\n    {\r\n        this.reset();\r\n        Object.seal(this);\r\n    }\r\n    reset() {\r\n        this.jobId = \"\";\r\n        this.jobCreationTime = \"\";\r\n        this.files = [];\r\n        this.fileCount = 0;\r\n        this.file = \"\";\r\n        this.imageJobId = \"\";\r\n        this.imageIteration = 0;\r\n        this.pipeline = \"\";\r\n        this.action = \"\";\r\n    }\r\n    serialize() {\r\n        return {\r\n            ...this\r\n        }\r\n    }\r\n}","import EventEmitter from \"events\";\r\nimport Rete from \"rete\"; \r\n\r\nimport _ from '../utils';\r\nimport store from '../store';\r\nimport host from '../host';\r\nimport Image from './image';\r\nimport ImageFileMover from './imageFileMover';\r\nimport ImageFileReader from './imageFileReader';\r\nimport ImageFileProducers from './imageFileProducers';\r\nimport PipelineEngineState from './pipelineEngineState';\r\nimport PipelineEngineStatus from './pipelineEngineStatus';\r\n\r\nexport class PipelineEngine extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        const self = this;\r\n        this._processingMutex = false; \r\n        this._lastState = PipelineEngineState.STOPPED;\r\n        this._state = PipelineEngineState.STOPPED;\r\n        this._status = new Proxy(new PipelineEngineStatus(), \r\n            {\r\n                set: function() { \r\n                    Reflect.set(...arguments);\r\n                    self.emit(\"status\", self._status);\r\n                    return true;\r\n                }\r\n            }\r\n        );\r\n        this.on(\"jobstart\", (jobId, jobCreationTime, files) => {\r\n            this._status.jobId = jobId;\r\n            this._status.jobCreationTime = jobCreationTime;\r\n            this._status.files = files;\r\n            this._status.fileCount = files.length;\r\n        });\r\n        this.on(\"imagejobstart\", (imageJobId, imageIteration, file) => {\r\n            this._status.imageJobId = imageJobId;\r\n            this._status.imageIteration = imageIteration;\r\n            this._status.file = file;\r\n        });\r\n        this.on(\"pipelinestart\", pipelineName => { \r\n            this._status.pipeline = pipelineName; \r\n        });\r\n        this.on(\"pipelineend\", () => { \r\n            this._status.pipeline = \"\"; \r\n        });\r\n        this.on(\"actionstart\", actionName => { \r\n            this._status.action = actionName; \r\n        });\r\n        this.on(\"actionend\", () => { \r\n            this._status.action = \"\"; \r\n        });\r\n        this.on(\"jobend\", () => this._status.reset());\r\n        this.on(\"processstart\", () => this._status.reset());\r\n        this.on(\"processend\", () => this._status.reset());\r\n        \r\n        this._imageFileReader = new ImageFileReader();\r\n        this._imageFileMover = new ImageFileMover();\r\n        this._imageFileProducers = new ImageFileProducers();\r\n        this._imageFileProducers.on(\"job\", this._onProducerJob.bind(this));\r\n        this._imageFileProducers.on(\"depleted\", this._onProducerDepleted.bind(this));\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        return Promise.resolve();\r\n    }\r\n    destroy()\r\n    {\r\n        this._imageFileProducers.destroy();\r\n        this.state = PipelineEngineState.STOPPED;\r\n    }\r\n    /**\r\n     * Run the given pipeline using its configured file source(s)\r\n     * @param {string} pipelineName pipeline name\r\n     */\r\n    run(pipelineName)\r\n    {\r\n        this._run([pipelineName]);\r\n    }\r\n    /**\r\n     * Run all pipelines using their configured file source(s)\r\n     */\r\n    runAll()\r\n    {\r\n        const pipelineNames = store.pipelines.pipelines.map(p => p.name);\r\n        this._run(pipelineNames);\r\n    }\r\n    _run(pipelineNames) \r\n    {\r\n        if(!this.isStopped()) {\r\n            console.log(\"Pipeline engine is already running.\");\r\n            return;\r\n        }\r\n        console.log(`Running pipelines: \"${pipelineNames.join(\",\")}\"`);\r\n        this.state = PipelineEngineState.IDLE;\r\n\r\n        // IMPORTANT: We Do Not want multiple producers for the same files\r\n        // Which would happen if we looped by each pipeline and created its producers\r\n        // since there is a many-to-one relationship between pipelines and file watchers\r\n        const imageSourceNameToPipelineNames = store.pipelines.getImageSourceNameToPipelineNameMap(pipelineNames);\r\n        for(let [imageSourceName, toPipelineNames] of imageSourceNameToPipelineNames.map) \r\n        {\r\n            const imageSource = store.general.getImageSourceByName(imageSourceName);         \r\n            this._imageFileProducers.startProducer(imageSource, toPipelineNames);\r\n        }\r\n    }\r\n    pause() {\r\n        if(this.isProcessing() || this.isIdle()) {\r\n            this.state = PipelineEngineState.PAUSED;\r\n        }\r\n    }\r\n    resume() {\r\n        if(this.isPaused() && this._lastState === PipelineEngineState.PROCESSING) {\r\n            this.state = PipelineEngineState.PROCESSING;\r\n        } else {\r\n            this.state = PipelineEngineState.IDLE;\r\n        }\r\n    }\r\n    stop() {\r\n        this._imageFileProducers.stopProducers();\r\n        this.state = PipelineEngineState.STOPPED;\r\n    }\r\n    _stopIfNoProducersElseIdle()\r\n    {\r\n        if(this.isStopped()) {\r\n            return;\r\n        }\r\n        if(!this._imageFileProducers.hasProducers()) {\r\n            this.stop();\r\n        } else {\r\n            this.state = PipelineEngineState.IDLE;\r\n        }\r\n    }\r\n    \r\n\r\n    _onProducerJob() \r\n    {\r\n        this._process();\r\n    }\r\n    _onProducerDepleted() {\r\n        if(this.isProcessing()) return;\r\n        this._stopIfNoProducersElseIdle();\r\n    }\r\n    _process()\r\n    {\r\n        if(!this._imageFileProducers.hasJobs()) return; \r\n        if(this._processingMutex) return;\r\n        this._processingMutex = true;\r\n        this.state = PipelineEngineState.PROCESSING;\r\n\r\n        this._runWaitOneFrame()\r\n        .then(this._runProcessStart.bind(this))\r\n        .then(this._runProcessLoop.bind(this))\r\n        .then(this._runProcessEnd.bind(this))\r\n        .then(() => {\r\n            this._stopIfNoProducersElseIdle();\r\n            this._processingMutex = false;\r\n        });\r\n    }\r\n    _runWaitOneFrame()\r\n    {\r\n        return new Promise(resolve => { setTimeout(resolve, 0); });\r\n    }\r\n    async _runProcessStart()\r\n    {\r\n        await this._pauseCheck();\r\n\r\n        console.log(`Pipeline process loop started with ${this._imageFileProducers.getTotalJobs()} jobs in queue.`);\r\n        this.emit(\"processstart\");\r\n        await host.runJsxWithThrow(`app.displayDialogs = DialogModes.NO;`);\r\n    }\r\n    async _runProcessLoop()\r\n    {\r\n        let processedImages = [];\r\n        let file;\r\n        while(!this._stopCheck() && this._imageFileProducers.hasJobs()) \r\n        {\r\n            const { \r\n                jobId, \r\n                jobCreationTime,\r\n                listenerNames, \r\n                files, \r\n                imageSource } = this._imageFileProducers.nextJob();\r\n            this.emit(\"jobstart\", jobId, jobCreationTime, files.slice(0));\r\n            console.log(`Job ${jobId} started with ${files.length} files.`);\r\n\r\n            for(let i = 0; !this._stopCheck() && i < files.length; ++i)\r\n            {\r\n                await this._pauseCheck();\r\n                const file = files[i];\r\n\r\n                // READ IMAGE\r\n                console.log(`Reading next file[${i}] ${file}.`);\r\n                const image = await this._imageFileReader.read(file, imageSource, listenerNames);\r\n\r\n                // EXECUTE PIPELINES\r\n                if(!image.errors.length > 0) \r\n                {\r\n                    this.emit(\"imagejobstart\", image.jobId, i, file);\r\n                    await this._runPipelinesLoop(image);\r\n                    this.emit(\"imagejobend\");\r\n                }\r\n\r\n                processedImages.push(image);\r\n                await this._pauseCheck(null, store.general.pauseAfterEveryImage);\r\n            }\r\n            this.emit(\"jobend\");\r\n        }\r\n        \r\n        return processedImages;\r\n    }\r\n    async _runProcessEnd(processedImages)\r\n    {\r\n        console.log(\"Waiting for unresolved callback tunnels...\");\r\n        await host.join();\r\n\r\n        // CLEANUP\r\n        if(this._stopCheck()) {\r\n            host.runActionWithParameters(`action.closeAllWithoutSave`);\r\n        } else {\r\n            // We move at the end of the process, in case images/jobs are sharing files\r\n            this._imageFileMover.move(processedImages);\r\n        }\r\n\r\n        console.log(\"Pipeline process exited.\");\r\n        this.emit(\"processend\");\r\n        await host.runJsxWithThrow(`$.gc();`);\r\n    }\r\n    /**\r\n     * Execute pipeline action graph for this image\r\n     * @param {Image} image \r\n     */\r\n    async _runPipelinesLoop(image)\r\n    {\r\n        const pipelines = store.pipelines.getByNames(image.pipelines);\r\n        for(const pipeline of pipelines) \r\n        {\r\n            try \r\n            {\r\n                await this._runPipelineStart(image, pipeline);\r\n\r\n                // EXECUTE PIPELINE\r\n                for(const action of pipeline.actions) \r\n                {\r\n                    this.emit(\"actionstart\", action.actionName);\r\n                    let result = await host.runActionWithParameters(action.actionName, action.parameters);\r\n                    \r\n                    if(this._stopCheck(result)) break;\r\n                    await this._pauseCheck(result, store.general.pauseAfterEveryAction);\r\n                    this.emit(\"actionend\");\r\n                }\r\n            }\r\n            catch(e)\r\n            {\r\n                console.error(e);\r\n                image.errors.push(e.toString());\r\n                await host.runActionWithParameters(`action.closeAllWithoutSave`);\r\n                await this._pauseCheck(null, store.general.pauseOnExceptions);\r\n            }\r\n            finally\r\n            {\r\n                if(image.errors.length) break;\r\n                if(this._stopCheck()) break;\r\n                await this._pauseCheck(null, store.general.pauseAfterEveryPipeline);\r\n                await this._runPipelineEnd(image, pipeline);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Close all documents. Save Photoshop settings. Instantiate IMAGE instance.\r\n     * @param {Image} image \r\n     * @param {object} pipeline the pipeline configuration object\r\n     * @returns {Promise}\r\n     */\r\n    _runPipelineStart(image, pipeline)\r\n    {\r\n        console.log(`Pipeline '${pipeline.name}' started for image job ${image.jobId}.`);\r\n        this.emit(\"pipelinestart\", pipeline.name);\r\n        return host.runJsxWithThrow(`\r\n        __PIPELINE = {\r\n            name: \"${pipeline.name}\",\r\n            restoreUnits: _.saveUnits()\r\n        };\r\n        IMAGE = new ImageForProcessing(${JSON.stringify(image)});`);\r\n    }\r\n    /**\r\n     * Restore Photoshop settings. Clear IMAGE instance.\r\n     * @param {object} pipeline the pipeline configuration object \r\n     * @returns {Promise}\r\n     */\r\n    _runPipelineEnd(image, pipeline)\r\n    {\r\n        console.log(`Pipeline '${pipeline.name}' ended for image job ${image.jobId}.`);\r\n        this.emit(\"pipelineend\");\r\n        return host.runJsx(`\r\n        __PIPELINE.restoreUnits && __PIPELINE.restoreUnits(); \r\n        __PIPELINE=null;\r\n        IMAGE=null;\r\n        `);\r\n    }\r\n    _stopCheck(actionResult) \r\n    {\r\n        if(this.isStopped() || actionResult === \"STOP\") {\r\n            this.state = PipelineEngineState.STOPPED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _pauseCheck(actionResult, forcePause) \r\n    {\r\n        if(this.isPaused() || forcePause || actionResult === \"PAUSE\") \r\n        {\r\n            console.log(\"Pipeline Engine waiting on pause...\");\r\n            this.state = PipelineEngineState.PAUSED;\r\n\r\n            return new Promise(resolve => {\r\n                this.once(\"state\", state => {\r\n                    if(state != PipelineEngineState.PAUSED) {\r\n                        resolve();\r\n                    }\r\n                });\r\n            });\r\n        } \r\n        return Promise.resolve();\r\n    }\r\n    \r\n    get fullStatus() \r\n    {\r\n        return {\r\n            state: PipelineEngineState.toKey(this._state),\r\n            jobs: this._imageFileProducers.getAllJobs(),\r\n            status: this._status.serialize()\r\n        };\r\n    }\r\n    get status() {\r\n        return this._status.serialize();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        this._lastState = this._state;\r\n        this._state = value;\r\n        this.emit(\"state\", value);\r\n    }\r\n    isIdle() { return this.state === PipelineEngineState.IDLE; }\r\n    isStopped() { return this.state === PipelineEngineState.STOPPED; }\r\n    isPaused() { return this.state === PipelineEngineState.PAUSED; }\r\n    isProcessing() { return this.state === PipelineEngineState.PROCESSING; }\r\n}","import upath from 'upath';\r\nimport fs from 'fs';\r\nimport EventEmitter from \"events\";\r\nconst jsdoc = require(\"jsdoc-api\");\r\n//import jsdocx from 'jsdoc-x';\r\n\r\nimport store from '../store';\r\nimport host from '../host';\r\nimport global from '../global';\r\nimport FolderTreeNode from '../folderTree';\r\nimport { resolve } from 'path';\r\n\r\nconst ROOT_ACTION_DIRECTORY = \"actions\";\r\nconst ROOT_ACTION_NAMESPACE = \"action\";\r\n\r\n/**\r\n * Describes a JSX Actions signature in full, including parameters\r\n * READONLY\r\n */\r\nexport class ActionDescriptor\r\n{\r\n    constructor()\r\n    {\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.path = \"\";\r\n        this.params = [];\r\n    }\r\n    /**\r\n     * Translate JSDocDescription object to ActionDescriptor\r\n     * @param {JSDocDescription} jsDocDescription the \"function\" description returned by JSDoc\r\n     */\r\n    static fromJSDoc(jsdocDescription)\r\n    {\r\n        /*\r\n            Example JSDoc Output:\r\n            {\r\n                \"name\": \"action.makeNote\",\r\n                \"description\": \"Add a Note/Annotation to the document\",\r\n                \"path\": \"C:\\\\Users\\\\puglisij\\\\AppData\\\\Roaming\\\\Adobe\\\\CEP\\\\extensions\\\\com.mario.panel\\\\public\\\\actions\",\r\n                \"params\": [\r\n                    {\r\n                    \"type\": { \"names\": [\"Number\"] },\r\n                    \"description\": \"x axis position in pixels\",\r\n                    \"name\": \"posX\"\r\n                    },\r\n                    {\r\n                    \"type\": { \"names\": [\"Number\"] },\r\n                    \"description\": \"y axis position in pixels\",\r\n                    \"name\": \"posY\"\r\n                    }\r\n                ]\r\n            }\r\n        */\r\n        \r\n        const d = jsdocDescription;\r\n        const descriptor = new ActionDescriptor();\r\n              descriptor.name = d.longname;\r\n              descriptor.description = d.description;\r\n              descriptor.params = d.params ? d.params.map(p => ActionParameter.fromJSDoc(p)) : [];\r\n              descriptor.path = d.meta.path;\r\n        return descriptor;\r\n    }\r\n}\r\n/**\r\n * Describes an (Input) parameter to a JSX Action function\r\n * READONLY\r\n */\r\nexport class ActionParameter \r\n{\r\n    constructor() \r\n    {\r\n        this.name = \"\";\r\n        this.description = \"\";\r\n        this.typeNames = [];\r\n        this.isRequired = false;\r\n        this.defaultValue = null;\r\n    }\r\n\r\n    static fromJSDoc(jsdocParameter) {\r\n        const { name, description, defaultValue, optional, type } = jsdocParameter;\r\n        const param = new ActionParameter();\r\n            param.name = name;\r\n            param.description = description;\r\n            param.defaultValue = defaultValue || null;\r\n            param.isRequired = !(optional === true);\r\n            param.typeNames = type.names.slice(0);\r\n\r\n        return param;\r\n    }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nclass ActionParameterCurator\r\n{\r\n    constructor(hostInterface)\r\n    {\r\n        this.host = hostInterface;\r\n        this.typeNameToDataCache = {};\r\n    }\r\n    /**\r\n     * Convert jsdoc parameter type name to Vue control component type\r\n     * @param {string} typeName any type for which a control exists (e.g. string, boolean, etc)\r\n     * @returns {string} \r\n     */\r\n    typeNameToControlInputType(typeName)\r\n    {\r\n        // call jsx functions to get type information\r\n        // this.host.runJsx('...');\r\n    }\r\n}\r\n\r\n/**\r\n * Handles reading JSX action files and JSDoc descriptions they contain\r\n */\r\nclass ActionFileDescriptionReader \r\n{\r\n    static _actionNameToJsDoc = new Map();\r\n    /**\r\n     * Reads and caches the JsDocDescription's for all the given actions\r\n     * @param {Action[]} actions \r\n     */\r\n    static async readAll(actions) \r\n    {\r\n        return jsdoc.explain({\r\n            cache: true,\r\n            files: actions.map(a => a.absolutePath)\r\n        })\r\n        .then(descriptions => \r\n        {\r\n            for(let i = 0; i < descriptions.length; ++i) \r\n            {\r\n                const description = descriptions[i];\r\n                if(this._isFunction(description)) {\r\n                    this._actionNameToJsDoc.set(description.longname, description);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Caches and returns the JsDocDescription for the given action\r\n     * @param {Action} action\r\n     * @returns {JSDocDescription}\r\n     */\r\n    static read(action)\r\n    {\r\n        let description = this._actionNameToJsDoc.get(action.name);\r\n        if(!description) {\r\n            console.warn(`JSDoc description not found for action ${action.name}. Do you need to re-load actions?`);\r\n            return {};\r\n        }\r\n        return description;\r\n    }\r\n    // FUNCTIONS:\r\n    // scope: \"static\"\r\n    // kind: \"function\"\r\n    // memberof: \"action\"\r\n    static _isFunction(jsdocDescription) \r\n    {\r\n        return jsdocDescription.scope === \"static\"\r\n            && jsdocDescription.kind === \"function\"\r\n            && jsdocDescription.memberof.startsWith(\"action\");\r\n    }\r\n    // ENUMERATIONS:\r\n    // name starts with capital letter\r\n    // scope: \"global\"\r\n    // kind: \"member\"\r\n    // memberof: undefined\r\n    // isEnum: true (only if @enum is in comment)\r\n    static _isEnum(jsdocDescription) \r\n    {\r\n        return jsdocDescription.scope === \"global\"\r\n            && jsdocDescription.kind === \"member\"\r\n            && jsdocDescription.isEnum === true\r\n            && typeof jsdocDescription.memberof === undefined;\r\n    }\r\n}\r\n\r\n/**\r\n * Handles reading JSX action files for import into Adobe host\r\n */\r\nclass ActionFileImportStringBuilder\r\n{\r\n    /**\r\n     * Reads all jsx files in the given directory and builds an import JSX string for execution.\r\n     * Each new directory encountered becomes a nested namespace.\r\n     * @param {string} pathToActions the directory containing the jsx files\r\n     * @param {string} rootNamespace the root action function namespace. All action names with start with this\r\n     * @returns {string} the stringified JSX script to run which will import all actions\r\n     */\r\n    static build(pathToActions, rootNamespace)\r\n    {\r\n        return this._buildJsxImportString(pathToActions, rootNamespace); \r\n    }\r\n    // NOTE: importAction() is expected to be defined on Host JSX side\r\n    static _buildJsxImportString(absolutePathToActions, rootNamespace)\r\n    {\r\n        let actions = [];\r\n        let imports = [];\r\n        let directory;\r\n        let directories = [\r\n            {\r\n                namespace: rootNamespace,\r\n                absolutePath: absolutePathToActions\r\n            }\r\n        ];\r\n        while(directory = directories.pop()) \r\n        {\r\n            const namespace = directory.namespace;\r\n            const namespaceDefine = `${namespace}= (typeof ${namespace} !== \"undefined\") ? ${namespace} : {};`;\r\n            imports.push(namespaceDefine);\r\n            \r\n            // Read directory contents\r\n            const names = fs.readdirSync(directory.absolutePath);\r\n            for(let i = 0; i < names.length; ++i) \r\n            {\r\n                const nameParts = names[i].split('.');\r\n                if(nameParts.length > 2) {\r\n                    throw new Error(\"Action file and directory names cannot contain periods.\");\r\n                }\r\n\r\n                const nameWithoutExtension = nameParts[0];\r\n                const nameSpacedName = `${namespace}.${nameWithoutExtension}`;\r\n                const absoluteFilePath = upath.join(directory.absolutePath, names[i]);\r\n                if(fs.statSync(absoluteFilePath).isDirectory()) \r\n                {\r\n                    directories.push({\r\n                        namespace: nameSpacedName,\r\n                        absolutePath: absoluteFilePath\r\n                    });\r\n                } \r\n                else \r\n                {\r\n                    imports.push(`importAction(\"${absoluteFilePath}\", \"${nameSpacedName}\");`);\r\n                    actions.push(new Action(nameSpacedName, namespace, absoluteFilePath));\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            importString: imports.join(''),\r\n            actions\r\n        };\r\n    }\r\n}\r\n\r\nclass Action\r\n{\r\n    constructor(name, namespace, absolutePath)\r\n    {\r\n        this.name = name;\r\n        this.namespace = namespace;\r\n        this.absolutePath = absolutePath;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Primary interface for loading/reloading jsx action files and their JSDoc descriptions\r\n */\r\nexport class Actions\r\n{\r\n    constructor() \r\n    {\r\n        this._actionNameToAction = new Map();\r\n        this._actionTree = new FolderTreeNode(ROOT_ACTION_NAMESPACE, true);\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    init() \r\n    {\r\n        return this._importAll();\r\n    }\r\n    destroy() {}\r\n\r\n    /**\r\n     * Import all JSX function action files\r\n     */\r\n    async _importAll()\r\n    {\r\n        const pathToUserActions = store.general.pathToUserActions;\r\n        const pathToBuildInActions = global.appBuiltinActionsPath;\r\n        console.log(\"Import actions started.\");\r\n        console.log(`Importing from:\\n\\t${pathToUserActions}\\n\\t${pathToBuildInActions}`);\r\n        \r\n        await this._import(pathToBuildInActions);\r\n        if(pathToUserActions) \r\n        {\r\n            await this._import(pathToUserActions);\r\n            await host.runJsx(`action.CUSTOM_ACTIONS_FOLDER = new Folder(\"${pathToUserActions}\");`);\r\n        }\r\n\r\n        console.log(\"Import actions exited.\");\r\n    }\r\n    _import(importDirectory) \r\n    {\r\n        if(!importDirectory.trim()) {\r\n            return;\r\n        }\r\n\r\n        const { importString,  actions } = ActionFileImportStringBuilder.build(importDirectory, ROOT_ACTION_NAMESPACE);\r\n        // Parse to data structures\r\n        for(let i = 0; i < actions.length; ++i) \r\n        {\r\n            const actionPath = actions[i].name.split('.');\r\n            this._actionNameToAction.set(actions[i].name, actions[i]);\r\n            this._actionTree.insert(actionPath, false);\r\n            console.log(\"Action: \" + actions[i].name);\r\n        }\r\n        // Async read and cache jsdoc info\r\n        ActionFileDescriptionReader.readAll(actions);\r\n\r\n        return host.runJsx(importString  + \"act = action;\");\r\n    }\r\n    /**\r\n     * Returns tree structure of all available action nested namespaces/action names\r\n     * @returns {FolderTreeNode} n-ary tree indicating folder and action file structure\r\n     */\r\n    getAllActions() {\r\n        return this._actionTree.cloneTree(); \r\n    }\r\n    /**\r\n     * Return all available action names\r\n     * @returns {string[]}\r\n     */\r\n    getAllActionNames() {\r\n        return Array.from( this._actionNameToAction.keys() );\r\n    }\r\n    /**\r\n     * Converts JSDoc for given action name to instance of ActionDescriptor\r\n     * @param {string} actionName\r\n     * @returns {Promise<ActionDescriptor>}  \r\n     */\r\n    async getActionDescriptorByName(actionName) \r\n    {\r\n        const action = this._actionNameToAction.get(actionName);\r\n        if(!action) {\r\n            throw new Error(`Action doesnt exist by name ${actionName}`);\r\n        }\r\n\r\n        return new Promise(resolve => {\r\n            const d = ActionFileDescriptionReader.read(action)\r\n            const descriptor = ActionDescriptor.fromJSDoc(d);\r\n            resolve(descriptor);\r\n        });\r\n    }\r\n}\r\n","\r\n/* npm modules */\r\nimport EventEmitter from \"events\";\r\nimport polka from \"polka\";\r\n\r\n/* local modules */\r\nimport { PipelineEngine } from './pipelineEngine';\r\nimport { Actions } from './actions';\r\nimport _ from '../utils';\r\nimport store from '../store';\r\nimport global from '../global';\r\n\r\nlet port = 0;\r\nlet app = null;\r\n\r\n\r\nexport const ServerState = {\r\n    UNINITIALIZED: 0,\r\n    RUNNING: 1\r\n};\r\n\r\n/**\r\n * Backend systems.\r\n * Manages Node REST API, and JS API for managing pipelines. \r\n * Server is not CEP panel aware\r\n */\r\nclass Server extends EventEmitter\r\n{\r\n    constructor() \r\n    {\r\n        super();\r\n        this._initialized = false;\r\n        this._state = ServerState.UNINITIALIZED;\r\n\r\n        // Express instance\r\n        this._httpServer = null;\r\n        this._pipelineEngine = new PipelineEngine();\r\n        this._actions = new Actions();\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    async init() \r\n    {\r\n        if(this._initialized) return;\r\n        this._initialized = true;\r\n\r\n        await this._pipelineEngine.init();\r\n        await this._actions.init();\r\n\r\n        if(store.general.runHttpServer) {\r\n            this.startServer();\r\n        }\r\n        this.state = ServerState.RUNNING;\r\n        this.emit(\"initialized\");\r\n        console.log(\"Server initialized.\");\r\n    }\r\n    async startServer() \r\n    {\r\n        port = store.general.serverPort;\r\n        app = polka();\r\n        //-----------------\r\n        // Routes\r\n        //-----------------\r\n        // app.get('/pipeline/:name/configuration', (req, res) => {\r\n        //     res.setHeader(\"Content-Type\", \"application/json\");\r\n        //     res.end(\r\n        //         JSON.stringify(this._pipelineConfig.pipelines.find(p => p.name == req.params.name.toLowerCase()), null, 4)\r\n        //     );\r\n        // });\r\n        // app.post('/pipeline/run', (req, res) => {\r\n        //     res.status(200).json({ success: true });\r\n        // });\r\n        // app.post('/pipeline/stop', (req, res) => {\r\n        //     res.status(200).json({ success: true });\r\n        // });\r\n        app.get('/status', (req, res) => {\r\n            const status = {\r\n                adobeApp: global.adobeApp,\r\n                adobeVersion: global.adobeVersion,\r\n                version: global.appVersion,\r\n                time: new Date().toLocaleString(),\r\n                ...this._pipelineEngine.fullStatus\r\n            };\r\n\r\n            res.writeHead(200, {\r\n                \"Content-Type\": \"application/json\"\r\n            });\r\n            res.end(JSON.stringify(status, null, 2) + '\\n');\r\n        });\r\n\r\n        //-----------------\r\n        // Create Server\r\n        //-----------------\r\n        this._httpServer = app.listen(port, \"0.0.0.0\", function() {\r\n            console.log(`Polka is listening to http://localhost:${port}`);\r\n        }).server;\r\n\r\n        // Native\r\n        // this._httpServer = http.createServer((req, res) => \r\n        // {\r\n        //      handle routing on req.url\r\n        // });\r\n        // this._httpServer.listen(port, \"0.0.0.0\", () => {\r\n        //     console.log(`Server is listening to http://localhost:${port}`);\r\n        // });\r\n\r\n        console.log(\"Server started.\");\r\n    }\r\n    destroy() \r\n    {\r\n        console.log(`Server closing...`);\r\n        this._httpServer && this._httpServer.close(() => {\r\n            this._httpServer = null;\r\n            console.log(`Server closed.`);\r\n        });\r\n        this._pipelineEngine.destroy();\r\n        this._pipelineEngine = null;\r\n        this._actions.destroy();\r\n        this._actions = null;\r\n    }\r\n    get pipelineEngine() {\r\n        return this._pipelineEngine;\r\n    }\r\n    get actions() {\r\n        return this._actions;\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        this._state = value;\r\n        this.emit(\"state\", value);\r\n    }\r\n}\r\n// DELETE. Note, to access in iframe use iframe.contentWindow.server\r\n// TODO: For DEBUG Only. When finished, remove \"window.server = \" from export.\r\nexport default (window.server = new Server());","\r\n\r\nexport default class CircleBuffer\r\n{\r\n    constructor(size)\r\n    {\r\n        if(size <= 0) {\r\n            throw new Error(\"Size must be greater than 0.\");\r\n        }\r\n        this._array = new Array(size);\r\n        this._size = size;\r\n        this._pointer = 0;\r\n    }\r\n\r\n    push(val)\r\n    {\r\n        this._array[this._pointer] = val;\r\n        this._pointer = (this._pointer + 1) % this._size;\r\n    }\r\n    clear() {\r\n        this._array = new Array(this._size);\r\n        this._pointer = 0;\r\n    }\r\n    /**\r\n     * Returns underlying array by reference. This is NOT a clone.\r\n     */\r\n    toArray()\r\n    {\r\n        return [\r\n            ...this._array.slice(this._pointer),\r\n            ...this._array.slice(0, this._pointer)\r\n        ];\r\n    }\r\n}","import upath from \"upath\";\r\nimport fs from \"fs\";\r\nimport { EventEmitter } from \"events\";\r\nimport global from '../global';\r\nimport store from '../store';\r\nimport fsx from '../fsx';\r\nimport CircleBuffer from '@/circleBuffer';\r\n\r\nconst CONSOLE_METHODS = [\"log\", \"warn\", \"error\"];\r\n\r\nclass Logger extends EventEmitter\r\n{\r\n    constructor()\r\n    {\r\n        super();\r\n        this.initialized = false;\r\n        this.options = {\r\n            logDirectory: \"\",\r\n            logFilePersistForDays: 7 // number of files/days to keep\r\n        };\r\n        this.originalConsoleMethods = {};\r\n        this.logWriteStream = null;\r\n        this.currentLogFileMonthDay = 0;\r\n        this.htmlLogBuffer = null;\r\n    }\r\n    /**\r\n     * @returns {Promise}\r\n     */\r\n    async init() \r\n    {\r\n        if(this.initialized)\r\n            return;\r\n\r\n        this.initialized = true;\r\n        this.options = {\r\n            logDirectory: store.general.logDirectory || global.appDefaultLogPath, \r\n            logFilePersistForDays: store.general.logFilePersistForDays > 0 ? store.general.logFilePersistForDays : 3,\r\n            logHtmlBufferMaxSize: store.general.logHtmlBufferMaxSize > 0 ? store.general.logHtmlBufferMaxSize : 256\r\n        };\r\n        this.htmlLogBuffer = new CircleBuffer(this.options.logHtmlBufferMaxSize);\r\n\r\n        // Proxy default console logging methods\r\n        CONSOLE_METHODS.forEach(function(method)\r\n        {\r\n            const self = this;\r\n            const originalMethod = console[method].bind(console);\r\n            this.originalConsoleMethods[method] = originalMethod;\r\n\r\n            console[method] = function() {\r\n                const args = Array.prototype.slice.call(arguments);\r\n                originalMethod.apply(\r\n                    console,\r\n                    args\r\n                );\r\n                self._write(method, args);\r\n            };\r\n        }.bind(this));\r\n\r\n        await this._createLogsDirectory();\r\n        this._cleanupOldFiles();\r\n        this._createFileStream();\r\n\r\n        this.emit(\"initialized\");\r\n        console.log(`Logger initialized.\\n\\t${this.options.logDirectory}`);\r\n    }\r\n    _write(method, args)\r\n    {\r\n        const date = new Date();\r\n        const chunk = [date.toLocaleTimeString(), `[${method.toUpperCase()}]\\t`, ...args, `\\n`].join(\" \");\r\n        const htmlChunk = [`<div class=\"${method}\">${date.toLocaleTimeString()}`, ...args, `</div>`].join(\" \");\r\n        \r\n        if(date.getDate() !== this.currentLogFileMonthDay) {\r\n            this._createFileStream();\r\n        }\r\n        this.logWriteStream && this.logWriteStream.write(chunk);\r\n        this.htmlLogBuffer.push(htmlChunk);\r\n        this.emit(\"logs\");\r\n    }\r\n    _createLogsDirectory() \r\n    {\r\n        return new Promise((resolve, reject) => {\r\n            fsx.mkdir(this.options.logDirectory, { recursive: true }, err => {\r\n                if(err && err.code !== \"ENOENT\") reject(`${err}\\nCould not create directory.`);\r\n                else resolve();\r\n            });\r\n        });\r\n    }\r\n    _createFileStream()\r\n    {\r\n        this._closeFileStream();\r\n\r\n        const date = new Date();\r\n        const logPath = upath.join(this.options.logDirectory, date.toISOString().slice(0,10) + \".logs\");\r\n        this.currentLogFileMonthDay = date.getDate(); \r\n        this.logWriteStream = fs.createWriteStream(logPath, {\r\n            flags: \"a\",\r\n            encoding: \"utf8\",\r\n            autoClose: true // close on error or end\r\n        });\r\n        this.logWriteStream.on(\"error\", error => {\r\n            this._closeFileStream();\r\n            // TODO: Attempt to create stream again?\r\n            console.log(`Log file stream error.\\n${error}`)\r\n        });\r\n        this.logWriteStream.on(\"close\", event => {\r\n            this._closeFileStream();\r\n            console.log(`Log file stream closed.`);\r\n        });\r\n    }\r\n    _closeFileStream()\r\n    {\r\n        if(this.logWriteStream) {\r\n            this.logWriteStream.removeAllListeners();\r\n            this.logWriteStream.end();\r\n            this.logWriteStream = null;\r\n        }\r\n    }\r\n    _cleanupOldFiles()\r\n    {\r\n        fs.readdir(this.options.logDirectory, (err, paths) => \r\n        {\r\n            if(err) {\r\n                return;\r\n            }\r\n            const logFilenames = paths.filter(name => name.endsWith(\".logs\"));\r\n                  logFilenames.sort(); // sort by date\r\n                  logFilenames.pop(); // don't delete todays\r\n            const logPaths = logFilenames.map(name => upath.join(this.options.logDirectory, name));\r\n            const howManyToDelete = Math.max(logPaths.length - this.options.logFilePersistForDays, 0);\r\n\r\n            for(let i = 0; i < howManyToDelete; ++i) \r\n            {\r\n                fs.unlink(logPaths[i], err => {\r\n                    if(err) console.error(\"Could not delete log file. \", err);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Clear all the buffered html logs\r\n     */\r\n    clear() \r\n    {\r\n        this.htmlLogBuffer.clear();\r\n    }\r\n    /**\r\n     * Read all buffered logs formatted with html\r\n     * @returns {string}\r\n     */\r\n    read()\r\n    {\r\n        return this.htmlLogBuffer.toArray().reduce((acc, val) => `${acc}${val}`, ``);\r\n    }\r\n    /**\r\n     * Should be called to release internal resources\r\n     */\r\n    destroy() \r\n    {\r\n        console.log(\"Logger destroyed.\");\r\n\r\n        if(!this.initialized) \r\n            return;\r\n        this.initialized = false;\r\n\r\n        this._closeFileStream();\r\n\r\n        // Restore console methods\r\n        CONSOLE_METHODS.forEach(method => {\r\n            console[method] = this.originalConsoleMethods[method];\r\n        });\r\n\r\n        logger = null;\r\n    }\r\n}\r\n\r\nlet logger = new Logger();\r\nexport default logger;","module.exports = require(\"process\");","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tabs.vue?vue&type=style&index=0&id=67906525&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./a-dialog-root.vue?vue&type=style&index=0&lang=css&\"","module.exports = require(\"querystring\");","import child_process from 'child_process';\r\nimport upath from 'upath';\r\nimport fs from 'fs';\r\nimport rimraf from 'rimraf';\r\n\r\n/**\r\n * Appends the given string to the file at the given path.\r\n * This is a workaround, alternative to fs.appendFile which does not work on network AFS drives.\r\n * Creates the file if it doesn't exist.\r\n * Its not safe to append multiple times without waiting for the promise to resolve.\r\n * Use a file stream for more frequent writes.\r\n * @param {string} path \r\n * @param {string} str \r\n * @returns {Promise} promise resolves with the following arguments (err)\r\n */\r\nfunction append(path, str) \r\n{\r\n    return createFileAndStatSize(path)\r\n    .then(position => {\r\n        return writeAtPosition(path, str, position);\r\n    });\r\n}\r\n\r\nfunction writeAtPosition(path, str, position) \r\n{\r\n    return new Promise((resolve, reject) => \r\n    {\r\n        fs.open(path, 'r+', (err, fd) => \r\n        {\r\n            if(err) {\r\n                return reject(err);\r\n            } \r\n\r\n            const buffer = Buffer.from(str, 'utf8');\r\n            fs.write(fd, buffer, 0, buffer.length, position, (err) => \r\n            {\r\n                fs.closeSync(fd);\r\n                \r\n                if(err) \r\n                    reject(err);\r\n                else\r\n                    resolve();\r\n            });\r\n        })\r\n    });\r\n}\r\n\r\n/**\r\n * Create the file at the given path if it doesnt exist and return its byte size.\r\n * @param {string} path \r\n */\r\nfunction createFileAndStatSize(path) \r\n{\r\n    return stat(path)\r\n    .then(stats => {\r\n        if(stats) {\r\n            return stats.size;\r\n        } else {\r\n            return createFile(path).then(_ => 0);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Creates the file at the given path if it doesn't exist.\r\n * Truncates the file if it exists.\r\n * @param {string} path \r\n */\r\nfunction createFile(path)\r\n{\r\n    return new Promise((resolve, reject) => {\r\n        fs.open(path, 'w+', (err, fd) => {\r\n            fs.closeSync(fd);\r\n\r\n            if(err) \r\n                reject(err);\r\n            else \r\n                resolve(); \r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Promisified wrapper for fs.stat()\r\n * @param {string} path \r\n */\r\nfunction stat(path) \r\n{\r\n    return new Promise((resolve, reject) => {\r\n        fs.stat(path, (err, stats) => {\r\n            if(err && err.code !== 'ENOENT') \r\n                return reject(err);\r\n            \r\n            resolve(stats);\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Force deletes the destination file/directory recursively and renames the source path to the destination\r\n * @param {*} fromPath \r\n * @param {*} toPath \r\n * @param {*} callback \r\n */\r\nfunction overwrite(fromPath, toPath, callback)\r\n{\r\n    rimraf(toPath, err => \r\n    {\r\n        if(err) {\r\n            callback(err);\r\n            return;\r\n        }\r\n        fs.rename(fromPath, toPath, err => {\r\n            callback(err);\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * UNTESTED. Same as fs.rmdir except delegates to rimraf() when using recursive option\r\n * @param {*} path \r\n * @param {*} options \r\n * @param {*} cb \r\n */\r\nfunction rmdir(path, options, cb) \r\n{\r\n    if(typeof options === 'object' && options.recursive) {\r\n        rimraf(path, {\r\n            maxBusyTries: options.maxRetries,\r\n            emfileWait: retryDelay\r\n        }, cb);\r\n    } else {\r\n        fs.rmdir.call(fs, arguments);\r\n    }\r\n}\r\n\r\n/**\r\n * Same as fs.mkdir except supports options object and recursive option\r\n * This exists because { recursive: true } option not supported prior to Node v10.22\r\n * NOTE: When using 'recursive' option, call is delegated to shell command 'mkdir' and\r\n * any errors returned as a string\r\n * @param {string|Buffer|URL} dirPath \r\n * @param {object} options \r\n * @param {number} options.mode \r\n * @param {boolean} options.recursive \r\n * @param {function} callback \r\n */\r\nfunction mkdir(dirPath, options, callback) \r\n{\r\n    if(typeof options === 'object' && options.recursive) {\r\n        _mkdirRecursive(dirPath, options, callback);\r\n    } else {\r\n        fs.mkdir.call(fs, arguments);\r\n    }\r\n}\r\nfunction _mkdirRecursive(dirPath, options, callback) \r\n{\r\n    child_process.exec(\r\n        `mkdir${options.mode ? ' --parents --mode=' + options.mode : ''} \"${dirPath}\"`, \r\n        (error, stdout, stderr) => {\r\n            if(error) {\r\n                // IMPORTANT: For some reason, on windows, when creating a directory \r\n                // on a mapped network drive, this command will both create the directory\r\n                // AND throw an \"already exists\" error\r\n                if(error.toString().toLowerCase().includes(\"already exists\")) {\r\n                    error.code = \"ENOENT\";\r\n                }\r\n                callback(error);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n    );\r\n} \r\n\r\n\r\nexport default {\r\n    rmdir,\r\n    mkdir,\r\n    overwrite,\r\n    append\r\n}","module.exports = require(\"events\");"],"sourceRoot":""}