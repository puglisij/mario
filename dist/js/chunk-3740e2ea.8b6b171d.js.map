{"version":3,"sources":["webpack:///./src/components/jsx.vue?05df","webpack:///src/components/jsx.vue","webpack:///./src/components/jsx.vue?d659","webpack:///./src/components/jsx.vue","webpack:///./src/components/jsx.vue?b320"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","click","toggleScriptListener","_s","isScriptListening","clearScriptListener","directives","name","rawName","value","expression","ref","attrs","type","placeholder","domProps","change","calculateStringId","focus","$event","target","select","input","composing","charId","calculateCharId","stringId","rows","cols","jsxText","length","runJsxText","clearJsx","jsxResult","clearJsxResult","staticRenderFns","SCRIPT_LOG_PATH","jsxvue_type_script_lang_js_","computed","cs","global","data","scriptWatcher","beforeDestroy","destroyScriptListener","methods","startScriptListener","chokidar_default","a","watch","debounce_default","readScriptListenerLog","removeAllListeners","close","_this","evalScript","result","trim","console","log","concat","external_fs_default","writeFile","err","path","_this2","readFile","toString","_this3","includes","$nextTick","$refs","_this4","components_jsxvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_jsx_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_jsx_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-3740e2ea.8b6b171d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"jsx\"},[_c('h2',[_vm._v(\"ExtendScript\")]),_c('div',{staticClass:\"controls scriptlistener\"},[_c('div',{staticClass:\"button\"},[_c('button',{staticClass:\"topcoat-button--large\",on:{\"click\":_vm.toggleScriptListener}},[_vm._v(\"\\n                Toggle ScriptListener \"+_vm._s(_vm.isScriptListening ? 'Off' : 'On')+\"\\n            \")])]),_c('div',{staticClass:\"button\"},[_c('button',{staticClass:\"topcoat-button--large\",on:{\"click\":_vm.clearScriptListener}},[_vm._v(\"\\n                Clear ScriptListener\\n            \")])])]),_c('div',{staticClass:\"controls identifiers\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.charId),expression:\"charId\"}],ref:\"charId\",staticClass:\"topcoat-text-input--large\",attrs:{\"type\":\"text\",\"placeholder\":\"CharID\"},domProps:{\"value\":(_vm.charId)},on:{\"change\":_vm.calculateStringId,\"focus\":function($event){return $event.target.select()},\"input\":function($event){if($event.target.composing){ return; }_vm.charId=$event.target.value}}})]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.stringId),expression:\"stringId\"}],ref:\"stringId\",staticClass:\"topcoat-text-input--large\",attrs:{\"type\":\"text\",\"placeholder\":\"StringID\"},domProps:{\"value\":(_vm.stringId)},on:{\"change\":_vm.calculateCharId,\"focus\":function($event){return $event.target.select()},\"input\":function($event){if($event.target.composing){ return; }_vm.stringId=$event.target.value}}})])]),_c('div',{staticClass:\"controls code\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.jsxText),expression:\"jsxText\"}],staticClass:\"topcoat-textarea\",attrs:{\"rows\":\"14\",\"cols\":\"45\"},domProps:{\"value\":(_vm.jsxText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.jsxText=$event.target.value}}}),_c('br'),_c('br'),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.jsxText.length > 0),expression:\"jsxText.length > 0\"}],staticClass:\"topcoat-button--large\",on:{\"click\":_vm.runJsxText}},[_vm._v(\"Run\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.jsxText.length > 0),expression:\"jsxText.length > 0\"}],staticClass:\"topcoat-button--large\",on:{\"click\":_vm.clearJsx}},[_vm._v(\"Clear\")]),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.jsxResult.length > 0),expression:\"jsxResult.length > 0\"}],staticClass:\"topcoat-button--large\",on:{\"click\":_vm.clearJsxResult}},[_vm._v(\"Clear Result\")])]),_c('div',{staticClass:\"result\"},[_c('span',[_vm._v(\"Result: \")]),_c('pre',[_vm._v(_vm._s(_vm.jsxResult))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"jsx\">\n        <h2>ExtendScript</h2>\n        <div class=\"controls scriptlistener\">\n            <div class=\"button\">\n                <button class=\"topcoat-button--large\" \n                    @click=\"toggleScriptListener\" \n                >\n                    Toggle ScriptListener {{ isScriptListening ? 'Off' : 'On'}}\n                </button>\n            </div>\n            <div class=\"button\">\n                <button class=\"topcoat-button--large\" \n                    @click=\"clearScriptListener\"\n                >\n                    Clear ScriptListener\n                </button>\n            </div>\n        </div>\n        <div class=\"controls identifiers\">\n            <label>\n                <input class=\"topcoat-text-input--large\" type=\"text\" ref=\"charId\" placeholder=\"CharID\" v-model=\"charId\" v-on:change=\"calculateStringId\" v-on:focus=\"$event.target.select()\"/> \n            </label>\n            <label>\n                <input class=\"topcoat-text-input--large\" type=\"text\" ref=\"stringId\" placeholder=\"StringID\" v-model=\"stringId\" v-on:change=\"calculateCharId\" v-on:focus=\"$event.target.select()\"/>\n            </label>\n        </div>\n        <div class=\"controls code\">\n            <textarea class=\"topcoat-textarea\" v-model=\"jsxText\" rows=\"14\" cols=\"45\"></textarea>\n            <br/><br/>\n            <!-- <button class=\"topcoat-button--large\" v-show=\"jsxText.length > 0\" >Save as Action</button> -->\n            <button class=\"topcoat-button--large\" v-show=\"jsxText.length > 0\" @click=\"runJsxText\">Run</button>\n            <button class=\"topcoat-button--large\" v-show=\"jsxText.length > 0\" @click=\"clearJsx\">Clear</button>\n            <button class=\"topcoat-button--large\" v-show=\"jsxResult.length > 0\" @click=\"clearJsxResult\">Clear Result</button>\n        </div>\n        <div class=\"result\">\n            <span>Result: </span> \n            <pre>{{ jsxResult }}</pre>\n        </div>\n    </div>\n</template>\n\n<script>\n/* npm modules */\nimport upath from 'upath';\nimport fs from 'fs';\nimport chokidar from 'chokidar';\nimport debounce from 'debounce'; \n\n/* local modules */\nimport global from '../global';\n\nconst SCRIPT_LOG_PATH = \"C:/Users/puglisij/Desktop/ScriptingListenerJS.log\";\n\nexport default {\n    name: \"jsx\",\n    computed: {\n        cs() { return global.cs; }\n    },\n    data() {\n        return {\n            charId: \"\",\n            stringId: \"\",\n            jsxText: \"\",\n            jsxResult: \"\",\n            isScriptListening: false,\n            scriptWatcher: null \n        }\n    },\n    beforeDestroy() {\n        this.destroyScriptListener();\n    },\n    methods: {\n        startScriptListener()\n        {\n            this.scriptWatcher = chokidar.watch(SCRIPT_LOG_PATH);\n            this.scriptWatcher.on(\"change\", debounce(this.readScriptListenerLog, 1000));\n        },\n        destroyScriptListener()\n        {\n            if(this.scriptWatcher) {\n                this.scriptWatcher.removeAllListeners();\n                this.scriptWatcher.close();\n                this.scriptWatcher = null;\n            }\n        },\n        clearJsxResult() {\n            this.jsxResult = \"\";\n        },\n        clearJsx() {\n            this.jsxText = \"\";\n            this.jsxResult = \"\";\n        },\n        runJsxText() {\n            this.cs.evalScript(`` + this.jsxText, result => {\n                this.jsxResult = result.trim();\n                console.log(`JSX Result: ${result}`);\n            });\n        },\n        clearScriptListener() \n        {\n            fs.writeFile(SCRIPT_LOG_PATH, \"\", err => \n            {\n                if(err) throw err; \n            })\n        },\n        toggleScriptListener() \n        {\n            if(this.isScriptListening) {\n                // Switch logging off \n                this.isScriptListening = false;\n            } else {\n                // Switch logging on\n                this.isScriptListening = true;\n            }\n            this.cs.evalScript(`\n            var listenerID = stringIDToTypeID(\"AdobeScriptListener ScriptListener\");\n            var keyLogID = charIDToTypeID('Log ');\n            var d = new ActionDescriptor;\n            d.putBoolean(keyLogID, ${this.isScriptListening});\n            executeAction(listenerID, d, DialogModes.NO);\n            `);\n\n            this.destroyScriptListener();\n            if(this.isScriptListening) \n                this.startScriptListener();\n        },\n        readScriptListenerLog(path) \n        {\n            console.log(\"script log changed: \" + path);\n\n            // IMPORTANT: Somme commands generated by ScriptListenerPlugin will not run via evalScript.\n            //  In particular, modal commands, such as \"modalStateChanged\" will throw an error\n            fs.readFile(path, (err, data) => {\n                if(err) throw err; \n\n                this.jsxText = data.toString();\n            })\n        },\n        calculateStringId() {\n            this.cs.evalScript(`typeIDToStringID(charIDToTypeID('${this.charId}'))`, result => {\n                if(result.includes(\"error\")) {\n                    return;\n                }\n                this.stringId = \"// \" + result;\n                this.$nextTick(() => {\n                    this.$refs.stringId.focus();\n                    this.$refs.stringId.select();\n                })\n            })\n        },\n        calculateCharId() {\n            this.cs.evalScript(`typeIDToCharID(stringIDToTypeID('${this.stringId}'))`, result => {\n                if(result.includes(\"error\")) {\n                    return;\n                }\n                this.charId = result;\n                this.$nextTick(() => {\n                    this.$refs.charId.focus();\n                    this.$refs.charId.select();\n                })\n            })\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\">\n    .jsx {\n        .scriptlistener {\n            display: flex;\n            .button {\n                margin-right: .5em;\n                width: 47.5%;\n            }\n            button {\n                width: 100%;\n            }\n        }\n        .identifiers {\n            display: flex;\n            label {\n                margin-right: .5em;\n                width: 47.5%;\n            }\n            input {\n                width: 100%;\n            }\n        }\n        .code {\n            textarea {\n                width: calc(95% + .5em);\n            }\n            button {\n                margin-right: .5em;\n            }\n        }\n        .result {\n            background: rgba(0,0,0,0.2);\n            margin-top: 1em;\n            padding: 1em;\n            width: calc(95% + .5em);\n        }\n    }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsx.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsx.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./jsx.vue?vue&type=template&id=4d235da5&\"\nimport script from \"./jsx.vue?vue&type=script&lang=js&\"\nexport * from \"./jsx.vue?vue&type=script&lang=js&\"\nimport style0 from \"./jsx.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsx.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./jsx.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}