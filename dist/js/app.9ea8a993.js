(function(e){function t(t){for(var i,r,s=t[0],u=t[1],c=t[2],l=0,h=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&h.push(a[r][0]),a[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);p&&p(t);while(h.length)h.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(o.splice(t--,1),e=u(u.s=n[0]))}return e}var i={},r={app:0},a={app:0},o=[];function s(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-46f29937":"b90ee1f7","chunk-5ee75350":"ea12cb90","chunk-61cbdd70":"117e785b","chunk-96e18c9a":"7ac19764","chunk-6c0ab2ad":"e4fe15cf","chunk-ff8c1068":"cb004cd1"}[e]+".js"}function u(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-46f29937":1,"chunk-5ee75350":1,"chunk-61cbdd70":1,"chunk-6c0ab2ad":1,"chunk-ff8c1068":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-46f29937":"9570654b","chunk-5ee75350":"40fcd3af","chunk-61cbdd70":"8e1e1399","chunk-96e18c9a":"31d6cfe0","chunk-6c0ab2ad":"bc3553f5","chunk-ff8c1068":"f2d4ab73"}[e]+".css",a=u.p+i,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var c=o[s],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===i||l===a))return t()}var h=document.getElementsByTagName("style");for(s=0;s<h.length;s++){c=h[s],l=c.getAttribute("data-href");if(l===i||l===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete r[e],p.parentNode.removeChild(p),n(o)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[e]=0})));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,n){i=a[e]=[t,n]}));t.push(i[2]=o);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=s(e);var h=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",h.name="ChunkLoadError",h.type=i,h.request=r,n[1](h)}a[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=i,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)u.d(n,i,function(t){return e[t]}.bind(null,i));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var p=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"025e":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("25f0"),n("6062"),n("ddb0");var i=n("2909"),r={Trailing:0,Leading:1,Both:2};function a(e,t,n){var i;return function(){var a=this,o=arguments,s=function(){i=null,n!==r.Trailing&&n!==r.Both||e.apply(a,o)},u=n&&!i;clearTimeout(i),i=setTimeout(s,t),u&&e.apply(a,o)}}function o(e,t,n){var i=!1;return function(){var r=this,a=arguments;i||(e.apply(r,a),i=!0,setTimeout((function(){i=!1,n&&e.apply(r,a)}),t))}}function s(e){return JSON.parse(JSON.stringify(e))}function u(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}function c(e){function t(e){return(e<10?"0":"")+e}return e=e||new Date,e.getFullYear()+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())+t(e.getSeconds())}function l(e){switch(typeof e){case"boolean":return!1;case"function":return function(){};case"null":return null;case"number":return 0;case"object":return{};case"string":return"";case"symbol":return Symbol();case"undefined":return;default:return null}}function h(e){return Array.isArray(e)?e[0]:e[Object.keys(e)[0]]}function p(e){return Object(i["a"])(new Set(e))}function f(e,t,n){return void 0===e[t]&&(e[t]=n),e[t]}function d(e){return"boolean"===typeof e}function m(e){return"number"===typeof e&&e===e}function v(e){return null!==e&&"object"===typeof e}function g(e){return 0===Object.keys(e||{}).length}function y(e){return"string"===typeof e}function b(e){return""===e}function _(e){return Array.isArray(e)}function k(e){return"undefined"===typeof e}function P(e){return null===e}t["b"]={throttle:o,debounce:a,simpleDeepClone:s,guid:u,yyyymmddhhmmss:c,defaultForNativeType:l,first:h,unique:p,getOrDefine:f,isBoolean:d,isNumber:m,isObject:v,isEmptyObject:g,isString:y,isEmptyString:b,isArray:_,isUndefined:k,isNull:P}},"0639":function(e,t,n){"use strict";n("caad"),n("d3b7"),n("2532"),n("ddb0");var i=n("d4ec"),r=n("bee2"),a=n("8e57"),o=n.n(a),s=n("9b0f"),u=n.n(s),c=n("83dc"),l=n.n(c),h=n("6558"),p=function(){function e(){Object(i["a"])(this,e),this._scriptListenerActive=!1,this._scriptListenerReaderActive=!1,this._scriptListenerJsLogsPath=l.a.join(o.a.homedir(),"Desktop","ScriptingListenerJS.log"),this._scriptListenerVbLogsPath=l.a.join(o.a.homedir(),"Desktop","ScriptingListenerVB.log")}return Object(r["a"])(e,[{key:"init",value:function(){return console.log("HostScriptListener initialized."),Promise.resolve()}},{key:"destroy",value:function(){}},{key:"startScriptListenerReader",value:function(){this._scriptListenerReaderActive=!0}},{key:"stopScriptListenerReader",value:function(){}},{key:"clearScriptListenerLogs",value:function(){u.a.writeFile(this._scriptListenerJsLogsPath,"",(function(e){if(e)throw e})),u.a.writeFile(this._scriptListenerVbLogsPath,"",(function(e){if(e)throw e}))}},{key:"onScriptListenerLogs",value:function(){}},{key:"isScriptListenerActive",value:function(){var e=this;try{u.a.statSync(this._scriptListenerJsLogsPath).size}catch(t){}return Promise.all([h["a"].runJsx('\n                app.bringToFront();\n                var document = app.documents.add("1px", "1px", 1, "ScriptListenerCheck");\n                document.close(SaveOptions.SAVECHANGES);\n            '),h["a"].runJsx("noop();")]).then((function(t){if(t[0].includes("error"))return console.error("Could not determine if ScriptListener is active."),!1;try{u.a.statSync(e._scriptListenerJsLogsPath).size}catch(n){return!1}}))}},{key:"isScriptListenerIstalled",value:function(){return h["a"].runActionWithParameters("action.getIsScriptListenerInstalled").then((function(e){return Boolean(e)}))}},{key:"toggleScriptListener",value:function(e){return h["a"].runActionWithParameters("action.setScriptListenerActive",e)}}]),e}();t["a"]=new p},"0c12":function(e,t,n){"use strict";var i=n("2b0e"),r=new i["a"];t["a"]=r},1032:function(e,t,n){},"117e":function(e,t,n){"use strict";var i=n("748a"),r=new i["a"](["STOPPED","IDLE","PAUSED","PROCESSING"]);t["a"]=r},"1a43":function(e,t,n){"use strict";var i=n("83dc"),r=n.n(i),a=n("a32b"),o=n.n(a),s=n("8e57"),u=n.n(s),c=u.a.homedir(),l=u.a.tmpdir(),h=(process,Object({NODE_ENV:"production",VUE_APP_HOST_DIR:"/dist",BASE_URL:""})),p=function(e){var t=o.a.join(c,"Library");return{config:o.a.join(t,"Preferences",e),log:o.a.join(t,"Logs",e),temp:o.a.join(l,e)}},f=function(e){var t=h.APPDATA||o.a.join(c,"AppData","Roaming"),n=h.LOCALAPPDATA||o.a.join(c,"AppData","Local");return{config:o.a.join(t,e,"Config"),log:o.a.join(n,e,"Log"),temp:o.a.join(l,e)}},d=function(e,t){if("string"!==typeof e)throw new TypeError("Expected string, got "+typeof e);return t=Object.assign({suffix:"nodejs"},t),t.suffix&&(e+="-"+t.suffix),"darwin"===process.platform?p(e):"win32"===process.platform?f(e):null},m=d,v=n("9224");t["a"]=function(){var e=new CSInterface,t=e.getHostEnvironment(),n=t.appVersion,i=t.appName,a=e.getCurrentApiVersion(),o=a.major,s=a.minor,u=a.micro,c=e.getOSInformation(),l=m("Mario"),h=e.getSystemPath(SystemPath.EXTENSION),p=r.a.normalize(h),f=r.a.join(p,"/dist"),d=r.a.normalize(l.log),g=r.a.normalize(l.config),y=r.a.join(f,"actions");return{csInterface:e,os:c,appVersion:v["a"],appInstallPath:p,appWorkingPath:f,appDefaultLogPath:d,appDefaultConfigPath:g,appBuiltinActionsPath:y,adobeApp:i,adobeVersion:n,adobeCEPApiVersion:`${o}.${s}.${u}`}}()},2849:function(e,t){e.exports=require("http")},3864:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("b85c"),r=n("d4ec"),a=n("bee2"),o=function(){function e(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",p=arguments.length>10&&void 0!==arguments[10]&&arguments[10];Object(r["a"])(this,e),this.name=n,this.sourceType=t,this.sourceDirectory=i,this.sourceExtensions=a,this.useOutputDirectory=o,this.outputDirectory=s,this.useProcessedDirectory=u,this.processedDirectory=c,this.useErrorDirectory=l,this.errorDirectory=h,this.readMetadata=p}return Object(a["a"])(e,[{key:"clone",value:function(){var t=new e;return Object.assign(t,this)}},{key:"toString",value:function(){return`name = "${this.name}" type = ${this.sourceType} directory = "${this.sourceDirectory}"`}}],[{key:"fromObject",value:function(t){var n,r=new e,a=Object(i["a"])(Object.getOwnPropertyNames(t));try{for(a.s();!(n=a.n()).done;){var o=n.value;r.hasOwnProperty(o)&&(r[o]=t[o])}}catch(s){a.e(s)}finally{a.f()}return r}}]),e}()},"3c93":function(e,t){e.exports=require("crypto")},"41db":function(e,t){e.exports=require("child_process")},"42cd":function(e,t){e.exports=require("assert")},4360:function(e,t,n){"use strict";n("4de4"),n("7db0"),n("4160"),n("caad"),n("2532"),n("159b"),n("96cf");var i=n("1da1"),r=n("b85c"),a=n("d4ec"),o=n("bee2"),s=n("262e"),u=n("2caf"),c=n("83dc"),l=n.n(c),h=n("3864"),p=(n("d81d"),n("4ec9"),n("d3b7"),n("ddb0"),function(){function e(){var t=this;Object(a["a"])(this,e),this.map=new Map,["get","has","delete","keys","values"].forEach((function(e){t[e]=t.map[e].bind(t.map)}))}return Object(o["a"])(e,[{key:"set",value:function(e,t){var n=this.map.get(e);Array.isArray(n)?n.push(t):this.map.set(e,[t])}}]),e}()),f=(n("13d5"),n("4fad"),n("1276"),n("3835")),d=n("9b0f"),m=n.n(d),v=n("ff4a"),g=n.n(v),y=["string","number","object","array","boolean"],b=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){var i;return Object(a["a"])(this,n),i=t.call(this),i._isLoaded=!1,i._isLoading=!1,i._isSaved=!1,i._isSaving=!1,i._isAnotherSavePending=!1,i._lastSavedTime=0,i._doAutoSave=!0===e.autoSave,i._schema=e.schema,i._data=i._createDefaultConfigObject(),i._dataFilePath=e.filePath,e.doExtend&&i._extend(),i}return Object(o["a"])(n,[{key:"_createDefaultConfigObject",value:function(){for(var e={},t=0,n=Object.entries(this._schema);t<n.length;t++){var i=Object(f["a"])(n[t],2),r=i[0],a=i[1];if(!this._isValidJsonTypeName(a.type))throw new TypeError(`'type' ${a.type} for ${r} is not a valid JSON type name`);if(a.default&&this._typeOf(a.default)!==a.type)throw new TypeError(`'default' type ${this._typeOf(a.default)} does not match specified 'type'`);e[r]=a.default||this._defaultForTypeName(a.type)}return e}},{key:"_validateConfig",value:function(){for(var e=0,t=Object.entries(this._data);e<t.length;e++){var n=Object(f["a"])(t[e],2),i=n[0],r=n[1];if(!this._schema[i])throw new Error(`Property ${i} not found in schema`);if(this._typeOf(r)!==this._schema[i].type)throw new TypeError(`${this._typeOf(r)} does not match schema type ${this._schema[i].type}`)}}},{key:"_isValidJsonTypeName",value:function(e){return y.includes(e)}},{key:"_defaultForTypeName",value:function(e){switch(e){case"string":return"";case"number":return 0;case"object":return{};case"array":return[];case"boolean":return!1}throw new Error("default not defined for type "+e)}},{key:"_typeOf",value:function(e){return Array.isArray(e)?"array":typeof e}},{key:"_extend",value:function(){for(var e=this,t=function(){var t=Object(f["a"])(i[n],2),r=t[0];t[1];Object.defineProperty(e,r,{get:function(){return this.get(r)},set:function(e){return this.set(r,e)},enumerable:!0,configurable:!1})},n=0,i=Object.entries(this._schema);n<i.length;n++)t()}},{key:"load",value:function(){var e=this;return this._isLoaded||this._isLoading?Promise.resolve():new Promise((function(t){e._isLoading=!0,m.a.readFile(e._dataFilePath,(function(n,i){if(e._isLoading=!1,n&&"ENOENT"!==n.code)throw n;if(!n){var r=JSON.parse(i);e._data=Object.assign(e._data,r),e._validateConfig()}e._isSaved=!0,e._isLoaded=!0,e.emit("loaded"),t()}))}))}},{key:"save",value:function(){var e=this;return this._isSaved?Promise.resolve():this._isSaving?(this._isAnotherSavePending=!0,Promise.resolve()):new Promise((function(t){e._isSaving=!0,m.a.writeFile(e._dataFilePath,JSON.stringify(e._data,null,2),(function(n){if(e._isSaving=!1,n)throw n;e._isLoaded=!0,e._isSaved=!0,e._lastSavedTime=Date.now(),e.emit("saved",e._lastSavedTime),e._isAnotherSavePending&&(e._isAnotherSavePending=!1,process.nextTick((function(){return e.save}))),t()}))}))}},{key:"getLastSavedTime",value:function(){return this._lastSavedTime}},{key:"clone",value:function(){return JSON.parse(JSON.stringify(this._data))}},{key:"getAll",value:function(){return this._data}},{key:"get",value:function(e){return e.split(".").reduce((function(e,t){return e[t]}),this._data)}},{key:"set",value:function(e,t){this._isSaved=!1;var n=e.split("."),i=n.pop(),r=n.reduce((function(e,t){return e[t]}),this._data),a=r[i];if("undefined"===typeof a)throw new Error(`Property ${e} not found.`);if(this._typeOf(a)!==this._typeOf(t))throw new TypeError(`Property ${e} type ${this._typeOf(a)} does not match value ${t} with type ${this._typeOf(t)}`);r[i]=t,console.log(`Configuration updated. ${e} -> ${t}`),this._doAutoSave&&this.save()}}]),n}(g.a),_=n("1a43"),k=(n("025e"),function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this,{filePath:l.a.join(_["a"].appDefaultConfigPath,"general.json"),doExtend:!0,schema:{checkIsScriptListenerActiveOnStart:{type:"boolean",default:!0},pauseAfterEveryPipeline:{type:"boolean",default:!1},pauseAfterEveryAction:{type:"boolean",default:!1},pauseAfterEveryImage:{type:"boolean",default:!1},pauseOnExceptions:{type:"boolean",default:!1},logDirectory:{type:"string",default:""},logFilePersistForDays:{type:"number",default:3},logHtmlBufferMaxSize:{type:"number",default:256},runHttpServer:{type:"boolean",default:!1},serverPort:{type:"number",default:3001},pathToUserActions:{type:"string",default:""},fileSources:{type:"array",default:[]},currentTab:{type:"string",default:"the-jsx-runner"},isMainDrawerOpen:{type:"boolean",default:!1}}})}return Object(o["a"])(n,[{key:"getImageSourceByName",value:function(e){var t=this._data.fileSources.find((function(t){return t.name===e}));return t?h["a"].fromObject(t):null}}]),n}(b)),P=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this,{filePath:l.a.join(_["a"].appDefaultConfigPath,"pipelines.json"),doExtend:!0,schema:{pipelines:{type:"array",default:[]}}})}return Object(o["a"])(n,[{key:"getByNames",value:function(e,t){return this._data.pipelines.filter((function(n){return e.includes(n.name)&&(t||!n.disabled)}))}},{key:"getByName",value:function(e,t){return this._data.pipelines.find((function(n){return n.name===e&&(t||!n.disabled)}))}},{key:"getImageSourceNameToPipelineNameMap",value:function(e,t){var n=this,i=new p;return e.forEach((function(e){var t=n.getByName(e);if(t){var a,o=Object(r["a"])(t.sourceNames);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.set(s,t.name)}}catch(u){o.e(u)}finally{o.f()}}})),i}}]),n}(b),w=function(){function e(){Object(a["a"])(this,e),this.general=new k,this.general.on("loaded",(function(){console.log("Configuration 'general' loaded.")})),this.general.on("saved",(function(){console.log("Configuration 'general' saved.")})),this.pipelines=new P,this.pipelines.on("loaded",(function(){console.log("Configuration 'pipelines' loaded.")})),this.pipelines.on("saved",(function(){console.log("Configuration 'pipelines' saved.")}))}return Object(o["a"])(e,[{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Configurations loading started."),e.next=3,this.general.load();case 3:return e.next=5,this.pipelines.load();case 5:console.log("Configurations loaded.");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new w},"437c":function(e,t,n){},"49e1":function(e,t,n){"use strict";var i=n("748a"),r=new i["a"](["OPENFILES","DIRECTORY","FILEWATCHER","BLANK","ACTIVEDOCUMENT","REST"]);t["a"]=r},"524a":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4de4"),n("7db0"),n("d81d");var i=n("d4ec"),r=n("bee2"),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(i["a"])(this,e),this.parent=null,this.isDirectory=n,this.name=t||"",this.children=[]}return Object(r["a"])(e,[{key:"isRoot",value:function(){return null===this.parent}},{key:"isLeaf",value:function(){return!this.hasChildren()}},{key:"hasChildren",value:function(){return this.children.length>0}},{key:"addChild",value:function(e){e.parent=this,this.children.push(e)}},{key:"removeChild",value:function(e){this.children=this.children.filter((function(t){return t!==e}))}},{key:"getChildByName",value:function(e){return this.children.find((function(t){return t.name===e}))}},{key:"getNamePath",value:function(){var e=this,t=[e.name];while(e&&(e=e.parent))t.push(e.name);return t.reverse()}},{key:"insert",value:function(t,n){var i=this,r=this.name===t[0]?t.shift():"";while(r=t.shift()){var a=0===t.length,o=!(a&&!n),s=i.getChildByName(r);s||(s=new e(r,o),i.addChild(s)),i=s}}},{key:"traverse",value:function(e){var t=this,n=this.name===e[0]?e.shift():"";while(t&&(n=e.shift()))t=t.getChildByName(n);return t}},{key:"drop",value:function(){this.parent.removeChild(this),this.parent=null}},{key:"arrayify",value:function(e){if(e.hasChildren()){var t=e.children.map((function(t){return e.arrayify(t)}));return[e.name,t]}return e.name}},{key:"clone",value:function(){return new e(this.name,this.isDirectory)}},{key:"cloneTree",value:function(){var e,t,n=this.clone(),i=[n],r=[this];while((t=r.pop())&&(e=i.pop()))for(var a=0;a<t.children.length;++a){var o=t.children[a],s=o.clone();e.addChild(s),i.push(s),r.push(o)}return n}},{key:"parse",value:function(e){}}]),e}()},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var i,r,a=n("1da1"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("bcb2")),s=n.n(o),u=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("a-dialog-root"),n("adobe-menus"),n("tabs",{attrs:{"initial-tab":e.currentTabComponent},on:{changed:e.onTabChanged}},[n("tab",{attrs:{title:"the-console"}},[e._v("Console")]),n("tab",{attrs:{title:"the-jsx-runner"}},[e._v("Jsx")]),n("tab",{attrs:{title:"the-configurator"}},[e._v("Configuration")]),n("tab",{attrs:{title:"the-pipelines"}},[e._v("Pipelines")])],1),n("main-controls"),n("section",{staticClass:"tab-content"},[n("keep-alive",[n(e.currentTabComponent,{tag:"component"})],1)],1)],1)},l=[],h=(n("d3b7"),n("83dc")),p=n.n(h),f=n("4360"),d=(n("25f0"),function(){var e=new CSInterface;function t(e){var t=e.panelBackgroundColor.color.red,i=t>128;i?(document.body.classList.remove("dark"),document.body.classList.add("light"),document.getElementById("theme").href="css/topcoat-desktop-light.css"):(document.body.classList.remove("light"),document.body.classList.add("dark"),document.getElementById("theme").href="css/topcoat-desktop-dark.css"),document.body.style.background="#"+n(e.panelBackgroundColor.color)}function n(e){function t(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}var n="";return e&&(n=t(e.red)+t(e.green)+t(e.blue)),n}function i(n){var i=e.getHostEnvironment().appSkinInfo;t(i)}function r(){var n=e.getHostEnvironment().appSkinInfo;t(n),e.addEventListener(CSInterface.THEME_COLOR_CHANGED_EVENT,i)}return{init:r}}()),m=d,v=(n("d81d"),{name:"Tabs",props:{initialTab:{type:String,required:!0}},data:function(){return{activeTab:this.initialTab}},computed:{tabsList:function(){return this.$slots.default}},mounted:function(){this.$on("tab-click",this.onTabClick)},methods:{onTabClick:function(e){this.activeTab=e,this.$emit("changed",this.activeTab)},isActiveTab:function(e){return this.activeTab===e}},render:function(e){return e("ul",{class:"tabs"},this.$slots.default.map((function(t){return e("li",{class:"tab"},[t])})))}}),g=v,y=(n("d6b4"),n("2877")),b=Object(y["a"])(g,i,r,!1,null,"67906525",null),_=b.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:{active:e.isActive},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.onClick(t)}}},[e._t("default")],2)},P=[],w={name:"Tab",props:{title:{type:String,required:!0}},computed:{isActive:function(){return this.$parent.activeTab==this.title}},methods:{onClick:function(e){this.$parent.$emit("tab-click",this.title)}}},S=w,x=Object(y["a"])(S,k,P,!1,null,null,null),O=x.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.handleSubmit;return[n("form",{staticClass:"main-controls my2",on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},submit:function(t){return t.preventDefault(),i(e.onPipelineRun)}}},[n("div",{staticClass:"main-controls__controls mb2"},[n("button",{directives:[{name:"show",rawName:"v-show",value:e.isStopped,expression:"isStopped"}],staticClass:"topcoat-button--large",attrs:{type:"submit",title:"Run all pipelines on the selected source."}},[e._v("▶")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.isPaused,expression:"isPaused"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Resume processing."},on:{click:e.onPipelineResume}},[e._v("Resume")]),n("button",{directives:[{name:"show",rawName:"v-show",value:e.canPause,expression:"canPause"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Pause processing."},on:{click:e.onPipelinePause}},[e._v("❚❚")]),n("button",{directives:[{name:"show",rawName:"v-show",value:!e.isStopped,expression:"!isStopped"}],staticClass:"topcoat-button--large",attrs:{type:"button",title:"Stop all pipelines and file sources."},on:{click:e.onPipelineStop}},[e._v("◼")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMainDrawerOpen,expression:"isMainDrawerOpen"}],staticClass:"main-controls__drawer columns"},[n("div",{staticClass:"column is-half-tablet"},[n("h3",{staticClass:"section-title"},[e._v("Pipelines Status")]),n("div",[e._v(e._s(e.pipelineEngineStateText))]),e.pipelinefilePathText?n("h3",{staticClass:"section-title"},[e._v("Current Source Path")]):e._e(),n("div",[e._v(e._s(e.pipelinefilePathText))])]),n("div",{staticClass:"column is-half-tablet"},[n("h3",{directives:[{name:"show",rawName:"v-show",value:e.pipelineText,expression:"pipelineText"}],staticClass:"section-title"},[e._v("Pipeline")]),n("div",[e._v(e._s(e.pipelineText))]),n("h3",{directives:[{name:"show",rawName:"v-show",value:e.pipelineActionText,expression:"pipelineActionText"}],staticClass:"section-title"},[e._v("Action")]),n("div",[e._v(e._s(e.pipelineActionText))])])]),n("div",{staticClass:"main-controls__drawer-toggle",class:{active:e.isMainDrawerOpen}},[n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){e.isMainDrawerOpen=!e.isMainDrawerOpen}}},[e._v("Source & Status "),n("span",[e._v("❱")])])])])]}}])})},E=[],T=n("7bb1"),I=n("025e"),D=n("0c12"),C=n("af82"),A=n("117e"),N=n("844c"),L={name:"MainControls",components:{ValidationObserver:T["a"],ValidationProvider:T["b"],WaitDots:N["a"]},data:function(){return{pipelineEngineState:C["a"].pipelineEngine.state,pipelineText:"",pipelineActionText:"",pipelinefilePathText:"",isMainDrawerOpen:f["a"].general.isMainDrawerOpen}},watch:{isMainDrawerOpen:function(e){f["a"].general.isMainDrawerOpen=e,f["a"].general.save()}},computed:{canPause:function(){return this.pipelineEngineState==A["a"].IDLE||this.pipelineEngineState==A["a"].PROCESSING},isStopped:function(){return this.pipelineEngineState==A["a"].STOPPED},isPaused:function(){return this.pipelineEngineState==A["a"].PAUSED},isProcessing:function(){return this.pipelineEngineState==A["a"].PROCESSING},pipelineEngineStateText:function(){return A["a"].toKey(this.pipelineEngineState)}},created:function(){var e=this;D["a"].$on("pipeline-play",(function(e){C["a"].pipelineEngine.run(e)})),C["a"].pipelineEngine.on("state",(function(t){e.pipelineEngineState=t})),C["a"].pipelineEngine.on("status",(function(t){e.pipelineText=t.pipeline,e.pipelineActionText=t.action,e.pipelinefilePathText=t.file}))},methods:{onPipelineRun:function(){this.$dialog.openConfirm({name:"confirm",message:"This will run all pipelines with their configured sources. Continue?",onYes:function(){C["a"].pipelineEngine.runAll()}})},onPipelineResume:function(){C["a"].pipelineEngine.resume()},onPipelinePause:function(){C["a"].pipelineEngine.pause()},onPipelineStop:function(){C["a"].pipelineEngine.stop()}}},$=L,F=Object(y["a"])($,j,E,!1,null,null,null),R=F.exports,J={name:"app",components:{MainControls:R,Tabs:_,Tab:O,AdobeMenus:function(){return n.e("chunk-46f29937").then(n.bind(null,"bd37"))},TheConsole:function(){return n.e("chunk-5ee75350").then(n.bind(null,"090b"))},TheJsxRunner:function(){return n.e("chunk-61cbdd70").then(n.bind(null,"53fd"))},TheConfigurator:function(){return Promise.all([n.e("chunk-96e18c9a"),n.e("chunk-6c0ab2ad")]).then(n.bind(null,"ce67"))},ThePipelines:function(){return Promise.all([n.e("chunk-96e18c9a"),n.e("chunk-ff8c1068")]).then(n.bind(null,"d05b"))}},data:function(){return{currentTabComponent:f["a"].general.currentTab}},mounted:function(){m.init(),this.hideLoadingSpinner()},methods:{onTabChanged:function(e){f["a"].general.currentTab=e,f["a"].general.save(),this.currentTabComponent=e},hideLoadingSpinner:function(){var e=document.getElementById("loading");e&&(e.style.display="none")}}},M=J,W=(n("6294"),Object(y["a"])(M,c,l,!1,null,null,null)),B=W.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-dialog",{attrs:{isOpen:e.isOpen,width:e.width,height:e.height,maxWidth:e.maxWidth,maxHeight:e.maxHeight},on:{onBackdropClose:e.backdropClose}},[n(e.component,e._g(e._b({tag:"component",on:{onClose:e.close}},"component",e.props,!1),e.listeners))],1)},z=[],H=n("5530"),V=n("15fd"),U=new u["a"]({name:"a-dialog"}),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"modal-backdrop",class:{open:e.isOpen},on:{click:e.onClose}},[n("div",{ref:"modal",staticClass:"modal",style:{height:e.height,width:e.width,maxHeight:e.maxHeight,maxWidth:e.maxWidth},on:{click:function(e){e.stopPropagation()}}},[e._t("default")],2)])])},Y=[],K={name:"ADialog",props:{isOpen:Boolean,width:{type:String,required:!0},height:{type:String,required:!0},maxWidth:{type:String,required:!1},maxHeight:{type:String,required:!1}},watch:{isOpen:function(e){var t=this;e&&this.$nextTick((function(){t.setModalBodyHeight()}))}},methods:{onClose:function(){this.$emit("onBackdropClose")},setModalBodyHeight:function(){var e=this.$el.querySelector(".modal-header"),t=this.$el.querySelector(".modal-body"),n=this.$el.querySelector(".modal-footer"),i=window.getComputedStyle(this.$refs.modal),r=parseInt(i.height,10),a=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10),o=e?e.clientHeight:0,s=n?n.clientHeight:0;t&&(t.style.maxHeight=r-a-(o+s)+"px")}}},Q=K,Z=Object(y["a"])(Q,G,Y,!1,null,null,null),X=Z.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("section",{staticClass:"modal-body"},[e._v(" "+e._s(e.message)+" ")]),n("footer",{staticClass:"modal-footer"},[e._t("footer",[n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClose",!0)}}},[e._v(" Yes ")]),n("button",{staticClass:"topcoat-button--large",attrs:{type:"button"},on:{click:function(t){return e.$emit("onClose",!1)}}},[e._v(" Cancel ")])])],2)])},te=[],ne={name:"Confirm",props:{message:{type:String,required:!0}}},ie=ne,re=Object(y["a"])(ie,ee,te,!1,null,null,null),ae=re.exports,oe={height:"auto",width:"80%",maxWidth:"80%",maxHeight:"80%"},se={name:"ADialogRoot",components:{ADialog:X},data:function(){return{component:null,width:"",height:"",maxWidth:"",maxHeight:"",props:null,listeners:null}},computed:{isOpen:function(){return!!this.component}},mounted:function(){U.$on("openconfirm",this.openConfirm),U.$on("open",this.open),U.$on("close",this.close)},methods:{openConfirm:function(e){var t=e.onYes,n=e.onCancel,i=e.message,r=Object(V["a"])(e,["onYes","onCancel","message"]);this.open(Object(H["a"])({component:ae,listeners:{onClose:function(e){e?t&&t():n&&n()}},props:{message:i}},r))},open:function(e){var t=e.width,n=e.height,i=e.maxWidth,r=e.maxHeight,a=e.component,o=e.props,s=void 0===o?null:o,u=e.listeners,c=void 0===u?null:u;this.isOpen?console.warn("Dialog already open. Ignoring open: "+a.name):(console.log("Dialog open."),this.width=t||oe.width,this.height=n||oe.height,this.maxWidth=i||oe.maxWidth,this.maxHeight=r||oe.maxHeight,this.component=a,this.props=s,this.listeners=c)},backdropClose:function(){this.listeners&&this.listeners.onClose&&this.listeners.onClose(),this.close()},close:function(){console.log("Dialog close."),this.component=null,this.props=null,this.listeners=null}}},ue=se,ce=(n("dc4b"),Object(y["a"])(ue,q,z,!1,null,null,null)),le=ce.exports,he={install:function(e){e.prototype.$dialog={openConfirm:function(e){U.$emit("openconfirm",e)},open:function(e){U.$emit("open",e)}},e.component("ADialogRoot",le)}},pe=he,fe=n("6558"),de=n("0639"),me=n("b766"),ve=n("1a43"),ge=(n("c975"),n("2ca0"),n("498a"),n("9b0f")),ye=n.n(ge);Object(T["d"])("custom",(function(e){return{on:["change","blur"]}})),Object(T["c"])("integer",{validate:function(e,t){var n=t.min,i=t.max;e=parseInt(e,10),n=parseInt(n,10),i=parseInt(i,10);var r="Must be an integer";return I["b"].isNumber(n)&&I["b"].isNumber(i)?r+=` between ${n} and ${i}`:I["b"].isNumber(n)?r+=" greater than or equal to "+n:I["b"].isNumber(i)&&(r+=" less than or equal to "+i),I["b"].isNumber(e)?I["b"].isNumber(n)&&e<n?r:!(I["b"].isNumber(i)&&e>i)||r:r},params:["min","max"]}),Object(T["c"])("required",{validate:function(e){return{required:!0,valid:-1===["",null,void 0].indexOf(e)&&!(Array.isArray(e)&&0===e.length)}},message:"This is required",computesRequired:!0}),Object(T["c"])("pathexists",{validate:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){ye.a.access(e,(function(e){t(!e)}))}));case 2:if(n=t.sent,!n){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",{valid:!1});case 6:case"end":return t.stop()}}),t)})))()},message:"Path does not exist"}),Object(T["c"])("pathunc",{validate:function(e,t){var n="boolean"===typeof t.allowed?t.allowed:JSON.parse(t.allowed.toLowerCase()),i=e.trim(),r=i.startsWith("//")||i.startsWith("\\\\");return!(r&&!n)},params:["allowed"],message:"Path cannot be a UNC path."}),Object(T["c"])("pathrelative",{validate:function(e,t){var n="boolean"===typeof t.allowed?t.allowed:JSON.parse(t.allowed.toLowerCase()),i=e.trim();return!!n||p.a.isAbsolute(i)},params:["allowed"],message:"Path must be absolute."}),Object(T["c"])("custom",{params:["fn"],validate:function(e,t){var n=t.fn(e);return n.valid?n.valid:n.message}}),console.log("Validation imported");var be={init:function(){return Promise.resolve()}};ve["a"].csInterface.setWindowTitle("Mario v"+ve["a"].appVersion),s.a.chdir(ve["a"].appWorkingPath),__dirname=ve["a"].appWorkingPath,u["a"].config.productionTip=!1,u["a"].config.devtools=!0,u["a"].use(pe);var _e=function(){C["a"].destroy(),fe["a"].destroy(),de["a"].destroy(),me["a"].destroy()},ke=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].init();case 2:return e.next=4,me["a"].init();case 4:return e.next=6,C["a"].init();case 6:return e.next=8,fe["a"].init();case 8:return e.next=10,de["a"].init();case 10:return e.next=12,be.init();case 12:window.vue=new u["a"]({render:function(e){return e(B)},beforeDestroy:_e}).$mount("#app");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ke(),window.addEventListener("beforeunload",_e)},"5ab5":function(e,t,n){},6294:function(e,t,n){"use strict";n("437c")},6558:function(e,t,n){"use strict";n("caad"),n("4ec9"),n("d3b7"),n("2532"),n("ddb0"),n("96cf");var i=n("1da1"),r=n("3835"),a=n("b85c"),o=n("d4ec"),s=n("bee2"),u=n("262e"),c=n("2caf"),l=n("ff4a"),h=n.n(l),p=n("83dc"),f=n.n(p),d=(n("1276"),n("41db")),m=n.n(d),v=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(e){var i;return Object(o["a"])(this,n),i=t.call(this),i.cwd=e,i.childProcess=null,i.tunnelId=0,i}return Object(s["a"])(n,[{key:"name",get:function(){return"exec"}},{key:"getId",value:function(){return this.tunnelId}},{key:"setId",value:function(e){this.tunnelId=e}},{key:"open",value:function(e){var t=this,n=e.split(","),i=Number(n[0]),r=n[1];this.childProcess=m.a.exec(r,{cwd:this.cwd,timeout:3e5},(function(e,n,r){t.childProcess=null;var a="";e?(console.error(e),console.log(r)):(n=JSON.stringify(n),r=JSON.stringify(r),a=`executeExecCallback(${i},${n},${r});`),t.emit("exit",a),t.close()})),this.emit("enter")}},{key:"close",value:function(){null===this.childProcess||this.childProcess.killed||this.childProcess.kill(),this.removeAllListeners()}}]),n}(h.a),g=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.call(this),e.timeoutId=0,e.tunnelId=0,e}return Object(s["a"])(n,[{key:"name",get:function(){return"setTimeout"}},{key:"getId",value:function(){return this.tunnelId}},{key:"setId",value:function(e){this.tunnelId=e}},{key:"open",value:function(e){var t=this,n=e.split(","),i=Number(n[0]),r=Number(n[1]);this.stream=e,this.timeoutId=setTimeout((function(){t.timeoutId=0,t.emit("exit",`executeSetTimeoutCallback(${i})`),t.close()}),r),this.emit("enter")}},{key:"close",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.removeAllListeners()}}]),n}(h.a),y=n("1a43"),b=n("4360"),_=function(e){Object(u["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.call(this),e.interface=new CSInterface,e._initialized=!1,e._nextTunnelId=0,e._tunnelIdToTunnel=new Map,e}return Object(s["a"])(n,[{key:"init",value:function(){if(!this._initialized)return this._initialized=!0,this.importScript("utils.jsx"),this.importScript("polyfil.jsx"),this.importScript("console.jsx"),this.importScript("json.jsx"),this.importScript("events.jsx"),this.importScript("image.jsx"),this.interface.addEventListener("log",(function(e){console.log("Jsx Log: ",e.data)})),this.interface.addEventListener("exec",this._onExec.bind(this)),this.interface.addEventListener("setTimeout",this._onSetTimeout.bind(this)),console.log(`Host initialized.\n\n            Install Path: ${y["a"].appInstallPath}\n\n            Working Path: ${y["a"].appWorkingPath}\n\n            Default Log Path: ${y["a"].appDefaultLogPath}\n\n            Default Config Path: ${y["a"].appDefaultConfigPath}\n\n            Builtin Action Path: ${y["a"].appBuiltinActionsPath}\n\n            Creative Suite API Version: ${y["a"].adobeCEPApiVersion}\n\n            OS: ${y["a"].os}\n\n            App Version: ${y["a"].appVersion}`),Promise.resolve()}},{key:"destroy",value:function(){var e,t=Object(a["a"])(this._tunnelIdToTunnel);try{for(t.s();!(e=t.n()).done;){var n=Object(r["a"])(e.value,2),i=(n[0],n[1]);i.close()}}catch(o){t.e(o)}finally{t.f()}}},{key:"dispatchEvent",value:function(e,t){var n="APPLICATION",i=new CSEvent(e,n);i.data=t,this.interface.dispatchEvent(i)}},{key:"join",value:function(){var e=this;return 0===this._nextTunnelId?Promise.resolve():new Promise((function(t){e.once("host.callback.join",t)}))}},{key:"_onSetTimeout",value:function(e){var t=new g;this._openTunnel(t,e.data)}},{key:"_onExec",value:function(e){var t=new v(b["a"].general.pathToUserActions);this._openTunnel(t,e.data)}},{key:"_openTunnel",value:function(e,t){var n=this,i=this._nextTunnelId++;this._tunnelIdToTunnel.set(i,e),e.setId(i),e.once("enter",(function(){console.log(`Tunnel ${e.getId()}: ${e.name}\n\t ${t}\n\t Entered.`)})),e.once("exit",(function(i){console.log(`Tunnel ${e.getId()}: ${e.name}\n\t ${t}\n\t Exited.\nWith Jsx:\n\t${i}`),n._exitTunnel(e,i)})),e.open(t)}},{key:"_exitTunnel",value:function(e,t){var n=this;this._tunnelIdToTunnel.delete(e.getId()),this.runJsxWithThrow(t).finally((function(){console.log(`Tunnel ${e.getId()} Finished Executing Jsx Callback.`),0===n._tunnelIdToTunnel.size&&(n._nextTunnelId=0,n.emit("host.callback.join"))}))}},{key:"importScript",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=f.a.join(y["a"].appWorkingPath,t),e.next=3,this.runJsx(`importJsx("${n}");`);case 3:i=e.sent,console.log("Jsx File Imported: "+n+" Result: "+i);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"runJsx",value:function(e){var t=this;return new Promise((function(n){t.interface.evalScript(e,(function(e){n(e)}))}))}},{key:"runJsxWithThrow",value:function(e){var t=this;return new Promise((function(n,i){t.interface.evalScript(`(function(){\n                try {\n                    ${e}\n                } catch(e) {\n                    return e.toString();\n                }\n            }())`,(function(t){var r=t.toLowerCase();r.includes("error")||r.includes("exception")?i(`\nJsx:\n${e}\nException in Result:\n${t}\n`):n(t)}))}))}},{key:"runActionWithParameters",value:function(e,t){console.log("Action: "+e);var n=JSON.stringify(t);return this.runJsxWithThrow(`\n            var result = ${e}(${n});\n            return result;\n        `)}},{key:"convertCharToStringId",value:function(e){return this.runJsx(`t2s(c2t('${e}'))`).then((function(e){return e.includes("error")?"":e}))}},{key:"convertStringToCharId",value:function(e){return this.runJsx(`t2c(s2t('${e}'))`).then((function(e){return e.includes("error")?"":e}))}}]),n}(h.a);t["a"]=new _},"748a":function(e,t,n){"use strict";n("fb6a"),n("d3b7"),n("498a"),n("ddb0");function i(e,t){return this instanceof i?r.call(this,e,t):new i(e,t)}function r(e,t){if(!Array.isArray(e))throw new Error("Enum: create() Invalid parameter type. Expected Array.");var n,i=/[A-Z_][A-Z0-9_]*/gi,r=this;r.keys=[],r.keys.length=e.length,Number.isInteger(t)?r.offset=t:t=0;for(var a=0;a<e.length;++a){if("string"!==typeof e[a]||!i.test(e[a]))throw new Error("Enum: create() Not a string or Invalid name: "+e[a]);i.lastIndex=0,n=e[a],r.keys[a]=n,r[n]=a+t}return r}i.prototype.offset=0,i.prototype.toArray=function(){return this.keys.slice(0)},i.prototype.isValid=function(e){return Number.isInteger(e)&&e-this.offset<this.keys.length&&e-this.offset>=0},i.prototype.toKey=function(e){if(this.isValid(e))return this.keys[e-this.offset]},i.prototype.parse=function(e){if("string"===typeof e){e=e.trim().toUpperCase();for(var t=0;t<this.keys.length;++t)if(this.keys[t].toUpperCase()===e)return t+this.offset}},t["a"]=i},"844c":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{domProps:{innerHTML:e._s(e.dots)}})},r=[],a=0,o={name:"WaitDots",props:{intervalMs:{type:Number,default:500}},data:function(){return{dotCount:1,dots:"."}},mounted:function(){var e=this;a=setInterval((function(){e.dots=".".repeat(e.dotCount),e.dots+="&nbsp;".repeat(4-e.dotCount),e.dotCount=(e.dotCount+1)%4}),this.intervalMs)},beforeDestroy:function(){clearInterval(a)}},s=o,u=n("2877"),c=Object(u["a"])(s,i,r,!1,null,null,null);t["a"]=c.exports},"8cad":function(e,t){e.exports=require("util")},"8e57":function(e,t){e.exports=require("os")},9224:function(e){e.exports=JSON.parse('{"a":"2.1.5"}')},"9ac2":function(e,t){e.exports=require("stream")},"9b0f":function(e,t){e.exports=require("fs")},a32b:function(e,t){e.exports=require("path")},af82:function(e,t,n){"use strict";var i=n("5530"),r=(n("96cf"),n("1da1")),a=n("d4ec"),o=n("bee2"),s=n("262e"),u=n("2caf"),c=n("ff4a"),l=n.n(c),h=n("19ce"),p=n.n(h),f=(n("d81d"),n("fb6a"),n("d3b7"),n("7ed3"),n("25f0"),n("3835")),d=n("b85c"),m=n("257e"),v=(n("f5d5"),n("025e")),g=n("4360"),y=n("6558"),b=function e(){Object(a["a"])(this,e),this.initialInputImagePath="",this.inputImagePath="",this.inputDirectory="",this.outputDirectory="",this.useOutputDirectory=!1,this.processedDirectory="",this.useProcessedDirectory=!1,this.errorDirectory="",this.useErrorDirectory=!1,this.data={},this.metadata={},this.pipelines=[],this.pipeline="",this.jobId="",this.errors=[]},_=(n("4de4"),n("83dc")),k=n.n(_),P=n("9b0f"),w=n.n(P),S=n("fcab"),x=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"move",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(`Moving ${t.length} processed images...`),n=Object(d["a"])(t),e.prev=2,n.s();case 4:if((i=n.n()).done){e.next=19;break}if(r=i.value,!r.errors.length){e.next=14;break}if(a=r.errorDirectory||r.inputDirectory,a&&this._writeError(r,a,r.errors.join("\n")),!r.useErrorDirectory){e.next=12;break}return e.next=12,this._moveImage(r,r.errorDirectory);case 12:e.next=17;break;case 14:if(!r.useProcessedDirectory){e.next=17;break}return e.next=17,this._moveImage(r,r.processedDirectory);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](2),n.e(e.t0);case 24:return e.prev=24,n.f(),e.finish(24);case 27:console.log("Move completed.");case 28:case"end":return e.stop()}}),e,this,[[2,21,24,27]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_moveImage",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(k.a.isAbsolute(n)){e.next=7;break}if(t.inputDirectory){e.next=6;break}return console.log("Image not moved. Move directory was relative but input directory was not defined."),e.abrupt("return",Promise.resolve());case 6:n=k.a.join(t.inputDirectory,n);case 7:this._moveToDirectory(t,n);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"_moveToDirectory",value:function(e,t){var n=this._getImagePaths(e);console.log(`Moving paths:\n\t${n.join("\n\t")}\nTo directory\n\t${t}`);var i,r=Object(d["a"])(n);try{var a=function(){var e=i.value,n=k.a.basename(e),r=k.a.join(t,n);S["a"].overwrite(e,r,(function(e){if(e){var t=e+"\nImage path could not be moved to "+r;"ENOENT"==e.code?console.log(t):console.warn(t)}}))};for(r.s();!(i=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}}},{key:"_getImagePaths",value:function(e){var t=[e.inputImagePath,e.initialInputImagePath!==e.inputImagePath?e.initialInputImagePath:null];return t.filter((function(e){return!!e}))}},{key:"_writeError",value:function(e,t,n){if(n){var i=k.a.join(t,"error.logs"),r=["\n","Time: "+(new Date).toLocaleString(),"initialInputImagePath: "+e.initialInputImagePath,"inputImagePath: "+e.inputImagePath,n].join("\n");S["a"].append(i,r).catch((function(e){console.error(e+"\nCould not write Image error to "+i)}))}}}]),e}(),O=(n("1276"),n("0152")),j=n.n(O);n("8a79"),n("2ca0"),n("498a");function E(e){return e=e.trim(),e.startsWith("//")||e.startsWith("\\\\")}function T(e,t){var n=k.a.relative(e,t);return t.endsWith(n)}function I(e){return A(e,k.a.dirname(e))}function D(e){return A(e,k.a.normalize(e))}function C(e){return A.call(null,e,k.a.join.apply(k.a,arguments))}function A(e,t){return E(e)?t.charAt(0)+t:t}var N={isAncestor:T,isUncPath:E,dirname:I,normalize:D,join:C},L=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"read",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,i){var r,a,o,s,u,c,l,h,p,f,d,m,g,y,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.useOutputDirectory,a=n.useProcessedDirectory,o=n.useErrorDirectory,s=n.outputDirectory,u=n.processedDirectory,c=n.errorDirectory,l=n.readMetadata,s=r?s:"",u=a?u:"",c=o?c:"",h=t||"",p=h,f=this._isPathDefinedAndAbsolute(t)?N.dirname(t):"",d=i,m=v["b"].guid(),g={},y={},_=new b,e.prev=14,!this._doesFileExist(p)){e.next=50;break}if(!this._doesPathHaveJsonExtension(p)){e.next=46;break}return e.next=19,this._readJson(p);case 19:return g=e.sent,d=g.pipelines||d,d="string"===typeof d?d.split(","):d,l="boolean"===typeof g.readMetadata?g.readMetadata:l,m=g.jobId||m,p=g.inputImagePath||"",s=g.outputDirectory||s,u=g.processedDirectory||u,c=g.errorDirectory||c,p=this._ensureAbsolutePath(p,f),s=this._ensureAbsolutePath(s,f),u=this._ensureAbsolutePath(u,f),c=this._ensureAbsolutePath(c,f),e.next=34,this._makeDirectory(s);case 34:return r=e.sent,e.next=37,this._makeDirectory(u);case 37:return a=e.sent,e.next=40,this._makeDirectory(c);case 40:if(o=e.sent,s=r?s:"",u=a?u:"",c=o?c:"",!N.isAncestor(p,f)||!a&&!o){e.next=46;break}throw new Error("JSON inputImagePath cannot be ancestor directory of or same as input directory when using errorDirectory or processedDirectory options.");case 46:if(!this._doesFileExist(p)||!0!==l){e.next=50;break}return e.next=49,this._readMetadata(p);case 49:y=e.sent;case 50:e.next=55;break;case 52:e.prev=52,e.t0=e["catch"](14),_.errors.push(e.t0.toString());case 55:return e.prev=55,_.jobId=m,_.initialInputImagePath=h,_.inputImagePath=p,_.inputDirectory=f,_.outputDirectory=s,_.processedDirectory=u,_.errorDirectory=c,_.useOutputDirectory=r,_.useProcessedDirectory=a,_.useErrorDirectory=o,_.data=g,_.metadata=y,_.pipelines=d,e.abrupt("return",_);case 71:case"end":return e.stop()}}),e,this,[[14,52,55,71]])})));function t(t,n,i){return e.apply(this,arguments)}return t}()},{key:"_readJson",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){w.a.readFile(t,{encoding:"utf8"},(function(i,r){if(i)n(`Image json ${t} file could not be read.\n${i}`);else try{var a=JSON.parse(r);e(a)}catch(o){n(o)}}))})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_readMetadata",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new j.a.ExiftoolProcess,0,e.abrupt("return",n.open().then((function(e){e})).then((function(){return n.readMetadata(t,["-File:all"])})).then((function(e){var t=e.data[0];return t})).finally((function(){n.close()})));case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_isPathDefinedAndAbsolute",value:function(e){return"string"===typeof e&&e.length>0&&k.a.isAbsolute(e)}},{key:"_ensureAbsolutePath",value:function(e,t){return e?k.a.isAbsolute(e)?e:k.a.join(t,e):""}},{key:"_doesPathHaveJsonExtension",value:function(e){return".json"===k.a.extname(e)}},{key:"_doesFileExist",value:function(e){try{return w.a.lstatSync(e||"").isFile()}catch(t){if(t&&"ENOENT"==t.code)return!1;throw t}}},{key:"_doesDirectoryExist",value:function(e){try{return w.a.lstatSync(e||"").isDirectory()}catch(t){if(t&&"ENOENT"==t.code)return!1;throw t}}},{key:"_makeDirectory",value:function(e){return new Promise((function(t,n){e?S["a"].mkdir(e,{recursive:!0},(function(e){e&&"ENOENT"!==e.code?n(e+"\nCould not create directory."):t(!0)})):t(!1)}))}}]),e}(),$=(n("4ec9"),n("ddb0"),n("2909")),F=(n("caad"),n("2532"),n("b44e")),R=n.n(F),J=n("ab7e"),M=n.n(J),W=(n("3864"),n("49e1")),B=0,q=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){var i;return Object(a["a"])(this,n),i=t.call(this),i._id=B++,i._imageSource=e,i._fileWatcher=null,i._isDepleted=!1,i._q=[],i._emitQFiles=v["b"].debounce(i._emitQFiles,5e3,v["a"].Trailing),i}return Object(o["a"])(n,[{key:"id",get:function(){return this._id}},{key:"produce",value:function(){switch(this._imageSource.sourceType){case W["a"].FILEWATCHER:this._sourceFileWatchers();break;case W["a"].DIRECTORY:this._sourceDirectory();break;case W["a"].OPENFILES:this._sourceOpenFiles();break;case W["a"].BLANK:this._sourceBlank();break;case W["a"].ACTIVEDOCUMENT:this._sourceActiveDocument();break;default:throw new Error("Unknown ImageSourceType: "+this._imageSource.sourceType)}}},{key:"destroy",value:function(){this._fileWatcher&&(this._fileWatcher.removeAllListeners(),this._fileWatcher.close()),this.removeAllListeners()}},{key:"getImageSource",value:function(){return this._imageSource}},{key:"toString",value:function(){return`\tid = ${this._id}\n\timageSource = (${this._imageSource.toString()})`}},{key:"_emitFiles",value:function(e){!e.length>0||this.emit("files",this._id,e)}},{key:"_emitQFiles",value:function(){var e=this._q;this._q=[],this._emitFiles(e)}},{key:"_sourceFileWatchers",value:function(){var e=this,t=this._imageSource.sourceDirectory,n=this._imageSource.sourceExtensions,i=n.map((function(e){return k.a.join(t,"*."+e)}));if(M()(t))throw Error("Watching network paths is problematic. Only local directories supported at this time.");if(!w.a.existsSync(t))throw Error(`Watch path: ${t} does not exist.`);var r=R.a.watch(i,{ignored:/^\./,depth:0,usePolling:!0,interval:5e3,awaitWriteFinish:{stabilityThreshold:5e3,pollInterval:5e3}}).on("add",(function(t){k.a.basename(t).startsWith("manifest")||(e._q.push(t),e._emitQFiles())}));this._fileWatcher=r}},{key:"_sourceDirectory",value:function(){var e=this,t=this._imageSource.sourceDirectory,n=this._imageSource.sourceExtensions;w.a.readdir(t,{encoding:"utf8"},(function(i,r){if(i)throw e.emit("depleted",e._id),new Error(i);r&&(r=r.map((function(e){return k.a.join(t,e)})),r=r.filter((function(e){if(k.a.basename(e).startsWith("manifest"))return!1;var t=e.split(".").pop();return n.includes(t)})),e._isDepleted=!0,e._emitFiles(r)),e.emit("depleted",e._id)}))}},{key:"_sourceOpenFiles",value:function(){var e=this;y["a"].runActionWithParameters("action.getOpenDocumentPaths").then((function(t){e._isDepleted=!0,e._emitFiles(t.split(",")),e.emit("depleted",e._id)}))}},{key:"_sourceBlank",value:function(){this._isDepleted=!0,this._emitFiles([""]),this.emit("depleted",this._id)}},{key:"_sourceActiveDocument",value:function(){var e=this;y["a"].runActionWithParameters("action.getActiveDocumentPath").then((function(t){e._isDepleted=!0,e._emitFiles(t?[t]:[]),e.emit("depleted",e._id)}))}}]),n}(l.a),z=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e._producerIdToListenerNames=new Map,e._producerIdToProducer=new Map,e._jobs=[],e}return Object(o["a"])(n,[{key:"destroy",value:function(){this.stopProducers(),this.removeAllListeners()}},{key:"startProducer",value:function(e,t){var n=new q(e);console.log("Image File Producer created:\n"+n.toString()),this._producerIdToListenerNames.set(n.id,t),this._producerIdToProducer.set(n.id,n),n.on("files",this._onProducerFiles.bind(this)),n.on("depleted",this._onProducerDepleted.bind(this)),n.produce()}},{key:"stopProducers",value:function(){var e=Object($["a"])(this._producerIdToProducer.keys());this._stopProducers(e),this._jobs=[]}},{key:"hasProducers",value:function(){return this._producerIdToProducer.size>0}},{key:"hasJobs",value:function(){return this._jobs.length>0}},{key:"nextJob",value:function(){return this._jobs.pop()}},{key:"getAllJobs",value:function(){return this._jobs}},{key:"getTotalJobs",value:function(){return this._jobs.length}},{key:"_stopProducers",value:function(e){var t=this;e=e.filter((function(e){return t._producerIdToProducer.has(e)}));var n,i=Object(d["a"])(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this._producerIdToProducer.get(r);console.log("Image File Producer destroyed:\n"+a.toString()),this._producerIdToProducer.delete(r),this._producerIdToListenerNames.delete(r),a.destroy()}}catch(o){i.e(o)}finally{i.f()}}},{key:"_onProducerFiles",value:function(e,t){var n=this._producerIdToListenerNames.get(e),i=this._producerIdToProducer.get(e).getImageSource();this._jobs.push({jobId:v["b"].guid(),jobCreationTime:v["b"].yyyymmddhhmmss(),listenerNames:n.slice(0),files:t,imageSource:i.clone()}),this.emit("job"),console.log(`Image File Producer ${e}: Job produced.`)}},{key:"_onProducerDepleted",value:function(e){this._stopProducers([e]),this.emit("depleted")}}]),n}(l.a),H=n("117e"),V=(n("af93"),function(){function e(){Object(a["a"])(this,e),this.reset(),Object.seal(this)}return Object(o["a"])(e,[{key:"reset",value:function(){this.jobId="",this.jobCreationTime="",this.files=[],this.fileCount=0,this.file="",this.imageJobId="",this.imageIteration=0,this.pipeline="",this.action=""}},{key:"serialize",value:function(){return Object(i["a"])({},this)}}]),e}()),U=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;Object(a["a"])(this,n),e=t.call(this);var i=Object(m["a"])(e);return e._processingMutex=!1,e._lastState=H["a"].STOPPED,e._state=H["a"].STOPPED,e._status=new Proxy(new V,{set:function(){return Reflect.set.apply(Reflect,arguments),i.emit("status",i._status),!0}}),e.on("jobstart",(function(t,n,i){e._status.jobId=t,e._status.jobCreationTime=n,e._status.files=i,e._status.fileCount=i.length})),e.on("imagejobstart",(function(t,n,i){e._status.imageJobId=t,e._status.imageIteration=n,e._status.file=i})),e.on("pipelinestart",(function(t){e._status.pipeline=t})),e.on("pipelineend",(function(){e._status.pipeline=""})),e.on("actionstart",(function(t){e._status.action=t})),e.on("actionend",(function(){e._status.action=""})),e.on("jobend",(function(){return e._status.reset()})),e.on("processstart",(function(){return e._status.reset()})),e.on("processend",(function(){return e._status.reset()})),e._imageFileReader=new L,e._imageFileMover=new x,e._imageFileProducers=new z,e._imageFileProducers.on("job",e._onProducerJob.bind(Object(m["a"])(e))),e._imageFileProducers.on("depleted",e._onProducerDepleted.bind(Object(m["a"])(e))),e}return Object(o["a"])(n,[{key:"init",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){this._imageFileProducers.destroy(),this.state=H["a"].STOPPED}},{key:"run",value:function(e){this._run([e])}},{key:"runAll",value:function(){var e=g["a"].pipelines.pipelines.map((function(e){return e.name}));this._run(e)}},{key:"_run",value:function(e){if(this.isStopped()){console.log(`Running pipelines: "${e.join(",")}"`),this.state=H["a"].IDLE;var t,n=g["a"].pipelines.getImageSourceNameToPipelineNameMap(e),i=Object(d["a"])(n.map);try{for(i.s();!(t=i.n()).done;){var r=Object(f["a"])(t.value,2),a=r[0],o=r[1],s=g["a"].general.getImageSourceByName(a);this._imageFileProducers.startProducer(s,o)}}catch(u){i.e(u)}finally{i.f()}}else console.log("Pipeline engine is already running.")}},{key:"pause",value:function(){(this.isProcessing()||this.isIdle())&&(this.state=H["a"].PAUSED)}},{key:"resume",value:function(){this.isPaused()&&this._lastState===H["a"].PROCESSING?this.state=H["a"].PROCESSING:this.state=H["a"].IDLE}},{key:"stop",value:function(){this._imageFileProducers.stopProducers(),this.state=H["a"].STOPPED}},{key:"_stopIfNoProducersElseIdle",value:function(){this.isStopped()||(this._imageFileProducers.hasProducers()?this.state=H["a"].IDLE:this.stop())}},{key:"_onProducerJob",value:function(){this._process()}},{key:"_onProducerDepleted",value:function(){this.isProcessing()||this._stopIfNoProducersElseIdle()}},{key:"_process",value:function(){var e=this;this._imageFileProducers.hasJobs()&&(this._processingMutex||(this._processingMutex=!0,this.state=H["a"].PROCESSING,this._runWaitOneFrame().then(this._runProcessStart.bind(this)).then(this._runProcessLoop.bind(this)).then(this._runProcessEnd.bind(this)).then((function(){e._stopIfNoProducersElseIdle(),e._processingMutex=!1}))))}},{key:"_runWaitOneFrame",value:function(){return new Promise((function(e){setTimeout(e,0)}))}},{key:"_runProcessStart",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._pauseCheck();case 2:return console.log(`Pipeline process loop started with ${this._imageFileProducers.getTotalJobs()} jobs in queue.`),this.emit("processstart"),e.next=6,y["a"].runJsxWithThrow("app.displayDialogs = DialogModes.NO;");case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_runProcessLoop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,i,r,a,o,s,u,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[];case 1:if(this._stopCheck()||!this._imageFileProducers.hasJobs()){e.next=28;break}n=this._imageFileProducers.nextJob(),i=n.jobId,r=n.jobCreationTime,a=n.listenerNames,o=n.files,s=n.imageSource,this.emit("jobstart",i,r,o.slice(0)),console.log(`Job ${i} started with ${o.length} files.`),u=0;case 6:if(this._stopCheck()||!(u<o.length)){e.next=25;break}return e.next=9,this._pauseCheck();case 9:return c=o[u],console.log(`Reading next file[${u}] ${c}.`),e.next=13,this._imageFileReader.read(c,s,a);case 13:if(l=e.sent,!(!l.errors.length>0)){e.next=19;break}return this.emit("imagejobstart",l.jobId,u,c),e.next=18,this._runPipelinesLoop(l);case 18:this.emit("imagejobend");case 19:return t.push(l),e.next=22,this._pauseCheck(null,g["a"].general.pauseAfterEveryImage);case 22:++u,e.next=6;break;case 25:this.emit("jobend"),e.next=1;break;case 28:return e.abrupt("return",t);case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_runProcessEnd",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Waiting for unresolved callback tunnels..."),e.next=3,y["a"].join();case 3:return this._stopCheck()?y["a"].runActionWithParameters("action.closeAllWithoutSave"):this._imageFileMover.move(t),console.log("Pipeline process exited."),this.emit("processend"),e.next=8,y["a"].runJsxWithThrow("$.gc();");case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_runPipelinesLoop",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,i,r,a,o,s,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=g["a"].pipelines.getByNames(t.pipelines),i=Object(d["a"])(n),e.prev=2,i.s();case 4:if((r=i.n()).done){e.next=55;break}return a=r.value,e.prev=6,e.next=9,this._runPipelineStart(t,a);case 9:o=Object(d["a"])(a.actions),e.prev=10,o.s();case 12:if((s=o.n()).done){e.next=25;break}return u=s.value,this.emit("actionstart",u.actionName),e.next=17,y["a"].runActionWithParameters(u.actionName,u.parameters);case 17:if(c=e.sent,!this._stopCheck(c)){e.next=20;break}return e.abrupt("break",25);case 20:return e.next=22,this._pauseCheck(c,g["a"].general.pauseAfterEveryAction);case 22:this.emit("actionend");case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](10),o.e(e.t0);case 30:return e.prev=30,o.f(),e.finish(30);case 33:e.next=43;break;case 35:return e.prev=35,e.t1=e["catch"](6),console.error(e.t1),t.errors.push(e.t1.toString()),e.next=41,y["a"].runActionWithParameters("action.closeAllWithoutSave");case 41:return e.next=43,this._pauseCheck(null,g["a"].general.pauseOnExceptions);case 43:if(e.prev=43,!t.errors.length){e.next=46;break}return e.abrupt("break",55);case 46:if(!this._stopCheck()){e.next=48;break}return e.abrupt("break",55);case 48:return e.next=50,this._pauseCheck(null,g["a"].general.pauseAfterEveryPipeline);case 50:return e.next=52,this._runPipelineEnd(t,a);case 52:return e.finish(43);case 53:e.next=4;break;case 55:e.next=60;break;case 57:e.prev=57,e.t2=e["catch"](2),i.e(e.t2);case 60:return e.prev=60,i.f(),e.finish(60);case 63:case"end":return e.stop()}}),e,this,[[2,57,60,63],[6,35,43,53],[10,27,30,33]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_runPipelineStart",value:function(e,t){return console.log(`Pipeline '${t.name}' started for image job ${e.jobId}.`),this.emit("pipelinestart",t.name),y["a"].runJsxWithThrow(`\n        __PIPELINE = {\n            name: "${t.name}",\n            restoreUnits: _.saveUnits()\n        };\n        IMAGE = new ImageForProcessing(${JSON.stringify(e)});`)}},{key:"_runPipelineEnd",value:function(e,t){return console.log(`Pipeline '${t.name}' ended for image job ${e.jobId}.`),this.emit("pipelineend"),y["a"].runJsx("\n        __PIPELINE.restoreUnits && __PIPELINE.restoreUnits(); \n        __PIPELINE=null;\n        IMAGE=null;\n        ")}},{key:"_stopCheck",value:function(e){return!(!this.isStopped()&&"STOP"!==e)&&(this.state=H["a"].STOPPED,!0)}},{key:"_pauseCheck",value:function(e,t){var n=this;return this.isPaused()||t||"PAUSE"===e?(console.log("Pipeline Engine waiting on pause..."),this.state=H["a"].PAUSED,new Promise((function(e){n.once("state",(function(t){t!=H["a"].PAUSED&&e()}))}))):Promise.resolve()}},{key:"fullStatus",get:function(){return{state:H["a"].toKey(this._state),jobs:this._imageFileProducers.getAllJobs(),status:this._status.serialize()}}},{key:"status",get:function(){return this._status.serialize()}},{key:"state",get:function(){return this._state},set:function(e){this._lastState=this._state,this._state=e,this.emit("state",e)}},{key:"isIdle",value:function(){return this.state===H["a"].IDLE}},{key:"isStopped",value:function(){return this.state===H["a"].STOPPED}},{key:"isPaused",value:function(){return this.state===H["a"].PAUSED}},{key:"isProcessing",value:function(){return this.state===H["a"].PROCESSING}}]),n}(l.a),G=(n("a4d3"),n("e01a"),n("a630"),n("ade3")),Y=n("1a43"),K=n("524a"),Q=(n("a32b"),n("448a")),Z="action",X=function(){function e(){Object(a["a"])(this,e),this.name="",this.description="",this.path="",this.params=[]}return Object(o["a"])(e,null,[{key:"fromJSDoc",value:function(t){var n=t,i=new e;return i.name=n.longname,i.description=n.description,i.params=n.params?n.params.map((function(e){return ee.fromJSDoc(e)})):[],i.path=n.meta.path,i}}]),e}(),ee=function(){function e(){Object(a["a"])(this,e),this.name="",this.description="",this.typeNames=[],this.isRequired=!1,this.defaultValue=null}return Object(o["a"])(e,null,[{key:"fromJSDoc",value:function(t){var n=t.name,i=t.description,r=t.defaultValue,a=t.optional,o=t.type,s=new e;return s.name=n,s.description=i,s.defaultValue=r||null,s.isRequired=!(!0===a),s.typeNames=o.names.slice(0),s}}]),e}(),te=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"readAll",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.explain({cache:!0,files:t.map((function(e){return e.absolutePath}))}).then((function(e){for(var t=0;t<e.length;++t){var i=e[t];n._isFunction(i)&&n._actionNameToJsDoc.set(i.longname,i)}})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"read",value:function(e){var t=this._actionNameToJsDoc.get(e.name);return t||(console.warn(`JSDoc description not found for action ${e.name}. Do you need to re-load actions?`),{})}},{key:"_isFunction",value:function(e){return"static"===e.scope&&"function"===e.kind&&e.memberof.startsWith("action")}},{key:"_isEnum",value:function(e){return"global"===e.scope&&"member"===e.kind&&!0===e.isEnum&&void 0===typeof e.memberof}}]),e}();Object(G["a"])(te,"_actionNameToJsDoc",new Map);var ne=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"build",value:function(e,t){return this._buildJsxImportString(e,t)}},{key:"_buildJsxImportString",value:function(e,t){var n,i=[],r=[],a=[{namespace:t,absolutePath:e}];while(n=a.pop()){var o=n.namespace,s=`${o}= (typeof ${o} !== "undefined") ? ${o} : {};`;r.push(s);for(var u=w.a.readdirSync(n.absolutePath),c=0;c<u.length;++c){var l=u[c].split(".");if(l.length>2)throw new Error("Action file and directory names cannot contain periods.");var h=l[0],p=`${o}.${h}`,f=k.a.join(n.absolutePath,u[c]);w.a.statSync(f).isDirectory()?a.push({namespace:p,absolutePath:f}):(r.push(`importAction("${f}", "${p}");`),i.push(new ie(p,o,f)))}}return{importString:r.join(""),actions:i}}}]),e}(),ie=function e(t,n,i){Object(a["a"])(this,e),this.name=t,this.namespace=n,this.absolutePath=i},re=function(){function e(){Object(a["a"])(this,e),this._actionNameToAction=new Map,this._actionTree=new K["a"](Z,!0)}return Object(o["a"])(e,[{key:"init",value:function(){return this._importAll()}},{key:"destroy",value:function(){}},{key:"_importAll",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=g["a"].general.pathToUserActions,n=Y["a"].appBuiltinActionsPath,console.log("Import actions started."),console.log(`Importing from:\n\t${t}\n\t${n}`),e.next=6,this._import(n);case 6:if(!t){e.next=11;break}return e.next=9,this._import(t);case 9:return e.next=11,y["a"].runJsx(`action.CUSTOM_ACTIONS_FOLDER = new Folder("${t}");`);case 11:console.log("Import actions exited.");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_import",value:function(e){if(e.trim()){for(var t=ne.build(e,Z),n=t.importString,i=t.actions,r=0;r<i.length;++r){var a=i[r].name.split(".");this._actionNameToAction.set(i[r].name,i[r]),this._actionTree.insert(a,!1),console.log("Action: "+i[r].name)}return te.readAll(i),y["a"].runJsx(n+"act = action;")}}},{key:"getAllActions",value:function(){return this._actionTree.cloneTree()}},{key:"getAllActionNames",value:function(){return Array.from(this._actionNameToAction.keys())}},{key:"getActionDescriptorByName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this._actionNameToAction.get(t),n){e.next=3;break}throw new Error("Action doesnt exist by name "+t);case 3:return e.abrupt("return",new Promise((function(e){var t=te.read(n),i=X.fromJSDoc(t);e(i)})));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),ae=0,oe=null,se={UNINITIALIZED:0,RUNNING:1},ue=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e._initialized=!1,e._state=se.UNINITIALIZED,e._httpServer=null,e._pipelineEngine=new U,e._actions=new re,e}return Object(o["a"])(n,[{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=2;break}return e.abrupt("return");case 2:return this._initialized=!0,e.next=5,this._pipelineEngine.init();case 5:return e.next=7,this._actions.init();case 7:g["a"].general.runHttpServer&&this.startServer(),this.state=se.RUNNING,this.emit("initialized"),console.log("Server initialized.");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"startServer",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:ae=g["a"].general.serverPort,oe=p()(),oe.get("/status",(function(e,n){var r=Object(i["a"])({adobeApp:Y["a"].adobeApp,adobeVersion:Y["a"].adobeVersion,version:Y["a"].appVersion,time:(new Date).toLocaleString()},t._pipelineEngine.fullStatus);n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(r,null,2)+"\n")})),this._httpServer=oe.listen(ae,"0.0.0.0",(function(){console.log("Polka is listening to http://localhost:"+ae)})).server,console.log("Server started.");case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function(){var e=this;console.log("Server closing..."),this._httpServer&&this._httpServer.close((function(){e._httpServer=null,console.log("Server closed.")})),this._pipelineEngine.destroy(),this._pipelineEngine=null,this._actions.destroy(),this._actions=null}},{key:"pipelineEngine",get:function(){return this._pipelineEngine}},{key:"actions",get:function(){return this._actions}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.emit("state",e)}}]),n}(l.a);t["a"]=window.server=new ue},b766:function(e,t,n){"use strict";n("99af"),n("4de4"),n("4160"),n("d81d"),n("13d5"),n("fb6a"),n("4e82"),n("d3b7"),n("8a79");var i=n("2909"),r=(n("96cf"),n("1da1")),a=n("d4ec"),o=n("bee2"),s=n("262e"),u=n("2caf"),c=n("83dc"),l=n.n(c),h=n("9b0f"),p=n.n(h),f=n("ff4a"),d=n("1a43"),m=n("4360"),v=n("fcab"),g=function(){function e(t){if(Object(a["a"])(this,e),t<=0)throw new Error("Size must be greater than 0.");this._array=new Array(t),this._size=t,this._pointer=0}return Object(o["a"])(e,[{key:"push",value:function(e){this._array[this._pointer]=e,this._pointer=(this._pointer+1)%this._size}},{key:"clear",value:function(){this._array=new Array(this._size),this._pointer=0}},{key:"toArray",value:function(){return[].concat(Object(i["a"])(this._array.slice(this._pointer)),Object(i["a"])(this._array.slice(0,this._pointer)))}}]),e}(),y=["log","warn","error"],b=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.initialized=!1,e.options={logDirectory:"",logFilePersistForDays:7},e.originalConsoleMethods={},e.logWriteStream=null,e.currentLogFileMonthDay=0,e.htmlLogBuffer=null,e}return Object(o["a"])(n,[{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.initialized){e.next=2;break}return e.abrupt("return");case 2:return this.initialized=!0,this.options={logDirectory:m["a"].general.logDirectory||d["a"].appDefaultLogPath,logFilePersistForDays:m["a"].general.logFilePersistForDays>0?m["a"].general.logFilePersistForDays:3,logHtmlBufferMaxSize:m["a"].general.logHtmlBufferMaxSize>0?m["a"].general.logHtmlBufferMaxSize:256},this.htmlLogBuffer=new g(this.options.logHtmlBufferMaxSize),y.forEach(function(e){var t=this,n=console[e].bind(console);this.originalConsoleMethods[e]=n,console[e]=function(){var i=Array.prototype.slice.call(arguments);n.apply(console,i),t._write(e,i)}}.bind(this)),e.next=8,this._createLogsDirectory();case 8:this._cleanupOldFiles(),this._createFileStream(),this.emit("initialized"),console.log("Logger initialized.\n\t"+this.options.logDirectory);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_write",value:function(e,t){var n=new Date,r=[n.toLocaleTimeString(),`[${e.toUpperCase()}]\t`].concat(Object(i["a"])(t),["\n"]).join(" "),a=[`<div class="${e}">${n.toLocaleTimeString()}`].concat(Object(i["a"])(t),["</div>"]).join(" ");n.getDate()!==this.currentLogFileMonthDay&&this._createFileStream(),this.logWriteStream&&this.logWriteStream.write(r),this.htmlLogBuffer.push(a),this.emit("logs")}},{key:"_createLogsDirectory",value:function(){var e=this;return new Promise((function(t,n){v["a"].mkdir(e.options.logDirectory,{recursive:!0},(function(e){e&&"ENOENT"!==e.code?n(e+"\nCould not create directory."):t()}))}))}},{key:"_createFileStream",value:function(){var e=this;this._closeFileStream();var t=new Date,n=l.a.join(this.options.logDirectory,t.toISOString().slice(0,10)+".logs");this.currentLogFileMonthDay=t.getDate(),this.logWriteStream=p.a.createWriteStream(n,{flags:"a",encoding:"utf8",autoClose:!0}),this.logWriteStream.on("error",(function(t){e._closeFileStream(),console.log("Log file stream error.\n"+t)})),this.logWriteStream.on("close",(function(t){e._closeFileStream(),console.log("Log file stream closed.")}))}},{key:"_closeFileStream",value:function(){this.logWriteStream&&(this.logWriteStream.removeAllListeners(),this.logWriteStream.end(),this.logWriteStream=null)}},{key:"_cleanupOldFiles",value:function(){var e=this;p.a.readdir(this.options.logDirectory,(function(t,n){if(!t){var i=n.filter((function(e){return e.endsWith(".logs")}));i.sort(),i.pop();for(var r=i.map((function(t){return l.a.join(e.options.logDirectory,t)})),a=Math.max(r.length-e.options.logFilePersistForDays,0),o=0;o<a;++o)p.a.unlink(r[o],(function(e){e&&console.error("Could not delete log file. ",e)}))}}))}},{key:"clear",value:function(){this.htmlLogBuffer.clear()}},{key:"read",value:function(){return this.htmlLogBuffer.toArray().reduce((function(e,t){return`${e}${t}`}),"")}},{key:"destroy",value:function(){var e=this;console.log("Logger destroyed."),this.initialized&&(this.initialized=!1,this._closeFileStream(),y.forEach((function(t){console[t]=e.originalConsoleMethods[t]})),_=null)}}]),n}(f["EventEmitter"]),_=new b;t["a"]=_},bcb2:function(e,t){e.exports=require("process")},d6b4:function(e,t,n){"use strict";n("5ab5")},dc4b:function(e,t,n){"use strict";n("1032")},f319:function(e,t){e.exports=require("querystring")},fcab:function(e,t,n){"use strict";n("caad"),n("d3b7"),n("25f0"),n("2532");var i=n("41db"),r=n.n(i),a=(n("83dc"),n("9b0f")),o=n.n(a),s=n("e700"),u=n.n(s);function c(e,t){return h(e).then((function(n){return l(e,t,n)}))}function l(e,t,n){return new Promise((function(i,r){o.a.open(e,"r+",(function(e,a){if(e)return r(e);var s=Buffer.from(t,"utf8");o.a.write(a,s,0,s.length,n,(function(e){o.a.closeSync(a),e?r(e):i()}))}))}))}function h(e){return f(e).then((function(t){return t?t.size:p(e).then((function(e){return 0}))}))}function p(e){return new Promise((function(t,n){o.a.open(e,"w+",(function(e,i){o.a.closeSync(i),e?n(e):t()}))}))}function f(e){return new Promise((function(t,n){o.a.stat(e,(function(e,i){if(e&&"ENOENT"!==e.code)return n(e);t(i)}))}))}function d(e,t,n){u()(t,(function(i){i?n(i):o.a.rename(e,t,(function(e){n(e)}))}))}function m(e,t,n){"object"===typeof t&&t.recursive?u()(e,{maxBusyTries:t.maxRetries,emfileWait:retryDelay},n):o.a.rmdir.call(o.a,arguments)}function v(e,t,n){"object"===typeof t&&t.recursive?g(e,t,n):o.a.mkdir.call(o.a,arguments)}function g(e,t,n){r.a.exec(`mkdir${t.mode?" --parents --mode="+t.mode:""} "${e}"`,(function(e,t,i){e?(e.toString().toLowerCase().includes("already exists")&&(e.code="ENOENT"),n(e)):n()}))}t["a"]={rmdir:m,mkdir:v,overwrite:d,append:c}},ff4a:function(e,t){e.exports=require("events")}});
//# sourceMappingURL=app.9ea8a993.js.map